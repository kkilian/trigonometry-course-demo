[
  {
    "id": "three_digit_even_numbers",
    "topic": "Reguła iloczynu w kombinatoryce",
    "difficulty": 3,
    "statement": "Tworzymy liczbę trzycyfrową, której cyfra setek należy do zbioru $A={8,9}$, cyfra dziesiątek do zbioru $B={0,1,2}$, a cyfra jedności do zbioru $C={3,4,5,6,7}$. Oblicz, na ile sposobów możemy utworzyć liczbę parzystą.",
    "steps": [
      {
        "step": 1,
        "hint": "Które cyfry ze zbioru C sprawią, że liczba będzie parzysta?",
        "expression": "Ze zbioru $C = {3,4,5,6,7}$ cyfry parzyste to: ${4,6}$",
        "explanation": "Liczba jest parzysta, gdy jej cyfra jedności jest parzysta",
        "why": "Parzystość liczby zależy wyłącznie od cyfry jedności. Cyfry $3, 5, 7$ są nieparzyste, więc ich nie uwzględniamy."
      },
      {
        "step": 2,
        "hint": "Ile mamy możliwości wyboru dla każdej pozycji w liczbie parzystej?",
        "expression": "Cyfra setek: $2$ możliwości (8 lub 9)\nCyfra dziesiątek: 3 możliwości (0, 1 lub 2)\nCyfra jedności: 2 możliwości (4 lub 6)",
        "explanation": "Liczymy liczbę elementów w każdym zbiorze dla naszego przypadku"
      },
      {
        "step": 3,
        "hint": "Czy wybory cyfr na różnych pozycjach wpływają na siebie?",
        "expression": "Wybory są niezależne - każda cyfra może być wybrana niezależnie od pozostałych",
        "explanation": "Możemy dowolnie kombinować cyfry z różnych pozycji"
      },
      {
        "step": 4,
        "hint": "Jaką regułę zastosujemy do policzenia wszystkich możliwości?",
        "expression": "Liczba sposobów = 2 × 3 × 2 = 12",
        "explanation": "Stosujemy regułę iloczynu: mnożymy liczbę możliwości na każdej pozycji",
        "why": "Reguła iloczynu: jeśli mamy k niezależnych wyborów z odpowiednio n₁, n₂, ..., nₖ możliwości, to łączna liczba sposobów wynosi n₁ × n₂ × ... × nₖ."
      }
    ],
    "solutions": [
      "12"
    ],
    "parameters": {
      "sets": "A = {8,9}, B = {0,1,2}, C = {3,4,5,6,7}",
      "condition": "liczba parzysta"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:24:30.281Z"
  },
  {
    "id": "three_digit_counting",
    "topic": "Kombinatoryka - zliczanie z warunkami",
    "difficulty": 4,
    "statement": "Tworzymy liczbę trzycyfrową, której cyfra setek należy do zbioru $A=\\{8,9\\}$, cyfra dziesiątek do zbioru $B=\\{0,1,2\\}$, a cyfra jedności do zbioru $C=\\{3,4,5,6,7\\}$. Oblicz, na ile sposobów możemy utworzyć liczbę większą od 903.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle można utworzyć liczb trzycyfrowych z tych zbiorów?",
        "expression": "Liczba wszystkich możliwości: $|A| \\cdot |B| \\cdot |C| = 2 \\cdot 3 \\cdot 5 = 30$",
        "explanation": "Każda pozycja wybierana niezależnie - reguła iloczynu"
      },
      {
        "step": 2,
        "hint": "Które liczby będą mniejsze lub równe 903?",
        "expression": "Liczby postaci $8bc$ gdzie $b \\in B$, $c \\in C$",
        "explanation": "Wszystkie liczby zaczynające się od 8 są mniejsze od 903",
        "why": "Cyfra setek 8 < 9, więc niezależnie od pozostałych cyfr liczba będzie mniejsza od 903. To kluczowe spostrzeżenie!"
      },
      {
        "step": 3,
        "hint": "Ile jest liczb zaczynających się od 8?",
        "expression": "Liczby $8bc$: $1 \\cdot 3 \\cdot 5 = 15$ możliwości",
        "explanation": "Cyfra setek ustalona na 8, pozostałe wybieramy dowolnie"
      },
      {
        "step": 4,
        "hint": "Które liczby zaczynające się od 9 są za małe?",
        "expression": "Liczby $90c$ gdzie $c \\in C$: $900 + c$",
        "explanation": "Sprawdzamy liczby postaci 90c",
        "why": "Gdy cyfra setek to 9, a dziesiątek 0, musimy sprawdzić czy 900+c > 903, czyli czy c > 3."
      },
      {
        "step": 5,
        "hint": "Które cyfry z C dają liczbę 90c ≤ 903?",
        "expression": "Tylko $c = 3$ daje $903$, więc liczba $903 \\not> 903$",
        "explanation": "Z cyfr {3,4,5,6,7} tylko cyfra 3 daje liczbę nieprzekraczającą 903"
      },
      {
        "step": 6,
        "hint": "Ile liczb trzeba odjąć od wszystkich możliwości?",
        "expression": "Liczby $\\leq 903$: wszystkie $8bc$ plus $903$ = $15 + 1 = 16$",
        "explanation": "Sumujemy liczby za małe: 15 z cyfrą setek 8 i jedną liczbę 903"
      },
      {
        "step": 7,
        "hint": "Jaki jest ostateczny wynik?",
        "expression": "Liczby $> 903$: $30 - 16 = 14$",
        "explanation": "Od wszystkich możliwości odejmujemy te, które nie spełniają warunku"
      }
    ],
    "solutions": [
      "14"
    ],
    "parameters": {
      "sets": "$A=\\{8,9\\}$, $B=\\{0,1,2\\}$, $C=\\{3,4,5,6,7\\}$",
      "condition": "liczba > 903"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:24:48.434Z"
  },
  {
    "id": "three_digit_divisibility",
    "topic": "Kombinatoryka z warunkami podzielności",
    "difficulty": 4,
    "statement": "Tworzymy liczbę trzycyfrową, której cyfra setek należy do zbioru $A=\\{8,9\\}$, cyfra dziesiątek do zbioru $B=\\{0,1,2\\}$, a cyfra jedności do zbioru $C=\\{3,4,5,6,7\\}$. Oblicz, na ile sposobów możemy utworzyć liczbę, której iloczyn cyfr jest liczbą podzielną przez 8.",
    "steps": [
      {
        "step": 1,
        "hint": "Przeanalizuj rozkład cyfr na czynniki pierwsze",
        "expression": "$A$: $8 = 2^3$, $9 = 3^2$\n$B$: $0$, $1 = 1$, $2 = 2^1$\n$C$: $3 = 3$, $4 = 2^2$, $5 = 5$, $6 = 2 \\cdot 3$, $7 = 7$",
        "explanation": "Identyfikujemy potęgi dwójki w każdej cyfrze",
        "why": "Iloczyn jest podzielny przez $8 = 2^3$ gdy suma wykładników przy 2 wynosi co najmniej 3"
      },
      {
        "step": 2,
        "hint": "Rozważ przypadek specjalny: cyfra 0",
        "expression": "Jeśli którakolwiek cyfra = 0, to iloczyn = 0",
        "explanation": "Zero jest podzielne przez każdą liczbę niezerową, w tym przez 8",
        "why": "W zbiorze B jest 0, więc musimy osobno rozpatrzyć ten przypadek"
      },
      {
        "step": 3,
        "hint": "Przypadek I: cyfra dziesiątek = 0",
        "expression": "Setek: $\\{8, 9\\}$ (2 możliwości)\nDziesiątek: $\\{0\\}$ (1 możliwość)\nJedności: $\\{3, 4, 5, 6, 7\\}$ (5 możliwości)",
        "explanation": "Liczba sposobów: $2 \\times 1 \\times 5 = 10$"
      },
      {
        "step": 4,
        "hint": "Przypadek II: cyfra dziesiątek ≠ 0, rozważ podprzypadki według cyfry setek",
        "expression": "Dziesiątki bez zera: $\\{1, 2\\}$\nMusimy znaleźć kombinacje dające co najmniej $2^3$",
        "explanation": "Analizujemy osobno dla cyfry setek 8 i 9"
      },
      {
        "step": 5,
        "hint": "Podprzypadek IIa: cyfra setek = 8",
        "expression": "$8 \\cdot d \\cdot j = 2^3 \\cdot d \\cdot j$",
        "explanation": "Cyfra 8 już zapewnia czynnik $2^3$, więc iloczyn jest podzielny przez 8 dla dowolnych $d \\in \\{1,2\\}$, $j \\in C$",
        "why": "Liczba sposobów: $1 \\times 2 \\times 5 = 10$"
      },
      {
        "step": 6,
        "hint": "Podprzypadek IIb: cyfra setek = 9",
        "expression": "$9 \\cdot d \\cdot j = 3^2 \\cdot d \\cdot j$",
        "explanation": "Potrzebujemy $2^3$ z cyfr $d$ i $j$",
        "why": "Sprawdzamy wszystkie kombinacje $(d,j)$ gdzie $d \\in \\{1,2\\}$ i $j \\in \\{3,4,5,6,7\\}$"
      },
      {
        "step": 7,
        "hint": "Które kombinacje w podprzypadku IIb dają co najmniej $2^3$?",
        "expression": "$(1,3): 0+0=0$ ❌\n$(1,4): 0+2=2$ ❌\n$(1,5): 0+0=0$ ❌\n$(1,6): 0+1=1$ ❌\n$(1,7): 0+0=0$ ❌\n$(2,3): 1+0=1$ ❌\n$(2,4): 1+2=3$ ✓\n$(2,5): 1+0=1$ ❌\n$(2,6): 1+1=2$ ❌\n$(2,7): 1+0=1$ ❌",
        "explanation": "Tylko kombinacja $(2,4)$ daje dokładnie 3 czynniki dwójki",
        "why": "Liczba sposobów: 1 (tylko liczba 924)"
      },
      {
        "step": 8,
        "hint": "Zsumuj wszystkie przypadki",
        "expression": "Przypadek I: 10\nPodprzypadek IIa: 10\nPodprzypadek IIb: 1\nRazem: $10 + 10 + 1 = 21$",
        "explanation": "Wszystkie przypadki są rozłączne, więc dodajemy wyniki"
      }
    ],
    "solutions": [
      "21"
    ],
    "parameters": {
      "sets": "$A = \\{8,9\\}$, $B = \\{0,1,2\\}$, $C = \\{3,4,5,6,7\\}$",
      "condition": "iloczyn cyfr podzielny przez 8"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 5
      }
    },
    "timestamp": "2025-09-22T12:25:07.149Z"
  },
  {
    "id": "three_digit_odd_sum",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 4,
    "statement": "Tworzymy liczbę trzycyfrową, której cyfra setek należy do zbioru $A=\\{8,9\\}$, cyfra dziesiątek do zbioru $B=\\{0,1,2\\}$, a cyfra jedności do zbioru $C=\\{3,4,5,6,7\\}$. Oblicz, na ile sposobów możemy utworzyć liczbę, której suma cyfr jest liczbą nieparzystą.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy suma trzech liczb jest nieparzysta?",
        "expression": "Suma jest nieparzysta gdy: nieparzysta + parzysta + parzysta lub parzysta + nieparzysta + nieparzysta",
        "explanation": "Analizujemy parzystość cyfr w zbiorach",
        "why": "Suma jest nieparzysta gdy mamy nieparzystą liczbę składników nieparzystych. Tu: 1 lub 3 nieparzyste cyfry."
      },
      {
        "step": 2,
        "hint": "Które cyfry w każdym zbiorze są parzyste, a które nieparzyste?",
        "expression": "$A$: $8$ (parzysta), $9$ (nieparzysta); $B$: $0,2$ (parzyste), $1$ (nieparzysta); $C$: $4,6$ (parzyste), $3,5,7$ (nieparzyste)",
        "explanation": "Klasyfikujemy cyfry według parzystości"
      },
      {
        "step": 3,
        "hint": "Jakie są możliwe kombinacje parzystości dla nieparzystej sumy?",
        "expression": "Przypadek 1: (nieparzysta, parzysta, parzysta) lub Przypadek 2: (parzysta, nieparzysta, nieparzysta)",
        "explanation": "Identyfikujemy dwa możliwe scenariusze",
        "why": "Nie może być (nieparzysta, nieparzysta, nieparzysta) bo to dałoby nieparzystą sumę, ale mamy tylko 1 nieparzystą cyfrę w zbiorze B."
      },
      {
        "step": 4,
        "hint": "Ile sposobów daje pierwszy przypadek: nieparzysta cyfra setek?",
        "expression": "Przypadek 1: $1 \\times 2 \\times 2 = 4$ sposoby",
        "explanation": "Cyfra setek: 1 nieparzysta (9), dziesiątek: 2 parzyste (0,2), jedności: 2 parzyste (4,6)"
      },
      {
        "step": 5,
        "hint": "Ile sposobów daje drugi przypadek: parzysta cyfra setek?",
        "expression": "Przypadek 2: $1 \\times 1 \\times 3 = 3$ sposoby",
        "explanation": "Cyfra setek: 1 parzysta (8), dziesiątek: 1 nieparzysta (1), jedności: 3 nieparzyste (3,5,7)"
      },
      {
        "step": 6,
        "hint": "Jak połączyć oba przypadki w końcowy wynik?",
        "expression": "Łącznie: $4 + 3 = 7$ sposobów",
        "explanation": "Dodajemy liczbę sposobów z obu rozłącznych przypadków"
      }
    ],
    "solutions": [
      "7 sposobów"
    ],
    "parameters": {
      "sets": "$A=\\{8,9\\}$, $B=\\{0,1,2\\}$, $C=\\{3,4,5,6,7\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:25:28.207Z"
  },
  {
    "id": "divisibility_by_4_combinations",
    "topic": "Podzielność przez 4 i kombinatoryka",
    "difficulty": 4,
    "statement": "Ze zbioru A={1,2,3,4,5} wybieramy trzy różne cyfry i tworzymy liczbę trzycyfrową. Oblicz, na ile sposobów otrzymamy liczbę podzielną przez 4.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy liczba jest podzielna przez 4?",
        "expression": "Liczba jest podzielna przez 4, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez 4",
        "explanation": "Używamy cechy podzielności przez 4",
        "why": "Nie sprawdzamy całej liczby, tylko dwie ostatnie cyfry! To znacznie upraszcza problem."
      },
      {
        "step": 2,
        "hint": "Które dwucyfrowe liczby z cyfr {1,2,3,4,5} dzielą się przez 4?",
        "expression": "Sprawdzamy: 12÷4=3, 13÷4=3,25, 14÷4=3,5, 15÷4=3,75, 21÷4=5,25, 23÷4=5,75, 24÷4=6, 25÷4=6,25, 31÷4=7,75, 32÷4=8, 34÷4=8,5, 35÷4=8,75, 41÷4=10,25, 42÷4=10,5, 43÷4=10,75, 45÷4=11,25, 51÷4=12,75, 52÷4=13, 53÷4=13,25, 54÷4=13,5",
        "explanation": "Podzielne przez 4 to: 12, 24, 32, 52"
      },
      {
        "step": 3,
        "hint": "Ile cyfr pozostaje do wyboru na pierwszą pozycję dla każdego końca?",
        "expression": "Dla końca 12: pierwsza cyfra z {3,4,5} → 3 możliwości",
        "explanation": "Gdy kończymy na 12, pierwszą cyfrą może być 3, 4 lub 5"
      },
      {
        "step": 4,
        "hint": "Czy dla pozostałych końców sytuacja wygląda podobnie?",
        "expression": "Dla końca 24: pierwsza cyfra z {1,3,5} → 3 możliwości\nDla końca 32: pierwsza cyfra z {1,4,5} → 3 możliwości\nDla końca 52: pierwsza cyfra z {1,3,4} → 3 możliwości",
        "explanation": "Każdy z czterech końców daje 3 możliwości wyboru pierwszej cyfry"
      },
      {
        "step": 5,
        "hint": "Jak zsumować wszystkie możliwości?",
        "expression": "Łącznie: $3 + 3 + 3 + 3 = 12$ sposobów",
        "explanation": "Sumujemy możliwości dla wszystkich końców podzielnych przez 4"
      }
    ],
    "solutions": [
      "12 sposobów"
    ],
    "parameters": {
      "valid_endings": [
        "12",
        "24",
        "32",
        "52"
      ],
      "total_combinations": 12
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1
      }
    },
    "timestamp": "2025-09-22T12:25:41.733Z"
  },
  {
    "id": "three_digit_numbers_greater_240",
    "topic": "Kombinatoryka - liczby trzycyfrowe z warunkiem",
    "difficulty": 4,
    "statement": "Ze zbioru A={1,2,3,4,5} wybieramy trzy różne cyfry i tworzymy liczbę trzycyfrową. Oblicz, na ile sposobów otrzymamy liczbę większą od 240.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy liczba trzycyfrowa jest większa od 240?",
        "expression": "Liczba $abc > 240$, gdy $a > 2$ lub ($a = 2$ i $bc > 40$)",
        "explanation": "Analizujemy warunek porównując cyfry od lewej strony",
        "why": "Pierwsza cyfra ma największy wpływ na wartość liczby. Jeśli $a \\geq 3$, liczba automatycznie > 240. Jeśli $a = 2$, musimy sprawdzić dalsze cyfry."
      },
      {
        "step": 2,
        "hint": "Ile liczb możemy utworzyć gdy pierwsza cyfra to 3, 4 lub 5?",
        "expression": "Przypadek 1: $a \\in \\{3, 4, 5\\}$",
        "explanation": "Gdy pierwsza cyfra ≥ 3, liczba zawsze > 240"
      },
      {
        "step": 3,
        "hint": "Na ile sposobów wybierzemy pozostałe dwie cyfry z czterech dostępnych?",
        "expression": "Dla każdego $a \\in \\{3, 4, 5\\}$: $4 \\times 3 = 12$ sposobów",
        "explanation": "Druga cyfra: 4 wybory, trzecia cyfra: 3 wybory (bez powtórzeń)"
      },
      {
        "step": 4,
        "hint": "Ile łącznie liczb daje nam przypadek z a ≥ 3?",
        "expression": "Przypadek 1: $3 \\times 12 = 36$ liczb",
        "explanation": "3 wybory pierwszej cyfry × 12 sposobów na pozostałe"
      },
      {
        "step": 5,
        "hint": "Gdy a = 2, które liczby bc będą większe od 40?",
        "expression": "Przypadek 2: $a = 2$, sprawdzamy $bc > 40$",
        "explanation": "Pozostałe cyfry: {1, 3, 4, 5}, szukamy $bc \\in \\{41, 43, 45, 51, 53, 54\\}$"
      },
      {
        "step": 6,
        "hint": "Które z możliwych kombinacji bc spełniają warunek bc > 40?",
        "expression": "$bc \\in \\{41, 43, 45, 51, 53, 54\\}$ - wszystkie 6 kombinacji",
        "explanation": "Sprawdzamy wszystkie dwucyfrowe liczby z cyfr {1, 3, 4, 5}",
        "why": "Najmniejsza możliwa liczba to 13 < 40, ale gdy b ≥ 4 lub (b = 1 i c ≥ 4), mamy bc > 40. Z cyfr {1,3,4,5} tylko 13, 14, 15, 31, 34, 35 dają bc ≤ 40."
      },
      {
        "step": 7,
        "hint": "Ile liczb daje przypadek z a = 2?",
        "expression": "Przypadek 2: 6 liczb (241, 243, 245, 251, 253, 254)",
        "explanation": "Wszystkie kombinacje bc > 40 przy a = 2"
      },
      {
        "step": 8,
        "hint": "Jak połączyć oba przypadki w końcowy wynik?",
        "expression": "Łącznie: $36 + 6 = 42$ sposoby",
        "explanation": "Sumujemy liczby z obu rozłącznych przypadków"
      }
    ],
    "solutions": [
      "42"
    ],
    "parameters": {
      "set": "A = {1, 2, 3, 4, 5}",
      "condition": "liczba > 240",
      "digits": "3 różne cyfry"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:26:01.668Z"
  },
  {
    "id": "four_digit_divisible_by_5",
    "topic": "Kombinatoryka - liczby podzielne przez 5",
    "difficulty": 3,
    "statement": "Oblicz, ile jest liczb czterocyfrowych, które można utworzyć z różnych cyfr należących do zbioru $X = \\{0,1,2,3,4,5,6\\}$ i które są podzielne przez 5.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry na końcu sprawiają, że liczba jest podzielna przez 5?",
        "expression": "Liczba jest podzielna przez 5, gdy kończy się cyfrą 0 lub 5",
        "explanation": "Warunek podzielności przez 5 zależy tylko od ostatniej cyfry",
        "why": "To podstawowa reguła podzielności - liczba jest podzielna przez 5 wtedy i tylko wtedy, gdy jej ostatnia cyfra to 0 lub 5."
      },
      {
        "step": 2,
        "hint": "Dlaczego warto rozpatrzyć osobno przypadki z cyfrą 0 i 5 na końcu?",
        "expression": "Przypadek 1: liczba kończy się cyfrą 0\nPrzypadek 2: liczba kończy się cyfrą 5",
        "explanation": "Rozdzielamy problem na dwa przypadki ze względu na ostatnią cyfrę",
        "why": "Cyfra 0 nie może być pierwszą cyfrą liczby czterocyfrowej, więc przypadki różnią się ograniczeniami dla pierwszej pozycji."
      },
      {
        "step": 3,
        "hint": "Gdy ostatnia cyfra to 0, ile mamy możliwości wyboru pierwszej cyfry?",
        "expression": "Przypadek 1: _ _ _ 0\nPierwsza cyfra: $\\{1,2,3,4,5,6\\}$ - 6 możliwości",
        "explanation": "Pierwsza cyfra nie może być 0, więc mamy 6 opcji z pozostałych cyfr"
      },
      {
        "step": 4,
        "hint": "Po wyborze pierwszej i ostatniej cyfry, ile cyfr zostało do wyboru na pozycje środkowe?",
        "expression": "Druga cyfra: 5 możliwości (pozostałe cyfry + cyfra 0)\nTrzecia cyfra: 4 możliwości",
        "explanation": "Dla przypadku 1: $6 \\times 5 \\times 4 \\times 1 = 120$ liczb",
        "why": "Używamy wszystkich dostępnych cyfr oprócz już wybranych. Po wyborze pierwszej cyfry (nie 0) i ustaleniu ostatniej (0), zostaje 5 cyfr na drugą pozycję i 4 na trzecią."
      },
      {
        "step": 5,
        "hint": "Gdy ostatnia cyfra to 5, czy pierwsza cyfra może być zerem?",
        "expression": "Przypadek 2: _ _ _ 5\nPierwsza cyfra: $\\{1,2,3,4,6\\}$ - 5 możliwości (bez 0 i 5)",
        "explanation": "Pierwsza cyfra nie może być 0, a cyfra 5 jest już zajęta na końcu"
      },
      {
        "step": 6,
        "hint": "Ile cyfr pozostało do wyboru na środkowe pozycje w przypadku 2?",
        "expression": "Druga cyfra: 5 możliwości (w tym cyfra 0)\nTrzecia cyfra: 4 możliwości",
        "explanation": "Dla przypadku 2: $5 \\times 5 \\times 4 \\times 1 = 100$ liczb"
      },
      {
        "step": 7,
        "hint": "Jak połączyć wyniki z obu przypadków?",
        "expression": "Łączna liczba = $120 + 100 = 220$",
        "explanation": "Sumujemy liczbę możliwości z obu rozłącznych przypadków"
      }
    ],
    "solutions": [
      "220"
    ],
    "parameters": {
      "set": "$X = \\{0,1,2,3,4,5,6\\}$",
      "condition": "liczby czterocyfrowe z różnych cyfr, podzielne przez 5"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:26:27.100Z"
  },
  {
    "id": "counting_four_digit_numbers",
    "topic": "Kombinatoryka - liczby z ograniczeniami",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb czterocyfrowych, które można utworzyć z różnych cyfr należących do zbioru $X = \\{0,1,2,3,4,5,6\\}$ i które są mniejsze od 3500.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą stać na pierwszym miejscu liczby czterocyfrowej?",
        "expression": "Pierwsza cyfra: $\\{1,2,3,4,5,6\\}$ (nie może być 0)",
        "explanation": "Liczba czterocyfrowa nie może zaczynać się od zera",
        "why": "To podstawowy warunek liczby czterocyfrowej. Gdyby pierwsza cyfra była 0, otrzymalibyśmy liczbę trzycyfrową."
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek 'mniejsze od 3500' dla pierwszej cyfry?",
        "expression": "Przypadek 1: pierwsza cyfra $\\in \\{1,2\\}$ - bez dodatkowych ograniczeń",
        "explanation": "Gdy liczba zaczyna się od 1 lub 2, zawsze będzie mniejsza od 3500"
      },
      {
        "step": 3,
        "hint": "A co gdy pierwsza cyfra to 3? Jakie ograniczenia nałoży druga cyfra?",
        "expression": "Przypadek 2: pierwsza cyfra = 3, druga cyfra $\\in \\{0,1,2,4\\}$",
        "explanation": "Dla liczb 3abc < 3500 druga cyfra musi być mniejsza od 5",
        "why": "Gdy pierwsza cyfra to 3, musimy sprawdzić drugą: 35xx ≥ 3500, więc druga cyfra może być tylko 0,1,2,4 (pomijamy 3, bo cyfry mają być różne)."
      },
      {
        "step": 4,
        "hint": "Ile sposobów mamy dla przypadku 1 (pierwsza cyfra 1 lub 2)?",
        "expression": "Przypadek 1: $2 \\times 6 \\times 5 \\times 4 = 240$",
        "explanation": "2 wybory pierwszej cyfry, 6 drugiej (wszystkie z X oprócz pierwszej), 5 trzeciej, 4 czwartej"
      },
      {
        "step": 5,
        "hint": "A ile dla przypadku 2a (pierwsza cyfra 3, druga to 0)?",
        "expression": "Przypadek 2a (30ab): $1 \\times 1 \\times 5 \\times 4 = 20$",
        "explanation": "Pierwsza cyfra = 3, druga = 0, pozostałe 5 cyfr na trzecie miejsce, 4 na czwarte"
      },
      {
        "step": 6,
        "hint": "Ile dla przypadku 2b (pierwsza cyfra 3, druga z {1,2,4})?",
        "expression": "Przypadek 2b (3xab, gdzie x ∈ {1,2,4}): $1 \\times 3 \\times 4 \\times 3 = 36$",
        "explanation": "Pierwsza = 3, druga z {1,2,4}, pozostałe 4 cyfry na trzecie miejsce (bez 0 i dwóch użytych), 3 na czwarte",
        "why": "Gdy druga cyfra to 1, 2 lub 4, na trzecie miejsce zostają 4 cyfry (usuwamy 0 nie można, bo już użyliśmy pierwszą i drugą), na czwarte miejsce 3 cyfry."
      },
      {
        "step": 7,
        "hint": "Jak połączyć wszystkie przypadki w końcowy wynik?",
        "expression": "Razem: $240 + 20 + 36 = 296$",
        "explanation": "Sumujemy wszystkie możliwe przypadki"
      }
    ],
    "solutions": [
      "296"
    ],
    "parameters": {
      "set": "$X = \\{0,1,2,3,4,5,6\\}$",
      "condition": "liczby czterocyfrowe < 3500 z różnych cyfr"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:26:47.445Z"
  },
  {
    "id": "pin_complement_counting",
    "topic": "Zasada dopełnienia w kombinatoryce",
    "difficulty": 3,
    "statement": "Oblicz, na ile sposobów można utworzyć PIN czterocyfrowy, w którym co najmniej jedna cyfra nie jest zerem.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle istnieje czterocyfrowych kodów PIN?",
        "expression": "Wszystkich PIN-ów: $10^4 = 10000$",
        "explanation": "Każda z 4 pozycji może być cyfrą od 0 do 9"
      },
      {
        "step": 2,
        "hint": "Co to znaczy 'co najmniej jedna cyfra nie jest zerem'?",
        "expression": "Co najmniej jedna cyfra $\\neq 0$ oznacza: nie wszystkie cyfry to zera",
        "explanation": "Szukamy PIN-ów, które nie składają się wyłącznie z zer"
      },
      {
        "step": 3,
        "hint": "Czy łatwiej policzyć wprost, czy może użyć zasady dopełnienia?",
        "expression": "Zasada dopełnienia: |A| = |U| - |A'|",
        "explanation": "Odejmiemy od wszystkich PIN-ów te składające się tylko z zer",
        "why": "Bezpośrednie liczenie byłoby bardzo skomplikowane - musielibyśmy rozważać przypadki z 1, 2, 3 lub 4 cyframi różnymi od zera. Zasada dopełnienia znacznie upraszcza problem."
      },
      {
        "step": 4,
        "hint": "Ile jest PIN-ów składających się wyłącznie z zer?",
        "expression": "PIN-ów tylko z zerami: $1$",
        "explanation": "Istnieje dokładnie jeden taki PIN: 0000"
      },
      {
        "step": 5,
        "hint": "Jak teraz otrzymać odpowiedź końcową?",
        "expression": "PIN-ów z co najmniej jedną cyfrą $\\neq 0$: $10000 - 1 = 9999$",
        "explanation": "Odejmujemy od wszystkich PIN-ów ten jeden składający się tylko z zer"
      }
    ],
    "solutions": [
      "9999"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1
      }
    },
    "timestamp": "2025-09-22T12:26:59.196Z"
  },
  {
    "id": "pin_code_constraint",
    "topic": "Kombinatoryka z ograniczeniami",
    "difficulty": 3,
    "statement": "Oblicz, na ile sposobów można utworzyć PIN czterocyfrowy, w którym pierwsza cyfra jest o 3 większa od ostatniej cyfry.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry może przyjąć ostatnia pozycja, żeby pierwsza była o 3 większa?",
        "expression": "Ostatnia cyfra: $d \\in \\{0, 1, 2, 3, 4, 5, 6\\}$",
        "explanation": "Pierwsza cyfra to $d + 3$, więc musi być ≤ 9",
        "why": "Jeśli ostatnia cyfra to 7, to pierwsza byłaby 10 - to niemożliwe. Cyfry to tylko 0-9!"
      },
      {
        "step": 2,
        "hint": "Ile par (pierwsza, ostatnia) cyfra spełnia nasze ograniczenie?",
        "expression": "Możliwe pary: $(3,0), (4,1), (5,2), (6,3), (7,4), (8,5), (9,6)$",
        "explanation": "Mamy 7 możliwych par cyfr na pozycjach pierwszej i ostatniej"
      },
      {
        "step": 3,
        "hint": "Co możemy powiedzieć o drugiej i trzeciej cyfrze PIN-u?",
        "expression": "Druga cyfra: 10 możliwości, trzecia cyfra: 10 możliwości",
        "explanation": "Środkowe cyfry mogą być dowolne (0-9), bez ograniczeń"
      },
      {
        "step": 4,
        "hint": "Jak połączyć wszystkie możliwości w jeden wynik?",
        "expression": "Liczba sposobów = $7 \\times 10 \\times 10 = 700$",
        "explanation": "Mnożymy liczbę możliwości dla każdej pozycji",
        "why": "Używamy reguły iloczynu: jeśli mamy $n_1$ sposobów na pierwszą pozycję, $n_2$ na drugą itd., to łącznie $n_1 \\times n_2 \\times ...$"
      }
    ],
    "solutions": [
      "700"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:27:10.275Z"
  },
  {
    "id": "pin_decreasing_digits",
    "topic": "Kombinatoryka - ciągi malejące",
    "difficulty": 3,
    "statement": "Oblicz, na ile sposobów można utworzyć PIN czterocyfrowy, w którym każda kolejna cyfra jest mniejsza od bezpośrednio ją poprzedzającej o 1.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak będzie wyglądać taki PIN, jeśli pierwsza cyfra to a?",
        "expression": "PIN ma postać: $a, (a-1), (a-2), (a-3)$",
        "explanation": "Każda kolejna cyfra jest o 1 mniejsza od poprzedniej"
      },
      {
        "step": 2,
        "hint": "Jakie ograniczenia mają cyfry w systemie dziesiętnym?",
        "expression": "Wszystkie cyfry muszą być z zakresu $\\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "PIN składa się z cyfr dziesiętnych"
      },
      {
        "step": 3,
        "hint": "Jaka musi być minimalna wartość pierwszej cyfry a, żeby ostatnia cyfra była nieujemna?",
        "expression": "Ostatnia cyfra: $a - 3 \\geq 0$, więc $a \\geq 3$",
        "explanation": "Najmniejsza cyfra w PIN-ie to $a-3$, która musi być nieujemna",
        "why": "To kluczowe ograniczenie - jeśli $a < 3$, to $a-3 < 0$ i nie będzie to cyfra. Na przykład dla $a = 2$ mielibyśmy PIN: 2, 1, 0, -1."
      },
      {
        "step": 4,
        "hint": "Jaka może być maksymalna wartość pierwszej cyfry a?",
        "expression": "Pierwsza cyfra: $a \\leq 9$",
        "explanation": "Największa możliwa cyfra to 9"
      },
      {
        "step": 5,
        "hint": "Ile różnych wartości może przyjąć pierwsza cyfra a?",
        "expression": "$a \\in \\{3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Pierwsza cyfra może przyjąć 7 różnych wartości",
        "why": "Każda wartość $a$ jednoznacznie określa cały PIN. Na przykład: $a=5$ daje PIN 5432, $a=9$ daje PIN 9876."
      },
      {
        "step": 6,
        "hint": "Czy wybór pierwszej cyfry jednoznacznie określa cały PIN?",
        "expression": "Liczba PIN-ów = 7",
        "explanation": "Każda z 7 możliwych wartości pierwszej cyfry daje dokładnie jeden PIN"
      }
    ],
    "solutions": [
      "7"
    ],
    "parameters": {
      "possible_pins": [
        "3210",
        "4321",
        "5432",
        "6543",
        "7654",
        "8765",
        "9876"
      ]
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:27:23.744Z"
  },
  {
    "id": "pin_sum_4_combinatorics",
    "topic": "Kombinatoryka z ograniczeniami",
    "difficulty": 4,
    "statement": "Oblicz, na ile sposobów można utworzyć PIN czterocyfrowy, w którym suma cyfr jest równa 4.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą wystąpić w PIN-ie, jeśli suma ma być równa 4?",
        "expression": "Cyfry: $0, 1, 2, 3, 4$ (cyfry większe od 4 uniemożliwiłyby sumę równą 4)",
        "explanation": "Ograniczamy zbiór możliwych cyfr ze względu na warunek sumy"
      },
      {
        "step": 2,
        "hint": "Na ile sposobów można rozłożyć liczbę 4 na sumę czterech składników nieujemnych?",
        "expression": "Szukamy liczby rozwiązań równania $x_1 + x_2 + x_3 + x_4 = 4$, gdzie $x_i \\in \\{0,1,2,3,4\\}$",
        "explanation": "To problem rozkładu liczby na składniki z ograniczeniami",
        "why": "Każde $x_i$ reprezentuje cyfrę na i-tej pozycji. Ograniczenie $x_i \\leq 4$ jest automatycznie spełnione, bo suma wynosi 4."
      },
      {
        "step": 3,
        "hint": "Które rozkłady liczby 4 na cztery składniki są możliwe?",
        "expression": "Możliwe rozkłady: $(4,0,0,0)$, $(3,1,0,0)$, $(2,2,0,0)$, $(2,1,1,0)$, $(1,1,1,1)$",
        "explanation": "Systematycznie wypisujemy wszystkie sposoby rozłożenia 4 na cztery nieujemne składniki"
      },
      {
        "step": 4,
        "hint": "Ile permutacji ma każdy z tych rozkładów?",
        "expression": "$(4,0,0,0)$: $\\frac{4!}{1!3!} = 4$ permutacje",
        "explanation": "Liczba permutacji z powtórzeniami dla rozkładu z jedną czwórką i trzema zerami",
        "why": "Wzór $\\frac{n!}{n_1!n_2!...n_k!}$ liczy permutacje z powtórzeniami, gdzie $n_i$ to liczba wystąpień i-tego elementu."
      },
      {
        "step": 5,
        "hint": "Jak obliczyć permutacje dla pozostałych rozkładów?",
        "expression": "$(3,1,0,0)$: $\\frac{4!}{1!1!2!} = 12$, $(2,2,0,0)$: $\\frac{4!}{2!2!} = 6$, $(2,1,1,0)$: $\\frac{4!}{1!2!1!} = 12$, $(1,1,1,1)$: $\\frac{4!}{4!} = 1$",
        "explanation": "Obliczamy permutacje z powtórzeniami dla każdego rozkładu"
      },
      {
        "step": 6,
        "hint": "Jaka jest suma wszystkich możliwości?",
        "expression": "$4 + 12 + 6 + 12 + 1 = 35$",
        "explanation": "Dodajemy liczbę permutacji dla wszystkich rozkładów"
      }
    ],
    "solutions": [
      "35"
    ],
    "parameters": {
      "constraint": "suma cyfr = 4",
      "pin_length": 4
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:27:39.347Z"
  },
  {
    "id": "lottery_probability",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Na loterii znajduje się 6 losów wygrywających; jeden z wygraną 30 zł, dwa z wygraną 20 zł i trzy z wygraną 10 zł. Pozostałe 4 losy są puste. Losujemy dwa losy. Oblicz prawdopodobieństwo wygrania 30 zł.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile łącznie mamy losów i jak je można podzielić?",
        "expression": "Łącznie: $10$ losów (6 wygrywających + 4 puste)",
        "explanation": "Określamy przestrzeń wszystkich możliwych wyników"
      },
      {
        "step": 2,
        "hint": "Co dokładnie oznacza 'wygranie 30 zł' przy losowaniu dwóch losów?",
        "expression": "Wygranie 30 zł = wylosowanie losu z wygraną 30 zł (i dowolnego drugiego)",
        "explanation": "Precyzujemy zdarzenie, którego prawdopodobieństwo szukamy",
        "why": "Kluczowe jest zrozumienie, że wygrywamy 30 zł jeśli JEDEN z dwóch wylosowanych losów ma wygraną 30 zł. Drugi los może być dowolny."
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wylosować 2 losy z 10?",
        "expression": "Liczba wszystkich możliwości: $\\binom{10}{2} = \\frac{10!}{2! \\cdot 8!} = \\frac{10 \\cdot 9}{2} = 45$",
        "explanation": "Obliczamy liczbę wszystkich możliwych par losów"
      },
      {
        "step": 4,
        "hint": "W ilu przypadkach pierwszy los ma wygraną 30 zł, a drugi jest dowolny?",
        "expression": "Los z 30 zł na pierwszym miejscu: $1 \\cdot 9 = 9$ możliwości",
        "explanation": "Jeden sposób wyboru losu z 30 zł, 9 sposobów wyboru drugiego losu"
      },
      {
        "step": 5,
        "hint": "W ilu przypadkach drugi los ma wygraną 30 zł, a pierwszy jest dowolny?",
        "expression": "Los z 30 zł na drugim miejscu: $9 \\cdot 1 = 9$ możliwości",
        "explanation": "9 sposobów wyboru pierwszego losu, jeden sposób wyboru losu z 30 zł"
      },
      {
        "step": 6,
        "hint": "Czy przypadek 'oba losy z 30 zł' jest możliwy?",
        "expression": "Przypadek 'oba z 30 zł': niemożliwy (jest tylko jeden taki los)",
        "explanation": "Nie można wylosować dwóch losów z wygraną 30 zł, bo jest tylko jeden",
        "why": "Przy zliczaniu zdarzeń typu 'A lub B' musimy uważać na przecięcie. Tutaj przecięcie jest puste, więc nie odejmujemy nic."
      },
      {
        "step": 7,
        "hint": "Ile łącznie mamy korzystnych przypadków?",
        "expression": "Przypadki korzystne: $9 + 9 = 18$",
        "explanation": "Sumujemy przypadki gdy los z 30 zł jest pierwszy lub drugi"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć prawdopodobieństwo ze wzoru klasycznego?",
        "expression": "$P = \\frac{18}{45} = \\frac{2}{5} = 0{,}4$",
        "explanation": "Prawdopodobieństwo to stosunek przypadków korzystnych do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P = \\frac{2}{5} = 0{,}4 = 40\\%$"
    ],
    "parameters": {
      "method": "Prawdopodobieństwo klasyczne z kombinacjami"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:27:57.308Z"
  },
  {
    "id": "probability_same_color",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "W pudełku znajdują się różnokolorowe kule: 2 czerwone, 3 białe i 5 niebieskich. Losujemy kolejno bez zwracania dwa razy jedną kulę. Oblicz prawdopodobieństwo zdarzenia, że obie wylosowane kule mają taki sam kolor.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile łącznie kul znajduje się w pudełku?",
        "expression": "Łączna liczba kul: $2 + 3 + 5 = 10$",
        "explanation": "Sumujemy wszystkie kule w pudełku"
      },
      {
        "step": 2,
        "hint": "Na ile sposobów można wylosować dwie kule z dziesięciu?",
        "expression": "Liczba wszystkich możliwych wyników: $\\binom{10}{2} = \\frac{10!}{2!(10-2)!} = \\frac{10 \\cdot 9}{2} = 45$",
        "explanation": "Obliczamy liczbę kombinacji dwuelementowych z 10 kul",
        "why": "Używamy kombinacji, bo kolejność losowania nie ma znaczenia dla wyniku końcowego - liczy się tylko to, które dwie kule wylosujemy."
      },
      {
        "step": 3,
        "hint": "Ile sposobów jest na wylosowanie dwóch czerwonych kul?",
        "expression": "Dwie czerwone: $\\binom{2}{2} = 1$",
        "explanation": "Z 2 czerwonych kul wybieramy 2"
      },
      {
        "step": 4,
        "hint": "A ile sposobów na wylosowanie dwóch białych kul?",
        "expression": "Dwie białe: $\\binom{3}{2} = \\frac{3!}{2!(3-2)!} = \\frac{3 \\cdot 2}{2} = 3$",
        "explanation": "Z 3 białych kul wybieramy 2"
      },
      {
        "step": 5,
        "hint": "Ile sposobów jest na wylosowanie dwóch niebieskich kul?",
        "expression": "Dwie niebieskie: $\\binom{5}{2} = \\frac{5!}{2!(5-2)!} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Z 5 niebieskich kul wybieramy 2"
      },
      {
        "step": 6,
        "hint": "Czy zdarzenia 'dwie czerwone', 'dwie białe' i 'dwie niebieskie' mogą zajść jednocześnie?",
        "expression": "Liczba korzystnych wyników: $1 + 3 + 10 = 14$",
        "explanation": "Sumujemy wszystkie sposoby wylosowania dwóch kul tego samego koloru",
        "why": "Te zdarzenia są rozłączne - nie mogą zajść jednocześnie, więc prawdopodobieństwa dodajemy."
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo mając liczbę wyników korzystnych i wszystkich możliwych?",
        "expression": "$P = \\frac{14}{45}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby wyników korzystnych do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P = \\frac{14}{45}$"
    ],
    "parameters": {
      "czerwone": 2,
      "białe": 3,
      "niebieskie": 5,
      "losowanie": "bez zwracania"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:28:11.738Z"
  },
  {
    "id": "probability_without_replacement",
    "topic": "Prawdopodobieństwo bez zwracania",
    "difficulty": 3,
    "statement": "W pudełku znajdują się różnokolorowe kule: 2 czerwone, 3 białe i 5 niebieskich. Losujemy kolejno bez zwracania dwa razy jedną kulę. Oblicz prawdopodobieństwo zdarzenia, że żadna z wylosowanych kul nie jest czerwona.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile łącznie kul znajduje się w pudełku?",
        "expression": "Łączna liczba kul: $2 + 3 + 5 = 10$",
        "explanation": "Sumujemy wszystkie kule w pudełku"
      },
      {
        "step": 2,
        "hint": "Ile kul nie jest czerwonych i co to oznacza dla pierwszego losowania?",
        "expression": "Kule nie-czerwone: $3 + 5 = 8$ (białe + niebieskie)",
        "explanation": "Kule, które mogą być wylosowane, aby spełnić warunek",
        "why": "Zdarzenie przeciwne do 'wylosowanie czerwonej' to 'wylosowanie białej lub niebieskiej'. Łatwiej liczyć kule nie-czerwone niż osobno białe i niebieskie."
      },
      {
        "step": 3,
        "hint": "Jakie jest prawdopodobieństwo, że pierwsza kula nie jest czerwona?",
        "expression": "$P(pierwsza nie-czerwona) = \\frac{8}{10} = \\frac{4}{5}$",
        "explanation": "8 kul nie-czerwonych z 10 możliwych"
      },
      {
        "step": 4,
        "hint": "Co się zmienia w pudełku po wylosowaniu pierwszej kuli nie-czerwonej?",
        "expression": "Po pierwszym losowaniu: 7 kul nie-czerwonych z 9 pozostałych",
        "explanation": "Jedna kula nie-czerwona została usunięta, więc zostało 7 z 9",
        "why": "Losowanie bez zwracania oznacza, że każde kolejne losowanie zmienia skład pudełka. Kluczowe: liczba czerwonych kul się nie zmieniła (nadal 2)!"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć prawdopodobieństwo dwóch kolejnych zdarzeń?",
        "expression": "$P(druga nie-czerwona | pierwsza nie-czerwona) = \\frac{7}{9}$",
        "explanation": "Prawdopodobieństwo warunkowe dla drugiego losowania"
      },
      {
        "step": 6,
        "hint": "Jak połączyć prawdopodobieństwa obu losowań?",
        "expression": "$P(obie nie-czerwone) = \\frac{4}{5} \\cdot \\frac{7}{9} = \\frac{28}{45}$",
        "explanation": "Mnożymy prawdopodobieństwa kolejnych zdarzeń",
        "why": "Dla zdarzeń kolejnych (zależnych) prawdopodobieństwo iloczynu to iloczyn prawdopodobieństw. Wzór: $P(A \\cap B) = P(A) \\cdot P(B|A)$."
      }
    ],
    "solutions": [
      "$\\frac{28}{45}$"
    ],
    "parameters": {
      "red_balls": 2,
      "white_balls": 3,
      "blue_balls": 5,
      "total_balls": 10,
      "draws": 2,
      "replacement": false
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:28:28.950Z"
  },
  {
    "id": "polygon_diagonal_probability",
    "topic": "Prawdopodobieństwo geometryczne",
    "difficulty": 4,
    "statement": "Ze zbioru wierzchołków pewnego wielokąta wypukłego wybieramy losowo dwa wierzchołki. Prawdopodobieństwo wybrania wierzchołków wyznaczających przekątną tego wielokąta jest równe 0,8. Ile wierzchołków ma wielokąt?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych par wierzchołków można wybrać z n-kąta?",
        "expression": "Liczba wszystkich par wierzchołków: $\\binom{n}{2} = \\frac{n(n-1)}{2}$",
        "explanation": "Wybieramy 2 wierzchołki z n dostępnych",
        "why": "To klasyczne kombinacje bez powtórzeń. Każda para wierzchołków wyznacza albo bok, albo przekątną wielokąta."
      },
      {
        "step": 2,
        "hint": "Które pary wierzchołków NIE tworzą przekątnych?",
        "expression": "Liczba boków wielokąta: $n$",
        "explanation": "Pary sąsiadujących wierzchołków tworzą boki, nie przekątne"
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę przekątnych, znając liczbę wszystkich par i boków?",
        "expression": "Liczba przekątnych: $\\binom{n}{2} - n = \\frac{n(n-1)}{2} - n = \\frac{n(n-3)}{2}$",
        "explanation": "Od wszystkich par odejmujemy pary tworzące boki",
        "why": "Przekątna łączy wierzchołki niesąsiadujące. Wzór $\\frac{n(n-3)}{2}$ to standardowy wzór na liczbę przekątnych n-kąta."
      },
      {
        "step": 4,
        "hint": "Jak zapisać prawdopodobieństwo jako stosunek korzystnych do wszystkich przypadków?",
        "expression": "$P = \\frac{liczba przekątnych}{liczba wszystkich par} = \\frac{\\frac{n(n-3)}{2}}{\\frac{n(n-1)}{2}} = \\frac{n-3}{n-1}$",
        "explanation": "Prawdopodobieństwo to stosunek przypadków korzystnych do wszystkich możliwych"
      },
      {
        "step": 5,
        "hint": "Jakie równanie otrzymasz, przyrównując to prawdopodobieństwo do 0,8?",
        "expression": "$\\frac{n-3}{n-1} = 0{,}8$",
        "explanation": "Podstawiamy dane prawdopodobieństwo"
      },
      {
        "step": 6,
        "hint": "Jak pozbyć się ułamka w równaniu?",
        "expression": "$n-3 = 0{,}8(n-1)$",
        "explanation": "Mnożymy obie strony przez $(n-1)$"
      },
      {
        "step": 7,
        "hint": "Co otrzymasz po rozwinięciu prawej strony i przeniesieniu wszystkiego na jedną stronę?",
        "expression": "$n-3 = 0{,}8n - 0{,}8$\n$n - 0{,}8n = 3 - 0{,}8$\n$0{,}2n = 2{,}2$",
        "explanation": "Porządkujemy równanie, zbierając wyrazy z n"
      },
      {
        "step": 8,
        "hint": "Jaka będzie końcowa wartość n?",
        "expression": "$n = \\frac{2{,}2}{0{,}2} = 11$",
        "explanation": "Dzielimy obie strony przez 0,2"
      }
    ],
    "solutions": [
      "$n = 11$"
    ],
    "parameters": {
      "verification": "Sprawdzenie: 11-kąt ma $\\frac{11 \\cdot 8}{2} = 44$ przekątne i $\\frac{11 \\cdot 10}{2} = 55$ par wierzchołków. $P = \\frac{44}{55} = \\frac{4}{5} = 0{,}8$ ✓"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:28:47.251Z"
  },
  {
    "id": "probability_white_balls",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "W pudełku jest pewna liczba kul białych i jedna kula czarna, wszystkie kule są rozróżnialne. Losujemy jedną kulę, zatrzymujemy ją, a następnie z pozostałych kul losujemy jedną kulę. Ile powinno być kul białych w pudełku, aby prawdopodobieństwo wylosowania dwóch kul białych było równe $\\frac{2}{3}$?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile łącznie kul będzie w pudełku, jeśli białych jest n?",
        "expression": "Liczba kul białych: $n$, liczba kul czarnych: $1$, łącznie: $n + 1$ kul",
        "explanation": "Określamy zmienne w zadaniu"
      },
      {
        "step": 2,
        "hint": "Jakie jest prawdopodobieństwo wylosowania białej kuli za pierwszym razem?",
        "expression": "$P(pierwsza biała) = \\frac{n}{n+1}$",
        "explanation": "Mamy n kul białych spośród n+1 wszystkich kul"
      },
      {
        "step": 3,
        "hint": "Co się zmienia w pudełku po wylosowaniu pierwszej białej kuli?",
        "expression": "Po wylosowaniu pierwszej białej: białych zostaje $n-1$, łącznie zostaje $n$ kul",
        "explanation": "Pierwsza kula została zatrzymana, więc zmniejsza się liczba kul w pudełku",
        "why": "To kluczowe - losowanie bez zwracania! Warunki się zmieniają po pierwszym losowaniu."
      },
      {
        "step": 4,
        "hint": "Jakie jest prawdopodobieństwo wylosowania drugiej białej kuli, gdy pierwsza była biała?",
        "expression": "$P(druga biała|pierwsza biała) = \\frac{n-1}{n}$",
        "explanation": "Prawdopodobieństwo warunkowe - zostało n-1 białych spośród n kul"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć prawdopodobieństwo dwóch zdarzeń następujących po sobie?",
        "expression": "$P(dwie białe) = P(pierwsza biała) \\cdot P(druga biała|pierwsza biała) = \\frac{n}{n+1} \\cdot \\frac{n-1}{n}$",
        "explanation": "Używamy wzoru na prawdopodobieństwo zdarzeń zależnych",
        "why": "To reguła mnożenia dla zdarzeń zależnych. Alternatywa: kombinacje $\\binom{n}{2}/\\binom{n+1}{2}$."
      },
      {
        "step": 6,
        "hint": "Co można skrócić w tym ułamku?",
        "expression": "$P(dwie białe) = \\frac{n(n-1)}{(n+1)n} = \\frac{n-1}{n+1}$",
        "explanation": "Skracamy n w liczniku i mianowniku"
      },
      {
        "step": 7,
        "hint": "Jakie równanie otrzymasz, przyrównując to do $\\frac{2}{3}$?",
        "expression": "$\\frac{n-1}{n+1} = \\frac{2}{3}$",
        "explanation": "Przyrównujemy do zadanego prawdopodobieństwa"
      },
      {
        "step": 8,
        "hint": "Jak rozwiązać to równanie z ułamkami?",
        "expression": "$3(n-1) = 2(n+1)$",
        "explanation": "Mnożymy na krzyż",
        "why": "Mnożenie na krzyż to najszybszy sposób. Można też pomnożyć obie strony przez $3(n+1)$."
      },
      {
        "step": 9,
        "hint": "Co otrzymasz po rozwinięciu nawiasów?",
        "expression": "$3n - 3 = 2n + 2$",
        "explanation": "Rozwijamy nawiasy po obu stronach"
      },
      {
        "step": 10,
        "hint": "Jak wyizolować n?",
        "expression": "$3n - 2n = 2 + 3$, więc $n = 5$",
        "explanation": "Przenosimy wszystkie wyrazy z n na lewą stronę, resztę na prawą"
      }
    ],
    "solutions": [
      "$n = 5$ kul białych"
    ],
    "parameters": {
      "verification": "Sprawdzenie: $P = \\frac{5-1}{5+1} = \\frac{4}{6} = \\frac{2}{3}$ ✓"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:29:07.508Z"
  },
  {
    "id": "probability_at_least_one_girl",
    "topic": "Prawdopodobieństwo - zdarzenie przeciwne",
    "difficulty": 4,
    "statement": "W klasie IV b jest 9 dziewcząt i pewna liczba chłopców. Wybieramy losowo kolejno dwie osoby z tej klasy. Prawdopodobieństwo wybrania co najmniej jednej dziewczynki jest równe $\\frac{6}{7}$. Ilu chłopców jest w tej klasie?",
    "steps": [
      {
        "step": 1,
        "hint": "Oznaczmy liczbę chłopców jako x. Ile osób będzie w całej klasie?",
        "expression": "Liczba chłopców: $x$, liczba wszystkich uczniów: $9 + x$",
        "explanation": "Wprowadzamy oznaczenia dla nieznanej liczby chłopców"
      },
      {
        "step": 2,
        "hint": "Co jest łatwiejsze do obliczenia: prawdopodobieństwo co najmniej jednej dziewczynki czy samych chłopców?",
        "expression": "$P(co najmniej jedna dziewczynka) = 1 - P(sami chłopcy)$",
        "explanation": "Używamy zdarzenia przeciwnego",
        "why": "Zdarzenie 'co najmniej jedna dziewczynka' obejmuje wiele przypadków (1 dziewczynka + 1 chłopiec, 2 dziewczynki). Łatwiej obliczyć przeciwne zdarzenie 'sami chłopcy'."
      },
      {
        "step": 3,
        "hint": "Jak obliczyć prawdopodobieństwo wybrania dwóch chłopców kolejno bez zwracania?",
        "expression": "$P(sami chłopcy) = \\frac{x}{9+x} \\cdot \\frac{x-1}{9+x-1} = \\frac{x(x-1)}{(9+x)(8+x)}$",
        "explanation": "Pierwszy chłopiec: $\\frac{x}{9+x}$, drugi chłopiec: $\\frac{x-1}{8+x}$",
        "why": "Po wybraniu pierwszej osoby zostaje o jedną mniej w klasie. Jeśli pierwsza była chłopcem, to chłopców też jest o jednego mniej."
      },
      {
        "step": 4,
        "hint": "Jakie równanie otrzymamy podstawiając do wzoru na zdarzenie przeciwne?",
        "expression": "$\\frac{6}{7} = 1 - \\frac{x(x-1)}{(9+x)(8+x)}$",
        "explanation": "Podstawiamy dane prawdopodobieństwo do wzoru"
      },
      {
        "step": 5,
        "hint": "Co otrzymamy po przeniesieniu ułamka na lewą stronę?",
        "expression": "$\\frac{x(x-1)}{(9+x)(8+x)} = 1 - \\frac{6}{7} = \\frac{1}{7}$",
        "explanation": "Przekształcamy równanie"
      },
      {
        "step": 6,
        "hint": "Jak pozbyć się ułamków w równaniu?",
        "expression": "$7x(x-1) = (9+x)(8+x)$",
        "explanation": "Mnożymy obie strony przez $7(9+x)(8+x)$"
      },
      {
        "step": 7,
        "hint": "Co otrzymamy po rozwinięciu nawiasów po obu stronach?",
        "expression": "$7x^2 - 7x = 72 + 9x + 8x + x^2 = x^2 + 17x + 72$",
        "explanation": "Rozwijamy iloczyny"
      },
      {
        "step": 8,
        "hint": "Jakie równanie kwadratowe powstanie po przeniesieniu wszystkiego na jedną stronę?",
        "expression": "$6x^2 - 24x - 72 = 0$",
        "explanation": "Porządkujemy równanie: $7x^2 - 7x - x^2 - 17x - 72 = 0$"
      },
      {
        "step": 9,
        "hint": "Czy można uprościć to równanie przez podzielenie przez wspólny czynnik?",
        "expression": "$x^2 - 4x - 12 = 0$",
        "explanation": "Dzielimy przez 6",
        "why": "Zawsze warto uprościć równanie kwadratowe, jeśli to możliwe - ułatwia obliczenia."
      },
      {
        "step": 10,
        "hint": "Jakie liczby w iloczynie dają -12, a w sumie -4?",
        "expression": "$(x - 6)(x + 2) = 0$",
        "explanation": "Rozkładamy na czynniki: $6 \\cdot (-2) = -12$ i $6 + (-2) = 4$"
      },
      {
        "step": 11,
        "hint": "Które rozwiązanie ma sens w kontekście zadania?",
        "expression": "$x = 6$ lub $x = -2$",
        "explanation": "Liczba chłopców musi być dodatnia, więc $x = 6$"
      }
    ],
    "solutions": [
      "W klasie jest 6 chłopców"
    ],
    "parameters": {
      "verification": "Sprawdzenie: $P = 1 - \\frac{6 \\cdot 5}{15 \\cdot 14} = 1 - \\frac{30}{210} = 1 - \\frac{1}{7} = \\frac{6}{7}$ ✓"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:29:40.029Z"
  },
  {
    "id": "probability_balls_same_different",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "W skrzyni jest pewna liczba piłek do siatkówki i mniejsza liczba piłek do koszykówki - razem 9 piłek. Ile jest piłek do siatkówki, jeśli przy jednoczesnym losowaniu z tej skrzyni dwóch piłek prawdopodobieństwo wylosowania piłek do tej samej dyscypliny sportowej jest takie samo, jak prawdopodobieństwo wylosowania piłek do dwóch różnych dyscyplin?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć liczbę piłek każdego rodzaju, wiedząc że razem jest 9?",
        "expression": "Niech $s$ = liczba piłek do siatkówki, $k$ = liczba piłek do koszykówki, gdzie $s + k = 9$ i $s > k$",
        "explanation": "Wprowadzamy zmienne dla liczby piłek każdego rodzaju"
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich sposobów wylosowania dwóch piłek z dziewięciu?",
        "expression": "Liczba wszystkich możliwych par: $\\binom{9}{2} = \\frac{9 \\cdot 8}{2} = 36$",
        "explanation": "To mianownik dla wszystkich prawdopodobieństw",
        "why": "Używamy kombinacji bez powtórzeń, bo kolejność losowania nie ma znaczenia. Wzór: $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$"
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wylosować dwie piłki tej samej dyscypliny?",
        "expression": "Dwie piłki do siatkówki: $\\binom{s}{2}$, dwie do koszykówki: $\\binom{k}{2}$",
        "explanation": "Zliczamy korzystne przypadki dla piłek tej samej dyscypliny"
      },
      {
        "step": 4,
        "hint": "Jak wyrazić prawdopodobieństwo wylosowania piłek różnych dyscyplin?",
        "expression": "P(różne) = $\\frac{s \\cdot k}{36}$, P(takie same) = $\\frac{\\binom{s}{2} + \\binom{k}{2}}{36}$",
        "explanation": "Prawdopodobieństwo różnych to iloczyn liczb piłek każdego rodzaju",
        "why": "Dla różnych dyscyplin: pierwsza piłka może być dowolna z $s$ siatkówkowych, druga z $k$ koszykówkowych (lub odwrotnie), ale $s \\cdot k$ już uwzględnia oba przypadki."
      },
      {
        "step": 5,
        "hint": "Co oznacza warunek równości prawdopodobieństw?",
        "expression": "$\\frac{s \\cdot k}{36} = \\frac{\\binom{s}{2} + \\binom{k}{2}}{36}$",
        "explanation": "Prawdopodobieństwa są równe, więc przyrównujemy liczniki"
      },
      {
        "step": 6,
        "hint": "Jak uprościć równanie po podstawieniu wzorów na kombinacje?",
        "expression": "$s \\cdot k = \\frac{s(s-1)}{2} + \\frac{k(k-1)}{2}$",
        "explanation": "Podstawiamy wzory na kombinacje i upraszczamy",
        "why": "$\\binom{n}{2} = \\frac{n(n-1)}{2}$ to standardowy wzór. Mnożymy przez 2 obie strony dla ułatwienia."
      },
      {
        "step": 7,
        "hint": "Co otrzymasz po przemnożeniu przez 2 i podstawieniu $k = 9 - s$?",
        "expression": "$2s(9-s) = s(s-1) + (9-s)(8-s)$",
        "explanation": "Podstawiamy $k = 9 - s$ i mnożymy przez 2"
      },
      {
        "step": 8,
        "hint": "Jak wygląda równanie po rozwinięciu nawiasów?",
        "expression": "$18s - 2s^2 = s^2 - s + 72 - 17s + s^2$",
        "explanation": "Rozwijamy wszystkie nawiasy"
      },
      {
        "step": 9,
        "hint": "Do jakiej postaci sprowadzi się równanie kwadratowe?",
        "expression": "$18s - 2s^2 = 2s^2 - 18s + 72$, czyli $4s^2 - 36s + 72 = 0$",
        "explanation": "Przenosimy wszystko na jedną stronę i upraszczamy"
      },
      {
        "step": 10,
        "hint": "Jakie rozwiązania da równanie po podzieleniu przez 4?",
        "expression": "$s^2 - 9s + 18 = 0$, skąd $s = \\frac{9 \\pm 3}{2}$",
        "explanation": "Otrzymujemy $s = 6$ lub $s = 3$"
      },
      {
        "step": 11,
        "hint": "Które rozwiązanie spełnia warunek $s > k$?",
        "expression": "Dla $s = 6$: $k = 3$ (warunek $s > k$ spełniony), dla $s = 3$: $k = 6$ (warunek niespełniony)",
        "explanation": "Sprawdzamy oba rozwiązania względem warunków zadania"
      }
    ],
    "solutions": [
      "6 piłek do siatkówki"
    ],
    "parameters": {
      "total_balls": 9,
      "condition": "P(takie same) = P(różne)"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:30:04.592Z"
  },
  {
    "id": "permutation_probability",
    "topic": "Prawdopodobieństwo i permutacje",
    "difficulty": 3,
    "statement": "Przestawiając dowolnie cyfry 1, 2, 3, 4, 5 tworzymy losowo pięciocyfrowy kod. Opisz przestrzeń zdarzeń elementarnych. Oblicz prawdopodobieństwo zdarzenia, że najpierw ustawione są wszystkie cyfry będące liczbami parzystymi, następnie cyfry będące liczbami nieparzystymi.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych sposobów ustawienia 5 cyfr możemy otrzymać?",
        "expression": "$|\\Omega| = 5! = 120$",
        "explanation": "Przestrzeń zdarzeń elementarnych to wszystkie możliwe permutacje cyfr 1, 2, 3, 4, 5",
        "why": "Każde zdarzenie elementarne to konkretne ustawienie cyfr, np. 12345, 54321 itp. Mamy 5 pozycji i 5 różnych cyfr - to klasyczna permutacja."
      },
      {
        "step": 2,
        "hint": "Które cyfry są parzyste, a które nieparzyste w zbiorze {1, 2, 3, 4, 5}?",
        "expression": "Cyfry parzyste: {2, 4}, cyfry nieparzyste: {1, 3, 5}",
        "explanation": "Dzielimy cyfry na dwie grupy według parzystości"
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można ustawić cyfry parzyste na pierwszych pozycjach?",
        "expression": "$2! = 2$",
        "explanation": "Cyfry 2 i 4 można ustawić na pierwszych dwóch pozycjach na 2 sposoby",
        "why": "Mamy 2 cyfry parzyste i 2 pierwsze pozycje - to permutacja 2 elementów. Możliwe układy: 24... lub 42..."
      },
      {
        "step": 4,
        "hint": "A cyfry nieparzyste na pozostałych pozycjach?",
        "expression": "$3! = 6$",
        "explanation": "Cyfry 1, 3, 5 można ustawić na ostatnich trzech pozycjach na 6 sposobów"
      },
      {
        "step": 5,
        "hint": "Jak połączyć te dwa niezależne wybory w jeden wynik?",
        "expression": "$|A| = 2! \\cdot 3! = 2 \\cdot 6 = 12$",
        "explanation": "Liczba korzystnych zdarzeń to iloczyn możliwości dla każdej grupy",
        "why": "Zasada mnożenia: dla każdego z 2 sposobów ustawienia cyfr parzystych mamy 6 sposobów ustawienia nieparzystych."
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo mając liczbę zdarzeń korzystnych i wszystkich możliwych?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{12}{120} = \\frac{1}{10}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby zdarzeń korzystnych do wszystkich możliwych"
      }
    ],
    "solutions": [
      "Przestrzeń zdarzeń elementarnych: wszystkie permutacje cyfr {1, 2, 3, 4, 5}, $|\\Omega| = 120$",
      "$P(A) = \\frac{1}{10} = 0{,}1$"
    ],
    "parameters": {
      "event_description": "A - najpierw cyfry parzyste {2, 4}, potem nieparzyste {1, 3, 5}"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:30:21.075Z"
  },
  {
    "id": "permutation_probability",
    "topic": "Prawdopodobieństwo i permutacje",
    "difficulty": 4,
    "statement": "Przestawiając dowolnie cyfry 1, 2, 3, 4, 5 tworzymy losowo pięciocyfrowy kod. Oblicz prawdopodobieństwo zdarzenia, że cyfry 1, 2, 3 stoją w podanej kolejności obok siebie.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych kodów można utworzyć z 5 różnych cyfr?",
        "expression": "$|\\Omega| = 5! = 120$",
        "explanation": "Wszystkie możliwe permutacje 5 cyfr to przestrzeń zdarzeń elementarnych"
      },
      {
        "step": 2,
        "hint": "Co się stanie, jeśli potraktujemy blok 123 jako jeden element?",
        "expression": "Traktujemy blok (123) jako jeden element wraz z cyframi 4 i 5",
        "explanation": "Mamy teraz 3 elementy do przestawienia: (123), 4, 5",
        "why": "To kluczowa obserwacja! Zamiast 5 elementów mamy 3: blok cyfr i dwie pojedyncze cyfry. Cyfry w bloku muszą zachować kolejność 1-2-3."
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można ustawić te 3 elementy?",
        "expression": "$|A| = 3! = 6$",
        "explanation": "Permutacje 3 elementów: (123), 4, 5"
      },
      {
        "step": 4,
        "hint": "Jakie konkretne kody spełniają warunek?",
        "expression": "12345, 12354, 41235, 51234, 45123, 54123",
        "explanation": "Wszystkie możliwe ustawienia bloku (123) z cyframi 4 i 5"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć prawdopodobieństwo korzystając ze wzoru klasycznego?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{6}{120} = \\frac{1}{20}$",
        "explanation": "Stosunek liczby zdarzeń sprzyjających do wszystkich możliwych",
        "why": "Wzór klasyczny działa, bo wszystkie permutacje są jednakowo prawdopodobne. Można też myśleć: blok 123 to 3 z 5 pozycji, więc $\\frac{3!}{5!} = \\frac{6}{120}$."
      }
    ],
    "solutions": [
      "$P = \\frac{1}{20} = 0{,}05$"
    ],
    "parameters": {
      "method": "Permutacje z blokiem elementów"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:30:35.206Z"
  },
  {
    "id": "probability_anagram_mama",
    "topic": "Prawdopodobieństwo - permutacje z powtórzeniami",
    "difficulty": 3,
    "statement": "Mały chłopczyk przestawia losowo 4 klocki z literami A, A, M, M. Oblicz prawdopodobieństwo zdarzenia, że chłopiec ułoży słowo MAMA.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych słów można ułożyć z liter A, A, M, M?",
        "expression": "Liczba wszystkich możliwych ustawień: $\\frac{4!}{2! \\cdot 2!} = \\frac{24}{4} = 6$",
        "explanation": "Używamy wzoru na permutacje z powtórzeniami dla 4 liter, gdzie A powtarza się 2 razy i M powtarza się 2 razy",
        "why": "Gdy mamy powtarzające się elementy, dzielimy przez silnie liczby powtórzeń, bo np. zamiana miejscami dwóch identycznych A nie tworzy nowego słowa."
      },
      {
        "step": 2,
        "hint": "Które konkretne słowa można utworzyć z tych liter?",
        "expression": "Możliwe słowa: AAMM, AMAM, AMMA, MAAM, MAMA, MMAA",
        "explanation": "Wypisujemy wszystkie 6 różnych kombinacji liter A, A, M, M"
      },
      {
        "step": 3,
        "hint": "Ile z tych słów to dokładnie MAMA?",
        "expression": "Liczba korzystnych zdarzeń: 1 (tylko słowo MAMA)",
        "explanation": "Spośród wszystkich możliwych słów tylko jedno to MAMA"
      },
      {
        "step": 4,
        "hint": "Jak obliczyć prawdopodobieństwo gdy znasz liczbę zdarzeń korzystnych i wszystkich możliwych?",
        "expression": "$P(MAMA) = \\frac{liczba zdarzeń korzystnych}{liczba wszystkich możliwych} = \\frac{1}{6}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby zdarzeń korzystnych do liczby wszystkich możliwych zdarzeń"
      }
    ],
    "solutions": [
      "$P = \\frac{1}{6}$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 1
      }
    },
    "timestamp": "2025-09-22T12:30:46.982Z"
  },
  {
    "id": "probability_balls_boxes",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "Cztery ponumerowane kule umieszczono losowo w pięciu ponumerowanych szufladach. Oblicz prawdopodobieństwo zdarzenia A, że każda kula trafi do innej szuflady.",
    "steps": [
      {
        "step": 1,
        "hint": "Na ile sposobów można umieścić 4 kule w 5 szufladach bez ograniczeń?",
        "expression": "$|\\Omega| = 5^4 = 625$",
        "explanation": "Każda z 4 kul może trafić do dowolnej z 5 szuflad",
        "why": "To klasyczny przykład próbkowania ze zwracaniem - każda kula ma 5 możliwości niezależnie od innych."
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek 'każda kula w innej szufladzie' dla wyboru szuflad?",
        "expression": "Musimy wybrać 4 różne szuflady z 5 dostępnych",
        "explanation": "Zdarzenie A to sytuacja, gdy żadne dwie kule nie są w tej samej szufladzie"
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wybrać 4 szuflady z 5, gdy kolejność ma znaczenie?",
        "expression": "$|A| = V_5^4 = \\frac{5!}{(5-4)!} = \\frac{5!}{1!} = 5 \\cdot 4 \\cdot 3 \\cdot 2 = 120$",
        "explanation": "Liczymy wariacje bez powtórzeń - pierwsza kula ma 5 opcji, druga 4, trzecia 3, czwarta 2",
        "why": "Używamy wariacji, nie kombinacji, bo kule są ponumerowane - kula nr 1 w szufladzie A i kula nr 2 w szufladzie B to inny układ niż odwrotnie."
      },
      {
        "step": 4,
        "hint": "Jak obliczyć prawdopodobieństwo używając definicji klasycznej?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{120}{625}$",
        "explanation": "Stosunek liczby zdarzeń sprzyjających do wszystkich możliwych"
      },
      {
        "step": 5,
        "hint": "Czy można uprościć ten ułamek dzieląc przez wspólny dzielnik?",
        "expression": "$P(A) = \\frac{120}{625} = \\frac{24}{125}$",
        "explanation": "Dzielimy licznik i mianownik przez 5"
      }
    ],
    "solutions": [
      "$P(A) = \\frac{24}{125} = 0{,}192$"
    ],
    "parameters": {
      "balls": 4,
      "boxes": 5
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:31:01.177Z"
  },
  {
    "id": "probability_balls_boxes",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "Cztery ponumerowane kule umieszczono losowo w pięciu ponumerowanych szufladach. Oblicz prawdopodobieństwo zdarzenia B, że wszystkie kule trafią do jednej szuflady.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych sposobów rozmieszczenia kul możemy wyróżnić?",
        "expression": "$|\\Omega| = 5^4 = 625$",
        "explanation": "Każda z 4 kul może trafić do dowolnej z 5 szuflad",
        "why": "To klasyczna sytuacja: każda kula ma 5 możliwości wyboru szuflady niezależnie od innych. Reguła iloczynu daje $5 \\cdot 5 \\cdot 5 \\cdot 5 = 5^4$."
      },
      {
        "step": 2,
        "hint": "W ilu szufladach mogą się znaleźć wszystkie kule jednocześnie?",
        "expression": "Wszystkie kule mogą być w szufladzie nr 1, 2, 3, 4 lub 5",
        "explanation": "Mamy 5 możliwych szuflad, w których mogą się znaleźć wszystkie kule"
      },
      {
        "step": 3,
        "hint": "Ile jest sposobów umieszczenia wszystkich kul w konkretnej szufladzie?",
        "expression": "$|B| = 5 \\cdot 1 = 5$",
        "explanation": "Dla każdej z 5 szuflad jest dokładnie 1 sposób umieszczenia w niej wszystkich kul",
        "why": "Gdy wybierzemy konkretną szufladę (np. nr 3), to wszystkie 4 kule muszą trafić właśnie tam - jest tylko jeden taki sposób. Ale takich szuflad mamy 5."
      },
      {
        "step": 4,
        "hint": "Jak obliczyć prawdopodobieństwo korzystając z definicji klasycznej?",
        "expression": "$P(B) = \\frac{|B|}{|\\Omega|} = \\frac{5}{625} = \\frac{1}{125}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby zdarzeń sprzyjających do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P(B) = \\frac{1}{125}$"
    ],
    "parameters": {
      "balls": 4,
      "boxes": 5
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:31:13.918Z"
  },
  {
    "id": "elevator_probability",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "Na parterze bloku, mającego oprócz parteru 6 pięter, wsiadło do windy 5 osób. Oblicz prawdopodobieństwo zdarzenia, że wszystkie osoby wysiądą na jednym piętrze (kolejność wychodzenia z windy na jednym piętrze nie jest istotna).",
    "steps": [
      {
        "step": 1,
        "hint": "Na ile różnych pięter mogą wysiadać osoby z windy?",
        "expression": "Liczba dostępnych pięter: $6$",
        "explanation": "Osoby mogą wysiadać na piętrach od 1 do 6 (parter nie wchodzi w grę)"
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich możliwych sposobów rozmieszczenia 5 osób na 6 piętrach?",
        "expression": "Liczba wszystkich możliwości: $6^5$",
        "explanation": "Każda z 5 osób może wybrać dowolne z 6 pięter niezależnie",
        "why": "To klasyczna sytuacja: każda osoba ma 6 wyborów, więc łącznie $6 \\times 6 \\times 6 \\times 6 \\times 6 = 6^5$ możliwości."
      },
      {
        "step": 3,
        "hint": "Na ile sposobów wszystkie osoby mogą wysiadać na tym samym piętrze?",
        "expression": "Liczba korzystnych zdarzeń: $6 \\times 1^5 = 6$",
        "explanation": "Wybieramy jedno piętro (6 możliwości), a wszystkie osoby wysiadają na nim",
        "why": "Gdy już wybierzemy piętro, wszystkie 5 osób musi na nim wysiąść - to tylko 1 sposób dla każdego piętra."
      },
      {
        "step": 4,
        "hint": "Jak obliczyć prawdopodobieństwo używając definicji klasycznej?",
        "expression": "$P = \\frac{liczba zdarzeń korzystnych}{liczba wszystkich możliwości} = \\frac{6}{6^5}$",
        "explanation": "Stosujemy wzór na prawdopodobieństwo klasyczne"
      },
      {
        "step": 5,
        "hint": "Jak uprościć ten ułamek?",
        "expression": "$P = \\frac{6}{6^5} = \\frac{6}{6 \\cdot 6^4} = \\frac{1}{6^4}$",
        "explanation": "Skracamy przez 6"
      },
      {
        "step": 6,
        "hint": "Jaka jest końcowa wartość liczbowa tego prawdopodobieństwa?",
        "expression": "$P = \\frac{1}{6^4} = \\frac{1}{1296}$",
        "explanation": "Obliczamy $6^4 = 1296$"
      }
    ],
    "solutions": [
      "$P = \\frac{1}{1296}$"
    ],
    "parameters": {
      "floors": 6,
      "people": 5
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:31:27.642Z"
  },
  {
    "id": "elevator_probability",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "Na parterze bloku, mającego oprócz parteru 6 pięter, wsiadło do windy 5 osób. Oblicz prawdopodobieństwo zdarzenia, że każda osoba wysiądzie na innym piętrze.",
    "steps": [
      {
        "step": 1,
        "hint": "Na ile pięter mogą wyjść osoby z windy?",
        "expression": "Osoby mogą wyjść na piętra: 1, 2, 3, 4, 5, 6 (łącznie 6 pięter)",
        "explanation": "Blok ma parter plus 6 pięter, więc osoby mogą wyjść tylko na piętra od 1 do 6"
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich możliwych sposobów wysiadania 5 osób?",
        "expression": "$|\\Omega| = 6^5$",
        "explanation": "Każda z 5 osób może wybrać dowolne z 6 pięter niezależnie",
        "why": "To klasyczna sytuacja: każda osoba ma 6 wyborów, więc łącznie $6 \\times 6 \\times 6 \\times 6 \\times 6 = 6^5$ możliwości."
      },
      {
        "step": 3,
        "hint": "Co oznacza, że każda osoba wysiądzie na innym piętrze?",
        "expression": "Zdarzenie A: wszystkie 5 osób wysiada na różnych piętrach",
        "explanation": "Szukamy liczby sposobów przypisania 5 różnych pięter do 5 osób"
      },
      {
        "step": 4,
        "hint": "Ile sposobów jest na wybór 5 różnych pięter z 6 dostępnych?",
        "expression": "$|A| = 6 \\times 5 \\times 4 \\times 3 \\times 2$",
        "explanation": "Pierwsza osoba ma 6 wyborów, druga 5, trzecia 4, czwarta 3, piąta 2",
        "why": "To wariacje bez powtórzeń: $V_6^5 = \\frac{6!}{(6-5)!} = \\frac{6!}{1!} = 6!$. Każda kolejna osoba ma o jeden wybór mniej."
      },
      {
        "step": 5,
        "hint": "Jak obliczyć iloczyn $6 \\times 5 \\times 4 \\times 3 \\times 2$?",
        "expression": "$|A| = 6 \\times 5 \\times 4 \\times 3 \\times 2 = 720$",
        "explanation": "Obliczamy liczbę korzystnych zdarzeń"
      },
      {
        "step": 6,
        "hint": "Ile wynosi $6^5$ w liczniku?",
        "expression": "$|\\Omega| = 6^5 = 7776$",
        "explanation": "Obliczamy liczbę wszystkich możliwych zdarzeń"
      },
      {
        "step": 7,
        "hint": "Jak teraz zastosować definicję prawdopodobieństwa klasycznego?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{720}{7776}$",
        "explanation": "Prawdopodobieństwo to stosunek zdarzeń korzystnych do wszystkich możliwych"
      },
      {
        "step": 8,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P(A) = \\frac{720}{7776} = \\frac{5}{54}$",
        "explanation": "Dzielimy licznik i mianownik przez ich największy wspólny dzielnik 144",
        "why": "$720 = 144 \\times 5$ i $7776 = 144 \\times 54$. Można też zapisać jako $\\frac{5!}{6^5}$."
      }
    ],
    "solutions": [
      "$P(A) = \\frac{5}{54}$"
    ],
    "parameters": {
      "floors": 6,
      "people": 5
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 3
      }
    },
    "timestamp": "2025-09-22T12:31:53.129Z"
  },
  {
    "id": "probability_arrangement",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "W szeregu ustawiamy losowo 4 kobiety i 4 mężczyzn. Oblicz prawdopodobieństwo zdarzenia, że najpierw stoją kobiety, a potem mężczyźni.",
    "steps": [
      {
        "step": 1,
        "hint": "Na ile sposobów można ustawić 8 osób w szeregu?",
        "expression": "$|\\Omega| = 8!$",
        "explanation": "Wszystkie możliwe ustawienia 8 osób to permutacje bez powtórzeń"
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek 'najpierw kobiety, potem mężczyźni' dla kolejności?",
        "expression": "Pozycje 1-4: kobiety, pozycje 5-8: mężczyźni",
        "explanation": "Zdarzenie sprzyjające ma ustaloną strukturę: KKKKMMMM",
        "why": "To kluczowe ograniczenie - nie liczymy wszystkich mieszanych ustawień, tylko te o konkretnej strukturze."
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można ustawić 4 kobiety na pierwszych 4 pozycjach?",
        "expression": "Kobiety na pozycjach 1-4: $4!$ sposobów",
        "explanation": "4 różne kobiety można permutować na 4 pozycjach"
      },
      {
        "step": 4,
        "hint": "Czy ustawienie mężczyzn zależy od ustawienia kobiet?",
        "expression": "Mężczyźni na pozycjach 5-8: $4!$ sposobów",
        "explanation": "4 różnych mężczyzn można niezależnie permutować na pozostałych 4 pozycjach"
      },
      {
        "step": 5,
        "hint": "Jak połączyć liczbę sposobów dla kobiet i mężczyzn?",
        "expression": "$|A| = 4! \\cdot 4!$",
        "explanation": "Zdarzenia są niezależne, więc mnożymy liczby możliwości",
        "why": "Reguła iloczynu: dla każdego z $4!$ ustawień kobiet mamy $4!$ ustawień mężczyzn."
      },
      {
        "step": 6,
        "hint": "Jaki jest wzór na prawdopodobieństwo klasyczne?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{4! \\cdot 4!}{8!}$",
        "explanation": "Prawdopodobieństwo to stosunek przypadków sprzyjających do wszystkich możliwych"
      },
      {
        "step": 7,
        "hint": "Jak uprościć ten ułamek wykorzystując właściwości silni?",
        "expression": "$P(A) = \\frac{4! \\cdot 4!}{8!} = \\frac{24 \\cdot 24}{40320} = \\frac{576}{40320} = \\frac{1}{70}$",
        "explanation": "Obliczamy wartości silni i upraszczamy ułamek"
      }
    ],
    "solutions": [
      "$P(A) = \\frac{1}{70}$"
    ],
    "parameters": {
      "people": "4 kobiety, 4 mężczyzn",
      "condition": "kobiety przed mężczyznami"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:32:09.465Z"
  },
  {
    "id": "alternating_arrangement_probability",
    "topic": "Prawdopodobieństwo - permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "W szeregu ustawiamy losowo 4 kobiety i 4 mężczyzn. Oblicz prawdopodobieństwo zdarzenia, że żadne dwie osoby tej samej płci nie stoją obok siebie.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest wszystkich możliwych ustawień 8 osób w szeregu?",
        "expression": "$|\\Omega| = 8!$",
        "explanation": "Wszystkie możliwe permutacje 8 osób"
      },
      {
        "step": 2,
        "hint": "Jak muszą być rozmieszczone osoby, żeby żadne dwie tej samej płci nie stały obok?",
        "expression": "Układ: K-M-K-M-K-M-K-M lub M-K-M-K-M-K-M-K",
        "explanation": "Osoby muszą się naprzemiennie",
        "why": "To jedyne możliwe układy przy równej liczbie kobiet i mężczyzn. Gdyby było nierówno, zadanie byłoby nierozwiązalne."
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wybrać, który układ będzie pierwszy - kobiety czy mężczyźni?",
        "expression": "2 możliwości: zaczynamy od K lub od M",
        "explanation": "Dwa podstawowe wzorce ustawienia"
      },
      {
        "step": 4,
        "hint": "Jeśli wzorzec jest już ustalony, na ile sposobów można ustawić kobiety na swoich miejscach?",
        "expression": "$4!$ sposobów ustawienia kobiet",
        "explanation": "4 kobiety na 4 wyznaczonych miejscach"
      },
      {
        "step": 5,
        "hint": "A na ile sposobów można ustawić mężczyzn na pozostałych miejscach?",
        "expression": "$4!$ sposobów ustawienia mężczyzn",
        "explanation": "4 mężczyzn na 4 pozostałych miejscach"
      },
      {
        "step": 6,
        "hint": "Jak połączyć wszystkie te możliwości w liczbę korzystnych zdarzeń?",
        "expression": "$|A| = 2 \\cdot 4! \\cdot 4! = 2 \\cdot 24 \\cdot 24 = 1152$",
        "explanation": "Mnożymy: wybór wzorca × ustawienia kobiet × ustawienia mężczyzn",
        "why": "Używamy reguły iloczynu - każdy wybór jest niezależny. Alternatywnie: można myśleć o tym jak o dwóch niezależnych permutacjach."
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo mając zdarzenia korzystne i wszystkie możliwe?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{1152}{8!} = \\frac{1152}{40320}$",
        "explanation": "Klasyczna definicja prawdopodobieństwa"
      },
      {
        "step": 8,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P(A) = \\frac{1152}{40320} = \\frac{1}{35}$",
        "explanation": "Upraszczamy ułamek dzieląc przez NWD(1152, 40320) = 1152"
      }
    ],
    "solutions": [
      "$P(A) = \\frac{1}{35}$"
    ],
    "parameters": {
      "total_people": 8,
      "women": 4,
      "men": 4
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:32:26.878Z"
  },
  {
    "id": "probability_seating_arrangement",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "Sześciu przyjaciół, wśród nich Jarek i Marek, wybrało się do kina. Mają bilety z kolejnymi miejscami w jednym rzędzie. Zakładając, że usiądą losowo na tych miejscach, oblicz prawdopodobieństwo zdarzenia, że Jarek i Marek usiądą na miejscach najbardziej od siebie odległych.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych sposobów usadzenia 6 osób na 6 miejscach istnieje?",
        "expression": "$|\\Omega| = 6! = 720$",
        "explanation": "Przestrzeń wszystkich możliwych zdarzeń to permutacje 6 osób",
        "why": "W prawdopodobieństwie klasycznym najpierw liczymy wszystkie możliwe wyniki. Każda osoba może usiąść na dowolnym wolnym miejscu."
      },
      {
        "step": 2,
        "hint": "Które miejsca są najbardziej od siebie oddalone w rzędzie 6 miejsc?",
        "expression": "Miejsca 1 i 6",
        "explanation": "W rzędzie o 6 miejscach największa odległość to między pierwszym a ostatnim miejscem"
      },
      {
        "step": 3,
        "hint": "Na ile sposobów Jarek i Marek mogą zająć miejsca 1 i 6?",
        "expression": "$2! = 2$",
        "explanation": "Jarek może usiąść na miejscu 1 (Marek na 6) lub na miejscu 6 (Marek na 1)"
      },
      {
        "step": 4,
        "hint": "Co z pozostałymi czterema osobami, gdy Jarek i Marek już zajęli swoje miejsca?",
        "expression": "$4! = 24$",
        "explanation": "Pozostałe 4 osoby mogą usiąść na 4 wolnych miejscach na $4!$ sposobów",
        "why": "Gdy pozycje Jarka i Marka są ustalone, pozostałe osoby można dowolnie permutować na wolnych miejscach."
      },
      {
        "step": 5,
        "hint": "Jak połączyć liczbę sposobów usadzenia Jarka z Markiem z resztą grupy?",
        "expression": "$|A| = 2 \\cdot 4! = 2 \\cdot 24 = 48$",
        "explanation": "Mnożymy liczbę sposobów usadzenia Jarka i Marka przez liczbę sposobów usadzenia pozostałych"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo korzystając z definicji klasycznej?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{48}{720} = \\frac{1}{15}$",
        "explanation": "Prawdopodobieństwo to stosunek zdarzeń sprzyjających do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P = \\frac{1}{15}$"
    ],
    "parameters": {
      "people_count": 6,
      "specific_people": "Jarek i Marek"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:32:45.664Z"
  },
  {
    "id": "probability_seating_order",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "Sześciu przyjaciół, wśród nich Jarek i Marek, wybrało się do kina. Mają bilety z kolejnymi miejscami w jednym rzędzie. Zakładając, że usiądą losowo na tych miejscach, oblicz prawdopodobieństwo zdarzenia, że Jarek i Marek usiądą na dwóch pierwszych miejscach, w podanej kolejności, licząc od lewej strony.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych sposobów usadzenia 6 osób w rzędzie możesz policzyć?",
        "expression": "$|\\Omega| = 6! = 720$",
        "explanation": "Wszystkie możliwe permutacje 6 osób na 6 miejscach",
        "why": "To przestrzeń wszystkich możliwych zdarzeń elementarnych. Każda osoba może zająć dowolne z pozostałych miejsc: 6·5·4·3·2·1."
      },
      {
        "step": 2,
        "hint": "Co musi się stać, żeby Jarek siedział na pierwszym miejscu?",
        "expression": "Jarek na miejscu 1: prawdopodobieństwo $\\frac{1}{6}$",
        "explanation": "Jarek może zająć jedno z sześciu miejsc, więc szansa na pierwsze miejsce to 1/6"
      },
      {
        "step": 3,
        "hint": "Jeśli Jarek już zajął pierwsze miejsce, jaka jest szansa Marka na drugie?",
        "expression": "Marek na miejscu 2 (gdy Jarek na 1): prawdopodobieństwo $\\frac{1}{5}$",
        "explanation": "Pozostało 5 wolnych miejsc, więc szansa Marka na drugie miejsce to 1/5"
      },
      {
        "step": 4,
        "hint": "Jak połączyć te dwa warunki w jedno prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{1}{6} \\cdot \\frac{1}{5} = \\frac{1}{30}$",
        "explanation": "Mnożymy prawdopodobieństwa zdarzeń zależnych",
        "why": "To prawdopodobieństwo warunkowe: P(Marek na 2|Jarek na 1) · P(Jarek na 1). Alternatywnie: liczba korzystnych przypadków to 4! = 24 (pozostałe 4 osoby), więc P = 24/720 = 1/30."
      }
    ],
    "solutions": [
      "$P = \\frac{1}{30}$"
    ],
    "parameters": {
      "method": "Prawdopodobieństwo warunkowe lub zliczanie przypadków"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:32:59.965Z"
  },
  {
    "id": "probability_seating_arrangement",
    "topic": "Prawdopodobieństwo - rozmieszczenia",
    "difficulty": 4,
    "statement": "Sześciu przyjaciół, wśród nich Jarek i Marek, wybrało się do kina. Mają bilety z kolejnymi miejscami w jednym rzędzie. Zakładając, że usiądą losowo na tych miejscach, oblicz prawdopodobieństwo zdarzenia, że między Jarkiem i Markiem usiądzie jeszcze jedna osoba.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest wszystkich możliwych sposobów usadzenia 6 osób?",
        "expression": "$|\\Omega| = 6! = 720$",
        "explanation": "Przestrzeń wszystkich możliwych permutacji 6 osób na 6 miejscach"
      },
      {
        "step": 2,
        "hint": "Jak można interpretować warunek 'między nimi jedna osoba'?",
        "expression": "Jarek i Marek są oddaleni o dokładnie 2 miejsca",
        "explanation": "Między nimi jest dokładnie jedno wolne miejsce",
        "why": "Warunek 'między nimi jedna osoba' oznacza, że pozycje różnią się o 2. Na przykład: miejsca 1 i 3, lub 2 i 4, itd."
      },
      {
        "step": 3,
        "hint": "Ile par miejsc spełnia warunek odległości równej 2?",
        "expression": "Pary miejsc: $(1,3)$, $(2,4)$, $(3,5)$, $(4,6)$ - razem 4 pary",
        "explanation": "Miejsca numerowane 1-6, różnica pozycji równa 2"
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można usadzić Jarka i Marka na wybranej parze miejsc?",
        "expression": "Na każdej parze miejsc: $2! = 2$ sposoby",
        "explanation": "Jarek może być po lewej lub prawej stronie Marka"
      },
      {
        "step": 5,
        "hint": "Co robimy z pozostałymi 4 osobami po usadzeniu Jarka i Marka?",
        "expression": "Pozostałe 4 osoby na 4 miejscach: $4! = 24$ sposoby",
        "explanation": "Permutujemy pozostałe osoby na wolnych miejscach"
      },
      {
        "step": 6,
        "hint": "Jak połączyć wszystkie możliwości w liczbę zdarzeń sprzyjających?",
        "expression": "$|A| = 4 \\times 2 \\times 24 = 192$",
        "explanation": "4 pary miejsc × 2 sposoby usadzenia J,M × 24 permutacje pozostałych",
        "why": "Używamy reguły mnożenia: wybieramy parę miejsc, usadzamy J i M, następnie pozostałe osoby. Te wybory są niezależne."
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo ze wzoru klasycznego?",
        "expression": "$P(A) = \\frac{|A|}{|\\Omega|} = \\frac{192}{720} = \\frac{4}{15}$",
        "explanation": "Stosunek liczby zdarzeń sprzyjających do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P = \\frac{4}{15}$"
    ],
    "parameters": {
      "people_count": 6,
      "target_distance": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:33:16.794Z"
  },
  {
    "id": "probability_adjacent_seats",
    "topic": "Prawdopodobieństwo - zdarzenia przeciwne",
    "difficulty": 4,
    "statement": "W klasie IV f jest 32 uczniów, a wśród nich jest Darek i Franek. Cała klasa ma bilety do teatru na 20 miejsc od 1. do 20. w piątym rzędzie i 12 miejsc od 21. do 32. w siódmym rzędzie. Wszyscy uczniowie zajmują losowo te miejsca. Oblicz prawdopodobieństwo zdarzenia, że Darek i Franek nie usiądą obok siebie.",
    "steps": [
      {
        "step": 1,
        "hint": "Czy łatwiej obliczyć prawdopodobieństwo tego, że siedzą obok, czy że nie siedzą obok?",
        "expression": "$P(nie obok) = 1 - P(obok)$",
        "explanation": "Używamy zdarzenia przeciwnego - łatwiej obliczyć prawdopodobieństwo siedzenia obok",
        "why": "Zdarzenie przeciwne często upraszcza obliczenia. Zamiast liczyć wszystkie sposoby 'nie obok', liczymy sposoby 'obok' i odejmujemy od 1."
      },
      {
        "step": 2,
        "hint": "Na ile sposobów można rozmieścić wszystkich 32 uczniów na 32 miejscach?",
        "expression": "$|\\Omega| = 32!$",
        "explanation": "Przestrzeń wszystkich możliwych rozmieszeń uczniów na miejscach"
      },
      {
        "step": 3,
        "hint": "Ile par sąsiadujących miejsc można utworzyć w każdym rzędzie?",
        "expression": "Rząd 5: miejsca 1-20 dają 19 par sąsiadujących\nRząd 7: miejsca 21-32 dają 11 par sąsiadujących",
        "explanation": "W rzędzie z n miejscami jest n-1 par sąsiadujących miejsc",
        "why": "Miejsca 1,2,3,...,n tworzą pary: (1,2), (2,3), ..., (n-1,n). To daje n-1 par. Uwaga: miejsca z różnych rzędów NIE sąsiadują!"
      },
      {
        "step": 4,
        "hint": "Ile jest łącznie par sąsiadujących miejsc w całym teatrze?",
        "expression": "Łącznie par sąsiadujących: $19 + 11 = 30$",
        "explanation": "Sumujemy pary z obu rzędów"
      },
      {
        "step": 5,
        "hint": "Jeśli Darek i Franek siedzą na konkretnej parze miejsc, na ile sposobów można rozmieścić pozostałych uczniów?",
        "expression": "Dla każdej pary: Darek i Franek mogą usiąść na 2 sposoby, pozostali 30 uczniów na $30!$ sposobów",
        "explanation": "Na każdej parze miejsc: 2 sposoby dla Darka i Franka, reszta dowolnie"
      },
      {
        "step": 6,
        "hint": "Ile jest wszystkich sposobów, żeby Darek i Franek siedzieli obok siebie?",
        "expression": "$|A| = 30 \\times 2 \\times 30! = 60 \\times 30!$",
        "explanation": "30 par miejsc × 2 sposoby na każdej parze × 30! sposobów dla reszty"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo siedzenia obok?",
        "expression": "$P(obok) = \\frac{60 \\times 30!}{32!} = \\frac{60 \\times 30!}{32 \\times 31 \\times 30!} = \\frac{60}{32 \\times 31}$",
        "explanation": "Prawdopodobieństwo jako stosunek przypadków sprzyjających do wszystkich możliwych"
      },
      {
        "step": 8,
        "hint": "Jak uprościć ten ułamek i obliczyć prawdopodobieństwo zdarzenia przeciwnego?",
        "expression": "$P(obok) = \\frac{60}{992} = \\frac{15}{248}$\n\n$P(nie obok) = 1 - \\frac{15}{248} = \\frac{233}{248}$",
        "explanation": "Upraszczamy ułamek i obliczamy prawdopodobieństwo zdarzenia przeciwnego"
      }
    ],
    "solutions": [
      "$P(Darek i Franek nie siedzą obok) = \\frac{233}{248}$"
    ],
    "parameters": {
      "students": 32,
      "row5_seats": "1-20",
      "row7_seats": "21-32"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:33:37.299Z"
  },
  {
    "id": "probability_sampling_with_replacement",
    "topic": "Prawdopodobieństwo - losowanie ze zwracaniem",
    "difficulty": 4,
    "statement": "Ze zbioru liczb $\\{1, 2, 3, ..., n\\}$, gdzie $n \\in \\mathbb{N}$, $n \\geq 2$, losujemy kolejno dwa razy jedną liczbę ze zwracaniem. Prawdopodobieństwo otrzymania za pierwszym razem liczby mniejszej niż za drugim razem jest równe $\\frac{7}{16}$. Oblicz $n$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile wszystkich par $(a,b)$ możemy wylosować ze zbioru $n$ elementów?",
        "expression": "Liczba wszystkich możliwych par: $n^2$",
        "explanation": "Losujemy ze zwracaniem, więc każdy z $n$ wyborów pierwszej liczby może być połączony z każdym z $n$ wyborów drugiej liczby"
      },
      {
        "step": 2,
        "hint": "Kiedy pierwsza liczba jest mniejsza od drugiej? Co to oznacza dla par $(a,b)$?",
        "expression": "Szukamy par $(a,b)$ takich, że $a < b$",
        "explanation": "Interesują nas pary, gdzie pierwsza wylosowana liczba jest mniejsza od drugiej",
        "why": "To kluczowe zdarzenie w zadaniu. Musimy policzyć ile takich par istnieje w zbiorze $\\{1,2,...,n\\}$."
      },
      {
        "step": 3,
        "hint": "Dla ustalonej drugiej liczby $b$, ile może być pierwszych liczb $a$ takich że $a < b$?",
        "expression": "Dla $b = 2$: jedna para $(1,2)$\nDla $b = 3$: dwie pary $(1,3), (2,3)$\n...\nDla $b = n$: $(n-1)$ par",
        "explanation": "Systematycznie liczymy pary dla każdej możliwej wartości drugiej liczby"
      },
      {
        "step": 4,
        "hint": "Jak zsumować wszystkie możliwe pary $(a,b)$ gdzie $a < b$?",
        "expression": "Liczba par gdzie $a < b$: $1 + 2 + 3 + ... + (n-1) = \\frac{(n-1)n}{2}$",
        "explanation": "Używamy wzoru na sumę kolejnych liczb naturalnych",
        "why": "To klasyczny wzór: $1+2+...+k = \\frac{k(k+1)}{2}$. Tutaj $k = n-1$."
      },
      {
        "step": 5,
        "hint": "Jak zapisać prawdopodobieństwo jako stosunek liczby zdarzeń sprzyjających do wszystkich możliwych?",
        "expression": "$P(a < b) = \\frac{\\frac{(n-1)n}{2}}{n^2} = \\frac{n-1}{2n}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby zdarzeń sprzyjających do liczby wszystkich zdarzeń"
      },
      {
        "step": 6,
        "hint": "Jakie równanie otrzymasz przyrównując to prawdopodobieństwo do $\\frac{7}{16}$?",
        "expression": "$\\frac{n-1}{2n} = \\frac{7}{16}$",
        "explanation": "Wykorzystujemy warunek z zadania"
      },
      {
        "step": 7,
        "hint": "Jak rozwiązać to równanie przez mnożenie na krzyż?",
        "expression": "$16(n-1) = 14n$\n$16n - 16 = 14n$\n$2n = 16$\n$n = 8$",
        "explanation": "Rozwiązujemy równanie liniowe względem $n$"
      },
      {
        "step": 8,
        "hint": "Czy warto sprawdzić poprawność wyniku?",
        "expression": "Sprawdzenie: $P = \\frac{8-1}{2 \\cdot 8} = \\frac{7}{16}$ ✓",
        "explanation": "Podstawiając $n = 8$ otrzymujemy dokładnie prawdopodobieństwo z zadania"
      }
    ],
    "solutions": [
      "$n = 8$"
    ],
    "parameters": {
      "constraint": "$n \\in \\mathbb{N}$, $n \\geq 2$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2
      }
    },
    "timestamp": "2025-09-22T12:33:56.215Z"
  },
  {
    "id": "probability_lottery_tickets",
    "topic": "Prawdopodobieństwo - losowanie bez zwracania",
    "difficulty": 4,
    "statement": "W pudełku znajduje się 8 losów pustych i pewna liczba losów wygrywających. Losujemy kolejno dwa razy po jednym losie bez zwracania. Prawdopodobieństwo wylosowania co najmniej jednego losu wygrywającego jest nie większe niż $\\frac{17}{45}$. Ile losów wygrywających było w pudełku?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć nieznaną liczbę losów wygrywających?",
        "expression": "Niech $n$ = liczba losów wygrywających, więc łącznie mamy $8 + n$ losów",
        "explanation": "Wprowadzamy zmienną dla nieznanej liczby losów wygrywających"
      },
      {
        "step": 2,
        "hint": "Czy łatwiej obliczyć prawdopodobieństwo 'co najmniej jeden' bezpośrednio, czy przez dopełnienie?",
        "expression": "$P(co najmniej jeden wygrywający) = 1 - P(oba puste)$",
        "explanation": "Używamy wzoru na prawdopodobieństwo zdarzenia przeciwnego",
        "why": "Zdarzenie przeciwne do 'co najmniej jeden' to 'żaden'. Często łatwiej obliczyć prawdopodobieństwo 'żadnego' niż sumować wszystkie przypadki 'co najmniej jednego'."
      },
      {
        "step": 3,
        "hint": "Jak obliczyć prawdopodobieństwo wylosowania dwóch pustych losów bez zwracania?",
        "expression": "$P(oba puste) = \\frac{8}{8+n} \\cdot \\frac{7}{8+n-1} = \\frac{8 \\cdot 7}{(8+n)(7+n)}$",
        "explanation": "Pierwszy los pusty z prawdopodobieństwem $\\frac{8}{8+n}$, drugi z prawdopodobieństwem $\\frac{7}{7+n}$",
        "why": "Bez zwracania: po wylosowaniu pierwszego losu zostaje o jeden los mniej. Jeśli pierwszy był pusty, zostaje 7 pustych z $(8+n-1)$ losów."
      },
      {
        "step": 4,
        "hint": "Jak teraz wyrazić prawdopodobieństwo co najmniej jednego wygrywającego?",
        "expression": "$P(co najmniej jeden wygrywający) = 1 - \\frac{56}{(8+n)(7+n)}$",
        "explanation": "Podstawiamy do wzoru z kroku 2"
      },
      {
        "step": 5,
        "hint": "Jaką nierówność otrzymamy z warunków zadania?",
        "expression": "$1 - \\frac{56}{(8+n)(7+n)} \\leq \\frac{17}{45}$",
        "explanation": "Prawdopodobieństwo jest nie większe niż $\\frac{17}{45}$"
      },
      {
        "step": 6,
        "hint": "Co otrzymasz po przeniesieniu 1 na prawą stronę?",
        "expression": "$-\\frac{56}{(8+n)(7+n)} \\leq \\frac{17}{45} - 1 = -\\frac{28}{45}$",
        "explanation": "Przekształcamy nierówność"
      },
      {
        "step": 7,
        "hint": "Co się stanie ze znakiem nierówności przy mnożeniu przez -1?",
        "expression": "$\\frac{56}{(8+n)(7+n)} \\geq \\frac{28}{45}$",
        "explanation": "Mnożymy przez -1 i zmieniamy znak nierówności",
        "why": "Przy mnożeniu nierówności przez liczbę ujemną zawsze odwracamy znak nierówności!"
      },
      {
        "step": 8,
        "hint": "Jak uprościć tę nierówność przez skrócenie?",
        "expression": "$\\frac{2}{(8+n)(7+n)} \\geq \\frac{1}{45}$",
        "explanation": "Dzielimy licznik i mianownik lewej strony przez 28"
      },
      {
        "step": 9,
        "hint": "Co otrzymasz po przemnożeniu na krzyż?",
        "expression": "$2 \\cdot 45 \\geq (8+n)(7+n)$, czyli $(8+n)(7+n) \\leq 90$",
        "explanation": "Mnożymy obie strony przez $(8+n)(7+n) \\cdot 45$"
      },
      {
        "step": 10,
        "hint": "Jak rozwinąć iloczyn $(8+n)(7+n)$?",
        "expression": "$56 + 8n + 7n + n^2 = n^2 + 15n + 56 \\leq 90$",
        "explanation": "Rozwijamy nawias i porządkujemy wyrazy"
      },
      {
        "step": 11,
        "hint": "Jakie równanie kwadratowe otrzymasz po przeniesieniu wszystkiego na lewą stronę?",
        "expression": "$n^2 + 15n - 34 \\leq 0$",
        "explanation": "Przenosimy 90 na lewą stronę"
      },
      {
        "step": 12,
        "hint": "Jakie są pierwiastki równania $n^2 + 15n - 34 = 0$?",
        "expression": "$\\Delta = 15^2 + 4 \\cdot 34 = 225 + 136 = 361 = 19^2$, więc $n = \\frac{-15 \\pm 19}{2}$",
        "explanation": "Obliczamy deltę i pierwiastki"
      },
      {
        "step": 13,
        "hint": "Które wartości n spełniają nierówność kwadratową?",
        "expression": "$n_1 = \\frac{-15 + 19}{2} = 2$, $n_2 = \\frac{-15 - 19}{2} = -17$, więc $n \\in [-17, 2]$",
        "explanation": "Parabola o ramionach w górę, więc nierówność $\\leq 0$ między pierwiastkami"
      },
      {
        "step": 14,
        "hint": "Jakie dodatkowe ograniczenia ma liczba losów wygrywających?",
        "expression": "$n \\geq 0$ (liczba losów nie może być ujemna), więc $n \\in [0, 2]$",
        "explanation": "Uwzględniamy warunki fizyczne zadania",
        "why": "Liczba losów musi być nieujemną liczbą całkowitą. Sprawdzamy też czy dla n=0,1,2 warunek jest rzeczywiście spełniony."
      }
    ],
    "solutions": [
      "$n \\in \\{0, 1, 2\\}$",
      "Odpowiedź: W pudełku było 0, 1 lub 2 losy wygrywające"
    ],
    "parameters": {
      "constraint": "$P(\\text{co najmniej jeden wygrywający}) \\leq \\frac{17}{45}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 14,
        "stepsWithWhy": 4
      }
    },
    "timestamp": "2025-09-22T12:34:25.940Z"
  },
   {
    "id": "conditional_probability_tea",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "Do restauracji dostarczono z hurtowni pudło zawierające $30$ paczek herbaty w trzech rodzajach, pochodzące z dwóch krajów. Cejlon (czarna $12$, owocowa $4$, zielona $1$), Chiny (czarna $8$, owocowa $3$, zielona $2$). Z pudła wyjęto losowo jedną paczkę herbaty. Oblicz prawdopodobieństwo zdarzenia: wyjęto paczkę herbaty owocowej, jeśli wiadomo, że paczka ta została wyprodukowana na Cejlonie.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile paczek herbaty pochodzi z każdego kraju?",
        "expression": "Cejlon: $12 + 4 + 1 = 17$ paczek, Chiny: $8 + 3 + 2 = 13$ paczek",
        "explanation": "Liczymy łączną liczbę paczek z każdego kraju"
      },
      {
        "step": 2,
        "hint": "Co oznacza sformułowanie 'jeśli wiadomo, że paczka została wyprodukowana na Cejlonie'?",
        "expression": "Szukamy $P(owocowa|Cejlon)$",
        "explanation": "Prawdopodobieństwo warunkowe - ograniczamy się do paczek z Cejlonu",
        "interactive_choice": {
          "prompt": "Jaki typ prawdopodobieństwa musimy obliczyć?",
          "options": [
            {
              "id": "A",
              "text": "Zwykłe prawdopodobieństwo $P(owocowa)$",
              "feedback": "Nie - warunek 'jeśli wiadomo, że z Cejlonu' zmienia przestrzeń zdarzeń.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Prawdopodobieństwo warunkowe $P(\\text{owocowa}|\\text{Cejlon})$",
              "feedback": "Świetnie! Warunek ogranicza nas tylko do paczek z Cejlonu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Prawdopodobieństwo łączne $P(owocowa \\cap Cejlon)$",
              "feedback": "To byłoby prawdopodobieństwo wylosowania owocowej z Cejlonu bez warunku.",
              "is_correct": false
            }
          ],
          "explanation_after": "Słowa kluczowe 'jeśli wiadomo' wskazują na prawdopodobieństwo warunkowe."
        }
      },
      {
        "step": 3,
        "hint": "Który wzór użyjesz do obliczenia prawdopodobieństwa warunkowego?",
        "expression": "$P(owocowa|Cejlon) = \\frac{owocowa z Cejlonu}{wszystkie z Cejlonu}$",
        "explanation": "Stosujemy definicję prawdopodobieństwa warunkowego",
        "why": "Warunek ogranicza przestrzeń zdarzeń elementarnych - rozważamy tylko paczki z Cejlonu, nie wszystkie $30$.",
        "interactive_choice": {
          "prompt": "Jak obliczyć $P(\\text{owocowa}|\\text{Cejlon})$?",
          "options": [
            {
              "id": "A",
              "text": "Wzór klasyczny: $\\frac{liczba\\,paczek\\,owocowych\\,z\\,Cejlonu}{wszystkie\\,paczki}$",
              "feedback": "Nie - to ignoruje warunek. Mianownik to wszystkie paczki, nie tylko z Cejlonu.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wzór warunkowy: $\\frac{liczba\\,paczek\\,owocowych\\,z\\,Cejlonu}{wszystkie\\,paczki\\,z\\,Cejlonu}$",
              "feedback": "Dokładnie! Warunek ogranicza przestrzeń do paczek tylko z Cejlonu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzór: $\\frac{P(owocowa \\cap Cejlon)}{P(Cejlon)}$",
              "feedback": "To też poprawny wzór teoretyczny, ale tutaj prościej liczyć bezpośrednio.",
              "is_correct": true
            }
          ],
          "explanation_after": "W zadaniach z tabelkami najprościej liczyć bezpośrednio z danych."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest paczek owocowych z Cejlonu?",
        "expression": "Licznik: $4$ (paczki owocowe z Cejlonu)",
        "explanation": "Z tabeli odczytujemy liczbę paczek owocowych z Cejlonu"
      },
      {
        "step": 5,
        "hint": "Ile łącznie jest paczek z Cejlonu?",
        "expression": "Mianownik: $17$ (wszystkie paczki z Cejlonu)",
        "explanation": "Oblicziliśmy wcześniej: $12 + 4 + 1 = 17$"
      },
      {
        "step": 6,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P(owocowa|Cejlon) = \\frac{4}{17}$",
        "explanation": "Otrzymujemy ułamek w najprostszej postaci",
        "interactive_choice": {
          "prompt": "Jak uprościć ułamek $\\frac{4}{17}$?",
          "options": [
            {
              "id": "A",
              "text": "Nie da się uprościć",
              "feedback": "Poprawnie! $NWD(4,17) = 1$, więc ułamek jest w najprostszej postaci.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Uprościć do $\\frac{2}{8}$",
              "feedback": "To błędne uproszczenie. $4$ i $17$ nie mają wspólnych dzielników.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zapisać jako $\\frac{8}{34}$",
              "feedback": "To nie jest uproszczenie, lecz rozszerzenie ułamka o $2$.",
              "is_correct": false
            }
          ],
          "explanation_after": "$17$ to liczba pierwsza, więc $4$ i $17$ są względnie pierwsze."
        }
      }
    ],
    "solutions": [
      "$\\frac{4}{17}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T06:59:28.064Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_tea",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Do restauracji dostarczono z hurtowni pudło zawierające $30$ paczek herbaty w trzech rodzajach, pochodzące z dwóch krajów. Cejlon (czarna $12$, owocowa $4$, zielona $1$), Chiny (czarna $8$, owocowa $3$, zielona $2$). Z pudła wyjęto losowo jedną paczkę herbaty. Oblicz prawdopodobieństwo zdarzenia: wyjęto paczkę herbaty wyprodukowanej w Chinach, jeśli wiadomo, że wyjęto paczkę herbaty czarnej.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak uporządkować dane z zadania?",
        "expression": "Cejlon: czarna $12$, owocowa $4$, zielona $1$ (razem $17$). Chiny: czarna $8$, owocowa $3$, zielona $2$ (razem $13$). Łącznie: $30$ paczek",
        "explanation": "Organizujemy dane w przejrzysty sposób"
      },
      {
        "step": 2,
        "hint": "Jaki typ prawdopodobieństwa musimy obliczyć?",
        "expression": "Szukamy $P(\\text{Chiny} | \\text{czarna})$",
        "explanation": "To prawdopodobieństwo warunkowe",
        "why": "Prawdopodobieństwo warunkowe $P(A|B)$ oznacza prawdopodobieństwo zdarzenia $A$ przy założeniu, że zdarzyło się $B$.",
        "interactive_choice": {
          "prompt": "Jak rozpoznać typ prawdopodobieństwa w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "To zwykłe prawdopodobieństwo - po prostu liczba korzystnych przez wszystkie",
              "feedback": "Nie - zwróć uwagę na słowa 'jeśli wiadomo, że'. To wskazuje na warunek!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To prawdopodobieństwo warunkowe - mamy dodatkową informację",
              "feedback": "Dokładnie! Słowa 'jeśli wiadomo, że wyjęto paczkę herbaty czarnej' to warunek.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To prawdopodobieństwo łączne - szukamy przecięcia zdarzeń",
              "feedback": "Częściowo tak, ale kluczowe jest że mamy warunek - to prawdopodobieństwo warunkowe.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe występuje gdy mamy dodatkową informację (warunek) ograniczającą przestrzeń możliwych wyników."
        }
      },
      {
        "step": 3,
        "hint": "Który wzór zastosujemy dla prawdopodobieństwa warunkowego?",
        "expression": "$P($Chiny $|$ czarna$) = \\frac{P($Chiny $\\cap$ czarna$)}{P($czarna$)}$",
        "explanation": "Stosujemy wzór na prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo warunkowe $P(\\text{Chiny}|\\text{czarna})$?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
              "feedback": "Świetnie! To klasyczny wzór na prawdopodobieństwo warunkowe.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bezpośrednio: liczba czarnych herbat z Chin przez wszystkie herbaty",
              "feedback": "To byłby błąd! Warunek zmienia przestrzeń - nie dzielimy przez wszystkie herbaty.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wykorzystać definicję: liczba korzystnych w zawężonej przestrzeni",
              "feedback": "To właściwie poprawne myślenie! W praktyce to samo co wzór z opcji A.",
              "is_correct": true
            }
          ],
          "explanation_after": "Oba poprawne podejścia prowadzą do tego samego: dzielimy czarne herbaty z Chin przez wszystkie czarne herbaty."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest czarnych herbat łącznie?",
        "expression": "Czarne herbaty łącznie: $12 + 8 = 20$",
        "explanation": "Suma czarnych herbat z Cejlonu i z Chin"
      },
      {
        "step": 5,
        "hint": "Ile jest czarnych herbat z Chin?",
        "expression": "Czarne herbaty z Chin: $8$",
        "explanation": "Liczba czarnych herbat wyprodukowanych w Chinach"
      },
      {
        "step": 6,
        "hint": "Jak interpretować prawdopodobieństwo warunkowe w kontekście tego zadania?",
        "expression": "Zawężamy przestrzeń do $20$ czarnych herbat",
        "explanation": "Warunek ogranicza nas tylko do czarnych herbat",
        "interactive_choice": {
          "prompt": "Co oznacza warunek 'wiadomo, że wyjęto paczkę herbaty czarnej'?",
          "options": [
            {
              "id": "A",
              "text": "Ograniczamy się tylko do czarnych herbat - to nasza nowa przestrzeń",
              "feedback": "Dokładnie! Warunek zawęża przestrzeń do $20$ czarnych herbat zamiast $30$ wszystkich.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Zwiększamy prawdopodobieństwo o dodatową informację",
              "feedback": "Nie do końca. Warunek zawęża przestrzeń, nie zwiększa prawdopodobieństwo.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Mnożymy prawdopodobieństwa czarnej herbaty i herbaty z Chin",
              "feedback": "To byłoby prawdopodobieństwo łączne, nie warunkowe. Tutaj dzielimy, nie mnożymy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe zawęża przestrzeń zdarzeń elementarnych do tych spełniających warunek."
        }
      },
      {
        "step": 7,
        "hint": "Jak obliczyć końcowe prawdopodobieństwo?",
        "expression": "$P($Chiny $|$ czarna$) = \\frac{8}{20} = \\frac{2}{5} = 0,4$",
        "explanation": "Dzielimy liczbę czarnych herbat z Chin przez wszystkie czarne herbaty"
      },
      {
        "step": 8,
        "hint": "Jak można zinterpretować ten wynik?",
        "expression": "Prawdopodobieństwo wynosi $\\frac{2}{5} = 0,4 = 40\\%$",
        "explanation": "Jeśli wiemy, że wylosowano czarną herbatę, to z prawdopodobieństwem $40\\%$ pochodzi ona z Chin"
      }
    ],
    "solutions": [
      "$\\frac{2}{5}$",
      "$0,4$",
      "$40\\%$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:00:46.090Z",
    "thinking_used": true
  },
  {
    "id": "probability_green_tea",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 2,
    "statement": "Do restauracji dostarczono z hurtowni pudło zawierające $30$ paczek herbaty w trzech rodzajach, pochodzące z dwóch krajów. Cejlon (czarna $12$, owocowa $4$, zielona $1$), Chiny (czarna $8$, owocowa $3$, zielona $2$). Z pudła wyjęto losowo jedną paczkę herbaty. Oblicz prawdopodobieństwo zdarzenia: wyjęto paczkę herbaty zielonej.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak najlepiej uporządkować dane z zadania?",
        "expression": "Cejlon: czarna $12$, owocowa $4$, zielona $1$; Chiny: czarna $8$, owocowa $3$, zielona $2$",
        "explanation": "Organizujemy dane według krajów i rodzajów herbaty",
        "interactive_choice": {
          "prompt": "W jaki sposób zorganizujesz informacje o paczkach herbaty?",
          "options": [
            {
              "id": "A",
              "text": "Utworzyć tabelę według krajów i rodzajów",
              "feedback": "Świetny wybór! Tabela pomoże jasno zobaczyć wszystkie dane.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Po prostu wypisać liczby jedna za drugą",
              "feedback": "Możliwe, ale łatwiej się pogubić. Lepiej uporządkować systematycznie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Skupić się tylko na herbacie zielonej",
              "feedback": "To za wcześnie! Najpierw trzeba uporządkować wszystkie dane.",
              "is_correct": false
            }
          ],
          "explanation_after": "Tabela lub systematyczne uporządkowanie pomaga uniknąć błędów w zliczaniu."
        }
      },
      {
        "step": 2,
        "hint": "Co należy policzyć w pierwszej kolejności do wzoru na prawdopodobieństwo?",
        "expression": "Potrzebujemy: liczba paczek zielonej herbaty oraz liczba wszystkich paczek",
        "explanation": "Identyfikujemy elementy potrzebne do wzoru",
        "interactive_choice": {
          "prompt": "Które wartości potrzebujemy do obliczenia prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wszystkie paczki, potem zieloną herbatę",
              "feedback": "Dobra kolejność, ale obie wartości są równie ważne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Najpierw zieloną herbatę, potem wszystkie paczki",
              "feedback": "Również dobra kolejność - obie wartości są potrzebne.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wystarczy tylko liczba paczek zielonej herbaty",
              "feedback": "Nie! Do prawdopodobieństwa potrzebujemy i zdarzeń korzystnych i wszystkich możliwych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo to stosunek zdarzeń korzystnych do wszystkich możliwych zdarzeń."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest paczek zielonej herbaty w sumie?",
        "expression": "Zielona herbata: $1$ (Cejlon) $+ 2$ (Chiny) $= 3$ paczki",
        "explanation": "Sumujemy zieloną herbatę z obu krajów",
        "why": "To są zdarzenia korzystne - sytuacje gdy wylosowana paczka to herbata zielona."
      },
      {
        "step": 4,
        "hint": "Ile jest wszystkich paczek w pudełku?",
        "expression": "Wszystkie paczki: $12 + 4 + 1 + 8 + 3 + 2 = 30$ paczek",
        "explanation": "Sumujemy wszystkie paczki z obu krajów (potwierdzamy dane z zadania)"
      },
      {
        "step": 5,
        "hint": "Jaki wzór na prawdopodobieństwo zastosujesz?",
        "expression": "$P(zielona herbata) = \\frac{3}{30}$",
        "explanation": "Podstawiamy do wzoru: $3$ paczki zielonej herbaty na $30$ wszystkich paczek",
        "interactive_choice": {
          "prompt": "Który wzór na prawdopodobieństwo jest właściwy?",
          "options": [
            {
              "id": "A",
              "text": "$P(A) = \\frac{liczba zdarzeń korzystnych}{liczba wszystkich możliwych zdarzeń}$",
              "feedback": "Dokładnie! To klasyczny wzór na prawdopodobieństwo.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$P(A) = \\frac{liczba wszystkich możliwych zdarzeń}{liczba zdarzeń korzystnych}$",
              "feedback": "Nie, to odwrotność! Prawdopodobieństwo byłoby większe od $1$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$P(A) = liczba zdarzeń korzystnych \\times liczba wszystkich możliwych zdarzeń$",
              "feedback": "Nie, to mnożenie! Prawdopodobieństwo to stosunek (ułamek).",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo klasyczne to zawsze stosunek liczby przypadków korzystnych do wszystkich możliwych."
        }
      },
      {
        "step": 6,
        "hint": "Czy można uprościć otrzymany ułamek?",
        "expression": "$P(zielona herbata) = \\frac{3}{30} = \\frac{1}{10}$",
        "explanation": "Upraszczamy ułamek dzieląc licznik i mianownik przez $3$"
      },
      {
        "step": 7,
        "hint": "Jaki jest wynik w postaci dziesiętnej?",
        "expression": "$P(zielona herbata) = \\frac{1}{10} = 0{,}1 = 10\\%$",
        "explanation": "Prawdopodobieństwo można zapisać jako ułamek, liczbę dziesiętną lub procent"
      }
    ],
    "solutions": [
      "$\\frac{1}{10}$",
      "$0{,}1$",
      "$10\\%$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:01:28.354Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_chocolate",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "Do sklepu zakupiono $400$ tabliczek czekolady w trzech rodzajach: mleczna, gorzka i biała - które zostały wyprodukowane przez cztery różne firmy A, B, C, D. Liczbę tabliczek każdego typu przedstawia poniższa tabela. Firma A: biała $10$, gorzka $40$, mleczna $100$. Firma B: biała $20$, gorzka $30$, mleczna $50$. Firma C: biała $15$, gorzka $20$, mleczna $75$. Firma D: biała $5$, gorzka $10$, mleczna $25$. Wybieramy losowo jedną tabliczkę czekolady. Oblicz prawdopodobieństwo zdarzenia, że wylosowana czekolada jest mleczna, jeżeli wiadomo, że pochodzi z firmy C.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie dane możemy odczytać z tabeli dla firmy C?",
        "expression": "Firma C: biała $15$, gorzka $20$, mleczna $75$",
        "explanation": "Odczytujemy dane dotyczące firmy $C$ z tabeli"
      },
      {
        "step": 2,
        "hint": "Co oznacza sformułowanie 'jeżeli wiadomo, że pochodzi z firmy C'?",
        "expression": "Szukamy $P(\\text{mleczna} | \\text{firma C})$",
        "explanation": "To jest prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Jak należy rozumieć warunek 'jeżeli wiadomo, że pochodzi z firmy C'?",
          "options": [
            {
              "id": "A",
              "text": "To zwykłe prawdopodobieństwo - liczymy wszystkie czekolady",
              "feedback": "Nie - słowo 'jeżeli' wskazuje na prawdopodobieństwo warunkowe!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To prawdopodobieństwo warunkowe - ograniczamy się tylko do firmy $C$",
              "feedback": "Dokładnie! Warunek ogranicza naszą przestrzeń do czekolad z firmy $C$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Musimy porównać firmę $C$ z pozostałymi firmami",
              "feedback": "Nie - interesuje nas tylko to co dzieje się w ramach firmy C.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe oznacza, że ograniczamy się tylko do określonej grupy - tutaj tylko do czekolad z firmy C."
        }
      },
      {
        "step": 3,
        "hint": "Jaki wzór używamy do prawdopodobieństwa warunkowego?",
        "expression": "$P(A|B) = \\frac{P(A \\cap B)}{P(B)}$ lub $P(A|B) = \\frac{liczba przypadków sprzyjających A i B}{liczba wszystkich przypadków B}$",
        "explanation": "Wzór na prawdopodobieństwo warunkowe",
        "why": "W praktyce często używamy drugiej postaci - liczymy przypadki w ograniczonej przestrzeni."
      },
      {
        "step": 4,
        "hint": "Ile łącznie tabliczek czekolady ma firma C?",
        "expression": "Suma tabliczek firmy C: $15 + 20 + 75 = 110$",
        "explanation": "Obliczamy całkowitą liczbę tabliczek z firmy C",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę tabliczek z firmy C?",
          "options": [
            {
              "id": "A",
              "text": "Dodać wszystkie tabliczki ze wszystkich firm: $400$",
              "feedback": "Nie - nas interesuje tylko firma C, nie wszystkie firmy razem.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodać tabliczki wszystkich rodzajów z firmy C: $15 + 20 + 75$",
              "feedback": "Tak! To jest nasza ograniczona przestrzeń - wszystkie tabliczki z firmy C.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzięć tylko mleczne tabliczki z firmy C: $75$",
              "feedback": "To byłby licznik, ale potrzebujemy całkowitej liczby z firmy $C$ jako mianownik.",
              "is_correct": false
            }
          ],
          "explanation_after": "W prawdopodobieństwie warunkowym mianownik to wszystkie przypadki spełniające warunek - tu wszystkie tabliczki z firmy C."
        }
      },
      {
        "step": 5,
        "hint": "Ile tabliczek mlecznych ma firma C?",
        "expression": "Tabliczki mleczne z firmy C: $75$",
        "explanation": "Odczytujemy liczbę tabliczek mlecznych z firmy $C$"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P$(mleczna | firma C) $= \\frac{75}{110}$",
        "explanation": "Stosujemy wzór na prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Które działanie da nam prawdopodobieństwo warunkowe $P(\\text{mleczna} | \\text{firma C})$?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{75}{400}$ - mleczne z firmy C przez wszystkie tabliczki",
              "feedback": "To byłoby zwykłe prawdopodobieństwo, nie warunkowe. Zapominasz o ograniczeniu do firmy $C$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\frac{75}{110}$ - mleczne z firmy C przez wszystkie z firmy C",
              "feedback": "Dokładnie! To jest prawdopodobieństwo warunkowe - ograniczamy się tylko do firmy C.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\frac{110}{400}$ - wszystkie z firmy C przez wszystkie tabliczki",
              "feedback": "To dałoby prawdopodobieństwo wylosowania tabliczki z firmy C, ale nie tego szukamy.",
              "is_correct": false
            }
          ],
          "explanation_after": "W prawdopodobieństwie warunkowym dzielimy przez liczbę elementów spełniających warunek, nie przez całą przestrzeń."
        }
      },
      {
        "step": 7,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$\\frac{75}{110} = \\frac{15}{22}$",
        "explanation": "Dzielimy licznik i mianownik przez $5$"
      },
      {
        "step": 8,
        "hint": "Jaka jest wartość dziesiętna tego prawdopodobieństwa?",
        "expression": "$\\frac{15}{22} \\approx 0{,}68$",
        "explanation": "Obliczamy przybliżoną wartość dziesiętną"
      }
    ],
    "solutions": [
      "$\\frac{15}{22}$",
      "$0{,}68$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:02:04.477Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_chocolate",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "Do sklepu zakupiono $400$ tabliczek czekolady w trzech rodzajach: mleczna, gorzka i biała - które zostały wyprodukowane przez cztery różne firmy $A$, $B$, $C$, $D$. Firma $A$: biała $10$, gorzka $40$, mleczna $100$. Firma $B$: biała $20$, gorzka $30$, mleczna $50$. Firma $C$: biała $15$, gorzka $20$, mleczna $75$. Firma $D$: biała $5$, gorzka $10$, mleczna $25$. Wybieramy losowo jedną tabliczkę czekolady. Oblicz prawdopodobieństwo zdarzenia, że wylosowana czekolada nie jest biała, jeżeli wiadomo, że pochodzi z firmy $A$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki typ prawdopodobieństwa musimy obliczyć gdy mamy warunek 'pochodzi z firmy A'?",
        "expression": "Szukamy $P(\\text{nie biała}|\\text{firma A})$",
        "explanation": "To prawdopodobieństwo warunkowe - ograniczamy się do tabliczek firmy A",
        "interactive_choice": {
          "prompt": "Jak interpretować sformułowanie 'jeżeli wiadomo, że pochodzi z firmy A'?",
          "options": [
            {
              "id": "A",
              "text": "To prawdopodobieństwo całkowite - liczymy ze wszystkich $400$ tabliczek",
              "feedback": "Nie - warunek ogranicza nas tylko do tabliczek z firmy A.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To prawdopodobieństwo warunkowe - liczymy tylko w obrębie firmy $A$",
              "feedback": "Dokładnie! Warunek zawęża przestrzeń do tabliczek firmy A.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To prawdopodobieństwo niezależne - firmy nie mają znaczenia",
              "feedback": "Nie - warunek wyraźnie ogranicza nas do jednej firmy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe oznacza $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$. Tu mamy $P(\\text{nie biała}|$firma A$)$."
        }
      },
      {
        "step": 2,
        "hint": "Ile tabliczek ma firma A w każdym rodzaju?",
        "expression": "Firma A: biała = $10$, gorzka = $40$, mleczna = $100$",
        "explanation": "Odczytujemy dane dla firmy $A$ z tabeli"
      },
      {
        "step": 3,
        "hint": "Ile tabliczek ma firma A łącznie?",
        "expression": "Łącznie firma A: $10 + 40 + 100 = 150$ tabliczek",
        "explanation": "Sumujemy wszystkie tabliczki firmy A"
      },
      {
        "step": 4,
        "hint": "Co oznacza zdarzenie 'czekolada nie jest biała'?",
        "expression": "Nie biała = mleczna lub gorzka = $40 + 100 = 140$ tabliczek",
        "explanation": "Zdarzenie przeciwne do 'biała' obejmuje mleczną i gorzką czekoladę",
        "interactive_choice": {
          "prompt": "Które tabliczki firmy A spełniają warunek 'nie biała'?",
          "options": [
            {
              "id": "A",
              "text": "Tylko tabliczki mleczne ($100$ sztuk)",
              "feedback": "Niepełne - to tylko część tabliczek, które nie są białe.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko tabliczki gorzkie ($40$ sztuk)",
              "feedback": "Niepełne - to tylko część tabliczek, które nie są białe.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tabliczki mleczne i gorzkie ($40 + 100 = 140$ sztuk)",
              "feedback": "Doskonale! 'Nie biała' = $mleczna$ lub $gorzka$.",
              "is_correct": true
            }
          ],
          "explanation_after": "Zaprzeczenie 'biała' to wszystkie pozostałe rodzaje: mleczna i gorzka."
        }
      },
      {
        "step": 5,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P($nie biała$|$firma A$) = \\frac{liczba korzystnych w firmie A}{liczba wszystkich w firmie A}$",
        "explanation": "Stosujemy klasyczną definicję prawdopodobieństwa w ograniczonej przestrzeni",
        "why": "W prawdopodobieństwie warunkowym dzielimy przez liczbę elementów spełniających warunek, nie przez całą przestrzeń."
      },
      {
        "step": 6,
        "hint": "Jakie wartości podstawić do wzoru?",
        "expression": "$P($nie biała$|$firma A$) = \\frac{140}{150}$",
        "explanation": "Podstawiamy: $140$ korzystnych, $150$ możliwych w firmie A",
        "interactive_choice": {
          "prompt": "Co podstawić do wzoru na prawdopodobieństwo warunkowe?",
          "options": [
            {
              "id": "A",
              "text": "Licznik: $140$, mianownik: $400$",
              "feedback": "Nie - mianownik to wszystkie tabliczki, ale warunek ogranicza do firmy $A$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Licznik: $140$, mianownik: $150$",
              "feedback": "Tak! $140$ to tabliczki nie-białe firmy A, $150$ to wszystkie tabliczki firmy A.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Licznik: $100$, mianownik: $150$",
              "feedback": "Nie - licznik to wszystkie nie-białe (mleczne + gorzkie), nie tylko mleczne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'firma A' ogranicza przestrzeń do $150$ tabliczek tej firmy."
        }
      },
      {
        "step": 7,
        "hint": "Jak uprościć ułamek $\\frac{140}{150}$?",
        "expression": "$\\frac{140}{150} = \\frac{14 \\cdot 10}{15 \\cdot 10} = \\frac{14}{15}$",
        "explanation": "Dzielimy licznik i mianownik przez $10$"
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "$P($nie biała$|$firma A$) = \\frac{14}{15}$",
        "explanation": "Prawdopodobieństwo w postaci ułamka nieskracalnego"
      }
    ],
    "solutions": [
      "$\\frac{14}{15}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:02:49.845Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_chocolate",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Do sklepu zakupiono $400$ tabliczek czekolady w trzech rodzajach: mleczna, gorzka i biała - które zostały wyprodukowane przez cztery różne firmy A, B, C, D. Liczbę tabliczek każdego typu przedstawia poniższa tabela. Firma A: biała $10$, gorzka $40$, mleczna $100$. Firma B: biała $20$, gorzka $30$, mleczna $50$. Firma C: biała $15$, gorzka $20$, mleczna $75$. Firma D: biała $5$, gorzka $10$, mleczna $25$. Wybieramy losowo jedną tabliczkę czekolady. Oblicz prawdopodobieństwo zdarzenia, że wylosowana czekolada jest z firmy B lub z firmy C, jeżeli wiadomo, że jest gorzka.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki typ prawdopodobieństwa mamy obliczyć na podstawie sformułowania zadania?",
        "expression": "Szukamy $P(B lub C | gorzka)$",
        "explanation": "Prawdopodobieństwo że czekolada jest z firmy $B$ lub $C$, gdy wiemy że jest gorzka",
        "why": "Prawdopodobieństwo warunkowe używa wzoru $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
        "interactive_choice": {
          "prompt": "Jak rozpoznasz typ prawdopodobieństwa w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "Zwykłe prawdopodobieństwo - po prostu podzielimy liczbę korzystnych przez wszystkie",
              "feedback": "Nie - zwróć uwagę na słowa 'jeżeli wiadomo, że jest gorzka'. To informacja dodatkowa!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Prawdopodobieństwo warunkowe - mamy dodatkową informację",
              "feedback": "Dokładnie! Słowa 'jeżeli wiadomo, że...' wskazują na prawdopodobieństwo warunkowe.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Prawdopodobieństwo całkowite - sumujemy po różnych przypadkach",
              "feedback": "Nie - to nie jest sytuacja gdzie sumujemy prawdopodobieństwa z różnych scenariuszy.",
              "is_correct": false
            }
          ],
          "explanation_after": "To jest prawdopodobieństwo warunkowe $P(A|B)$ - prawdopodobieństwo $A$ pod warunkiem $B$."
        }
      },
      {
        "step": 2,
        "hint": "Ile razem jest gorzkich czekolad we wszystkich firmach?",
        "expression": "Gorzkie: $A(40) + B(30) + C(20) + D(10) = 100$",
        "explanation": "Sumujemy wszystkie gorzkie czekolady z każdej firmy"
      },
      {
        "step": 3,
        "hint": "Który wzór zastosujemy do prawdopodobieństwa warunkowego?",
        "expression": "$P(B lub C | gorzka) = \\frac{gorzkie z B lub C}{wszystkie gorzkie}$",
        "explanation": "Stosujemy definicję prawdopodobieństwa warunkowego",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo warunkowe w tym przypadku?",
          "options": [
            {
              "id": "A",
              "text": "$P(B lub C | gorzka) = \\frac{wszystkie z B lub C}{wszystkie tabliczki}$",
              "feedback": "Nie - zapominasz o warunku! Mianownik musi uwzględniać tylko gorzkie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$P(B lub C | gorzka) = \\frac{gorzkie z B lub C}{wszystkie gorzkie}$",
              "feedback": "Świetnie! Warunek ogranicza próbę do gorzkiej czekolady.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$P(B lub C | gorzka) = \\frac{gorzkie z B lub C}{wszystkie tabliczki} \\cdot \\frac{wszystkie tabliczki}{wszystkie gorzkie}$",
              "feedback": "To jest poprawne matematycznie, ale niepotrzebnie skomplikowane.",
              "is_correct": true
            }
          ],
          "explanation_after": "W prawdopodobieństwie warunkowym zawężamy próbę do przypadków spełniających warunek."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest gorzkich czekolad z firm B i C łącznie?",
        "expression": "Gorzkie z $B$ lub $C$: $30 + 20 = 50$",
        "explanation": "Sumujemy gorzkie czekolady z firmy B i firmy C"
      },
      {
        "step": 5,
        "hint": "Jak podstawić liczby do wzoru na prawdopodobieństwo warunkowe?",
        "expression": "$P(B lub C | gorzka) = \\frac{50}{100}$",
        "explanation": "Podstawiamy: $50$ gorzkich z $B$ lub $C$ na $100$ wszystkich gorzkich",
        "interactive_choice": {
          "prompt": "Które podstawienie jest prawidłowe?",
          "options": [
            {
              "id": "A",
              "text": "$P(B lub C | gorzka) = \\frac{50}{400}$",
              "feedback": "Nie - w mianowniku powinny być tylko gorzkie czekolady, nie wszystkie!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$P(B lub C | gorzka) = \\frac{50}{100}$",
              "feedback": "Dokładnie! $50$ gorzkich z $B$ lub $C$, na $100$ wszystkich gorzkich.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$P(B lub C | gorzka) = \\frac{100}{50}$",
              "feedback": "Nie - masz odwrócony ułamek. Sprawdź co jest w liczniku, a co w mianowniku.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'gorzka' ogranicza naszą próbę do 100 gorzkich czekolad."
        }
      },
      {
        "step": 6,
        "hint": "Do jakiej najprostszej postaci można uprościć ten ułamek?",
        "expression": "$P(B lub C | gorzka) = \\frac{50}{100} = \\frac{1}{2}$",
        "explanation": "Upraszczamy ułamek przez $50$"
      },
      {
        "step": 7,
        "hint": "Jak można wyrazić wynik w postaci dziesiętnej i procentowej?",
        "expression": "$\\frac{1}{2} = 0{,}5 = 50\\%$",
        "explanation": "Prawdopodobieństwo wynosi $0,5$ czyli $50\\%$"
      }
    ],
    "solutions": [
      "$\\frac{1}{2}$",
      "$0{,}5$",
      "$50\\%$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:03:26.550Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_chocolate",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Do sklepu zakupiono $400$ tabliczek czekolady w trzech rodzajach: mleczna, gorzka i biała - które zostały wyprodukowane przez cztery różne firmy A, B, C, D. Liczbę tabliczek każdego typu przedstawia poniższa tabela. Firma A: biała $10$, gorzka $40$, mleczna $100$. Firma B: biała $20$, gorzka $30$, mleczna $50$. Firma C: biała $15$, gorzka $20$, mleczna $75$. Firma D: biała $5$, gorzka $10$, mleczna $25$. Wybieramy losowo jedną tabliczkę czekolady. Oblicz prawdopodobieństwo zdarzenia, że wylosowana czekolada nie jest z firmy D, jeżeli wiadomo, że jest biała lub mleczna.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie zdarzenia są kluczowe w tym zadaniu?",
        "expression": "A: czekolada nie jest z firmy $D$, B: czekolada jest biała lub mleczna",
        "explanation": "Definiujemy zdarzenia zgodnie z treścią zadania",
        "interactive_choice": {
          "prompt": "Jak najlepiej zdefiniować zdarzenia w tym problemie?",
          "options": [
            {
              "id": "A",
              "text": "A - czekolada z firmy $D$, B - czekolada biała lub mleczna",
              "feedback": "Dobry kierunek, ale szukamy prawdopodobieństwa przeciwnego - NIE z firmy D.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "A - czekolada NIE z firmy $D$, B - czekolada biała lub mleczna",
              "feedback": "Świetnie! Dokładnie te zdarzenia potrzebujemy do obliczenia $P(A|B)$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "A - czekolada biała, B - czekolada mleczna, C - nie z firmy $D$",
              "feedback": "Za dużo zdarzeń osobno. Lepiej połączyć białą i mleczną w jedno zdarzenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Szukamy $P(\\text{nie z firmy D} | \\text{biała lub mleczna})$, więc potrzebujemy tych dwóch zdarzeń."
        }
      },
      {
        "step": 2,
        "hint": "Który wzór zastosujemy do obliczenia prawdopodobieństwa warunkowego?",
        "expression": "$P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
        "explanation": "Używamy wzoru na prawdopodobieństwo warunkowe",
        "why": "Prawdopodobieństwo warunkowe to stosunek prawdopodobieństwa iloczynu zdarzeń do prawdopodobieństwa zdarzenia warunkującego.\n\n(No mathematical expressions to format in this text.)"
      },
      {
        "step": 3,
        "hint": "Ile tabliczek jest białych lub mlecznych łącznie?",
        "expression": "Biała: $10 + 20 + 15 + 5 = 50$, Mleczna: $100 + 50 + 75 + 25 = 250$",
        "explanation": "Sumujemy tabliczki białe i mleczne ze wszystkich firm"
      },
      {
        "step": 4,
        "hint": "Ile tabliczek jest białych lub mlecznych razem?",
        "expression": "Biała lub mleczna: $50 + 250 = 300$",
        "explanation": "Zdarzenia rozłączne, więc dodajemy prawdopodobieństwa"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć liczbę tabliczek które NIE są z firmy D i jednocześnie są białe lub mleczne?",
        "expression": "Nie z firmy D i (biała lub mleczna): $300 - (5 + 25) = 270$",
        "explanation": "Odejmujemy tabliczki białe i mleczne z firmy D od wszystkich białych i mlecznych",
        "interactive_choice": {
          "prompt": "Która metoda jest najlepsza do obliczenia $|A \\cap B|$?",
          "options": [
            {
              "id": "A",
              "text": "Odjąć od wszystkich białych i mlecznych te z firmy D",
              "feedback": "Dobra metoda! $300 - (5+25) = 270$. To podejście przez dopełnienie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dodać białe i mleczne z firm A, B, C",
              "feedback": "Też poprawne! $(10+100)+(20+50)+(15+75) = 270$. Bezpośrednie liczenie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Pomnożyć liczbę firm przez średnią liczbę tabliczek",
              "feedback": "Niepoprawne. Firmy mają różne liczby tabliczek, nie można używać średniej.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia A i B są poprawne. Wybieramy to które wydaje się łatwiejsze."
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo $P(B)$?",
        "expression": "$P(B) = \\frac{300}{400} = \\frac{3}{4}$",
        "explanation": "Prawdopodobieństwo wylosowania tabliczki białej lub mlecznej"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo $P(A \\cap B)$?",
        "expression": "$P(A \\cap B) = \\frac{270}{400} = \\frac{27}{40}$",
        "explanation": "Prawdopodobieństwo wylosowania tabliczki nie z firmy $D$ i jednocześnie białej lub mlecznej"
      },
      {
        "step": 8,
        "hint": "Jakie jest ostateczne prawdopodobieństwo warunkowe?",
        "expression": "$P(A|B) = \\frac{270}{300} = \\frac{9}{10} = 0{,}9$",
        "explanation": "Obliczamy prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{\\frac{27}{40}}{\\frac{3}{4}} = \\frac{27}{40} \\cdot \\frac{4}{3}$",
              "feedback": "Świetnie! Dzielenie przez ułamek to mnożenie przez jego odwrotność.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\frac{270}{400} : \\frac{300}{400} = \\frac{270}{300}$",
              "feedback": "Też poprawne! Upraszczasz oba ułamki przez wspólny mianownik $400$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\frac{270 \\cdot 400}{300 \\cdot 400} = \\frac{270}{300}$",
              "feedback": "Błąd w przekształceniu. Mnożysz zamiast dzielić.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najprościej: $\\frac{270}{300} = \\frac{9}{10} = 0{,}9$"
        }
      }
    ],
    "solutions": [
      "$\\frac{9}{10} = 0{,}9 = 90\\%$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-09-28T07:04:05.604Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_dice",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Rzucamy raz dwiema symetrycznymi, sześciennymi kostkami do gry i dodajemy liczby uzyskanych oczek. Oblicz prawdopodobieństwo otrzymania sumy oczek będącej liczbą parzystą, jeśli wiadomo, że na kostkach wypadła różna liczba oczek.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak podejść do tego zadania z prawdopodobieństwem warunkowym?",
        "expression": "Oznaczmy $A$ = suma parzysta, $B$ = różne liczby oczek. Szukamy $P(A|B)$",
        "explanation": "Definiujemy zdarzenia i stosujemy prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Jaką strategię wybierzesz do rozwiązania tego zadania?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw znajdę wszystkie możliwe wyniki, potem zastosuję wzór na prawdopodobieństwo warunkowe",
              "feedback": "Świetny wybór! Systematyczne podejście - znajdziemy wszystkie przypadki sprzyjające warunkom.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Od razu obliczę prawdopodobieństwo sumy parzystej i podzielę przez prawdopodobieństwo różnych wyników",
              "feedback": "To może prowadzić do błędów - lepiej najpierw przeanalizować wszystkie przypadki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyję wzoru $P(A|B) = P(A∩B)/P(B)$ bez szczegółowej analizy przypadków",
              "feedback": "Wzór jest dobry, ale bez analizy przypadków łatwo o pomyłkę w zliczaniu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najlepiej systematycznie przeanalizować wszystkie przypadki, potem zastosować wzór $P(A|B) = P(A∩B)/P(B)$."
        }
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich możliwych wyników przy rzucie dwiema kostkami?",
        "expression": "Wszystkich wyników: $6 \\times 6 = 36$",
        "explanation": "Każda kostka ma $6$ możliwych wyników, więc razem mamy $36$ par $(i,j)$"
      },
      {
        "step": 3,
        "hint": "Które pary $(i,j)$ spełniają warunek różnych liczb oczek?",
        "expression": "Wyniki z różnymi liczbami: wszystkie pary $(i,j)$ gdzie $i \\neq j$",
        "explanation": "Wykluczamy pary $(1,1)$, $(2,2)$, $(3,3)$, $(4,4)$, $(5,5)$, $(6,6)$"
      },
      {
        "step": 4,
        "hint": "Ile jest par z różnymi liczbami oczek?",
        "expression": "Liczba par z różnymi oczkami: $36 - 6 = 30$",
        "explanation": "Od wszystkich $36$ par odejmujemy $6$ par identycznych"
      },
      {
        "step": 5,
        "hint": "Kiedy suma dwóch liczb jest parzysta?",
        "expression": "Suma parzysta gdy: (parzysta, parzysta) lub (nieparzysta, nieparzysta)",
        "explanation": "Na kostce: parzyste to $\\{2,4,6\\}$, nieparzyste to $\\{1,3,5\\}$",
        "why": "To kluczowa obserwacja - pozwala nam sklasyfikować wszystkie przypadki według parzystości.",
        "interactive_choice": {
          "prompt": "Kiedy suma dwóch liczb całkowitych jest liczbą parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Gdy obie liczby są parzyste lub obie nieparzyste",
              "feedback": "Dokładnie! $parzysta + parzysta = parzysta$, $nieparzysta + nieparzysta = parzysta$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Gdy jedna liczba jest parzysta, a druga nieparzysta",
              "feedback": "Nie, wtedy suma jest nieparzysta. Przykład: $2 + 3 = 5$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zawsze, gdy liczby są różne",
              "feedback": "Nie, to zależy od parzystości liczb, nie od tego czy są różne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma jest parzysta gdy obie składniki mają tę samą parzystość (oba parzyste lub oba nieparzyste)."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest par różnych liczb parzystych na kostkach?",
        "expression": "Pary różnych liczb parzystych: $\\left(2,4\\right)$, $\\left(2,6\\right)$, $\\left(4,2\\right)$, $\\left(4,6\\right)$, $\\left(6,2\\right)$, $\\left(6,4\\right)$",
        "explanation": "Z liczb {2,4,6} tworzymy pary różne - to $3 \\times 2 = 6$ par"
      },
      {
        "step": 7,
        "hint": "Ile jest par różnych liczb nieparzystych na kostkach?",
        "expression": "Pary różnych liczb nieparzystych: $\\left(1,3\\right)$, $\\left(1,5\\right)$, $\\left(3,1\\right)$, $\\left(3,5\\right)$, $\\left(5,1\\right)$, $\\left(5,3\\right)$",
        "explanation": "Z liczb {1,3,5} tworzymy pary różne - to $3 \\times 2 = 6$ par"
      },
      {
        "step": 8,
        "hint": "Ile łącznie jest par różnych liczb dających sumę parzystą?",
        "expression": "Liczba par dających sumę parzystą: $6 + 6 = 12$",
        "explanation": "Łączymy pary różnych liczb parzystych i nieparzystych"
      },
      {
        "step": 9,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P(suma parzysta|różne oczka) = \\frac{12}{30}$",
        "explanation": "Dzielimy liczbę przypadków korzystnych przez liczbę przypadków spełniających warunek",
        "interactive_choice": {
          "prompt": "Który wzór zastosujemy do obliczenia $P(A|B)$?",
          "options": [
            {
              "id": "A",
              "text": "$P(A|B) = \\frac{\\text{liczba przypadków sprzyjających A i B}}{\\text{liczba przypadków sprzyjających B}}$",
              "feedback": "Perfekcyjnie! To klasyczna definicja prawdopodobieństwa warunkowego przez zliczanie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$P(A|B) = P(A) \\times P(B)$",
              "feedback": "To wzór na przecięcie zdarzeń niezależnych, nie na prawdopodobieństwo warunkowe.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$P(A|B) = P(A) + P(B) - P(A∩B)$",
              "feedback": "To wzór na sumę zdarzeń, nie na prawdopodobieństwo warunkowe.",
              "is_correct": false
            }
          ],
          "explanation_after": "$P(A|B) = |A∩B|/|B|$ to podstawowy wzór na prawdopodobieństwo warunkowe przez zliczanie przypadków."
        }
      },
      {
        "step": 10,
        "hint": "Jak uprościć ułamek $\\frac{12}{30}$?",
        "expression": "$\\frac{12}{30} = \\frac{12 \\div 6}{30 \\div 6} = \\frac{2}{5}$",
        "explanation": "Dzielimy licznik i mianownik przez największy wspólny dzielnik $6$"
      },
      {
        "step": 11,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "Prawdopodobieństwo wynosi $\\frac{2}{5} = 0{,}4 = 40\\%$",
        "explanation": "Otrzymujemy prawdopodobieństwo równe $2/5$"
      }
    ],
    "solutions": [
      "$\\frac{2}{5}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:04:45.576Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_dice",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Rzucamy raz dwiema symetrycznymi, sześciennymi kostkami do gry i dodajemy liczby uzyskanych oczek. Oblicz prawdopodobieństwo otrzymania sumy oczek równej $7$, jeśli wiadomo, że na jednej z kostek wypadło $5$ oczek.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki rodzaj prawdopodobieństwa musimy obliczyć?",
        "expression": "$P(suma = 7 \\mid na jednej kostce wypadło 5)$",
        "explanation": "To prawdopodobieństwo warunkowe - szukamy prawdopodobieństwa zdarzenia $A$ pod warunkiem zajścia zdarzenia $B$",
        "why": "Prawdopodobieństwo warunkowe obliczamy wzorem $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$"
      },
      {
        "step": 2,
        "hint": "Jak interpretować warunek 'na jednej z kostek wypadło $5$ oczek'?",
        "expression": "Zdarzenie $B$: przynajmniej jedna kostka pokazuje $5$",
        "explanation": "Definiujemy zdarzenie będące warunkiem",
        "interactive_choice": {
          "prompt": "Co oznacza sformułowanie 'na jednej z kostek wypadło $5$ oczek'?",
          "options": [
            {
              "id": "A",
              "text": "Dokładnie jedna kostka pokazuje $5$ (druga nie)",
              "feedback": "To częsta interpretacja, ale zwrot 'na jednej z kostek' oznacza 'na przynajmniej jednej'.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przynajmniej jedna kostka pokazuje $5$",
              "feedback": "Dokładnie! W teorii prawdopodobieństwa 'jedna z kostek' oznacza 'przynajmniej jedna'.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Pierwsza kostka pokazuje $5$",
              "feedback": "Nie, warunek nie wskazuje konkretnej kostki.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek B oznacza: pierwsza kostka = $5$ LUB druga kostka = $5$ LUB obie = $5$"
        }
      },
      {
        "step": 3,
        "hint": "Ile jest wszystkich możliwych wyników rzutu dwoma kostkami?",
        "expression": "Przestrzeń $\\Omega$ ma $6 \\times 6 = 36$ elementów",
        "explanation": "Każdy wynik to para $(i,j)$ gdzie $i,j \\in \\{1,2,3,4,5,6\\}$"
      },
      {
        "step": 4,
        "hint": "Które wyniki spełniają warunek 'przynajmniej jedna kostka pokazuje $5$'?",
        "expression": "$B = \\{(5,1), (5,2), (5,3), (5,4), (5,5), (5,6), (1,5), (2,5), (3,5), (4,5), (6,5)\\}$",
        "explanation": "Zdarzenie B zawiera $11$ elementów: $6$ z pierwszą kostką=$5$ plus $5$ z drugą kostką=$5$"
      },
      {
        "step": 5,
        "hint": "Które z tych wyników dają dodatkowo sumę równą $7$?",
        "expression": "$A \\cap B = \\{(5,2), (2,5)\\}$",
        "explanation": "Tylko te dwie pary spełniają oba warunki",
        "interactive_choice": {
          "prompt": "Które pary $(\\text{kostka}_1, \\text{kostka}_2)$ spełniają oba warunki: suma=$7$ i przynajmniej jedna kostka=$5$?",
          "options": [
            {
              "id": "A",
              "text": "$(5,2)$ i $(2,5)$",
              "feedback": "$5+2=7$ i $2+5=7$, obie pary zawierają cyfrę 5.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$(5,2)$, $(2,5)$ i $(5,5)$",
              "feedback": "Nie, bo $5+5=10 \\neq 7$. Para $(5,5)$ nie daje sumy $7$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko $(5,2)$",
              "feedback": "Zapomniałeś o $(2,5)$! To różne wyniki - pierwsza i druga kostka mają znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenie $A \\cap B$ to wyniki dające sumę $7$ i zawierające przynajmniej jedną piątkę"
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P(A|B) = \\frac{P(A \\cap B)}{P(B)} = \\frac{|A \\cap B|}{|B|} = \\frac{2}{11}$",
        "explanation": "Dzielimy liczbę wyników sprzyjających przez liczbę wszystkich wyników spełniających warunek",
        "why": "W prawdopodobieństwie warunkowym zmniejszamy przestrzeń do zdarzeń spełniających warunek"
      },
      {
        "step": 7,
        "hint": "Czy wynik ma sens intuicyjnie?",
        "expression": "$P(suma = 7 \\mid jedna kostka = 5) = \\frac{2}{11} \\approx 0,182$",
        "explanation": "Spośród 11 możliwych wyników z przynajmniej jedną piątką, tylko $2$ dają sumę $7$"
      }
    ],
    "solutions": [
      "$\\frac{2}{11}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-28T07:05:24.236Z",
    "thinking_used": true
  },
  {
    "id": "probability_dice_divisible_by_3",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "Rzucamy trzema czworościennymi symetrycznymi kostkami z liczbami $1$, $2$, $3$, $4$ na poszczególnych ściankach. Oblicz prawdopodobieństwo zdarzenia - suma otrzymanych liczb jest podzielna przez $3$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest wszystkich możliwych wyników rzutu trzema kostkami?",
        "expression": "Każda kostka może pokazać $4$ różne liczby, więc wszystkich wyników jest $4^3 = 64$",
        "explanation": "Przestrzeń wszystkich zdarzeń elementarnych ma $64$ elementy"
      },
      {
        "step": 2,
        "hint": "Jak najefektywniej sprawdzić, czy suma trzech liczb jest podzielna przez $3$?",
        "expression": "Reszty z dzielenia przez 3: $1 \\equiv 1 \\pmod{3}$, $2 \\equiv 2 \\pmod{3}$, $3 \\equiv 0 \\pmod{3}$, $4 \\equiv 1 \\pmod{3}$",
        "explanation": "Każda liczba na kostce daje określoną resztę z dzielenia przez $3$",
        "interactive_choice": {
          "prompt": "Którą metodę wybierzesz do sprawdzenia podzielności przez 3?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzę wszystkie $64$ możliwości i policzę sumy",
              "feedback": "Możliwe, ale bardzo pracochłonne. Da poprawny wynik, ale zajmie dużo czasu.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyję właściwości reszt z dzielenia przez $3$",
              "feedback": "Świetny pomysł! Liczby $1$, $2$, $3$, $4$ dają reszty $1$, $2$, $0$, $1$ przy dzieleniu przez $3$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Sprawdzę wzorcem - co trzecia suma będzie podzielna",
              "feedback": "To niekoniecznie prawda. Rozkład nie musi być równomierny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Właściwości reszt pozwalają nam pracować z mniejszymi liczbami i zobaczyć wzorce."
        }
      },
      {
        "step": 3,
        "hint": "Ile razy każda reszta pojawia się na kostkach?",
        "expression": "Reszta $0$: raz (liczba $3$), Reszta $1$: dwa razy (liczby $1$, $4$), Reszta $2$: raz (liczba $2$)",
        "explanation": "Na każdej kostce mamy rozkład reszt: $(0,1,1,2)$",
        "why": "Suma trzech liczb jest podzielna przez $3$, gdy suma ich reszt jest podzielna przez $3$."
      },
      {
        "step": 4,
        "hint": "Jakie kombinacje reszt dają sumę podzielną przez 3?",
        "expression": "Korzystne kombinacje reszt: $(0,0,0)$, $(1,1,1)$, $(2,2,2)$, $(0,1,2)$, $(0,2,1)$, $(1,0,2)$, $(1,2,0)$, $(2,0,1)$, $(2,1,0)$",
        "explanation": "Mamy $9$ typów korzystnych kombinacji reszt",
        "interactive_choice": {
          "prompt": "Które kombinacje trzech reszt dają sumę podzielną przez 3?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $(0,0,0)$, $(1,1,1)$, $(2,2,2)$",
              "feedback": "To tylko część przypadków. Brakuje kombinacji mieszanych.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$(0,0,0)$, $(1,1,1)$, $(2,2,2)$, $(0,1,2)$ i permutacje",
              "feedback": "Dokładnie! Suma $0+0+0=0$, $1+1+1=3$, $2+2+2=6$, $0+1+2=3$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wszystkie które dają sumę $3$, $6$ lub $9$",
              "feedback": "Tak, ale lepiej myśleć o konkretnych kombinacjach reszt.",
              "is_correct": true
            }
          ],
          "explanation_after": "Potrzebujemy kombinacji gdzie suma reszt $\\equiv 0$ (mod $3$)."
        }
      },
      {
        "step": 5,
        "hint": "Jak policzyć liczbę sposobów dla każdej kombinacji reszt?",
        "expression": "$(0,0,0)$: $1^3 = 1$ sposób, $(1,1,1)$: $2^3 = 8$ sposobów, $(2,2,2)$: $1^3 = 1$ sposób",
        "explanation": "Dla identycznych reszt: potęgujemy liczbę wystąpień tej reszty"
      },
      {
        "step": 6,
        "hint": "Ile sposobów mają kombinacje mieszane typu $(0,1,2)$?",
        "expression": "Kombinacje $(0,1,2)$ i permutacje: $6 \\times (1 \\times 2 \\times 1) = 12$ sposobów",
        "explanation": "$6$ permutacji reszt $(0,1,2)$, każda daje $2$ sposoby wyboru liczb",
        "interactive_choice": {
          "prompt": "Jak policzyć liczbę sposobów dla kombinacji $(0,1,2)$ z permutacjami?",
          "options": [
            {
              "id": "A",
              "text": "$1 \\times 2 \\times 1 \\times 3! = 12$ sposobów",
              "feedback": "Prawie! Ale $3!$ to permutacje pozycji, nie mnożymy przez liczbę permutacji.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Każda z $6$ permutacji: $1 \\times 2 \\times 1 = 2$ sposoby, razem $12$",
              "feedback": "Dokładnie! $(0,1,2)$, $(0,2,1)$, $(1,0,2)$, $(1,2,0)$, $(2,0,1)$, $(2,1,0)$ - każda po $2$ sposoby.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$1+2+1 = 4$ sposoby dla każdej permutacji",
              "feedback": "Nie, to iloczyn liczby wystąpień każdej reszty: $1 \\times 2 \\times 1 = 2$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla każdej permutacji reszt mnożymy liczby ich wystąpień na kostce."
        }
      },
      {
        "step": 7,
        "hint": "Ile łącznie mamy przypadków korzystnych?",
        "expression": "Przypadki korzystne: $1 + 8 + 1 + 12 = 22$",
        "explanation": "Sumujemy wszystkie sposoby otrzymania sumy podzielnej przez $3$"
      },
      {
        "step": 8,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P = \\frac{22}{64} = \\frac{11}{32}$",
        "explanation": "Prawdopodobieństwo to stosunek przypadków korzystnych do wszystkich możliwych"
      }
    ],
    "solutions": [
      "$P = \\frac{11}{32}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:06:37.790Z",
    "thinking_used": true
  },
  {
    "id": "dice_probability_divisible_by_8",
    "topic": "Prawdopodobieństwo zdarzeń złożonych",
    "difficulty": 4,
    "statement": "Rzucamy trzema symetrycznymi sześciennymi kostkami do gry. Oblicz prawdopodobieństwo zdarzenia - suma otrzymanych oczek jest liczbą podzielną przez $8$ i jednocześnie niepodzielną przez $16$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki jest zakres możliwych sum przy rzucie trzema kostkami?",
        "expression": "Minimalna suma: $1+1+1 = 3$, maksymalna suma: $6+6+6 = 18$",
        "explanation": "Suma może przyjmować wartości od $3$ do $18$"
      },
      {
        "step": 2,
        "hint": "Które liczby z przedziału $[3, 18]$ są podzielne przez $8$?",
        "expression": "Liczby podzielne przez $8$: $\\{8, 16\\}$",
        "explanation": "Z zakresu możliwych sum tylko $8$ i $16$ dzielą się przez $8$",
        "interactive_choice": {
          "prompt": "Które liczby z zakresu $3$-$18$ są podzielne przez $8$?",
          "options": [
            {
              "id": "A",
              "text": "Tylko liczba $8$",
              "feedback": "Nie - sprawdź także $16$. Liczby podzielne przez $8$: $8$, $16$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Liczby $8$ i $16$",
              "feedback": "Dokładnie! W przedziale $[3,18]$ tylko te dwie liczby dzielą się przez $8$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczby $8$, $16$ i $24$",
              "feedback": "Nie - $24 > 18$, więc nie jest osiągalna przy trzech kostkach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczby podzielne przez 8 w zakresie $[3,18]$: $8$ i $16$"
        }
      },
      {
        "step": 3,
        "hint": "Która z liczb $8$ i $16$ spełnia warunek 'niepodzielna przez $16$'?",
        "expression": "Szukana suma: $S = 8$",
        "explanation": "Musimy znaleźć prawdopodobieństwo zdarzenia suma = $8$",
        "interactive_choice": {
          "prompt": "Które liczby są podzielne przez $8$, ale niepodzielne przez $16$?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $8$",
              "feedback": "Świetnie! $8 \\div 16 = 0,5$ - nie dzieli się bez reszty.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko $16$",
              "feedback": "Nie - $16÷16 = 1$, więc $16$ jest podzielne przez $16$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Obie liczby $8$ i $16$",
              "feedback": "Nie - $16$ dzieli się przez $16$, więc nie spełnia warunków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Tylko suma $8$ spełnia oba warunki: podzielna przez $8$ i niepodzielna przez $16$"
        }
      },
      {
        "step": 4,
        "hint": "Jak najlepiej policzyć liczbę sposobów uzyskania sumy $8$?",
        "expression": "Szukamy wszystkich trójek $(a,b,c)$ gdzie $a+b+c=8$ i $1 \\leq a,b,c \\leq 6$",
        "explanation": "Systematycznie znajdziemy wszystkie kombinacje",
        "interactive_choice": {
          "prompt": "Którą metodę wybierzesz do policzenia przypadków dla sumy $8$?",
          "options": [
            {
              "id": "A",
              "text": "Systematyczne wyliczanie wszystkich kombinacji",
              "feedback": "Doskonały wybór! Dla małej liczby przypadków to najpewniejsza metoda.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użycie wzoru na współczynniki wielomianu",
              "feedback": "Możliwe, ale dla tego przypadku bardziej skomplikowane niż potrzeba.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Funkcje tworzące",
              "feedback": "Za zaawansowane dla tego problemu - wystarczy proste wyliczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla sumy $8$ najprościej wyliczyć wszystkie możliwe kombinacje $($a$,$ b$,$ c$)$"
        }
      },
      {
        "step": 5,
        "hint": "Ile jest sposobów na rozmieszczenie liczb sumujących się do $8$?",
        "expression": "Kombinacje dla $a+b+c=8$: $(1,1,6), (1,2,5), (1,3,4), (1,4,3), (1,5,2), (1,6,1), (2,1,5), (2,2,4), (2,3,3), (2,4,2), (2,5,1), (3,1,4), (3,2,3), (3,3,2), (3,4,1), (4,1,3), (4,2,2), (4,3,1), (5,1,2), (5,2,1), (6,1,1)$",
        "explanation": "Wszystkie możliwe kombinacje trzech liczb z kostki dające sumę $8$",
        "why": "Każda kombinacja jest jednakowo prawdopodobna przy uczciwych kostkach"
      },
      {
        "step": 6,
        "hint": "Ile łącznie jest korzystnych wyników?",
        "expression": "Liczba korzystnych wyników: $21$",
        "explanation": "Policzyliśmy $21$ różnych kombinacji dających sumę $8$"
      },
      {
        "step": 7,
        "hint": "Jaka jest całkowita liczba możliwych wyników przy rzucie trzema kostkami?",
        "expression": "Całkowita liczba wyników: $6^3 = 216$",
        "explanation": "Każda kostka ma $6$ możliwości, więc łącznie $6 \\times 6 \\times 6 = 216$ wyników"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć prawdopodobieństwo korzystnego zdarzenia?",
        "expression": "$P = \\frac{21}{216} = \\frac{7}{72}$",
        "explanation": "Prawdopodobieństwo to stosunek liczby wyników korzystnych do wszystkich możliwych",
        "why": "Upraszczamy ułamek dzieląc licznik i mianownik przez $3$"
      }
    ],
    "solutions": [
      "$\\frac{7}{72}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:07:19.667Z",
    "thinking_used": true
  },
  {
    "id": "probability_cubes_squares",
    "topic": "Prawdopodobieństwo i teoria liczb",
    "difficulty": 4,
    "statement": "Rzucamy trzy razy symetryczną sześcienną kostką do gry. Oblicz prawdopodobieństwo zdarzenia - suma kwadratów liczb wyrzuconych oczek nie jest podzielna przez $3$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest wszystkich możliwych wyników trzech rzutów kostką?",
        "expression": "Każdy rzut ma $6$ możliwych wyników, więc łącznie: $6^3 = 216$ przypadków",
        "explanation": "Przestrzeń wszystkich zdarzeń elementarnych"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do analizy podzielności przez 3?",
        "expression": "Zbadamy reszty z dzielenia $k^2$ przez $3$ dla $k = 1, 2, 3, 4, 5, 6$",
        "explanation": "Wykorzystamy właściwość: $(a+b) \\bmod 3 = (a \\bmod 3 + b \\bmod 3) \\bmod 3$",
        "interactive_choice": {
          "prompt": "Którą metodę wybierzesz do sprawdzenia kiedy suma kwadratów jest podzielna przez $3$?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić wszystkie $216$ przypadków bezpośrednio",
              "feedback": "Możliwe, ale bardzo pracochłonne i podatne na błędy.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć arytmetyki modularnej - zbadać reszty z dzielenia kwadratów przez $3$",
              "feedback": "Świetny wybór! To znacznie uprości obliczenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zastosować wzory na sumy kwadratów",
              "feedback": "Wzory na sumy nie pomogą z podzielną przez $3$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Arytmetyka modularna pozwoli zredukować problem do analizy tylko reszt z dzielenia przez $3$."
        }
      },
      {
        "step": 3,
        "hint": "Jakie reszty dają kwadraty liczb $1$, $2$, $3$, $4$, $5$, $6$ przy dzieleniu przez $3$?",
        "expression": "$1^2 \\equiv 1, 2^2 \\equiv 1, 3^2 \\equiv 0, 4^2 \\equiv 1, 5^2 \\equiv 1, 6^2 \\equiv 0 \\pmod{3}$",
        "explanation": "Na kostce: $4$ liczby dają resztę $1$, a $2$ liczby dają resztę $0$",
        "why": "To fundamentalne spostrzeżenie - kwadraty mogą mieć tylko reszty $0$ lub $1$ przy dzieleniu przez $3$, co drastycznie upraszcza problem.",
        "interactive_choice": {
          "prompt": "Które z poniższych stwierdzeń o resztach kwadratów jest prawdziwe?",
          "options": [
            {
              "id": "A",
              "text": "Kwadraty liczb $1$, $4$, $5$ dają resztę $1$, a kwadraty $2$, $3$, $6$ dają resztę $0$",
              "feedback": "Nie, sprawdź ponownie: $2^2 = 4 \\equiv 1 \\pmod{3}$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Kwadraty liczb $1$, $2$, $4$, $5$ dają resztę $1$, a kwadraty $3$, $6$ dają resztę $0$",
              "feedback": "Dokładnie! Liczby niepodzielne przez 3 mają kwadraty $\\equiv 1 \\pmod{3}$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Każdy kwadrat daje inną resztę przy dzieleniu przez $3$",
              "feedback": "Nie, istnieją tylko dwie możliwe reszty: $0$ i $1$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Klucz: jeśli $k \\not\\equiv 0 \\pmod{3}$, to $k^2 \\equiv 1 \\pmod{3}$. Jeśli $k \\equiv 0 \\pmod{3}$, to $k^2 \\equiv 0 \\pmod{3}$."
        }
      },
      {
        "step": 4,
        "hint": "Kiedy suma trzech reszt będzie podzielna przez $3$?",
        "expression": "Suma trzech reszt jest podzielna przez 3, gdy:\n• $0 + 0 + 0 = 0 \\equiv 0 \\pmod{3}$\n• $1 + 1 + 1 = 3 \\equiv 0 \\pmod{3}$",
        "explanation": "To są jedyne kombinacje reszt $0$ i $1$, które dają sumę podzielną przez $3$"
      },
      {
        "step": 5,
        "hint": "Ile jest przypadków gdy wszystkie trzy kwadraty mają resztę $0$?",
        "expression": "Resztę $0$: liczby $\\{3,6\\}$, więc $2^3 = 8$ przypadków",
        "explanation": "Przypadki typu $(3,3,3)$, $(3,3,6)$, $(3,6,3)$, itd."
      },
      {
        "step": 6,
        "hint": "Ile jest przypadków gdy wszystkie trzy kwadraty mają resztę $1$?",
        "expression": "Resztę 1: liczby {$1$, $2$, $4$, $5$}, więc $4^3 = 64$ przypadki",
        "explanation": "Przypadki z liczbami tylko z zestawu $\\{1,2,4,5\\}$"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo zdarzenia przeciwnego?",
        "expression": "Przypadki gdy suma JEST podzielna przez 3: $8 + 64 = 72$",
        "explanation": "Łączymy przypadki z resztami $\\left(0,0,0\\right)$ i $\\left(1,1,1\\right)$",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do obliczenia końcowego prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Liczyć bezpośrednio przypadki gdy suma NIE jest podzielna przez $3$",
              "feedback": "Możliwe, ale łatwiej przez zdarzenie przeciwne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć $P(A^c) = 1 - P(A)$, gdzie $A$ = suma podzielna przez $3$",
              "feedback": "Świetnie! Już mamy liczbę przypadków sprzyjających $A$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na prawdopodobieństwo całkowite",
              "feedback": "Tu nie jest potrzebny - mamy już podział przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenie przeciwne jest prostsze do obliczenia, bo już znamy przypadki sprzyjające."
        }
      },
      {
        "step": 8,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "Przypadki gdy suma NIE jest podzielna przez 3: $216 - 72 = 144$",
        "explanation": "Zdarzenie przeciwne do tego co policzyliśmy"
      },
      {
        "step": 9,
        "hint": "Jak uprościć otrzymany ułamek?",
        "expression": "$P = \\frac{144}{216} = \\frac{144}{216} = \\frac{2 \\cdot 72}{3 \\cdot 72} = \\frac{2}{3}$",
        "explanation": "Dzielimy licznik i mianownik przez ich NWD = $72$"
      }
    ],
    "solutions": [
      "$\\frac{2}{3}$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:08:10.982Z",
    "thinking_used": true
  },
  {
    "id": "probability_exactly_one_green",
    "topic": "Prawdopodobieństwo - kombinacje",
    "difficulty": 4,
    "statement": "W pudełku znajduje się $10$ rozróżnialnych kul: $2$ białe, $3$ czerwone i $5$ zielonych. Losujemy jednocześnie $3$ kule. Oblicz prawdopodobieństwo zdarzenia: tylko jedna z wylosowanych kul będzie zielona.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza sformułowanie 'tylko jedna z wylosowanych kul będzie zielona'?",
        "expression": "Zdarzenie A: dokładnie $1$ zielona i $2$ niezielone spośród $3$ wylosowanych",
        "explanation": "Interpretujemy zadanie jako kombinację $1$ zielonej z $5$ i $2$ niezielonych z $5$",
        "interactive_choice": {
          "prompt": "Jak zinterpretować zdarzenie 'tylko jedna z wylosowanych kul będzie zielona'?",
          "options": [
            {
              "id": "A",
              "text": "Dokładnie jedna zielona i dwie pozostałe (białe lub czerwone)",
              "feedback": "Dokładnie! To znaczy $1$ zielona + $2$ spośród ($2$ białych + $3$ czerwonych).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Co najmniej jedna zielona",
              "feedback": "Nie - 'tylko jedna' oznacza dokładnie jedną, nie więcej.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Jedna zielona i dwie białe",
              "feedback": "Za wąska interpretacja - dwie pozostałe mogą być białe LUB czerwone.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenie: dokładnie $1$ zielona + $2$ spośród $(2$ białe + $3$ czerwone) = $2$ spośród $5$ niezielonych kul."
        }
      },
      {
        "step": 2,
        "hint": "Którą metodą najlepiej obliczyć to prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{liczba sposobów wybrania dokładnie 1 zielonej}{liczba wszystkich sposobów wybrania 3 kul}$",
        "explanation": "Stosujemy wzór na prawdopodobieństwo klasyczne",
        "interactive_choice": {
          "prompt": "Jak podejść do obliczenia prawdopodobieństwa w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "Prawdopodobieństwo klasyczne: $P(A) = \\frac{\\text{liczba zdarzeń sprzyjających}}{\\text{liczba wszystkich zdarzeń}}$",
              "feedback": "Świetny wybór! Użyjemy kombinacji do policzenia zdarzeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Prawdopodobieństwo warunkowe",
              "feedback": "Nie jest potrzebne - nie mamy warunków dodatkowych.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozkład hipergeometryczny",
              "feedback": "To poprawne podejście teoretyczne, ale kombinacje są prostsze tutaj.",
              "is_correct": true
            }
          ],
          "explanation_after": "Użyjemy klasycznej definicji prawdopodobieństwa z kombinacjami."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest wszystkich sposobów wybrania $3$ kul z $10$?",
        "expression": "$\\binom{10}{3} = \\frac{10!}{3!(10-3)!} = \\frac{10!}{3! \\cdot 7!} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "Obliczamy liczbę wszystkich możliwych sposobów wybrania $3$ kul spośród $10$",
        "why": "To mianownik naszego prawdopodobieństwa - wszystkie możliwe zdarzenia elementarne."
      },
      {
        "step": 4,
        "hint": "Ile sposobów jest wybrania dokładnie jednej zielonej kuli?",
        "expression": "$\\binom{5}{1} \\times \\binom{5}{2}$",
        "explanation": "Liczba sposobów = $\\binom{1}{1}$ × $\\binom{2}{2}$",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wybrania dokładnie 1 zielonej i 2 niezielonych kul?",
          "options": [
            {
              "id": "A",
              "text": "$\\binom{5}{1} \\times \\binom{5}{2}$ - $1$ z $5$ zielonych razy $2$ z $5$ niezielonych",
              "feedback": "Perfekcyjnie! Mnożymy niezależne wybory.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\binom{5}{1} + \\binom{5}{2}$ - $1$ z $5$ zielonych plus $2$ z $5$ niezielonych",
              "feedback": "Nie - dodawanie używamy dla zdarzeń rozłącznych, tu mnożymy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\binom{10}{3} - \\binom{5}{3}$ - wszystkie minus 3 zielone",
              "feedback": "To dałoby co najmniej jedną niezieloną, nie dokładnie jedną zieloną.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mnożymy bo wybory są niezależne: najpierw $1$ z $5$ zielonych, potem $2$ z $5$ niezielonych."
        }
      },
      {
        "step": 5,
        "hint": "Ile wynoszą te kombinacje?",
        "expression": "$\\binom{5}{1} = 5$ oraz $\\binom{5}{2} = \\frac{5!}{2!(5-2)!} = \\frac{5 \\cdot 4}{2 \\cdot 1} = 10$",
        "explanation": "Obliczamy każdą kombinację osobno"
      },
      {
        "step": 6,
        "hint": "Jaki jest iloczyn tych kombinacji?",
        "expression": "$\\binom{5}{1} \\times \\binom{5}{2} = 5 \\times 10 = 50$",
        "explanation": "Liczba zdarzeń sprzyjających wynosi $50$"
      },
      {
        "step": 7,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{50}{120} = \\frac{5}{12}$",
        "explanation": "Dzielimy liczbę zdarzeń sprzyjających przez liczbę wszystkich zdarzeń i upraszczamy ułamek"
      }
    ],
    "solutions": [
      "$\\frac{5}{12}$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:08:47.556Z",
    "thinking_used": true
  },
  {
    "id": "probability_at_least_one_white",
    "topic": "Prawdopodobieństwo - kombinatoryka",
    "difficulty": 3,
    "statement": "W pudełku znajduje się $10$ rozróżnialnych kul: $2$ białe, $3$ czerwone i $5$ zielonych. Losujemy jednocześnie $3$ kule. Oblicz prawdopodobieństwo zdarzenia: co najmniej jedna wylosowana kula będzie biała.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile mamy kul każdego koloru i ile kul losujemy?",
        "expression": "Mamy: $2$ białe, $3$ czerwone, $5$ zielonych (razem $10$ kul). Losujemy $3$ kule.",
        "explanation": "Identyfikujemy dane zadania"
      },
      {
        "step": 2,
        "hint": "Którą metodą najłatwiej obliczyć prawdopodobieństwo 'co najmniej jedna biała'?",
        "expression": "Użyjemy wzoru: $P(co najmniej jedna biała) = 1 - P(żadna biała)$",
        "explanation": "Obliczamy prawdopodobieństwo zdarzenia przeciwnego",
        "why": "Metodą dopełnienia często zamieniamy skomplikowane zdarzenie 'co najmniej jeden' na prostsze 'żaden'.",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć $P(\\text{co najmniej jedna biała})$?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio: $P(1 \\text{ biała})$ + $P(2 \\text{ białe})$ + $P(3 \\text{ białe})$",
              "feedback": "Możliwe, ale trzeba liczyć $3$ osobne przypadki - dużo pracy!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez dopełnienie: $1 - P(\\text{żadna biała})$",
              "feedback": "Świetnie! Tylko jeden przypadek do obliczenia zamiast trzech.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na prawdopodobieństwo warunkowe",
              "feedback": "Tu nie mamy warunków - to nie ten typ zadania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenie przeciwne 'żadna biała' to znacznie prostsze obliczenie niż sumowanie trzech przypadków."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wybrać $3$ kule z $10$?",
        "expression": "Całkowita liczba sposobów: $\\binom{10}{3} = \\frac{10!}{3!(10-3)!} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "To jest liczba wszystkich możliwych wyników"
      },
      {
        "step": 4,
        "hint": "Z jakich kul musimy wybierać $3$ kule, żeby żadna nie była biała?",
        "expression": "Kule niebiałe: $3 + 5 = 8$. Sposoby wyboru $3$ z $8$: $\\binom{8}{3} = \\frac{8 \\cdot 7 \\cdot 6}{3 \\cdot 2 \\cdot 1} = 56$",
        "explanation": "Obliczamy liczbę sposobów wybrania $3$ kul niebiałych",
        "interactive_choice": {
          "prompt": "Ile mamy kul niebiałych i jak obliczyć liczbę sposobów wyboru $3$ z nich?",
          "options": [
            {
              "id": "A",
              "text": "3 czerwone + 5 zielonych = $8$ niebiałych, więc $\\binom{8}{3}$",
              "feedback": "Dokładnie! Mamy $8$ kul niebiałych do wyboru.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Osobno: $\\binom{3}{3} + \\binom{5}{3}$ (wszystkie czerwone lub wszystkie zielone)",
              "feedback": "To byłoby tylko dla przypadków jednokolorowych, a nie dla dowolnych $3$ niebiałych.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\binom{3}{1} \\cdot \\binom{5}{2}$ + $\\binom{3}{2} \\cdot \\binom{5}{1}$ + $\\binom{3}{0} \\cdot \\binom{5}{3}$",
              "feedback": "To jest poprawne, ale skomplikowane! Prostsze jest $\\binom{8}{3}$.",
              "is_correct": true
            }
          ],
          "explanation_after": "Najprościej: mamy $8$ kul niebiałych, wybieramy $3$, więc $\\binom{8}{3}$."
        }
      },
      {
        "step": 5,
        "hint": "Jakie jest prawdopodobieństwo, że żadna z $3$ wylosowanych kul nie będzie biała?",
        "expression": "$P(żadna biała) = \\frac{\\binom{8}{3}}{\\binom{10}{3}} = \\frac{56}{120} = \\frac{7}{15}$",
        "explanation": "Prawdopodobieństwo zdarzenia przeciwnego"
      },
      {
        "step": 6,
        "hint": "Jak teraz obliczyć prawdopodobieństwo tego, co było w zadaniu?",
        "expression": "$P(co najmniej jedna biała) = 1 - P(żadna biała) = 1 - \\frac{7}{15} = \\frac{15-7}{15} = \\frac{8}{15}$",
        "explanation": "Odejmujemy od $1$ prawdopodobieństwo zdarzenia przeciwnego"
      }
    ],
    "solutions": [
      "$\\frac{8}{15}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:09:22.747Z",
    "thinking_used": true
  },
  {
    "id": "probability_different_colors",
    "topic": "Prawdopodobieństwo - kombinacje",
    "difficulty": 3,
    "statement": "W pudełku znajduje się $10$ rozróżnialnych kul: $2$ białe, $3$ czerwone i $5$ zielonych. Losujemy jednocześnie $3$ kule. Oblicz prawdopodobieństwo zdarzenia: każda kula będzie w innym kolorze.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki typ prawdopodobieństwa będziemy obliczać?",
        "expression": "Szukamy $P(A) = \\frac{|A|}{|\\Omega|}$, gdzie $A$ - zdarzenie korzystne",
        "explanation": "Stosujemy klasyczną definicję prawdopodobieństwa"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Obliczamy $P = \\frac{liczba\\ sposobów\\ wybrania\\ 3\\ kul\\ różnych\\ kolorów}{liczba\\ sposobów\\ wybrania\\ 3\\ kul\\ z\\ 10}$",
        "explanation": "Definiujemy problem w kategoriach kombinacji",
        "interactive_choice": {
          "prompt": "Którą metodę wybierzesz do obliczenia prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Klasyczne prawdopodobieństwo: $P = \\frac{zdarzenia korzystne}{wszystkie możliwe}$",
              "feedback": "Idealny wybór! To standardowe podejście do problemów kombinatorycznych.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Prawdopodobieństwo warunkowe i reguła mnożenia",
              "feedback": "Możliwe, ale bardziej złożone dla tego typu zadania.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Bezpośrednie liczenie wszystkich przypadków",
              "feedback": "Zbyt pracochłonne - mamy $10$ różnych kul, to dużo przypadków!",
              "is_correct": false
            }
          ],
          "explanation_after": "Klasyczne prawdopodobieństwo z kombinacjami to najefektywniejsza metoda."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów możemy wybrać $3$ kule z $10$?",
        "expression": "$|\\Omega| = \\binom{10}{3} = \\frac{10!}{3!(10-3)!} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "Liczba wszystkich możliwych wyborów $3$ kul z $10$",
        "why": "Używamy wzoru na kombinacje bez powtórzeń, bo kule są rozróżnialne i nie ma znaczenia kolejność wyboru."
      },
      {
        "step": 4,
        "hint": "Co oznacza zdarzenie 'każda kula w innym kolorze'?",
        "expression": "Zdarzenie A: wybieramy dokładnie $1$ białą, $1$ czerwoną i $1$ zieloną kulę",
        "explanation": "Precyzyjnie definiujemy zdarzenie korzystne"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć liczbę sposobów wyboru kul różnych kolorów?",
        "expression": "$|A| = \\binom{2}{1} \\cdot \\binom{3}{1} \\cdot \\binom{5}{1}$",
        "explanation": "Liczbę sposobów wyboru po jednej kuli z każdego koloru",
        "interactive_choice": {
          "prompt": "W jaki sposób najlepiej obliczyć liczbę zdarzeń korzystnych?",
          "options": [
            {
              "id": "A",
              "text": "Jako iloczyn: $\\binom{2}{1} \\cdot \\binom{3}{1} \\cdot \\binom{5}{1}$",
              "feedback": "Doskonale! Niezależnie wybieramy z każdego koloru.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako suma kombinacji dla każdego koloru",
              "feedback": "Nie - suma oznaczałaby 'lub', a my chcemy 'i' (wszystkie kolory naraz).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Permutacje kolorów razy wybór kul",
              "feedback": "Za skomplikowane - kolejność kolorów nie ma znaczenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mnożymy kombinacje bo wybieramy niezależnie z każdego koloru."
        }
      },
      {
        "step": 6,
        "hint": "Ile wynoszą poszczególne kombinacje?",
        "expression": "$\\binom{2}{1} = 2$, $\\binom{3}{1} = 3$, $\\binom{5}{1} = 5$",
        "explanation": "Obliczamy każdą kombinację oddzielnie"
      },
      {
        "step": 7,
        "hint": "Jaka jest liczba zdarzeń korzystnych?",
        "expression": "$|A| = 2 \\cdot 3 \\cdot 5 = 30$",
        "explanation": "Mnożymy liczbę sposobów wyboru z każdego koloru"
      },
      {
        "step": 8,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{30}{120} = \\frac{1}{4} = 0,25$",
        "explanation": "Obliczamy prawdopodobieństwo i upraszczamy ułamek"
      }
    ],
    "solutions": [
      "$\\frac{1}{4}$",
      "$0,25$",
      "$25\\%$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-28T07:09:55.586Z",
    "thinking_used": true
  },
  {
    "id": "probability_at_least_two_red",
    "topic": "Prawdopodobieństwo - kombinacje",
    "difficulty": 4,
    "statement": "W pudełku znajduje się $10$ rozróżnialnych kul: $2$ białe, $3$ czerwone i $5$ zielonych. Losujemy jednocześnie $3$ kule. Oblicz prawdopodobieństwo zdarzenia: co najmniej $2$ kule będą czerwone.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile kul każdego koloru mamy w pudełku?",
        "expression": "$2$ białe + $3$ czerwone + $5$ zielonych = $10$ kul razem",
        "explanation": "Identyfikujemy dane: losujemy $3$ kule z $10$ dostępnych"
      },
      {
        "step": 2,
        "hint": "Którą metodą najlepiej obliczyć prawdopodobieństwo \"co najmniej 2\"?",
        "expression": "$P(\\text{co najmniej 2 czerwone}) = P(\\text{dokładnie 2}) + P(\\text{dokładnie 3})$",
        "explanation": "Rozkładamy zdarzenie na rozłączne przypadki",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć $P(\\text{co najmniej 2 czerwone})$?",
          "options": [
            {
              "id": "A",
              "text": "$P$(dokładnie $2$) + $P$(dokładnie $3$)",
              "feedback": "Dobry wybór! Bezpośrednie liczenie przypadków korzystnych.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$1 - P(\\text{mniej niż 2}) = 1 - P(0) - P(1)$",
              "feedback": "Też poprawne! Często łatwiejsze gdy przypadków do odjęcia jest mniej.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć rozkładu dwumianowego",
              "feedback": "Niepoprawne - losujemy bez zwracania, to nie jest rozkład dwumianowy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba pierwsze podejścia są poprawne. Wybierzemy metodę bezpośrednią."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest sposobów wyboru $3$ kul z $10$?",
        "expression": "$\\binom{10}{3} = \\frac{10!}{3! \\cdot 7!} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "To liczba wszystkich możliwych wyników - mianownik prawdopodobieństwa",
        "why": "Wzór na kombinacje: wybieramy $3$ kule z $10$, kolejność nieważna"
      },
      {
        "step": 4,
        "hint": "Które przypadki są korzystne dla \"co najmniej 2 czerwone\"?",
        "expression": "Przypadki korzystne: $(2C, 1B/Z)$ lub $(3C)$",
        "explanation": "Gdzie $C$=czerwona, $B$=biała, $Z$=zielona",
        "interactive_choice": {
          "prompt": "Jakie kombinacje kolorów dają co najmniej 2 czerwone kule?",
          "options": [
            {
              "id": "A",
              "text": "$2$ czerwone + $1$ inna LUB $3$ czerwone",
              "feedback": "Świetnie! To dokładnie przypadki które nas interesują.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$2$ czerwone + $1$ biała LUB $2$ czerwone + $1$ zielona",
              "feedback": "Niepełne! Zapomniałeś o przypadku 3 czerwonych kul.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie oprócz $0$ czerwonych",
              "feedback": "Za szeroko! \"Co najmniej $2$\" to nie to samo co \"co najmniej $1$\".",
              "is_correct": false
            }
          ],
          "explanation_after": "\"Co najmniej $2$\" oznacza dokładnie $2$ lub dokładnie $3$ czerwone."
        }
      },
      {
        "step": 5,
        "hint": "Ile sposobów wyboru $2$ czerwonych z $3$ i $1$ pozostałej z $7$?",
        "expression": "$\\binom{3}{2} \\cdot \\binom{7}{1} = 3 \\cdot 7 = 21$",
        "explanation": "Przypadek 1: dokładnie $2$ czerwone kule",
        "why": "Wybieramy $2$ z $3$ czerwonych, potem $1$ z pozostałych $7$ ($2$ białe + $5$ zielonych)"
      },
      {
        "step": 6,
        "hint": "Ile sposobów wyboru wszystkich 3 czerwonych kul?",
        "expression": "$\\binom{3}{3} \\cdot \\binom{7}{0} = 1 \\cdot 1 = 1$",
        "explanation": "Przypadek 2: dokładnie $3$ czerwone kule"
      },
      {
        "step": 7,
        "hint": "Jak połączyć prawdopodobieństwa rozłącznych zdarzeń?",
        "expression": "P(co najmniej 2 czerwone) = $\\frac{21 + 1}{120} = \\frac{22}{120}$",
        "explanation": "Suma prawdopodobieństw przypadków korzystnych",
        "interactive_choice": {
          "prompt": "Jak obliczyć $P(\\text{dokładnie } 2)$ + $P(\\text{dokładnie } 3)$?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{21}{120} + \\frac{1}{120} = \\frac{22}{120}$",
              "feedback": "Idealnie! Dodajesz liczniki przy tym samym mianowniku.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\frac{21}{120} \\cdot \\frac{1}{120} = \\frac{21}{14400}$",
              "feedback": "Nie! To mnożenie - używamy go dla zdarzeń niezależnych, nie sumy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\frac{21 \\cdot 1}{120 + 120} = \\frac{21}{240}$",
              "feedback": "Błąd! Przy dodawaniu ułamków o tym samym mianowniku dodajemy liczniki.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenia rozłączne: $P(A \\text{ lub } B) = P(A) + P(B)$"
        }
      },
      {
        "step": 8,
        "hint": "Czy można uprościć ułamek $\\frac{22}{120}$?",
        "expression": "$\\frac{22}{120} = \\frac{11}{60}$",
        "explanation": "Dzielimy licznik i mianownik przez $2$"
      },
      {
        "step": 9,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "P(co najmniej 2 czerwone) = $\\frac{11}{60}$",
        "explanation": "Prawdopodobieństwo wylosowania co najmniej dwóch czerwonych kul"
      }
    ],
    "solutions": [
      "$\\frac{11}{60}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:10:32.994Z",
    "thinking_used": true
  },
  {
    "id": "cards_multinomial_probability",
    "topic": "Prawdopodobieństwo - rozkład hipergeometryczny",
    "difficulty": 4,
    "statement": "Z talii 52 kart losujemy $13$ kart. Oblicz prawdopodobieństwo zdarzenia, że wśród wylosowanych kart będą $3$ piki, $4$ kiery i $5$ trefli.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile kart każdego koloru mamy wylosować i ile zostanie na czwarty kolor?",
        "expression": "Piki: $3$, kiery: $4$, trefle: $5$, kara: $13 - 3 - 4 - 5 = 1$",
        "explanation": "Suma wylosowanych kart musi być $13$, więc kar musi być $1$"
      },
      {
        "step": 2,
        "hint": "Jaki typ prawdopodobieństwa opisuje to zadanie?",
        "expression": "$P = \\frac{liczba korzystnych}{liczba wszystkich możliwych}$",
        "explanation": "Używamy definicji prawdopodobieństwa klasycznego",
        "interactive_choice": {
          "prompt": "Jakiej metody użyjemy do obliczenia tego prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Wzór na prawdopodobieństwo warunkowe",
              "feedback": "Nie, tutaj nie mamy warunków zależnych.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozkład hipergeometryczny wielowymiarowy (kombinatoryczny)",
              "feedback": "Świetnie! Losujemy bez zwracania z populacji o różnych kategoriach.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Rozkład dwumianowy",
              "feedback": "Nie, dwumianowy to losowanie ze zwracaniem z dwoma wynikami.",
              "is_correct": false
            }
          ],
          "explanation_after": "To klasyczny rozkład hipergeometryczny - losowanie bez zwracania z populacji podzielonej na kategorie."
        }
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę korzystnych sposobów wybrania kart?",
        "expression": "Liczba korzystnych = $\\binom{13}{3} \\cdot \\binom{13}{4} \\cdot \\binom{13}{5} \\cdot \\binom{13}{1}$",
        "explanation": "Każdy kolor wybieramy niezależnie ze swoich $13$ kart",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wybrania $3$ pików, $4$ kierów, $5$ trefli i $1$ kara?",
          "options": [
            {
              "id": "A",
              "text": "Pomnożyć: $\\binom{13}{3} \\cdot \\binom{13}{4} \\cdot \\binom{13}{5} \\cdot \\binom{13}{1}$",
              "feedback": "Dokładnie! Każdy kolor wybieramy niezależnie z $13$ dostępnych kart.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dodać: $\\binom{13}{3} + \\binom{13}{4} + \\binom{13}{5} + \\binom{13}{1}$",
              "feedback": "Nie, dodawanie to alternatywy. Tu wybieramy I piki I kiery I trefle I kara.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru: $\\binom{52}{13}$",
              "feedback": "To jest liczba wszystkich możliwych, nie korzystnych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: zdarzenia niezależne mnożymy."
        }
      },
      {
        "step": 4,
        "hint": "Jakie są wartości poszczególnych symboli Newtona?",
        "expression": "$\\binom{13}{3} = 286$, $\\binom{13}{4} = 715$, $\\binom{13}{5} = 1287$, $\\binom{13}{1} = 13$",
        "explanation": "Obliczamy każdy symbol Newtona osobno",
        "why": "Symbol $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$ to liczba sposobów wyboru $k$ elementów z $n$."
      },
      {
        "step": 5,
        "hint": "Ile wynosi iloczyn wszystkich symboli Newtona?",
        "expression": "Liczba korzystnych = $286 \\cdot 715 \\cdot 1287 \\cdot 13 = 3\\,424\\,656\\,210$",
        "explanation": "Mnożymy wszystkie wartości"
      },
      {
        "step": 6,
        "hint": "Ile jest wszystkich sposobów wybrania $13$ kart z $52$?",
        "expression": "Liczba wszystkich możliwych = $\\binom{52}{13} = 635\\,013\\,559\\,600$",
        "explanation": "To jest liczba wszystkich możliwych wyborów $13$ kart z talii"
      },
      {
        "step": 7,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P = \\frac{3\\,424\\,656\\,210}{635\\,013\\,559\\,600} = \\frac{286 \\cdot 715 \\cdot 1287 \\cdot 13}{\\binom{52}{13}}$",
        "explanation": "Podstawiamy do wzoru na prawdopodobieństwo",
        "interactive_choice": {
          "prompt": "Jak przedstawić końcowy wynik prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Jako dokładny ułamek nieskracalny",
              "feedback": "Dobry wybór dla dokładności matematycznej.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako przybliżenie dziesiętne z wieloma miejscami",
              "feedback": "Przydatne dla praktycznych zastosowań.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Jako procent z zaokrągleniem",
              "feedback": "Najbardziej zrozumiałe w życiu codziennym.",
              "is_correct": true
            }
          ],
          "explanation_after": "W matematyce często podajemy wynik w kilku postaciach dla różnych celów."
        }
      },
      {
        "step": 8,
        "hint": "Jaka jest wartość liczbowa tego prawdopodobieństwa?",
        "expression": "$P ≈ 0.00539 ≈ 0.539\\%$",
        "explanation": "Prawdopodobieństwo w postaci dziesiętnej i procentowej"
      }
    ],
    "solutions": [
      "$\\frac{286 \\cdot 715 \\cdot 1287 \\cdot 13}{\\binom{52}{13}} = \\frac{3\\,424\\,656\\,210}{635\\,013\\,559\\,600} ≈ 0.00539$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-09-28T07:11:10.549Z",
    "thinking_used": true
  },
  {
    "id": "hypergeometric_probability_spades",
    "topic": "Prawdopodobieństwo hipergeometryczne",
    "difficulty": 4,
    "statement": "Z talii 52 kart losujemy $13$ kart. Oblicz prawdopodobieństwo zdarzenia, że wśród wylosowanych kart będzie co najmniej $12$ pików.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są dane w tym zadaniu?",
        "expression": "Talia: $52$ karty ($13$ pików, $39$ innych), losujemy: $13$ kart",
        "explanation": "Identyfikujemy parametry zadania"
      },
      {
        "step": 2,
        "hint": "Jaki model prawdopodobieństwa opisuje to doświadczenie?",
        "expression": "Używamy rozkładu hipergeometrycznego: $N = 52$, $K = 13$, $n = 13$",
        "explanation": "$N$ - rozmiar populacji, $K$ - liczba pików, $n$ - rozmiar próby",
        "interactive_choice": {
          "prompt": "Które prawdopodobieństwo najlepiej opisuje losowanie kart bez zwracania?",
          "options": [
            {
              "id": "A",
              "text": "Prawdopodobieństwo klasyczne (każdy wynik równie prawdopodobny)",
              "feedback": "To prawda, ale nie wskazuje konkretnego rozkładu dla tego typu zadań.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozkład hipergeometryczny",
              "feedback": "Świetnie! Losowanie bez zwracania z populacji o dwóch typach elementów.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Rozkład dwumianowy",
              "feedback": "Nie - to byłoby dla losowania ze zwracaniem, tutaj losujemy bez zwracania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozkład hipergeometryczny opisuje liczbę sukcesów w próbie bez zwracania z populacji zawierającej dwa typy elementów."
        }
      },
      {
        "step": 3,
        "hint": "Co oznacza zdarzenie 'co najmniej $12$ pików'?",
        "expression": "$P(X \\geq 12) = P(X = 12) + P(X = 13)$",
        "explanation": "Rozkładamy na sumę dwóch rozłącznych zdarzeń",
        "interactive_choice": {
          "prompt": "Jak rozłożyć zdarzenie 'co najmniej $12$ pików'?",
          "options": [
            {
              "id": "A",
              "text": "$P(X \\geq 12) = P(X = 12)$",
              "feedback": "Nie - 'co najmniej' oznacza $12$ lub więcej, więc także $13$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$P(X \\geq 12) = P(X = 12) + P(X = 13)$",
              "feedback": "Dokładnie! Możemy mieć dokładnie $12$ pików lub dokładnie $13$ pików.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$P(X \\geq 12) = 1 - P(X \\leq 11)$",
              "feedback": "To też jest poprawne, ale bezpośrednie obliczenie będzie prostsze.",
              "is_correct": true
            }
          ],
          "explanation_after": "Zdarzenie 'co najmniej $12$' składa się z dokładnie dwóch przypadków: $12$ pików i $13$ pików."
        }
      },
      {
        "step": 4,
        "hint": "Jaki jest wzór na prawdopodobieństwo hipergeometryczne?",
        "expression": "$P(X = k) = \\frac{\\binom{K}{k} \\cdot \\binom{N-K}{n-k}}{\\binom{N}{n}}$",
        "explanation": "Wzór hipergeometryczny: kombinacje wyboru $k$ sukcesów i $n-k$ porażek",
        "why": "Licznik: sposoby wyboru $k$ pików z $13$ i $n-k$ innych z $39$. Mianownik: wszystkie sposoby wyboru $n$ kart z $52$."
      },
      {
        "step": 5,
        "hint": "Ile wynosi $P(X = 13)$?",
        "expression": "$P(X = 13) = \\frac{\\binom{13}{13} \\cdot \\binom{39}{0}}{\\binom{52}{13}} = \\frac{1 \\cdot 1}{\\binom{52}{13}} = \\frac{1}{\\binom{52}{13}}$",
        "explanation": "Prawdopodobieństwo wylosowania wszystkich 13 pików"
      },
      {
        "step": 6,
        "hint": "Ile wynosi $P(X = 12)$?",
        "expression": "$P(X = 12) = \\frac{\\binom{13}{12} \\cdot \\binom{39}{1}}{\\binom{52}{13}} = \\frac{13 \\cdot 39}{\\binom{52}{13}} = \\frac{507}{\\binom{52}{13}}$",
        "explanation": "Prawdopodobieństwo wylosowania dokładnie $12$ pików i $1$ karty innej"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć $\\binom{52}{13}$?",
        "expression": "$\\binom{52}{13} = 635013559600$",
        "explanation": "Liczba sposobów wyboru $13$ kart z $52$ - bardzo duża liczba"
      },
      {
        "step": 8,
        "hint": "Jaka jest suma prawdopodobieństw?",
        "expression": "$P(X \\geq 12) = \\frac{1 + 507}{\\binom{52}{13}} = \\frac{508}{\\binom{52}{13}}$",
        "explanation": "Suma prawdopodobieństw obu przypadków",
        "interactive_choice": {
          "prompt": "Jak najlepiej przedstawić wynik końcowy?",
          "options": [
            {
              "id": "A",
              "text": "Jako ułamek zwykły: $\\frac{508}{635013559600}$",
              "feedback": "Poprawnie, ale można to jeszcze uprościć.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako liczba dziesiętna w notacji naukowej",
              "feedback": "Dobre dla przybliżenia, ale ułamek jest dokładniejszy.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Przez $\\binom{52}{13}$ bez obliczania",
              "feedback": "Najlepsze! Zachowuje dokładną postać bez ogromnych liczb.",
              "is_correct": true
            }
          ],
          "explanation_after": "W zadaniach kombinatorycznych często najlepiej zostawić wynik w postaci kombinacji."
        }
      },
      {
        "step": 9,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P(X \\geq 12) = \\frac{508}{\\binom{52}{13}} \\approx 8.00 \\times 10^{-10}$",
        "explanation": "Prawdopodobieństwo jest bardzo małe - zdarzenie prawie niemożliwe"
      }
    ],
    "solutions": [
      "$\\frac{508}{\\binom{52}{13}}$",
      "$\\frac{508}{635013559600}$",
      "$≈ 8.00 \\times 10^{-10}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 6
      }
    },
    "timestamp": "2025-09-28T07:11:45.920Z",
    "thinking_used": true
  },
  {
    "id": "hypergeometric_probability_cards",
    "topic": "Prawdopodobieństwo hipergeometryczne",
    "difficulty": 4,
    "statement": "Z talii 52 kart losujemy $13$ kart. Oblicz prawdopodobieństwo zdarzenia, że wśród wylosowanych kart będą $4$ kiery i co najwyżej $1$ trefl.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza losowanie kart bez zwracania dla typu rozkładu?",
        "expression": "Talia: $13$ kierów, $13$ trefli, $13$ kar, $13$ pików ($52$ karty total)",
        "explanation": "Losujemy $13$ kart bez zwracania z talii o znanej strukturze"
      },
      {
        "step": 2,
        "hint": "Który rozkład prawdopodobieństwa najlepiej opisuje tę sytuację?",
        "expression": "Używamy wzoru: $P = \\frac{przypadki korzystne}{wszystkie przypadki}$",
        "explanation": "Prawdopodobieństwo jako stosunek liczby przypadków korzystnych do wszystkich",
        "interactive_choice": {
          "prompt": "Jakiego typu zadanie z prawdopodobieństwem to jest?",
          "options": [
            {
              "id": "A",
              "text": "Rozkład dwumianowy (próby niezależne)",
              "feedback": "Nie, bo losujemy bez zwracania - próby nie są niezależne.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozkład hipergeometryczny (populacja skończona)",
              "feedback": "Tak! Losujemy bez zwracania z populacji o znanej strukturze.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Rozkład Poissona (zdarzenia rzadkie)",
              "feedback": "Nie, mamy dokładnie określoną liczbę prób i znaną strukturę populacji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozkład hipergeometryczny dotyczy losowania bez zwracania z populacji skończonej."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest sposobów wybrania $13$ kart z $52$?",
        "expression": "Wszystkie przypadki: $\\binom{52}{13}$",
        "explanation": "Liczba wszystkich sposobów wybrania $13$ kart z talii $52$-kartowej"
      },
      {
        "step": 4,
        "hint": "Co dokładnie oznacza sformułowanie 'co najwyżej $1$ trefl'?",
        "expression": "Przypadki korzystne: $(4$ kiery, $0$ trefli) OR $(4$ kiery, $1$ trefl)",
        "explanation": "Rozdzielamy na dwa rozłączne przypadki",
        "why": "Zdarzenia rozłączne dodajemy, więc $P(A \\text{ lub } B) = P(A) + P(B)$",
        "interactive_choice": {
          "prompt": "Jak interpretować warunek 'co najwyżej $1$ trefl'?",
          "options": [
            {
              "id": "A",
              "text": "Dokładnie $1$ trefl",
              "feedback": "Nie, 'co najwyżej' oznacza maksymalnie, nie dokładnie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$0$ trefli lub $1$ trefl",
              "feedback": "Tak! Co najwyżej $1$ oznacza $0$, $1$, ale nie więcej.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Co najmniej $1$ trefl",
              "feedback": "To byłoby 'co najmniej', a nie 'co najwyżej'.",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy rozpatrzyć dwa przypadki: $0$ trefli i $1$ trefl."
        }
      },
      {
        "step": 5,
        "hint": "Ile sposobów jest na wybranie $4$ kierów z $13$ dostępnych?",
        "expression": "Wybór 4 kierów: $\\binom{13}{4}$",
        "explanation": "Liczba sposobów wybrania dokładnie $4$ kierów"
      },
      {
        "step": 6,
        "hint": "W przypadku 1: skąd wybieramy pozostałe 9 kart jeśli mamy $4$ kiery i $0$ trefli?",
        "expression": "Przypadek 1: $\\binom{13}{4} \\cdot \\binom{13}{0} \\cdot \\binom{26}{9}$",
        "explanation": "$4$ kiery z $13$, $0$ trefli z $13$, pozostałe $9$ z kar i pików ($26$ kart)"
      },
      {
        "step": 7,
        "hint": "W przypadku 2: ile kart zostaje do wybrania jeśli mamy $4$ kiery i $1$ trefl?",
        "expression": "Przypadek 2: $\\binom{13}{4} \\cdot \\binom{13}{1} \\cdot \\binom{26}{8}$",
        "explanation": "4 kiery z $13$, $1$ trefl z $13$, pozostałe $8$ z kar i pików ($26$ kart)"
      },
      {
        "step": 8,
        "hint": "Czy przypadki się wykluczają, czy nakładają?",
        "expression": "Przypadki korzystne = $\\binom{13}{4} \\cdot \\binom{13}{0} \\cdot \\binom{26}{9} + \\binom{13}{4} \\cdot \\binom{13}{1} \\cdot \\binom{26}{8}$",
        "explanation": "Suma obu rozłącznych przypadków",
        "interactive_choice": {
          "prompt": "Jak połączyć oba przypadki?",
          "options": [
            {
              "id": "A",
              "text": "Mnożymy: $przypadek1 \\times przypadek2$",
              "feedback": "Nie, to są alternatywne scenariusze, nie jednoczesne.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodajemy: $przypadek1 + przypadek2$",
              "feedback": "Tak! To zdarzenia rozłączne - albo $0$, albo $1$ trefl.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Bierzemy większy z przypadków",
              "feedback": "Nie, potrzebujemy oba przypadki - razem tworzą zdarzenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenia rozłączne (wykluczające się) dodajemy."
        }
      },
      {
        "step": 9,
        "hint": "Jak wyciągnąć wspólny czynnik z sumy?",
        "expression": "= $\\binom{13}{4} \\left[ \\binom{13}{0} \\cdot \\binom{26}{9} + \\binom{13}{1} \\cdot \\binom{26}{8} \\right]$",
        "explanation": "Wyciągnięcie wspólnego czynnika $\\binom{13}{4}$"
      },
      {
        "step": 10,
        "hint": "Jakie są wartości liczbowe poszczególnych symboli Newtona?",
        "expression": "$\\binom{13}{4} = 715$, $\\binom{13}{0} = 1$, $\\binom{13}{1} = 13$, $\\binom{26}{9} = 3365856$, $\\binom{26}{8} = 1562275$",
        "explanation": "Obliczenie wartości poszczególnych symboli Newtona"
      },
      {
        "step": 11,
        "hint": "Ile wynosi końcowa liczba przypadków korzystnych?",
        "expression": "Przypadki korzystne = $715 \\cdot [1 \\cdot 3365856 + 13 \\cdot 1562275] = 715 \\cdot 23674431$",
        "explanation": "Obliczenie liczby przypadków korzystnych"
      },
      {
        "step": 12,
        "hint": "Jakie jest końcowe prawdopodobieństwo?",
        "expression": "$P = \\frac{715 \\cdot 23674431}{\\binom{52}{13}} = \\frac{16927238165}{635013559600}$",
        "explanation": "Prawdopodobieństwo jako stosunek przypadków korzystnych do wszystkich"
      },
      {
        "step": 13,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P \\approx 0.0267$ (około $2.67\\%$)",
        "explanation": "Przybliżona wartość liczbowa prawdopodobieństwa"
      }
    ],
    "solutions": [
      "$P = \\frac{\\binom{13}{4} \\left[ \\binom{26}{9} + 13 \\cdot \\binom{26}{8} \\right]}{\\binom{52}{13}} \\approx 0.0267$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:12:37.197Z",
    "thinking_used": true
  },
  {
    "id": "hypergeometric_cards",
    "topic": "Rozkład hipergeometryczny",
    "difficulty": 4,
    "statement": "Z talii 52 kart losujemy $13$ kart. Oblicz prawdopodobieństwo zdarzenia, że wśród wylosowanych kart będą co najmniej $3$ kiery.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile kierów jest w talii i ile kart innych niż kiery?",
        "expression": "W talii: $13$ kierów, $39$ kart innych niż kiery",
        "explanation": "Identyfikujemy parametry problemu"
      },
      {
        "step": 2,
        "hint": "Jaki typ rozkładu prawdopodobieństwa opisuje tę sytuację?",
        "expression": "$X \\sim Hypergeom(N=52, K=13, n=13)$",
        "explanation": "Zmienna $X$ = liczba kierów w $13$ losowanych kartach",
        "interactive_choice": {
          "prompt": "Losujemy $13$ kart bez zwracania z talii $52$ kart. Który rozkład najlepiej opisuje liczbę kierów?",
          "options": [
            {
              "id": "A",
              "text": "Rozkład dwumianowy - każda karta ma stałe prawdopodobieństwo $1/4$",
              "feedback": "Nie - prawdopodobieństwo zmienia się po każdym losowaniu bez zwracania.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozkład hipergeometryczny - losowanie bez zwracania z populacji skończonej",
              "feedback": "Idealnie! Mamy populację $52$ kart, $13$ kierów, losujemy $13$ bez zwracania.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Rozkład normalny - duża próba, można aproksymować",
              "feedback": "Nie jest potrzebny - mamy dokładne wzory na rozkład hipergeometryczny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozkład hipergeometryczny: populacja $N=52$, sukces $K=13$ kierów, próba $n=13$."
        }
      },
      {
        "step": 3,
        "hint": "Co łatwiej obliczyć - $P(X \\geq 3)$ bezpośrednio czy przez dopełnienie?",
        "expression": "$P(X \\geq 3) = 1 - P(X < 3) = 1 - [P(X=0) + P(X=1) + P(X=2)]$",
        "explanation": "Używamy wzoru na dopełnienie zdarzenia",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć prawdopodobieństwo $P(X \\geq 3)$?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio: $P(X=3)$ + $P(X=4)$ + ... + $P(X=13)$",
              "feedback": "Możliwe, ale trzeba by obliczyć $11$ prawdopodobieństw - bardzo pracochłonne.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez dopełnienie: $1 - P(X < 3) = 1 - [P(X=0) + P(X=1) + P(X=2)]$",
              "feedback": "Świetny wybór! Tylko $3$ prawdopodobieństwa do obliczenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Aproksymacja rozkładem normalnym",
              "feedback": "Niepotrzebne - można dokładnie obliczyć przez dopełnienie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dopełnienie znacznie upraszcza obliczenia - zamiast $11$ składników mamy tylko $3$."
        }
      },
      {
        "step": 4,
        "hint": "Jaki jest wzór na prawdopodobieństwo w rozkładzie hipergeometrycznym?",
        "expression": "$P(X = k) = \\frac{\\binom{K}{k} \\binom{N-K}{n-k}}{\\binom{N}{n}} = \\frac{\\binom{13}{k} \\binom{39}{13-k}}{\\binom{52}{13}}$",
        "explanation": "Wzór hipergeometryczny dla naszych parametrów",
        "why": "Liczymy na ile sposobów wybierzemy $k$ kierów z $13$ i $(13-k)$ innych kart z $39$, dzielimy przez wszystkie sposoby wyboru $13$ z $52$."
      },
      {
        "step": 5,
        "hint": "Ile wynosi mianownik we wszystkich obliczeniach?",
        "expression": "$\\binom{52}{13} = \\frac{52!}{13! \\cdot 39!} = 635,013,559,600$",
        "explanation": "Obliczamy łączną liczbę sposobów wyboru $13$ kart z $52$"
      },
      {
        "step": 6,
        "hint": "Na ile sposobów można wybrać $0$ kierów z $13$ kierów?",
        "expression": "$P(X=0) = \\frac{\\binom{13}{0} \\binom{39}{13}}{\\binom{52}{13}} = \\frac{1 \\cdot 8,594,160,280}{635,013,559,600} = \\frac{8,594,160,280}{635,013,559,600}$",
        "explanation": "Prawdopodobieństwo wybrania $0$ kierów (wszystkie $13$ kart spośród $39$ innych)"
      },
      {
        "step": 7,
        "hint": "Na ile sposobów można wybrać dokładnie $1$ kiera?",
        "expression": "$P(X=1) = \\frac{\\binom{13}{1} \\binom{39}{12}}{\\binom{52}{13}} = \\frac{13 \\cdot 52,078,176,405}{635,013,559,600} = \\frac{677,016,294,265}{635,013,559,600}$",
        "explanation": "Prawdopodobieństwo wybrania dokładnie $1$ kiera i $12$ innych kart"
      },
      {
        "step": 8,
        "hint": "Na ile sposobów można wybrać dokładnie $2$ kiery?",
        "expression": "$P(X=2) = \\frac{\\binom{13}{2} \\binom{39}{11}}{\\binom{52}{13}} = \\frac{78 \\cdot 211,915,132,505}{635,013,559,600} = \\frac{16,529,380,335,390}{635,013,559,600}$",
        "explanation": "Prawdopodobieństwo wybrania dokładnie $2$ kierów i $11$ innych kart"
      },
      {
        "step": 9,
        "hint": "Jakie jest prawdopodobieństwo zdarzenia przeciwnego?",
        "expression": "$P(X < 3) = P(X=0) + P(X=1) + P(X=2) = \\frac{8,594,160,280 + 677,016,294,265 + 16,529,380,335,390}{635,013,559,600}$",
        "explanation": "Sumujemy prawdopodobieństwa dla $0$, $1$ i $2$ kierów"
      },
      {
        "step": 10,
        "hint": "Ile wynosi suma w liczniku?",
        "expression": "$P(X < 3) = \\frac{17,214,950,789,935}{635,013,559,600} \\approx 0.271$",
        "explanation": "Prawdopodobieństwo otrzymania mniej niż $3$ kierów"
      },
      {
        "step": 11,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P(X \\geq 3) = 1 - P(X < 3) = 1 - 0.271 = 0.729$",
        "explanation": "Prawdopodobieństwo otrzymania co najmniej $3$ kierów"
      }
    ],
    "solutions": [
      "$P(X \\geq 3) = 0.729$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-28T07:13:28.236Z",
    "thinking_used": true
  },
  {
    "id": "probability_four_aces",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 3,
    "statement": "Z talii 24 kart ($4$ asy, $4$ króle, $4$ damy, $4$ walety, $4$ dziesiątki, $4$ dziewiątki) losujemy $5$ kart. Oblicz prawdopodobieństwo zdarzenia: wylosujemy $4$ asy.",
    "steps": [
      {
        "step": 1,
        "hint": "Czy liczy się kolejność w jakiej wybieramy karty?",
        "expression": "Używamy wzoru na kombinacje: $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$",
        "explanation": "Określamy typ zadania jako kombinacje bez powtórzeń",
        "interactive_choice": {
          "prompt": "Jakiego typu losowanie mamy w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "Losowanie z uwzględnieniem kolejności (permutacje)",
              "feedback": "Nie - nie ma znaczenia w jakiej kolejności wyciągamy karty, liczy się tylko zbiór wybranych kart.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Losowanie bez uwzględnienia kolejności (kombinacje)",
              "feedback": "Tak! Wybieramy $5$-kartowy zestaw, kolejność nie ma znaczenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Losowanie ze zwracaniem",
              "feedback": "Nie - każda karta może być wybrana tylko raz, to losowanie bez zwracania.",
              "is_correct": false
            }
          ],
          "explanation_after": "To kombinacje bez powtórzeń - wybieramy podzbiór $5$ kart z $24$ dostępnych."
        }
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich możliwych sposobów wyboru $5$ kart z $24$?",
        "expression": "Wszystkie możliwe przypadki: $\\binom{24}{5}$",
        "explanation": "Liczba wszystkich możliwych wyborów $5$ kart z talii $24$ kart",
        "why": "W prawdopodobieństwie klasycznym zawsze najpierw liczymy wszystkie możliwe przypadki."
      },
      {
        "step": 3,
        "hint": "Jak można wybrać dokładnie 4 asy spośród 5 wybranych kart?",
        "expression": "Przypadki sprzyjające: wybieramy $4$ asy z $4$ dostępnych i $1$ kartę z pozostałych $20$",
        "explanation": "Podział wyboru na dwie części: $asy$ i pozostałe karty",
        "interactive_choice": {
          "prompt": "Jeśli chcemy wybrać dokładnie $4$ asy, jak podzielić wybór $5$ kart?",
          "options": [
            {
              "id": "A",
              "text": "$4$ asy + $1$ karta która nie jest asem",
              "feedback": "Dokładnie! $4$ asy z dostępnych $4$, plus $1$ karta z pozostałych $20$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Co najmniej $4$ asy",
              "feedback": "Nie - zadanie pyta o dokładnie $4$ asy, nie 'co najmniej'.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$5$ asów",
              "feedback": "Niemożliwe - w talii są tylko $4$ asy, a my wybieramy $4$ asy spośród $5$ kart.",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy wybrać wszystkie $4$ asy oraz $1$ dodatkową kartę która nie jest asem."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest sposobów wyboru $4$ asów z $4$ dostępnych asów?",
        "expression": "$\\binom{4}{4} = 1$",
        "explanation": "Wszystkie $4$ asy muszą być wybrane - tylko jeden sposób"
      },
      {
        "step": 5,
        "hint": "Ile jest sposobów wyboru $1$ karty z $20$ pozostałych kart?",
        "expression": "$\\binom{20}{1} = 20$",
        "explanation": "Piąta karta może być dowolną z $20$ pozostałych kart (nie asów)"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć liczbę przypadków sprzyjających?",
        "expression": "Przypadki sprzyjające: $\\binom{4}{4} \\cdot \\binom{20}{1} = 1 \\cdot 20 = 20$",
        "explanation": "Mnożymy liczbę sposobów wyboru $asów$ przez liczbę sposobów wyboru pozostałej karty"
      },
      {
        "step": 7,
        "hint": "Ile wynosi $\\binom{24}{5}$?",
        "expression": "$\\binom{24}{5} = \\frac{24!}{5! \\cdot 19!} = \\frac{24 \\cdot 23 \\cdot 22 \\cdot 21 \\cdot 20}{5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1} = \\frac{42504}{120} = 42504$",
        "explanation": "Obliczamy liczbę wszystkich możliwych wyborów $5$ kart z $24$"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć prawdopodobieństwo?",
        "expression": "$P = \\frac{20}{42504}$",
        "explanation": "Prawdopodobieństwo wylosowania dokładnie $4$ asów",
        "interactive_choice": {
          "prompt": "Który wzór na prawdopodobieństwo klasyczne zastosujemy?",
          "options": [
            {
              "id": "A",
              "text": "$P(A) = \\frac{|\\Omega|}{|A|}$",
              "feedback": "Nie - masz odwróconą kolejność. Licznik to przypadki sprzyjające.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$P(A) = \\frac{|A|}{|\\Omega|}$",
              "feedback": "Tak! Prawdopodobieństwo to stosunek przypadków sprzyjających do wszystkich możliwych.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$P(A) = |A| \\cdot |\\Omega|$",
              "feedback": "Nie - to byłby iloczyn, a prawdopodobieństwo to stosunek (ułamek).",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo klasyczne to zawsze stosunek przypadków sprzyjających do wszystkich możliwych."
        }
      },
      {
        "step": 9,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P = \\frac{20}{42504} = \\frac{5}{10626}$",
        "explanation": "Skracamy ułamek przez $4$"
      }
    ],
    "solutions": [
      "$P = \\frac{5}{10626}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:14:13.564Z",
    "thinking_used": true
  },
  {
    "id": "probability_cards_complex",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "Z talii $24$ kart ($4$ asy, $4$ króle, $4$ damy, $4$ walety, $4$ dziesiątki, $4$ dziewiątki) losujemy $5$ kart. Oblicz prawdopodobieństwo zdarzenia: wylosujemy trzy dziesiątki i jedną parę takich samych figur (dwa asy albo dwa króle, albo dwie damy, albo dwa walety).",
    "steps": [
      {
        "step": 1,
        "hint": "Jakiego wzoru użyjemy do obliczenia prawdopodobieństwa?",
        "expression": "$P(A) = \\frac{liczba zdarzeń sprzyjających}{liczba wszystkich możliwych zdarzeń}$",
        "explanation": "Stosujemy klasyczną definicję prawdopodobieństwa",
        "interactive_choice": {
          "prompt": "Która metoda najlepiej pasuje do tego zadania?",
          "options": [
            {
              "id": "A",
              "text": "Klasyczne prawdopodobieństwo: $P(A) = \\frac{|A|}{|\\Omega|}$",
              "feedback": "Doskonale! Mamy skończoną przestrzeń zdarzeń elementarnych o równych prawdopodobieństwach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzór na prawdopodobieństwo warunkowe",
              "feedback": "Nie, zdarzenia nie są warunkowe - losujemy jednocześnie wszystkie karty.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Twierdzenie o prawdopodobieństwie całkowitym",
              "feedback": "Zbyt skomplikowane - wystarczy klasyczne prawdopodobieństwo.",
              "is_correct": false
            }
          ],
          "explanation_after": "W zadaniach z losowaniem bez zwracania używamy klasycznego prawdopodobieństwa i kombinacji."
        }
      },
      {
        "step": 2,
        "hint": "Ile wszystkich sposobów możemy wylosować $5$ kart z $24$?",
        "expression": "$|\\Omega| = \\binom{24}{5}$",
        "explanation": "Całkowita liczba sposobów wylosowania $5$ kart z $24$",
        "why": "Używamy symbolu Newtona (kombinacji) bo kolejność losowania nie ma znaczenia."
      },
      {
        "step": 3,
        "hint": "Ile sposobów można wybrać dokładnie $3$ dziesiątki z $4$ dostępnych?",
        "expression": "$\\binom{4}{3} = 4$",
        "explanation": "Liczba sposobów wybrania $3$ dziesiątek z $4$"
      },
      {
        "step": 4,
        "hint": "Jak policzyć liczbę sposobów wybrania pary figur?",
        "expression": "Liczba sposobów wybrania pary figur: $4 \\times \\binom{4}{2} = 4 \\times 6 = 24$",
        "explanation": "4 rodzaje figur, z każdego rodzaju można wybrać parę na $6$ sposobów",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wybrania jednej pary spośród asów, króli, dam lub waletów?",
          "options": [
            {
              "id": "A",
              "text": "Wybieramy rodzaj figury: $4$ sposoby, potem parę z tego rodzaju: $\\binom{4}{2}$",
              "feedback": "Świetnie! Najpierw rodzaj figury ($4$ opcje), potem $2$ karty z $4$ tego rodzaju.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Po prostu $\\binom{4}{2} = 6$ sposobów",
              "feedback": "To oblicza tylko pary z jednego rodzaju, a mamy $4$ rodzaje figur.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\binom{16}{2}$ - wybieramy 2 karty z $16$ figur",
              "feedback": "Nie, to dałoby różne figury, a nam potrzeba para tego samego rodzaju.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy $4$ rodzaje figur, z każdego można wybrać $\\binom{4}{2} = 6$ par."
        }
      },
      {
        "step": 5,
        "hint": "Ile łącznie mamy zdarzeń sprzyjających?",
        "expression": "$|A| = \\binom{4}{3} \\times 4 \\times \\binom{4}{2} = 4 \\times 24 = 96$",
        "explanation": "Mnożymy sposoby wyboru $3$ dziesiątek przez sposoby wyboru pary figur"
      },
      {
        "step": 6,
        "hint": "Jaką wartość ma $\\binom{24}{5}$?",
        "expression": "$\\binom{24}{5} = \\frac{24!}{5! \\times 19!} = \\frac{24 \\times 23 \\times 22 \\times 21 \\times 20}{5 \\times 4 \\times 3 \\times 2 \\times 1} = \\frac{24 \\times 23 \\times 22 \\times 21 \\times 20}{120}$",
        "explanation": "Obliczamy liczbę wszystkich możliwych losowań $5$ kart"
      },
      {
        "step": 7,
        "hint": "Jak uprościć to wyrażenie?",
        "expression": "$\\binom{24}{5} = \\frac{4188480}{120} = 42504$",
        "explanation": "Wszystkich sposobów wylosowania $5$ kart z $24$ jest $42504$"
      },
      {
        "step": 8,
        "hint": "Jak zapisać końcowe prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{96}{42504}$",
        "explanation": "Podstawiamy do wzoru na prawdopodobieństwo klasyczne",
        "interactive_choice": {
          "prompt": "W jakiej postaci najlepiej podać wynik prawdopodobieństwa?",
          "options": [
            {
              "id": "A",
              "text": "Jako ułamek zwykły w postaci nieskracalnej",
              "feedback": "Doskonale! W matematyce preferujemy ułamki zwykłe w postaci nieskracalnej.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako liczbę dziesiętną z wieloma miejscami",
              "feedback": "Możliwe, ale ułamek zwykły jest dokładniejszy i bardziej elegancki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Jako procent",
              "feedback": "W zadaniach teoretycznych lepiej podać dokładny ułamek niż przybliżony procent.",
              "is_correct": false
            }
          ],
          "explanation_after": "Ułamki zwykłe w postaci nieskracalnej dają dokładny wynik bez przybliżeń."
        }
      },
      {
        "step": 9,
        "hint": "Jak skrócić ułamek $\\frac{96}{42504}$?",
        "expression": "$\\gcd(96, 42504) = 24$, więc $P(A) = \\frac{96 : 24}{42504 : 24} = \\frac{4}{1771}$",
        "explanation": "Skracamy ułamek przez największy wspólny dzielnik"
      }
    ],
    "solutions": [
      "$\\frac{4}{1771}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:15:06.189Z",
    "thinking_used": true
  },
  {
    "id": "probability_at_least_two_aces",
    "topic": "Prawdopodobieństwo i kombinatoryka",
    "difficulty": 4,
    "statement": "Z talii $24$ kart ($4$ asy, $4$ króle, $4$ damy, $4$ walety, $4$ dziesiątki, $4$ dziewiątki) losujemy $5$ kart. Oblicz prawdopodobieństwo zdarzenia: wylosujemy co najmniej $2$ asy.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza sformułowanie 'co najmniej dwa asy'?",
        "expression": "Co najmniej $2$ asy oznacza: $2$ asy, $3$ asy lub $4$ asy",
        "explanation": "Musimy uwzględnić wszystkie przypadki od $2$ do $4$ asów włącznie"
      },
      {
        "step": 2,
        "hint": "Którą metodą najłatwiej obliczyć to prawdopodobieństwo?",
        "expression": "$P(co \\text{ najmniej } 2 \\text{ asy}) = 1 - P(0 \\text{ asów}) - P(1 \\text{ as})$",
        "explanation": "Wybieramy metodę przez dopełnienie do zdarzenia pewnego",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo 'co najmniej 2 asy'?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio: $P(2 \\text{ asy}) + P(3 \\text{ asy}) + P(4 \\text{ asy})$",
              "feedback": "Możliwe, ale będzie trzeba liczyć trzy przypadki oddzielnie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Przez dopełnienie: $1 - P(0 \\text{ asów}) - P(1 \\text{ as})$",
              "feedback": "Świetny wybór! Tylko dwa przypadki do obliczenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzorem na prawdopodobieństwo warunkowe",
              "feedback": "To nie jest sytuacja dla prawdopodobieństwa warunkowego.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda dopełnienia jest tutaj efektywniejsza - mniej obliczeń."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest wszystkich możliwych sposobów wylosowania $5$ kart z $24$?",
        "expression": "$|\\Omega| = \\binom{24}{5} = \\frac{24 \\cdot 23 \\cdot 22 \\cdot 21 \\cdot 20}{5!} = \\frac{255024}{120} = 42504$",
        "explanation": "Obliczamy liczbę wszystkich możliwych kombinacji $5$ kart z $24$",
        "why": "To mianownik naszego prawdopodobieństwa - wszystkie możliwe przypadki.",
        "interactive_choice": {
          "prompt": "Którym wzorem obliczymy liczbę wszystkich możliwych wyborów $5$ kart z $24$?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $P(24,5) = \\frac{24!}{19!}$",
              "feedback": "Nie - kolejność losowania kart nie ma znaczenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Kombinacje: $\\binom{24}{5} = \\frac{24!}{5! \\cdot 19!}$",
              "feedback": "Dokładnie! Kolejność nie ma znaczenia, więc kombinacje.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Potęga: $24^5$",
              "feedback": "Nie - to byłoby losowanie ze zwracaniem z uwzględnieniem kolejności.",
              "is_correct": false
            }
          ],
          "explanation_after": "W losowaniu bez zwracania bez uwzględnienia kolejności używamy kombinacji."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wylosować $5$ kart tak, żeby wśród nich nie było ani jednego asa?",
        "expression": "$|A_0| = \\binom{20}{5} = \\frac{20 \\cdot 19 \\cdot 18 \\cdot 17 \\cdot 16}{5!} = \\frac{186240}{120} = 15504$",
        "explanation": "Wybieramy $5$ kart z $20$ kart innych niż asy"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wylosować dokładnie $1$ asa i $4$ karty inne?",
        "expression": "$|A_1| = \\binom{4}{1} \\cdot \\binom{20}{4} = 4 \\cdot \\frac{20 \\cdot 19 \\cdot 18 \\cdot 17}{4!} = 4 \\cdot 4845 = 19380$",
        "explanation": "Mnożymy: sposoby wyboru $1$ asa razy sposoby wyboru $4$ innych kart",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania dokładnie 1 asa?",
          "options": [
            {
              "id": "A",
              "text": "$\\binom{4}{1} + \\binom{20}{4}$",
              "feedback": "Nie - to dodawanie, a chcemy iloczyn zdarzeń niezależnych.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\binom{4}{1} \\cdot \\binom{20}{4}$",
              "feedback": "Tak! Wybieramy $1$ z $4$ asów ORAZ $4$ z $20$ innych kart.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\binom{24}{1} \\cdot \\binom{23}{4}$",
              "feedback": "Nie - najpierw dzielimy na asy i inne karty, potem wybieramy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybór $1$ asa z $4$ ORAZ $4$ innych z $20$ to iloczyn kombinacji."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest przypadków korzystnych dla zdarzenia 'co najmniej 2 asy'?",
        "expression": "$|A| = |\\Omega| - |A_0| - |A_1| = 42504 - 15504 - 19380 = 7620$",
        "explanation": "Odejmujemy przypadki niekorzystne od wszystkich możliwych"
      },
      {
        "step": 7,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P = \\frac{7620}{42504} = \\frac{1905}{10626} \\approx 0{,}179$",
        "explanation": "Dzielimy przypadki korzystne przez wszystkie możliwe",
        "why": "Ułamek można uprościć przez $4$, otrzymując końcową postać $\\frac{1905}{10626}$."
      }
    ],
    "solutions": [
      "$P = \\frac{1905}{10626} \\approx 0{,}179$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:15:50.859Z",
    "thinking_used": true
  },
  {
    "id": "probability_cards_two_events",
    "topic": "Prawdopodobieństwo - zdarzenia złożone",
    "difficulty": 4,
    "statement": "Z talii 24 kart ($4$ asy, $4$ króle, $4$ damy, $4$ walety, $4$ dziesiątki, $4$ dziewiątki) losujemy $5$ kart. Oblicz prawdopodobieństwo zdarzenia: wylosujemy $2$ króle lub $3$ damy.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć zdarzenia w tym zadaniu?",
        "expression": "Niech $A$ - wylosujemy dokładnie $2$ króle, $B$ - wylosujemy dokładnie $3$ damy",
        "explanation": "Definiujemy zdarzenia składowe"
      },
      {
        "step": 2,
        "hint": "Jaką metodę wybierzesz do obliczenia liczby sposobów?",
        "expression": "Obliczamy liczbę wszystkich sposobów: $\\binom{24}{5}$",
        "explanation": "Liczba sposobów wybrania $5$ kart z $24$",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania określonych kart?",
          "options": [
            {
              "id": "A",
              "text": "Wzór kombinacji $\\binom{n}{k}$ - liczba sposobów wyboru $k$ elementów z $n$",
              "feedback": "Doskonały wybór! Kombinacje to właściwa metoda dla tego typu zadań.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzór na permutacje z powtórzeniami",
              "feedback": "Nie - permutacje dotyczą kolejności, a tu kolejność kart nie ma znaczenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Reguła mnożenia bez wzorów kombinacyjnych",
              "feedback": "Możliwe, ale bardzo pracochłonne i łatwo o błąd bez wzoru na kombinacje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy wzoru na kombinacje $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$ bo liczy się tylko które karty, nie ich kolejność."
        }
      },
      {
        "step": 3,
        "hint": "Ile wynosi liczba wszystkich możliwych sposobów?",
        "expression": "$\\binom{24}{5} = \\frac{24!}{5! \\cdot 19!} = \\frac{24 \\cdot 23 \\cdot 22 \\cdot 21 \\cdot 20}{5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1} = 42504$",
        "explanation": "Obliczamy liczbę wszystkich możliwych wyników"
      },
      {
        "step": 4,
        "hint": "Czy można jednocześnie wylosować $2$ króle i $3$ damy przy $5$ kartach?",
        "expression": "$A \\cap B = \\emptyset$ (zdarzenia rozłączne)",
        "explanation": "2 króle + 3 damy to już $5$ kart, więc zdarzenia się wykluczają",
        "interactive_choice": {
          "prompt": "Jak sprawdzić czy zdarzenia $A$ i $B$ mogą zajść jednocześnie?",
          "options": [
            {
              "id": "A",
              "text": "Zdarzenia się wykluczają - $2+3=5$, więc nie zostaje miejsca na inne karty",
              "feedback": "Świetnie! $2$ króle + $3$ damy = $5$ kart, więc zdarzenia są rozłączne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Zdarzenia się nie wykluczają - można mieć jednocześnie króle i damy",
              "feedback": "Nie. Przy $5$ kartach: $2$ króle + $3$ damy = $5$ kart, nie ma miejsca na inne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Trzeba sprawdzić czy są króle będące jednocześnie damami",
              "feedback": "Nie ma sensu - karta nie może być jednocześnie królem i damą.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenia $A$ i $B$ są rozłączne: $A \\cap B = \\emptyset$, więc $P(A \\cup B) = P(A) + P(B)$."
        }
      },
      {
        "step": 5,
        "hint": "Ile sposobów jest na wylosowanie dokładnie 2 królów?",
        "expression": "$|A| = \\binom{4}{2} \\cdot \\binom{20}{3}$",
        "explanation": "Wybieramy $2$ króle z $4$ możliwych i $3$ karty z $20$ pozostałych (nie będących królami)",
        "why": "Reguła mnożenia: liczba sposobów wyboru $k$rólów $\\times$ liczba sposobów wyboru reszty kart"
      },
      {
        "step": 6,
        "hint": "Ile to daje sposobów na zdarzenie $A$?",
        "expression": "$|A| = \\binom{4}{2} \\cdot \\binom{20}{3} = 6 \\cdot 1140 = 6840$",
        "explanation": "Obliczamy liczbę sposobów na dokładnie $2$ króle"
      },
      {
        "step": 7,
        "hint": "Ile sposobów jest na wylosowanie dokładnie 3 dam?",
        "expression": "$|B| = \\binom{4}{3} \\cdot \\binom{20}{2}$",
        "explanation": "Wybieramy $3$ damy z $4$ możliwych i $2$ karty z $20$ pozostałych (nie będących damami)"
      },
      {
        "step": 8,
        "hint": "Ile to daje sposobów na zdarzenie $B$?",
        "expression": "$|B| = \\binom{4}{3} \\cdot \\binom{20}{2} = 4 \\cdot 190 = 760$",
        "explanation": "Obliczamy liczbę sposobów na dokładnie $3$ damy"
      },
      {
        "step": 9,
        "hint": "Jaki wzór zastosować dla prawdopodobieństwa sumy zdarzeń rozłącznych?",
        "expression": "$P(A \\cup B) = P(A) + P(B) = \\frac{6840}{42504} + \\frac{760}{42504}$",
        "explanation": "Dodajemy prawdopodobieństwa zdarzeń rozłącznych",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo zdarzenia $A$ lub $B$ gdy są rozłączne?",
          "options": [
            {
              "id": "A",
              "text": "$P(A \\cup B) = P(A) + P(B)$ - wzór dla zdarzeń rozłącznych",
              "feedback": "Idealnie! Dla zdarzeń rozłącznych prawdopodobieństwa się dodają.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$P(A \\cup B) = P(A) + P(B) - P(A \\cap B)$ - wzór ogólny",
              "feedback": "To wzór ogólny, ale skoro $P(A \\cap B) = 0$, sprowadza się do $A$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$P(A \\cup B) = P(A) \\cdot P(B)$ - wzór na iloczyn",
              "feedback": "Nie! To wzór na prawdopodobieństwo iloczynu zdarzeń niezależnych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla zdarzeń rozłącznych używamy $P(A \\cup B) = P(A) + P(B)$."
        }
      },
      {
        "step": 10,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$P(A \\cup B) = \\frac{6840 + 760}{42504} = \\frac{7600}{42504} = \\frac{475}{2656,5} = \\frac{950}{5313}$",
        "explanation": "Upraszczamy ułamek dzieląc przez $NWD(7600, 42504) = 8$"
      }
    ],
    "solutions": [
      "$\\frac{950}{5313}$ lub w przybliżeniu $0.179$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:16:31.041Z",
    "thinking_used": true
  },
  {
    "id": "probability_envelopes",
    "topic": "Prawdopodobieństwo kombinatoryczne",
    "difficulty": 4,
    "statement": "W szufladzie znajduje się $15$ rozróżnialnych kopert: $4$ białe, $5$ niebieskich i $6$ szarych. Wybieramy losowo $4$ koperty. Oblicz prawdopodobieństwo zdarzenia: co najwyżej jedna z wylosowanych kopert będzie niebieska.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są dane w zadaniu i co musimy obliczyć?",
        "expression": "Mamy: $4$ białe + $5$ niebieskich + $6$ szarych = $15$ kopert. Losujemy $4$ koperty.",
        "explanation": "Identyfikujemy wszystkie dane z zadania"
      },
      {
        "step": 2,
        "hint": "Którą metodę wybierzesz do rozwiązania tego problemu?",
        "expression": "$P(\\text{co najwyżej 1 niebieska}) = P(0 \\text{ niebieskich}) + P(1 \\text{ niebieska})$",
        "explanation": "Rozkładamy zdarzenie na sumę rozłącznych przypadków",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć prawdopodobieństwo zdarzenia 'co najwyżej jedna niebieska'?",
          "options": [
            {
              "id": "A",
              "text": "Liczyć wprost: przypadki z $0$ niebieskich + przypadki z $1$ niebieską",
              "feedback": "Doskonały wybór! To klasyczne podejście - sumujemy sprzyjające przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć prawdopodobieństwa całkowitego i rozkładu",
              "feedback": "Zbyt skomplikowane dla tego typu zadania - lepiej liczyć wprost.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zastosować dopełnienie: $1 - P(\\text{co najmniej 2 niebieskie})$",
              "feedback": "Możliwe, ale tutaj wprost będzie prostsze niż liczenie $2$, $3$, $4$ niebieskich.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla 'co najwyżej jedna' najlepiej liczyć wprost przypadki z $0$ i $1$ niebieską kopertą."
        }
      },
      {
        "step": 3,
        "hint": "Co oznacza zdarzenie 'co najwyżej jedna niebieska'?",
        "expression": "Co najwyżej jedna = dokładnie zero lub dokładnie jedna niebieska koperta",
        "explanation": "Interpretujemy warunki zadania",
        "why": "Sformułowanie 'co najwyżej $k$' oznacza zawsze: $0, 1, 2, ..., k$ przypadków."
      },
      {
        "step": 4,
        "hint": "Ile jest wszystkich sposobów wybrania $4$ kopert z $15$?",
        "expression": "Wszystkie możliwości: $\\binom{15}{4} = \\frac{15!}{4! \\cdot 11!} = \\frac{15 \\cdot 14 \\cdot 13 \\cdot 12}{4 \\cdot 3 \\cdot 2 \\cdot 1} = 1365$",
        "explanation": "Obliczamy mianownik prawdopodobieństwa - wszystkie możliwe wybory"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć liczbę sposobów wyboru $4$ kopert bez niebieskich?",
        "expression": "Przypadki z $0$ niebieskich: $\\binom{10}{4}$ (wybieramy $4$ z $10$ białych i szarych)",
        "explanation": "Liczymy przypadki korzystne dla $0$ niebieskich kopert",
        "interactive_choice": {
          "prompt": "Jeśli wybieramy $4$ koperty i żadna nie ma być niebieska, z ilu kopert możemy wybierać?",
          "options": [
            {
              "id": "A",
              "text": "Z wszystkich $15$ kopert, ale wykluczamy niebieskie",
              "feedback": "Prawie dobrze, ale lepiej bezpośrednio policzyć dostępne koperty.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko z białych i szarych: $4 + 6 = 10$ kopert",
              "feedback": "Świetnie! Jeśli nie może być niebieskich, zostają białe i szare.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Z $15$ kopert, ale z ograniczeniami na niebieskie",
              "feedback": "To skomplikowałoby obliczenia - lepiej skupić się na dostępnych kopertach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy wykluczamy niebieskie, zostaje $10$ kopert (białe + szare) do wyboru."
        }
      },
      {
        "step": 6,
        "hint": "Ile wynosi $\\binom{10}{4}$?",
        "expression": "$\\binom{10}{4} = \\frac{10!}{4! \\cdot 6!} = \\frac{10 \\cdot 9 \\cdot 8 \\cdot 7}{4 \\cdot 3 \\cdot 2 \\cdot 1} = 210$",
        "explanation": "Obliczamy liczbę sposobów wyboru $4$ kopert z białych i szarych"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć liczbę sposobów wyboru dokładnie 1 niebieskiej koperty?",
        "expression": "Przypadki z 1 niebieską: $\\binom{5}{1} \\cdot \\binom{10}{3}$ (1 z 5 niebieskich i 3 z 10 pozostałych)",
        "explanation": "Stosujemy regułę iloczynu dla niezależnych wyborów",
        "interactive_choice": {
          "prompt": "Jak policzyć przypadki z dokładnie $1$ niebieską i $3$ pozostałymi kopertami?",
          "options": [
            {
              "id": "A",
              "text": "$\\binom{5}{1} + \\binom{10}{3}$ - suma wyborów",
              "feedback": "Nie, to nie jest suma - to iloczyn! Wybieramy $1$ niebieską ORAZ $3$ z pozostałych.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\binom{5}{1} \\cdot \\binom{10}{3}$ - iloczyn wyborów",
              "feedback": "Doskonale! $1$ niebieska z $5$ ORAZ $3$ z pozostałych $10$ (białych + szarych).",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\binom{15}{1} \\cdot \\binom{14}{3}$ - kolejne wybory",
              "feedback": "To byłoby dla wyboru z powtórzeniami. Tu mamy kombinacje bez powtórzeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: wybieramy $1$ z jednego zbioru ORAZ odpowiednią liczbę z drugiego."
        }
      },
      {
        "step": 8,
        "hint": "Jakie są wartości $\\binom{5}{1}$ i $\\binom{10}{3}$?",
        "expression": "$\\binom{5}{1} = 5$ oraz $\\binom{10}{3} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "Obliczamy poszczególne kombinacje"
      },
      {
        "step": 9,
        "hint": "Ile wynosi iloczyn $5 \\cdot 120$?",
        "expression": "Przypadki z $1$ niebieską: $5 \\cdot 120 = 600$",
        "explanation": "Obliczamy całkowitą liczbę przypadków z dokładnie $1$ niebieską kopertą"
      },
      {
        "step": 10,
        "hint": "Ile jest łącznie przypadków korzystnych?",
        "expression": "Przypadki korzystne: $210 + 600 = 810$",
        "explanation": "Sumujemy przypadki z $0$ i $1$ niebieską kopertą",
        "why": "Zdarzenia są rozłączne, więc prawdopodobieństwa dodajemy."
      },
      {
        "step": 11,
        "hint": "Jakie jest końcowe prawdopodobieństwo?",
        "expression": "P(co najwyżej 1 niebieska) = $\\frac{810}{1365} = \\frac{54}{91}$",
        "explanation": "Obliczamy prawdopodobieństwo i upraszczamy ułamek dzieląc przez $\\text{NWD}(810,1365) = 15$"
      }
    ],
    "solutions": [
      "$\\frac{54}{91}$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:17:20.314Z",
    "thinking_used": true
  },
  {
    "id": "probability_envelopes_same_color",
    "topic": "Prawdopodobieństwo klasyczne",
    "difficulty": 4,
    "statement": "W szufladzie znajduje się $15$ rozróżnialnych kopert: $4$ białe, $5$ niebieskich i $6$ szarych. Wybieramy losowo $4$ koperty. Oblicz prawdopodobieństwo zdarzenia: wszystkie wylosowane koperty będą w jednym kolorze.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie mamy dane i czego szukamy?",
        "expression": "Dane: $4$ białe + $5$ niebieskich + $6$ szarych = $15$ kopert. Wybieramy $4$ koperty. Szukamy: $P(\\text{wszystkie jednego koloru})$",
        "explanation": "Identyfikujemy dane i cel zadania"
      },
      {
        "step": 2,
        "hint": "Którą metodę wybierzesz do obliczenia tego prawdopodobieństwa?",
        "expression": "$P(A) = \\frac{liczba przypadków sprzyjających}{liczba wszystkich możliwości}$",
        "explanation": "Wybieramy klasyczne podejście do prawdopodobieństwa",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć prawdopodobieństwo w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "Prawdopodobieństwo klasyczne: $P(A) = |A|/|\\Omega|$",
              "feedback": "Świetnie! To zadanie z kombinacjami - klasyczne podejście jest idealne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Prawdopodobieństwo warunkowe",
              "feedback": "Nie pasuje tu - nie mamy zależnych zdarzeń następujących po sobie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wzór na prawdopodobieństwo zupełne",
              "feedback": "Zbyt skomplikowane - można to rozwiązać prościej przez zliczenie przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Użyjemy prawdopodobieństwa klasycznego: policzymy przypadki sprzyjające i wszystkie możliwe."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest wszystkich sposobów wyboru $4$ kopert z $15$?",
        "expression": "$|\\Omega| = \\binom{15}{4}$",
        "explanation": "Liczba wszystkich możliwości to kombinacje bez powtórzeń",
        "why": "W kombinacjach kolejność nie ma znaczenia - ważne są tylko wybrane koperty."
      },
      {
        "step": 4,
        "hint": "Ile to jest $\\binom{15}{4}$?",
        "expression": "$\\binom{15}{4} = \\frac{15!}{4!(15-4)!} = \\frac{15 \\cdot 14 \\cdot 13 \\cdot 12}{4 \\cdot 3 \\cdot 2 \\cdot 1} = \\frac{32760}{24} = 1365$",
        "explanation": "Obliczamy liczbę wszystkich możliwych wyborów"
      },
      {
        "step": 5,
        "hint": "Które zdarzenia są sprzyjające naszemu celowi?",
        "expression": "Zdarzenia sprzyjające: $A₁ = {4 białe}$, $A₂ = {4 niebieskie}$, $A₃ = {4 szare}$",
        "explanation": "Identyfikujemy wszystkie przypadki sprzyjające",
        "interactive_choice": {
          "prompt": "Jakie przypadki oznaczają, że wszystkie koperty są jednego koloru?",
          "options": [
            {
              "id": "A",
              "text": "$4$ białe LUB $4$ niebieskie LUB $4$ szare",
              "feedback": "Doskonale! To są wszystkie możliwe przypadki jednego koloru.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$4$ białe i $4$ niebieskie i $4$ szare",
              "feedback": "Nie - nie można wybrać $12$ kopert gdy wybieramy tylko $4$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko $4$ białe (bo jest ich najmniej)",
              "feedback": "Nie - możemy mieć też $4$ niebieskie lub $4$ szare.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenia sprzyjające to suma rozłącznych zdarzeń: wszystkie białe, wszystkie niebieskie, wszystkie szare."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest sposobów wyboru $4$ białych kopert z $4$ dostępnych?",
        "expression": "$|A_1| = \\binom{4}{4} = 1$",
        "explanation": "Można wybrać wszystkie $4$ białe koperty na jeden sposób"
      },
      {
        "step": 7,
        "hint": "Ile jest sposobów wyboru $4$ niebieskich kopert z $5$ dostępnych?",
        "expression": "$|A_2| = \\binom{5}{4} = 5$",
        "explanation": "Z $5$ niebieskich można wybrać $4$ na $5$ sposobów"
      },
      {
        "step": 8,
        "hint": "Ile jest sposobów wyboru $4$ szarych kopert z $6$ dostępnych?",
        "expression": "$|A_3| = \\binom{6}{4} = \\frac{6!}{4!2!} = \\frac{6 \\cdot 5}{2 \\cdot 1} = 15$",
        "explanation": "Z $6$ szarych można wybrać $4$ na $15$ sposobów"
      },
      {
        "step": 9,
        "hint": "Jaka jest łączna liczba przypadków sprzyjających?",
        "expression": "$|A| = |A_1| + |A_2| + |A_3| = 1 + 5 + 15 = 21$",
        "explanation": "Sumujemy przypadki sprzyjające (zdarzenia rozłączne)",
        "why": "Zdarzenia $A₁$, $A₂$, $A₃$ są rozłączne - nie można jednocześnie wybrać kopert dwóch różnych kolorów."
      },
      {
        "step": 10,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{21}{1365} = \\frac{7}{455}$",
        "explanation": "Obliczamy prawdopodobieństwo i upraszczamy ułamek"
      }
    ],
    "solutions": [
      "$\\frac{7}{455}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-28T07:17:53.467Z",
    "thinking_used": true
  },
  {
    "id": "probability_envelopes_pairs",
    "topic": "Prawdopodobieństwo kombinatoryczne",
    "difficulty": 4,
    "statement": "W szufladzie znajduje się $15$ rozróżnialnych kopert: $4$ białe, $5$ niebieskich i $6$ szarych. Wybieramy losowo $4$ koperty. Oblicz prawdopodobieństwo zdarzenia: wylosujemy po dwie koperty w tym samym kolorze, każda para w innym kolorze.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek '$2$ koperty w tym samym kolorze, każda para w innym kolorze'?",
        "expression": "Zdarzenie: $2$ koperty koloru $A$ + $2$ koperty koloru $B$ (gdzie $A \\neq B$)",
        "explanation": "Interpretujemy warunek jako wybór dwóch różnych kolorów, po 2 koperty z każdego",
        "interactive_choice": {
          "prompt": "Jak zinterpretować warunek zadania przy losowaniu $4$ kopert?",
          "options": [
            {
              "id": "A",
              "text": "$2$ koperty jednego koloru + $2$ koperty innego koloru",
              "feedback": "Dokładnie! Musimy wybrać dwa kolory i z każdego wziąć po 2 koperty.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Po jednej kopercie każdego koloru + $1$ dodatkowa",
              "feedback": "Nie, to by nie spełniało warunku 'po dwie koperty w tym samym kolorze'.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie $4$ koperty tego samego koloru",
              "feedback": "Nie, warunek mówi o 'każda para w INNYM kolorze', więc potrzebujemy dwóch kolorów.",
              "is_correct": false
            }
          ],
          "explanation_after": "Potrzebujemy dokładnie $2$ kopert z jednego koloru i $2$ kopert z innego koloru."
        }
      },
      {
        "step": 2,
        "hint": "Jakie są wszystkie możliwe kombinacje dwóch kolorów?",
        "expression": "Możliwe pary kolorów: (białe, niebieskie), (białe, szare), (niebieskie, szare)",
        "explanation": "Z trzech kolorów można wybrać pary na $\\binom{3}{2} = 3$ sposoby"
      },
      {
        "step": 3,
        "hint": "Którą metodę prawdopodobieństwa zastosujemy?",
        "expression": "$P = \\frac{liczba zdarzeń sprzyjających}{liczba wszystkich możliwych wyborów}$",
        "explanation": "Zastosujemy definicję klasyczną prawdopodobieństwa",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo tego zdarzenia?",
          "options": [
            {
              "id": "A",
              "text": "$P = \\frac{\\text{liczba zdarzeń sprzyjających}}{\\text{liczba wszystkich możliwych}}$",
              "feedback": "Świetnie! To klasyczna definicja prawdopodobieństwa dla zdarzeń równoprawdopodobnych.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na prawdopodobieństwo warunkowe",
              "feedback": "Nie jest potrzebne - nie mamy warunków zależnych, tylko jednorazowe losowanie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zastosować rozkład hipergeometryczny",
              "feedback": "To bardziej zaawansowane podejście, ale klasyczna definicja będzie prostsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy klasycznej definicji prawdopodobieństwa z kombinacjami."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wybrać $4$ koperty z $15$?",
        "expression": "$\\binom{15}{4} = \\frac{15!}{4! \\cdot 11!} = \\frac{15 \\cdot 14 \\cdot 13 \\cdot 12}{4 \\cdot 3 \\cdot 2 \\cdot 1} = 1365$",
        "explanation": "Liczba wszystkich możliwych sposobów wyboru $4$ kopert z $15$"
      },
      {
        "step": 5,
        "hint": "Ile sposobów jest wyboru $2$ białych i $2$ niebieskich kopert?",
        "expression": "$\\binom{4}{2} \\cdot \\binom{5}{2} = 6 \\cdot 10 = 60$",
        "explanation": "$2$ białe z $4$ białych razy $2$ niebieskie z $5$ niebieskich",
        "why": "Wykorzystujemy regułę mnożenia: wybieramy niezależnie z każdego koloru"
      },
      {
        "step": 6,
        "hint": "Ile sposobów jest wyboru $2$ białych i $2$ szarych kopert?",
        "expression": "$\\binom{4}{2} \\cdot \\binom{6}{2} = 6 \\cdot 15 = 90$",
        "explanation": "$2$ białe z $4$ białych razy $2$ szare z $6$ szarych"
      },
      {
        "step": 7,
        "hint": "Ile sposobów jest wyboru $2$ niebieskich i $2$ szarych kopert?",
        "expression": "$\\binom{5}{2} \\cdot \\binom{6}{2} = 10 \\cdot 15 = 150$",
        "explanation": "$2$ niebieskie z $5$ niebieskich razy $2$ szare z $6$ szarych"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć całkowitą liczbę zdarzeń sprzyjających?",
        "expression": "Liczba zdarzeń sprzyjających = $60 + 90 + 150 = 300$",
        "explanation": "Sumujemy liczby sposobów dla wszystkich trzech przypadków",
        "interactive_choice": {
          "prompt": "Zdarzenia (białe,niebieskie), (białe,szare), (niebieskie,szare) są:",
          "options": [
            {
              "id": "A",
              "text": "Rozłączne - dodajemy ich liczności",
              "feedback": "Tak! Nie można jednocześnie wylosować par z różnych kombinacji kolorów.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Zależne - mnożymy prawdopodobieństwa",
              "feedback": "Nie, to oddzielne, wykluczające się przypadki - nie mogą wystąpić jednocześnie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Niezależne - stosujemy wzór na przecięcie",
              "feedback": "Nie, to przypadki rozłączne (wykluczające się wzajemnie).",
              "is_correct": false
            }
          ],
          "explanation_after": "Zdarzenia są rozłączne - w jednym losowaniu może wystąpić tylko jedna z tych kombinacji."
        }
      },
      {
        "step": 9,
        "hint": "Jakie jest szukane prawdopodobieństwo?",
        "expression": "$P = \\frac{300}{1365} = \\frac{300}{1365} = \\frac{20}{91}$",
        "explanation": "Dzielimy liczbę zdarzeń sprzyjających przez liczbę wszystkich możliwych wyborów"
      }
    ],
    "solutions": [
      "$P = \\frac{20}{91}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-28T07:18:31.619Z",
    "thinking_used": true
  },
  {
    "id": "probability_two_colors",
    "topic": "Prawdopodobieństwo i kombinatoryka",
    "difficulty": 4,
    "statement": "W szufladzie znajduje się $15$ rozróżnialnych kopert: $4$ białe, $5$ niebieskich i $6$ szarych. Wybieramy losowo $4$ koperty. Oblicz prawdopodobieństwo zdarzenia: wylosujemy koperty w dwóch kolorach: białym i niebieskim.",
    "steps": [
      {
        "step": 1,
        "hint": "Co dokładnie oznacza zdarzenie 'koperty w dwóch kolorach: białym i niebieskim'?",
        "expression": "Zdarzenie A: wszystkie $4$ koperty są białe lub niebieskie, ale nie wszystkie jednego koloru",
        "explanation": "Interpretujemy warunki zadania",
        "interactive_choice": {
          "prompt": "Jak rozumiesz warunek 'koperty w dwóch kolorach: białym i niebieskim'?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie $4$ koperty to białe i niebieskie (bez szarych), ale musi być przynajmniej jedna biała i jedna niebieska",
              "feedback": "Dokładnie! To znaczy brak szarych kopert i co najmniej jeden kolor z każdego typu.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dokładnie $2$ koperty białe i $2$ niebieskie",
              "feedback": "Nie, to byłby tylko jeden szczególny przypadek. Może być różne proporcje.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie $4$ koperty to białe lub niebieskie (może być same białe lub same niebieskie)",
              "feedback": "Blisko, ale 'w dwóch kolorach' oznacza oba kolory muszą wystąpić.",
              "is_correct": false
            }
          ],
          "explanation_after": "Szukamy przypadków gdzie wszystkie koperty to białe lub niebieskie, ale oba kolory muszą wystąpić."
        }
      },
      {
        "step": 2,
        "hint": "Ile jest wszystkich sposobów wyboru $4$ kopert z $15$?",
        "expression": "$|\\Omega| = \\binom{15}{4} = \\frac{15!}{4! \\cdot 11!} = \\frac{15 \\cdot 14 \\cdot 13 \\cdot 12}{4 \\cdot 3 \\cdot 2 \\cdot 1} = 1365$",
        "explanation": "Obliczamy liczbę wszystkich możliwych wyników"
      },
      {
        "step": 3,
        "hint": "Jaką metodę wybierzesz do obliczenia korzystnych przypadków?",
        "expression": "Używamy metody dopełnienia dla kopert białych i niebieskich",
        "explanation": "Obliczamy: wszystkie z $9$ kopert ($4$ białe + $5$ niebieskich) minus przypadki jednokolorowe",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć przypadki korzystne (białe i niebieskie, ale oba kolory)?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio: $1$ biała + $3$ niebieskie, $2$ białe + $2$ niebieskie, $3$ białe + $1$ niebieska",
              "feedback": "Możliwe, ale trzeba uważać na wszystkie przypadki - można się pomylić.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Metodą dopełnienia: wszystkie z białych i niebieskich minus przypadki jednokolorowe",
              "feedback": "Świetnie! To najbezpieczniejsza metoda - mniej obliczeń i mniejsze ryzyko błędu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzorem na prawdopodobieństwo warunkowe",
              "feedback": "To nie jest typowe zastosowanie prawdopodobieństwa warunkowego.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda dopełnienia jest tutaj najefektywniejsza: wszystkie białe+niebieskie minus jednokolorowe."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest sposobów wyboru $4$ kopert spośród $9$ białych i niebieskich?",
        "expression": "$\\binom{4+5}{4} = \\binom{9}{4} = \\frac{9!}{4! \\cdot 5!} = \\frac{9 \\cdot 8 \\cdot 7 \\cdot 6}{4 \\cdot 3 \\cdot 2 \\cdot 1} = 126$",
        "explanation": "To są wszystkie sposoby wyboru $4$ kopert z białych i niebieskich razem",
        "why": "Teraz musimy odjąć przypadki gdzie wszystkie koperty są jednego koloru, bo nie spełniają warunków zadania."
      },
      {
        "step": 5,
        "hint": "Ile jest sposobów wyboru $4$ kopert tego samego koloru?",
        "expression": "Same białe: $\\binom{4}{4} = 1$ (tylko jeden sposób)\nSame niebieskie: $\\binom{5}{4} = 5$",
        "explanation": "Przypadki jednokolorowe do odjęcia"
      },
      {
        "step": 6,
        "hint": "Jaka jest liczba przypadków korzystnych?",
        "expression": "$|A| = 126 - 1 - 5 = 120$",
        "explanation": "Wszystkie białe$+$niebieskie minus przypadki jednokolorowe"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć szukane prawdopodobieństwo?",
        "expression": "$P(A) = \\frac{120}{1365}$",
        "explanation": "Podstawowe prawdopodobieństwo geometryczne",
        "interactive_choice": {
          "prompt": "Jakie jest prawdopodobieństwo zdarzenia $A$?",
          "options": [
            {
              "id": "A",
              "text": "$P(A) = \\frac{120}{1365}$",
              "feedback": "Tak, to poprawny wzór: przypadki korzystne przez wszystkie możliwe.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$P(A) = \\frac{126}{1365}$",
              "feedback": "Nie, zapomniałeś odjąć przypadki jednokolorowe.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$P(A) = \\frac{120}{126}$",
              "feedback": "Nie, mianownik to wszystkie możliwe wybory z $15$ kopert, nie tylko z białych i niebieskich.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo to stosunek przypadków korzystnych do wszystkich możliwych."
        }
      },
      {
        "step": 8,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$P(A) = \\frac{120}{1365} = \\frac{24}{273} = \\frac{8}{91}$",
        "explanation": "Upraszczamy przez największy wspólny dzielnik: $NWD(120,1365) = 15$, potem $NWD(24,273) = 3$"
      }
    ],
    "solutions": [
      "$P(A) = \\frac{8}{91}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:19:13.043Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_tourists",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "W czterdziestoosobowej grupie turystów $12$ osób zna tylko język angielski, $10$ osób - tylko język niemiecki, a $18$ osób - zarówno język angielski, jak i niemiecki. Oblicz prawdopodobieństwo wybrania losowo osoby z tej grupy, która zna język niemiecki, jeżeli wiadomo, że zna ona język angielski.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak można uporządkować te dane o znajomości języków?",
        "expression": "Tylko angielski: $12$ osób, Tylko niemiecki: $10$ osób, Oba języki: $18$ osób, Razem: $40$ osób",
        "explanation": "Identyfikujemy wszystkie grupy osób w zadaniu"
      },
      {
        "step": 2,
        "hint": "Jaką metodę wybierzesz do rozwiązania tego problemu?",
        "expression": "Używamy wzoru: $P(niemiecki|angielski) = \\frac{P(niemiecki \\cap angielski)}{P(angielski)}$",
        "explanation": "To prawdopodobieństwo warunkowe - prawdopodobieństwo zdarzenia $A$ przy założeniu $B$",
        "why": "Wzór prawdopodobieństwa warunkowego: zawężamy przestrzeń do osób znających angielski",
        "interactive_choice": {
          "prompt": "Jak najlepiej podejść do tego zadania z prawdopodobieństwem warunkowym?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
              "feedback": "Świetnie! To klasyczny wzór na prawdopodobieństwo warunkowe.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Narysować diagram Venna i policzyć bezpośrednio",
              "feedback": "Dobry sposób wizualizacji, który prowadzi do tego samego wyniku!",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć $P(niemiecki) \\cdot P(angielski)$",
              "feedback": "Nie - to by było prawdopodobieństwo iloczynu zdarzeń niezależnych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe wymaga wzoru lub bezpośredniego liczenia w zawężonej przestrzeni."
        }
      },
      {
        "step": 3,
        "hint": "Ile osób łącznie zna język angielski?",
        "expression": "Znają angielski: $12 + 18 = 30$ osób",
        "explanation": "Osoby znające angielski to te, które znają tylko angielski PLUS te znające oba języki"
      },
      {
        "step": 4,
        "hint": "Co oznacza zdarzenie 'zna niemiecki i zna angielski' w kontekście naszych danych?",
        "expression": "Znają niemiecki I angielski: $18$ osób",
        "explanation": "Przecięcie zbiorów to osoby znające oba języki równocześnie",
        "interactive_choice": {
          "prompt": "Które osoby spełniają warunek 'zna niemiecki I zna angielski'?",
          "options": [
            {
              "id": "A",
              "text": "Tylko te $18$ osób znających oba języki",
              "feedback": "Dokładnie! To przecięcie zbiorów - osoby znające oba języki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$10 + 18 = 28$ osób znających niemiecki",
              "feedback": "To byłoby tylko 'zna niemiecki', ale potrzebujemy przecięcia z 'zna angielski'.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$12 + 18 = 30$ osób znających angielski",
              "feedback": "To byłoby tylko 'zna angielski', ale potrzebujemy przecięcia z 'zna niemiecki'.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przecięcie to część wspólna - tylko osoby znające OBA języki jednocześnie."
        }
      },
      {
        "step": 5,
        "hint": "Jak podstawić nasze wartości do wzoru prawdopodobieństwa warunkowego?",
        "expression": "$P(niemiecki|angielski) = \\frac{18}{30}$",
        "explanation": "Podstawiamy: licznik = $18$ (oba języki), mianownik = $30$ (wszyscy znający angielski)"
      },
      {
        "step": 6,
        "hint": "Jak uprościć ten ułamek?",
        "expression": "$P(niemiecki|angielski) = \\frac{18}{30} = \\frac{3}{5} = 0,6$",
        "explanation": "Upraszczamy ułamek dzieląc licznik i mianownik przez $6$",
        "interactive_choice": {
          "prompt": "Do jakiej najprostszej postaci można sprowadzić ułamek $\\frac{18}{30}$?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{3}{5} = 0,6$",
              "feedback": "Świetnie! Dzielimy licznik i mianownik przez $6$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\frac{9}{15}$",
              "feedback": "To uproszczenie, ale można jeszcze bardziej - podziel przez $3$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\frac{6}{10}$",
              "feedback": "To też uproszczenie, ale można jeszcze bardziej - podziel przez $2$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Największy wspólny dzielnik $18$ i $30$ to $6$, więc $\\frac{18}{30} = \\frac{3}{5}$."
        }
      }
    ],
    "solutions": [
      "$\\frac{3}{5}$",
      "$0,6$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:19:49.510Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_balls",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 3,
    "statement": "W pudełku znajdują się $3$ kule białe, $4$ kule czerwone i $5$ kul niebieskich. Z pudełka wybieramy losowo jedną kulę. Oblicz prawdopodobieństwo wylosowania kuli czerwonej, jeżeli wiadomo, że wylosowana kula nie jest niebieska.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile łącznie kul znajduje się w pudełku?",
        "expression": "Łączna liczba kul: $3 + 4 + 5 = 12$",
        "explanation": "Sumujemy wszystkie kule: białe, czerwone i niebieskie"
      },
      {
        "step": 2,
        "hint": "Jaki typ prawdopodobieństwa musimy obliczyć?",
        "expression": "Szukamy $P(czerwona|nie niebieska)$",
        "explanation": "Definiujemy prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Co oznacza sformułowanie 'jeżeli wiadomo, że wylosowana kula nie jest niebieska'?",
          "options": [
            {
              "id": "A",
              "text": "To zwykłe prawdopodobieństwo - ignorujemy tę informację",
              "feedback": "Nie, słowo 'jeżeli' wskazuje na dodatkową informację, która zmienia sytuację.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To prawdopodobieństwo warunkowe - mamy dodatkową informację",
              "feedback": "Tak! Mamy prawdopodobieństwo warunkowe $P(\\text{czerwona}|\\text{nie niebieska})$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Trzeba po prostu usunąć niebieskie kule z pudełka",
              "feedback": "To jeden ze sposobów myślenia, ale matematycznie to prawdopodobieństwo warunkowe.",
              "is_correct": true
            }
          ],
          "explanation_after": "To prawdopodobieństwo warunkowe. Dodatkowa informacja 'nie jest niebieska' ogranicza naszą przestrzeń możliwych wyników."
        }
      },
      {
        "step": 3,
        "hint": "Jak oznaczyć zdarzenia $A$ i $B$?",
        "expression": "Niech $A$ = wylosowanie kuli czerwonej, $B$ = wylosowana kula nie jest niebieska",
        "explanation": "Określamy zdarzenia do zastosowania wzoru na prawdopodobieństwo warunkowe"
      },
      {
        "step": 4,
        "hint": "Którą metodą obliczymy prawdopodobieństwo warunkowe?",
        "expression": "Stosujemy wzór: $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
        "explanation": "Wybieramy metodę wzoru na prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć $P(\\text{czerwona}|\\text{nie niebieska})$?",
          "options": [
            {
              "id": "A",
              "text": "Wzór $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
              "feedback": "Świetnie! To klasyczna definicja prawdopodobieństwa warunkowego.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Ograniczyć się do kul białych i czerwonych ($7$ kul)",
              "feedback": "Dobra intuicja! To równoważny sposób - pracujemy w zredukowanej przestrzeni.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podzielić liczbę czerwonych przez wszystkie $\\frac{4}{12}$",
              "feedback": "Nie, to nie uwzględnia informacji o tym, że kula nie jest niebieska.",
              "is_correct": false
            }
          ],
          "explanation_after": "Możemy użyć wzoru lub pracować w zredukowanej przestrzeni. Oba podejścia dają ten sam wynik."
        }
      },
      {
        "step": 5,
        "hint": "Ile kul nie jest niebieskich?",
        "expression": "$P(B) = P(nie niebieska) = \\frac{3 + 4}{12} = \\frac{7}{12}$",
        "explanation": "Prawdopodobieństwo wylosowania kuli białej lub czerwonej",
        "why": "Zdarzenie B obejmuje wszystkie kule oprócz niebieskich: białe $3$ + czerwone $4$ = $7$ kul"
      },
      {
        "step": 6,
        "hint": "Co oznacza zdarzenie 'czerwona $I$ nie niebieska'?",
        "expression": "$P(A \\cap B) = P(czerwona) = \\frac{4}{12} = \\frac{1}{3}$",
        "explanation": "Prawdopodobieństwo wylosowania kuli czerwonej",
        "interactive_choice": {
          "prompt": "Czym jest zdarzenie $A \\cap B$ (czerwona i nie niebieska)?",
          "options": [
            {
              "id": "A",
              "text": "To niemożliwe - kula nie może być czerwona i nie niebieska",
              "feedback": "Pomyśl jeszcze raz. Czy czerwona kula jest niebieska?",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To po prostu wylosowanie kuli czerwonej",
              "feedback": "Dokładnie! Każda czerwona kula automatycznie nie jest niebieska.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To wylosowanie kuli białej lub czerwonej",
              "feedback": "Nie, $A∩B$ to część wspólna - tylko kule czerwone spełniają oba warunki.",
              "is_correct": false
            }
          ],
          "explanation_after": "A∩B = wylosowanie czerwonej kuli, bo każda czerwona kula nie jest niebieska."
        }
      },
      {
        "step": 7,
        "hint": "Jak zastosować wzór na prawdopodobieństwo warunkowe?",
        "expression": "$P(A|B) = \\frac{P(A \\cap B)}{P(B)} = \\frac{\\frac{1}{3}}{\\frac{7}{12}}$",
        "explanation": "Podstawiamy obliczone wartości do wzoru"
      },
      {
        "step": 8,
        "hint": "Jak podzielić te ułamki?",
        "expression": "$P(A|B) = \\frac{1}{3} \\cdot \\frac{12}{7} = \\frac{12}{21} = \\frac{4}{7}$",
        "explanation": "Dzielenie ułamków zamieniamy na mnożenie przez odwrotność"
      },
      {
        "step": 9,
        "hint": "Czy możemy zweryfikować wynik prostszą metodą?",
        "expression": "Weryfikacja: spośród $7$ kul nie niebieskich, $4$ to czerwone, więc $\\frac{4}{7}$ ✓",
        "explanation": "Potwierdzamy wynik metodą zredukowanej przestrzeni"
      }
    ],
    "solutions": [
      "$\\frac{4}{7}$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-09-28T07:20:25.793Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_cards",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Z talii $52$ kart losujemy $2$ karty. Oblicz prawdopodobieństwo wylosowania dwóch kart, które są figurami (figury to: as, król, dama, walet), jeżeli wiadomo, że obie karty są kierami.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki typ prawdopodobieństwa obliczamy gdy mamy warunek 'jeżeli wiadomo, że...'?",
        "expression": "$P(obie figury|obie kiery)$",
        "explanation": "Szukamy prawdopodobieństwa warunkowego",
        "interactive_choice": {
          "prompt": "Jak należy interpretować sformułowanie 'jeżeli wiadomo, że obie karty są kierami'?",
          "options": [
            {
              "id": "A",
              "text": "To zwykłe prawdopodobieństwo - liczymy wszystkie możliwe pary kart",
              "feedback": "Nie - słowa 'jeżeli wiadomo' wskazują na warunek, który ogranicza przestrzeń zdarzeń.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To prawdopodobieństwo warunkowe - ograniczamy się do par kierów",
              "feedback": "Dokładnie! Warunek zawęża przestrzeń do par złożonych tylko z kierów.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To prawdopodobieństwo sumy zdarzeń - dodajemy prawdopodobieństwa",
              "feedback": "Nie - nie łączymy różnych zdarzeń, tylko obliczamy prawdopodobieństwo pod warunkiem.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo warunkowe $P(A|B)$ oznacza prawdopodobieństwo $A$ pod warunkiem $B$."
        }
      },
      {
        "step": 2,
        "hint": "Ile jest figur wśród kierów w standardowej talii?",
        "expression": "W kierach figury to: $as$, $król$, $dama$, $walet$ - razem $4$ figury",
        "explanation": "Identyfikujemy figury kierowe w talii"
      },
      {
        "step": 3,
        "hint": "Ile łącznie jest kierów w talii?",
        "expression": "W talii $52$ kart jest $13$ kierów",
        "explanation": "Określamy całkowitą liczbę kierów"
      },
      {
        "step": 4,
        "hint": "Którą metodą obliczymy prawdopodobieństwo warunkowe?",
        "expression": "$P = \\frac{sposoby wyboru 2 figur z kierów}{sposoby wyboru 2 kierów}$",
        "explanation": "Stosujemy definicję prawdopodobieństwa w zawężonej przestrzeni",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć $P(\\text{obie figury} | \\text{obie kiery})$?",
          "options": [
            {
              "id": "A",
              "text": "Wzorem $P(A|B) = P(A∩B)/P(B)$ z pełną talią",
              "feedback": "Możliwe, ale bardziej złożone - trzeba liczyć przecięcia zdarzeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bezpośrednio: sposoby wyboru $2$ figur z kierów / sposoby wyboru $2$ kierów",
              "feedback": "Świetnie! To najprostsze podejście - ograniczamy się od razu do kierów.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczyć każdą kartę osobno i mnożyć prawdopodobieństwa",
              "feedback": "To podejście nie uwzględnia faktu, że losujemy bez zwracania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Bezpośrednie liczenie w zawężonej przestrzeni (tylko kiery) jest najefektywniejsze."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wybrać $2$ figury z $4$ figur kierowych?",
        "expression": "$\\binom{4}{2} = \\frac{4!}{2!(4-2)!} = \\frac{4 \\cdot 3}{2 \\cdot 1} = 6$",
        "explanation": "Liczba sposobów wyboru $2$ figur z $4$ kierowych figur",
        "why": "Używamy kombinacji bez powtórzeń, bo nie możemy wylosować tej samej karty dwukrotnie."
      },
      {
        "step": 6,
        "hint": "Na ile sposobów można wybrać $2$ karty z $13$ kierów?",
        "expression": "$\\binom{13}{2} = \\frac{13!}{2!(13-2)!} = \\frac{13 \\cdot 12}{2 \\cdot 1} = 78$",
        "explanation": "Liczba sposobów wyboru $2$ kierów z $13$"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P(obie figury|obie kiery) = \\frac{6}{78} = \\frac{1}{13}$",
        "explanation": "Obliczamy szukane prawdopodobieństwo warunkowe",
        "interactive_choice": {
          "prompt": "Które obliczenie da nam ostateczny wynik?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{6}{78} = \\frac{1}{13}$",
              "feedback": "Correct! Dzielimy liczbę korzystnych przypadków przez wszystkie możliwe w zawężonej przestrzeni.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\frac{78}{6} = 13$",
              "feedback": "Nie - prawdopodobieństwo nie może być większe od $1$. Odwróciłeś ułamek.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$6 + 78 = 84$",
              "feedback": "Nie - dodawanie nie ma tu sensu. Prawdopodobieństwo to $\\frac{\\text{liczba zdarzeń sprzyjających}}{\\text{liczba wszystkich możliwych zdarzeń}}$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Prawdopodobieństwo to zawsze iloraz przypadków korzystnych przez wszystkie możliwe."
        }
      },
      {
        "step": 8,
        "hint": "Czy wynik ma sens intuicyjnie?",
        "expression": "$P = \\frac{1}{13} \\approx 0,077 = 7,7\\%$",
        "explanation": "Prawdopodobieństwo wynosi $\\frac{1}{13}$ czyli około $7,7\\%$",
        "why": "Wynik jest rozsądny: wśród $13$ kierów tylko $4$ to figury, więc szansa na wylosowanie $2$ figur jest niewielka."
      }
    ],
    "solutions": [
      "$\\frac{1}{13}$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:21:11.580Z",
    "thinking_used": true
  },
  {
    "id": "conditional_probability_cards",
    "topic": "Prawdopodobieństwo warunkowe",
    "difficulty": 4,
    "statement": "Z talii $52$ kart losujemy $2$ karty. Oblicz prawdopodobieństwo wylosowania dwóch kart, które są figurami (figury to: as, król, dama, walet), jeżeli wiadomo, że obie karty są czerwone.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki typ prawdopodobieństwa tutaj obliczamy?",
        "expression": "Szukamy $P(obie figury | obie czerwone)$",
        "explanation": "To prawdopodobieństwo warunkowe - obliczamy szansę na zdarzenie $A$ pod warunkiem że zaszło $B$",
        "why": "Prawdopodobieństwo warunkowe $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$ gdzie $A$ = obie figury, $B$ = obie czerwone"
      },
      {
        "step": 2,
        "hint": "Którą metodą najlepiej rozwiązać to zadanie?",
        "expression": "Ograniczamy przestrzeń do $26$ czerwonych kart",
        "explanation": "Skoro wiemy że obie karty są czerwone, liczymy tylko wśród nich",
        "interactive_choice": {
          "prompt": "Jak obliczyć prawdopodobieństwo warunkowe w tym zadaniu?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru $P(A|B) = \\frac{P(A \\cap B)}{P(B)}$",
              "feedback": "Klasyczne podejście - zawsze działa, ale wymaga więcej obliczeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Ograniczyć przestrzeń do czerwonych kart i liczyć bezpośrednio",
              "feedback": "Świetnie! Prostsze - wiemy że karty są czerwone, więc liczymy tylko wśród nich.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć $P(figury) \\cdot P(czerwone)$",
              "feedback": "Nie! To by było dla zdarzeń niezależnych, a tu mamy warunek.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia A i B są poprawne. Metoda B jest prostsza - ograniczamy się do $26$ czerwonych kart."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest czerwonych kart w talii i które to są figury?",
        "expression": "Czerwonych kart: $26$ ($13♥ + 13♦$), czerwonych figur: $8$",
        "explanation": "W talii mamy $26$ czerwonych kart, z czego $8$ to figury",
        "interactive_choice": {
          "prompt": "Które karty w talii to czerwone figury?",
          "options": [
            {
              "id": "A",
              "text": "$4$ figury kier + $4$ figury kar = $8$ kart",
              "feedback": "Dokładnie! $As$, król, dama, walet w dwóch czerwonych kolorach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko króle i damy = $4$ karty",
              "feedback": "Nie, figury to też asy i walety według definicji zadania.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie karty kier = $13$ kart",
              "feedback": "Nie, figury to tylko as, król, dama, walet, nie wszystkie karty koloru.",
              "is_correct": false
            }
          ],
          "explanation_after": "Czerwone figury: $as♥$, $król♥$, $dama♥$, $walet♥$, $as♦$, $król♦$, $dama♦$, $walet♦$ = $8$ kart"
        }
      },
      {
        "step": 4,
        "hint": "Ile jest sposobów wylosowania $2$ kart z $26$ czerwonych?",
        "expression": "Wszystkich możliwości: $\\binom{26}{2} = \\frac{26 \\cdot 25}{2} = 325$",
        "explanation": "Liczba sposobów wyboru $2$ kart z $26$ czerwonych (bez względu na kolejność)"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wylosować $2$ czerwone figury?",
        "expression": "Korzystnych możliwości: $\\binom{8}{2} = \\frac{8 \\cdot 7}{2} = 28$",
        "explanation": "Liczba sposobów wyboru $2$ figur z $8$ czerwonych figur",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania $2$ figur z $8$ czerwonych figur?",
          "options": [
            {
              "id": "A",
              "text": "$8 \\cdot 7 = 56$ sposobów",
              "feedback": "To uwzględnia kolejność - ale w losowaniu kart kolejność nie ma znaczenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\binom{8}{2} = \\frac{8 \\cdot 7}{2} = 28$ sposobów",
              "feedback": "Dokładnie! Kombinacje bez powtórzeń, kolejność nieważna.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$8^2 = 64$ sposobów",
              "feedback": "Nie, to by było z powtórzeniami, a karty są różne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy kombinacji $\\binom{8}{2}$ bo karty są różne i kolejność nie ma znaczenia."
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć prawdopodobieństwo warunkowe?",
        "expression": "$P(obie figury | obie czerwone) = \\frac{28}{325}$",
        "explanation": "Prawdopodobieństwo to stosunek przypadków korzystnych do wszystkich możliwych"
      },
      {
        "step": 7,
        "hint": "Czy można uprościć ten ułamek?",
        "expression": "$\\frac{28}{325} = \\frac{28}{325}$",
        "explanation": "Ułamek jest już w najprostszej postaci (NWD($28$,$325$) = $1$)"
      },
      {
        "step": 8,
        "hint": "Jaka jest wartość dziesiętna tego prawdopodobieństwa?",
        "expression": "$\\frac{28}{325} \\approx 0{,}086 = 8{,}6\\%$",
        "explanation": "Prawdopodobieństwo wynosi około $8,6\\%$"
      }
    ],
    "solutions": [
      "$\\frac{28}{325}$",
      "$\\approx 0{,}086$",
      "$8{,}6\\%$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-28T07:23:13.443Z",
    "thinking_used": true
  }
]