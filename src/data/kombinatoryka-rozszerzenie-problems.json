[
  {
    "id": "three_digit_divisible_lcm",
    "topic": "Podzielność liczb naturalnych",
    "difficulty": 3,
    "statement": "Oblicz, ile jest liczb naturalnych trzycyfrowych podzielnych przez $12$ i $15$.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza, że liczba jest podzielna przez $12$ i przez $15$ jednocześnie?",
        "expression": "Szukamy liczb podzielnych przez $NWW(12, 15)$",
        "explanation": "Liczba podzielna przez $12$ i $15$ musi być wielokrotnością NWW tych liczb",
        "why": "NWW to najmniejsza liczba, która jest wielokrotnością obu danych liczb. Każda inna wspólna wielokrotność jest wielokrotnością NWW.",
        "interactive_choice": {
          "prompt": "Jak znaleźć liczby podzielne jednocześnie przez $12$ i $15$?",
          "options": [
            {
              "id": "A",
              "text": "Szukać liczb podzielnych przez $12 + 15 = 27$",
              "feedback": "Nie - suma nie daje wspólnej podzielności. Przykład: $24$ jest podzielne przez $12$, ale nie przez $27$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Szukać liczb podzielnych przez $NWD(12, 15)$",
              "feedback": "NWD to największy wspólny dzielnik - daje liczby które dzielą $12$ i $15$, nie odwrotnie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Szukać liczb podzielnych przez $NWW(12, 15)$",
              "feedback": "Doskonale! NWW to najmniejsza liczba podzielna przez obie liczby - dokładnie to czego szukamy.",
              "is_correct": true
            }
          ],
          "explanation_after": "Liczby podzielne przez $12$ i $15$ to wielokrotności ich najmniejszej wspólnej wielokrotności $NWW(12, 15)$."
        }
      },
      {
        "step": 2,
        "hint": "Jak obliczyć NWW($12$, $15$)?",
        "expression": "$12 = 2^2 \\cdot 3$ oraz $15 = 3 \\cdot 5$",
        "explanation": "Rozkładamy obie liczby na czynniki pierwsze",
        "interactive_choice": {
          "prompt": "Którą metodę użyjesz do obliczenia $NWW(12, 15)$?",
          "options": [
            {
              "id": "A",
              "text": "Rozkład na czynniki pierwsze",
              "feedback": "Świetnie! To najlepsza metoda - rozkładamy: $12 = 2^2 \\cdot 3$, $15 = 3 \\cdot 5$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzór $NWW(a,b) = \\frac{a \\cdot b}{NWD(a,b)}$",
              "feedback": "Dobry wybór! Najpierw znajdź $NWD(12,15) = 3$, potem $NWW = \\frac{12 \\cdot 15}{3} = 60$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wypisać wielokrotności obu liczb",
              "feedback": "Możliwe, ale pracochłonne: $12$, $24$, $36$, $48$, $60$... i $15$, $30$, $45$, $60$...",
              "is_correct": true
            }
          ],
          "explanation_after": "Wszystkie metody prowadzą do tego samego wyniku. Rozkład na czynniki pierwsze jest najbardziej uniwersalny."
        }
      },
      {
        "step": 3,
        "hint": "Jak z rozkładów otrzymać NWW?",
        "expression": "$NWW(12, 15) = 2^2 \\cdot 3 \\cdot 5 = 4 \\cdot 3 \\cdot 5 = 60$",
        "explanation": "NWW to iloczyn najwyższych potęg wszystkich występujących czynników pierwszych",
        "why": "Bierzemy każdy czynnik pierwszy w najwyższej potędze: $2^2$ z $12$, $3^1$ z obu, $5^1$ z $15$."
      },
      {
        "step": 4,
        "hint": "Jakie są granice dla liczb trzycyfrowych?",
        "expression": "Liczby trzycyfrowe: od $100$ do $999$",
        "explanation": "Najmniejsza liczba trzycyfrowa to $100$, największa to $999$"
      },
      {
        "step": 5,
        "hint": "Jaka jest najmniejsza liczba trzycyfrowa podzielna przez $60$?",
        "expression": "$\\lceil \\frac{100}{60} \\rceil \\cdot 60 = 2 \\cdot 60 = 120$",
        "explanation": "Dzielimy $100$ przez $60$ i zaokrąglamy w górę: $\\frac{100}{60} \\approx 1.67$, więc bierzemy $2 \\cdot 60 = 120$"
      },
      {
        "step": 6,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez $60$?",
        "expression": "$\\lfloor \\frac{999}{60} \\rfloor \\cdot 60 = 16 \\cdot 60 = 960$",
        "explanation": "Dzielimy $999$ przez $60$ i zaokrąglamy w dół: $\\frac{999}{60} = 16.65$, więc bierzemy $16 \\cdot 60 = 960$"
      },
      {
        "step": 7,
        "hint": "Ile jest wielokrotności $60$ od $120$ do $960$?",
        "expression": "Liczby: $120, 180, 240, ..., 960$ to wielokrotności $60 \\cdot k$ dla $k = 2, 3, 4, ..., 16$",
        "explanation": "Mamy wielokrotności $60$ od $k=2$ do $k=16$",
        "interactive_choice": {
          "prompt": "Jak policzyć ile jest liczb postaci $60k$ dla $k$ od $2$ do $16$?",
          "options": [
            {
              "id": "A",
              "text": "To jest $16 - 2 = 14$ liczb",
              "feedback": "Nie - zapominasz o końcach przedziału! Liczby: $2$, $3$, $4$, ..., $16$ to więcej niż $14$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To jest $16 - 2 + 1 = 15$ liczb",
              "feedback": "Dokładnie! Wzór: ostatni - pierwszy + $1$. Sprawdzenie: od $2$ do $4$ to $3$ liczby $(2,3,4)$, czyli $4-2+1=3$ ✓",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To jest $\\frac{960 - 120}{60} = 14$ liczb",
              "feedback": "Prawie! Ten wzór daje liczbę kroków między liczbami, ale zapominasz o pierwszej liczbie. Dodaj $1$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba elementów w ciągu arytmetycznym: $(\\text{ostatni} - \\text{pierwszy})/\\text{różnica} + 1$, lub po prostu: $\\text{ostatni\\_indeks} - \\text{pierwszy\\_indeks} + 1$."
        }
      },
      {
        "step": 8,
        "hint": "Ile jest liczb całkowitych od $2$ do $16$ włącznie?",
        "expression": "$16 - 2 + 1 = 15$",
        "explanation": "Liczba elementów: $\\text{ostatni} - \\text{pierwszy} + 1$"
      }
    ],
    "solutions": [
      "$15$"
    ],
    "parameters": {
      "range": "liczby trzycyfrowe $(100-999)$",
      "divisors": "$12$ i $15$",
      "lcm": "$60$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T06:36:50.230Z"
  },
  {
    "id": "counting_divisibility_lcm",
    "topic": "Zasada włączeń i wyłączeń, podzielność",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb naturalnych trzycyfrowych podzielnych przez $12$ lub $15$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki jest zakres liczb trzycyfrowych?",
        "expression": "Liczby trzycyfrowe: od $100$ do $999$",
        "explanation": "Ustalamy dziedzinę problemu"
      },
      {
        "step": 2,
        "hint": "Jak podejść do problemu zliczania liczb podzielnych przez $12$ lub $15$?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B|$",
        "explanation": "Gdzie $A$ - liczby podzielne przez $12$, $B$ - liczby podzielne przez $15$",
        "why": "To fundamentalna zasada kombinatoryki. Bez odjęcia $|A \\cap B|$ policzylibyśmy niektóre liczby dwukrotnie.",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do zliczenia liczb podzielnych przez $12$ lub $15$?",
          "options": [
            {
              "id": "A",
              "text": "Zliczyć osobno podzielne przez $12$ i przez $15$, potem dodać",
              "feedback": "Uwaga! Tak policzymy niektóre liczby dwa razy - te podzielne przez oba.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć zasady włączeń i wyłączeń: $|A \\cup B| = |A| + |B| - |A \\cap B|$",
              "feedback": "Doskonale! To uwzględni liczby policzone podwójnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zliczyć liczby podzielne przez $12 + 15 = 27$",
              "feedback": "Nie - podzielność nie działa przez dodawanie. Liczba podzielna przez $12$ lub $15$ nie musi być podzielna przez $27$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń i wyłączeń pozwala uniknąć podwójnego liczenia. Musimy odjąć liczby podzielne przez obie wartości."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez $12$?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{12} \\rceil \\cdot 12 = 9 \\cdot 12 = 108$",
        "explanation": "Znajdujemy pierwszą liczbę trzycyfrową podzielną przez $12$"
      },
      {
        "step": 4,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez $12$?",
        "expression": "Największa: $\\lfloor \\frac{999}{12} \\rfloor \\cdot 12 = 83 \\cdot 12 = 996$",
        "explanation": "Znajdujemy ostatnią liczbę trzycyfrową podzielną przez $12$"
      },
      {
        "step": 5,
        "hint": "Ile jest wyrazów w ciągu arytmetycznym od $108$ do $996$ o różnicy $12$?",
        "expression": "$|A| = \\frac{996 - 108}{12} + 1 = \\frac{888}{12} + 1 = 74 + 1 = 75$",
        "explanation": "Liczba wyrazów ciągu: $\\frac{a_n - a_1}{r} + 1$"
      },
      {
        "step": 6,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez $15$?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{15} \\rceil \\cdot 15 = 7 \\cdot 15 = 105$",
        "explanation": "Pierwsza liczba trzycyfrowa podzielna przez $15$"
      },
      {
        "step": 7,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez $15$?",
        "expression": "Największa: $\\lfloor \\frac{999}{15} \\rfloor \\cdot 15 = 66 \\cdot 15 = 990$",
        "explanation": "Ostatnia liczba trzycyfrowa podzielna przez $15$"
      },
      {
        "step": 8,
        "hint": "Ile jest liczb podzielnych przez $15$ w zakresie trzycyfrowym?",
        "expression": "$|B| = \\frac{990 - 105}{15} + 1 = \\frac{885}{15} + 1 = 59 + 1 = 60$",
        "explanation": "Zliczamy liczby podzielne przez $15$"
      },
      {
        "step": 9,
        "hint": "Przez jaką liczbę muszą być podzielne liczby należące do $A \\cap B$?",
        "expression": "$NWW(12, 15) = NWW(2^2 \\cdot 3, 3 \\cdot 5) = 2^2 \\cdot 3 \\cdot 5 = 60$",
        "explanation": "Obliczamy NWW z rozkładu na czynniki pierwsze",
        "why": "NWW to najmniejsza liczba podzielna przez obie dane liczby. Bierzemy największe potęgi wszystkich czynników pierwszych.",
        "interactive_choice": {
          "prompt": "Liczby podzielne zarówno przez $12$ jak i przez $15$ są podzielne przez:",
          "options": [
            {
              "id": "A",
              "text": "$12 \\cdot 15 = 180$",
              "feedback": "Nie zawsze - to działa tylko gdy liczby są względnie pierwsze. Tu $NWD(12,15) = 3$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$NWW(12, 15) = 60$",
              "feedback": "Dokładnie! Liczba podzielna przez obie musi być podzielna przez ich najmniejszą wspólną wielokrotność.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$NWD(12, 15) = 3$",
              "feedback": "Nie - NWD to największy wspólny dzielnik, a potrzebujemy wspólnej wielokrotności.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczby podzielne przez $a$ i $b$ są podzielne przez $NWW(a,b)$. Tu: $NWW(12,15) = 60$."
        }
      },
      {
        "step": 10,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez $60$?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{60} \\rceil \\cdot 60 = 2 \\cdot 60 = 120$",
        "explanation": "Pierwsza liczba trzycyfrowa podzielna przez $60$"
      },
      {
        "step": 11,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez $60$?",
        "expression": "Największa: $\\lfloor \\frac{999}{60} \\rfloor \\cdot 60 = 16 \\cdot 60 = 960$",
        "explanation": "Ostatnia liczba trzycyfrowa podzielna przez $60$"
      },
      {
        "step": 12,
        "hint": "Ile jest liczb podzielnych przez $60$ w zakresie trzycyfrowym?",
        "expression": "$|A \\cap B| = \\frac{960 - 120}{60} + 1 = \\frac{840}{60} + 1 = 14 + 1 = 15$",
        "explanation": "Zliczamy liczby podzielne przez $60$"
      },
      {
        "step": 13,
        "hint": "Jak obliczyć ostateczną odpowiedź używając zasady włączeń i wyłączeń?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B| = 75 + 60 - 15 = 120$",
        "explanation": "Stosujemy wzór: dodajemy liczby podzielne przez $12$ i $15$, odejmujemy te policzone dwukrotnie"
      }
    ],
    "solutions": [
      "$120$"
    ],
    "parameters": {
      "range": "liczby trzycyfrowe: $[100, 999]$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 2,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:37:23.874Z"
  },
  {
    "id": "four_digit_divisible_4_and_9",
    "topic": "Podzielność liczb i kombinatoryka",
    "difficulty": 3,
    "statement": "Oblicz, ile jest wszystkich liczb czterocyfrowych podzielnych przez $4$ i $9$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki jest zakres liczb czterocyfrowych?",
        "expression": "Liczby czterocyfrowe: od $1000$ do $9999$",
        "explanation": "Najmniejsza liczba czterocyfrowa to $1000$, największa to $9999$"
      },
      {
        "step": 2,
        "hint": "Przez jaką liczbę musi być podzielna liczba, aby była podzielna jednocześnie przez $4$ i $9$?",
        "expression": "$NWW(4, 9) = 36$",
        "explanation": "Szukamy liczb podzielnych przez $36$",
        "why": "Gdy dwie liczby są względnie pierwsze (nie mają wspólnych dzielników oprócz 1), ich NWW to po prostu ich iloczyn. Tutaj $NWD(4,9) = 1$, więc $NWW(4,9) = 36$.",
        "interactive_choice": {
          "prompt": "Jeśli liczba jest podzielna przez $4$ i przez $9$, to przez co jeszcze jest podzielna?",
          "options": [
            {
              "id": "A",
              "text": "Przez $4 + 9 = 13$",
              "feedback": "Nie - suma nie daje podzielności. Jeśli $n$ dzieli się przez $a$ i $b$, to dzieli się przez ich NWW.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez $4 \\cdot 9 = 36$",
              "feedback": "Prawie! To działa gdy liczby są względnie pierwsze. Tutaj $NWD(4,9) = 1$, więc $NWW(4,9) = 36$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Przez $NWD(4,9) = 1$",
              "feedback": "NWD to największy wspólny dzielnik, ale szukamy najmniejszej wspólnej wielokrotności - NWW.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba podzielna przez $a$ i $b$ jest podzielna przez $NWW(a,b)$. Ponieważ $4 = 2^2$ i $9 = 3^2$ są względnie pierwsze, $NWW(4,9) = 4 \\cdot 9 = 36$."
        }
      },
      {
        "step": 3,
        "hint": "Jaka jest najmniejsza liczba czterocyfrowa podzielna przez $36$?",
        "expression": "$\\lceil \\frac{1000}{36} \\rceil \\cdot 36 = 28 \\cdot 36 = 1008$",
        "explanation": "Dzielimy $1000$ przez $36$ i zaokrąglamy w górę: $\\frac{1000}{36} \\approx 27.78$, więc bierzemy $28$"
      },
      {
        "step": 4,
        "hint": "Jaka jest największa liczba czterocyfrowa podzielna przez $36$?",
        "expression": "$\\lfloor \\frac{9999}{36} \\rfloor \\cdot 36 = 277 \\cdot 36 = 9972$",
        "explanation": "Dzielimy $9999$ przez $36$ i zaokrąglamy w dół: $\\frac{9999}{36} \\approx 277.75$, więc bierzemy $277$"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć ile jest wielokrotności $36$ od $1008$ do $9972$?",
        "expression": "$\\frac{9972 - 1008}{36} + 1 = \\frac{8964}{36} + 1 = 249 + 1 = 250$",
        "explanation": "Liczba wielokrotności $36$ w przedziale",
        "why": "Alternatywnie: wielokrotności to $28 \\cdot 36, 29 \\cdot 36, ..., 277 \\cdot 36$, czyli liczby od $28$ do $277$, co daje $277 - 28 + 1 = 250$ liczb.",
        "interactive_choice": {
          "prompt": "Mamy ciąg arytmetyczny: $1008, 1044, 1080, ..., 9972$. Jak policzyć ile jest wyrazów?",
          "options": [
            {
              "id": "A",
              "text": "Odjąć: $9972 - 1008 = 8964$",
              "feedback": "To daje różnicę między pierwszym a ostatnim wyrazem, ale nie liczbę wyrazów.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Podzielić: $\\frac{9972 - 1008}{36}$ i dodać $1$",
              "feedback": "Świetnie! To wzór na liczbę wyrazów ciągu arytmetycznego: $\\frac{a_n - a_1}{r} + 1$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru: $\\frac{277 - 28}{36}$",
              "feedback": "Nie - dzielisz przez niewłaściwą liczbę. Mamy $277 - 28 + 1$ wyrazów bezpośrednio.",
              "is_correct": false
            }
          ],
          "explanation_after": "W ciągu arytmetycznym od $a_1$ do $a_n$ z różnicą $r$ jest $\\frac{a_n - a_1}{r} + 1$ wyrazów. Możemy też policzyć: od $28$ do $277$ jest $277 - 28 + 1 = 250$ liczb."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest liczb czterocyfrowych podzielnych przez $4$ i $9$?",
        "expression": "Odpowiedź: $250$ liczb",
        "explanation": "Jest dokładnie $250$ liczb czterocyfrowych podzielnych jednocześnie przez $4$ i $9$"
      }
    ],
    "solutions": [
      "$250$"
    ],
    "parameters": {
      "range": "liczby czterocyfrowe: $[1000, 9999]$",
      "divisors": "podzielne przez $4$ i $9$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:37:54.532Z"
  },
  {
    "id": "counting_divisible_4_or_9",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb czterocyfrowych podzielnych przez $4$ lub $9$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle jest liczb czterocyfrowych?",
        "expression": "Liczby czterocyfrowe: od $1000$ do $9999$",
        "explanation": "Zakres liczb czterocyfrowych",
        "why": "To podstawa do dalszych obliczeń. Liczb czterocyfrowych jest $9999 - 1000 + 1 = 9000$."
      },
      {
        "step": 2,
        "hint": "Którą metodę zastosować do zliczenia liczb podzielnych przez $4$ lub $9$?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B|$",
        "explanation": "Stosujemy zasadę włączeń i wyłączeń dla zbiorów",
        "interactive_choice": {
          "prompt": "Jak policzyć liczby podzielne przez $4$ LUB $9$?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $(podzielne przez 4) + (podzielne przez 9)$",
              "feedback": "Uwaga! To policzy dwukrotnie liczby podzielne przez oba - trzeba użyć zasady włączeń i wyłączeń.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć zasady włączeń-wyłączeń: $|A \\cup B| = |A| + |B| - |A \\cap B|$",
              "feedback": "Doskonale! To uwzględni liczby podzielne przez oba, liczone dwukrotnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Policzyć bezpośrednio wszystkie liczby spełniające warunek",
              "feedback": "Możliwe, ale bardzo pracochłonne dla $9000$ liczb.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń-wyłączeń: liczby podzielne przez $4$ PLUS przez $9$ MINUS te podzielne przez oba (aby nie liczyć dwukrotnie)."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest liczb czterocyfrowych podzielnych przez 4?",
        "expression": "Najmniejsza: $1000$, największa: $9996$",
        "explanation": "Znajdujemy zakres liczb podzielnych przez $4$"
      },
      {
        "step": 4,
        "hint": "Jak obliczyć liczbę wyrazów ciągu arytmetycznego?",
        "expression": "$|A| = \\frac{9996 - 1000}{4} + 1 = \\frac{8996}{4} + 1 = 2249 + 1 = 2250$",
        "explanation": "Liczba wyrazów ciągu: $\\frac{ostatni - pierwszy}{różnica} + 1$",
        "why": "To standardowy wzór na liczbę elementów ciągu arytmetycznego o różnicy $d$."
      },
      {
        "step": 5,
        "hint": "Ile jest liczb czterocyfrowych podzielnych przez 9?",
        "expression": "Najmniejsza: $1008$, największa: $9999$",
        "explanation": "Znajdujemy zakres liczb podzielnych przez $9$"
      },
      {
        "step": 6,
        "hint": "Ile wynosi liczba liczb podzielnych przez 9?",
        "expression": "$|B| = \\frac{9999 - 1008}{9} + 1 = \\frac{8991}{9} + 1 = 999 + 1 = 1000$",
        "explanation": "Obliczamy liczbę wyrazów dla podzielnych przez $9$"
      },
      {
        "step": 7,
        "hint": "Przez co są podzielne liczby należące do obu zbiorów?",
        "expression": "$NWW(4, 9) = 36$",
        "explanation": "Liczby z części wspólnej są podzielne przez $36$",
        "interactive_choice": {
          "prompt": "Liczby podzielne ZARÓWNO przez $4$ JAK I przez $9$ są podzielne przez:",
          "options": [
            {
              "id": "A",
              "text": "Przez $4 + 9 = 13$",
              "feedback": "Nie - suma nie daje wspólnej podzielności.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez $4 \\cdot 9 = 36$",
              "feedback": "Prawie! Ale $NWW(4,9) = 36$ bo $4$ i $9$ są względnie pierwsze.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Przez $NWD(4,9) = 1$",
              "feedback": "NWD to największy wspólny dzielnik - tu potrzebujemy najmniejszej wspólnej wielokrotności.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczby podzielne przez $4$ i $9$ są podzielne przez $NWW(4,9) = 36$, bo $NWD(4,9) = 1$."
        }
      },
      {
        "step": 8,
        "hint": "Ile jest liczb czterocyfrowych podzielnych przez $36$?",
        "expression": "Najmniejsza: $1008$, największa: $9972$",
        "explanation": "Znajdujemy zakres liczb podzielnych przez $36$"
      },
      {
        "step": 9,
        "hint": "Ile wynosi liczba liczb podzielnych przez $36$?",
        "expression": "$|A \\cap B| = \\frac{9972 - 1008}{36} + 1 = \\frac{8964}{36} + 1 = 249 + 1 = 250$",
        "explanation": "Obliczamy liczbę wyrazów dla podzielnych przez $36$"
      },
      {
        "step": 10,
        "hint": "Jak teraz zastosować zasadę włączeń-wyłączeń?",
        "expression": "$|A \\cup B| = 2250 + 1000 - 250 = 3000$",
        "explanation": "Stosujemy wzór zasady włączeń-wyłączeń",
        "interactive_choice": {
          "prompt": "Jak obliczyć ostateczny wynik używając $|A| = 2250$, $|B| = 1000$, $|A \\cap B| = 250$?",
          "options": [
            {
              "id": "A",
              "text": "$2250 + 1000 = 3250$",
              "feedback": "To policzy dwukrotnie liczby podzielne przez oba!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$2250 + 1000 - 250 = 3000$",
              "feedback": "Świetnie! Odejmujemy część wspólną policzoną dwukrotnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$2250 - 250 + 1000 = 3000$",
              "feedback": "Wynik poprawny, ale kolejność działań nietypowa - lepiej: suma minus część wspólna.",
              "is_correct": true
            }
          ],
          "explanation_after": "Dodajemy oba zbiory i odejmujemy część wspólną, która została policzona dwukrotnie."
        }
      },
      {
        "step": 11,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczb czterocyfrowych podzielnych przez $4$ lub $9$ jest $3000$",
        "explanation": "Otrzymujemy końcowy wynik"
      }
    ],
    "solutions": [
      "$3000$"
    ],
    "parameters": {
      "range": "liczby czterocyfrowe: $1000$ do $9999$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T06:38:35.521Z"
  },
  {
    "id": "combinatorics_three_letter_codes",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 2,
    "statement": "Dane są zbiory $A=\\{a, b, c, d, e\\}$, $B=\\{i, n, k\\}$ oraz $C=\\{o, p, r\\}$. Tworzymy trzyliterowe kody, w których pierwsza litera należy do zbioru $A$, druga do zbioru $B$, a trzecia do zbioru $C$. Oblicz, ile kodów trzyliterowych można utworzyć w ten sposób.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile elementów ma każdy ze zbiorów?",
        "expression": "$|A| = 5$, $|B| = 3$, $|C| = 3$",
        "explanation": "Liczymy elementy w każdym zbiorze"
      },
      {
        "step": 2,
        "hint": "Jak wygląda struktura tworzonego kodu?",
        "expression": "Kod ma postać: (litera z $A$)(litera z $B$)(litera z $C$)",
        "explanation": "Każdy kod składa się z trzech pozycji, każda z innego zbioru"
      },
      {
        "step": 3,
        "hint": "Którą metodę kombinatoryczną zastosować do tego problemu?",
        "expression": "Stosujemy zasadę mnożenia",
        "explanation": "Dla każdego wyboru pierwszej litery mamy wszystkie możliwości drugiej i trzeciej",
        "why": "Zasada mnożenia: gdy wykonujemy kilka niezależnych wyborów po kolei, całkowitą liczbę możliwości otrzymujemy mnożąc liczby możliwości na każdym etapie.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę możliwych kodów trzyliterowych?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby elementów: $5 + 3 + 3$",
              "feedback": "Nie - dodawanie używamy gdy wybieramy ALBO z jednego ALBO z drugiego zbioru. Tu wybieramy z każdego!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć liczby elementów: $5 \\cdot 3 \\cdot 3$",
              "feedback": "Doskonale! To zasada mnożenia - dla każdego wyboru z pierwszego zbioru mamy wszystkie możliwości z kolejnych.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje: $\\frac{11!}{5! \\cdot 3! \\cdot 3!}$",
              "feedback": "Nie - permutacje używamy gdy zależy nam na kolejności wszystkich elementów. Tu wybieramy po jednym z każdego zbioru.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: jeśli wybór składa się z kilku niezależnych etapów, mnożymy liczby możliwości na każdym etapie."
        }
      },
      {
        "step": 4,
        "hint": "Ile mamy możliwości wyboru pierwszej litery?",
        "expression": "Pierwsza pozycja: $5$ możliwości (litery ze zbioru $A$)",
        "explanation": "Możemy wybrać dowolną z 5 liter: $a$, $b$, $c$, $d$ lub $e$"
      },
      {
        "step": 5,
        "hint": "Ile mamy możliwości wyboru drugiej litery dla każdej pierwszej?",
        "expression": "Druga pozycja: $3$ możliwości (litery ze zbioru $B$)",
        "explanation": "Dla każdej pierwszej litery możemy wybrać $i$, $n$ lub $k$"
      },
      {
        "step": 6,
        "hint": "Ile mamy możliwości wyboru trzeciej litery dla każdej pary pierwszych dwóch?",
        "expression": "Trzecia pozycja: $3$ możliwości (litery ze zbioru $C$)",
        "explanation": "Dla każdej pary pierwszych liter możemy wybrać $o$, $p$ lub $r$"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę kodów?",
        "expression": "$5 \\cdot 3 \\cdot 3 = 45$",
        "explanation": "Mnożymy liczby możliwości na każdej pozycji",
        "interactive_choice": {
          "prompt": "Czy kolejność wyboru liter ma znaczenie dla wyniku?",
          "options": [
            {
              "id": "A",
              "text": "Tak, musimy uwzględnić różne kolejności",
              "feedback": "Nie - kolejność jest już ustalona (pierwsza z $A$, druga z $B$, trzecia z $C$). Po prostu mnożymy!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Nie, po prostu mnożymy liczby możliwości",
              "feedback": "Zgadza się! Struktura kodu jest ustalona, więc wystarczy pomnożyć $5 \\cdot 3 \\cdot 3$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Musimy podzielić przez liczbę powtórzeń",
              "feedback": "Nie - nie ma tu powtórzeń do wyeliminowania. Każdy kod jest unikalny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Struktura kodu jest sztywna (pozycja 1: $A$, pozycja 2: $B$, pozycja 3: $C$), więc bezpośrednio mnożymy liczby możliwości."
        }
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $45$ różnych kodów trzyliterowych",
        "explanation": "Otrzymujemy $45$ unikalnych kombinacji"
      }
    ],
    "solutions": [
      "$45$"
    ],
    "parameters": {
      "sets": "$A=\\{a, b, c, d, e\\}$, $B=\\{i, n, k\\}$, $C=\\{o, p, r\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:39:02.133Z"
  },
  {
    "id": "combinatorics_three_letter_codes",
    "topic": "Kombinatoryka - reguła mnożenia",
    "difficulty": 2,
    "statement": "Dane są zbiory $A=\\{a, b, c, d, e\\}$, $B=\\{i, n, k\\}$ oraz $C=\\{o, p, r\\}$. Tworzymy trzyliterowe kody, w których pierwsza litera należy do zbioru $A$, druga do zbioru $B$, a trzecia do zbioru $C$. Oblicz, ile trzyliterowych kodów można utworzyć w ten sposób, wykorzystując tylko spółgłoski.",
    "steps": [
      {
        "step": 1,
        "hint": "Które litery w zbiorze $A=\\{a, b, c, d, e\\}$ są spółgłoskami?",
        "expression": "Spółgłoski w zbiorze $A$: $\\{b, c, d\\}$",
        "explanation": "Litera $a$ i $e$ to samogłoski, więc zostają $b, c, d$"
      },
      {
        "step": 2,
        "hint": "Które litery w zbiorze $B=\\{i, n, k\\}$ są spółgłoskami?",
        "expression": "Spółgłoski w zbiorze $B$: $\\{n, k\\}$",
        "explanation": "Litera 'i' to samogłoska, więc zostają $n$, $k$"
      },
      {
        "step": 3,
        "hint": "Które litery w zbiorze $C=\\{o, p, r\\}$ są spółgłoskami?",
        "expression": "Spółgłoski w zbiorze $C$: $\\{p, r\\}$",
        "explanation": "Litera 'o' to samogłoska, więc zostają $p$, $r$"
      },
      {
        "step": 4,
        "hint": "Ile spółgłosek możemy wybrać na każdą pozycję w kodzie?",
        "expression": "Pozycja 1: $3$ spółgłoski, Pozycja 2: $2$ spółgłoski, Pozycja 3: $2$ spółgłoski",
        "explanation": "Zliczamy dostępne spółgłoski na każdej pozycji",
        "why": "Stosujemy regułę mnożenia, ponieważ wybory na poszczególnych pozycjach są niezależne - dla każdego wyboru pierwszej litery mamy wszystkie możliwości wyboru drugiej i trzeciej.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę możliwych kodów złożonych z trzech pozycji?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby spółgłosek: $3 + 2 + 2$",
              "feedback": "Nie - dodawanie używamy gdy wybieramy ALBO jedno ALBO drugie. Tu wybieramy wszystkie pozycje naraz.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć liczby spółgłosek: $3 \\cdot 2 \\cdot 2$",
              "feedback": "Doskonale! To reguła mnożenia - dla każdego wyboru z pierwszej pozycji mamy wszystkie możliwości z drugiej, itd.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje: $\\frac{7!}{(7-3)!}$",
              "feedback": "Nie - permutacje używamy gdy wybieramy z jednego zbioru. Tu mamy trzy różne zbiory.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła mnożenia: jeśli mamy $n_1$ możliwości na pierwszej pozycji, $n_2$ na drugiej i $n_3$ na trzeciej, to łącznie mamy $n_1 \\cdot n_2 \\cdot n_3$ możliwości."
        }
      },
      {
        "step": 5,
        "hint": "Ile wynosi iloczyn $3 \\cdot 2 \\cdot 2$?",
        "expression": "$3 \\cdot 2 \\cdot 2 = 12$",
        "explanation": "Obliczamy liczbę wszystkich możliwych kodów"
      },
      {
        "step": 6,
        "hint": "Czy możemy sprawdzić wynik na przykładzie?",
        "expression": "Przykładowe kody: $bnp$, $bnr$, $bkp$, $bkr$, $cnp$, $cnr$, $ckp$, $ckr$, $dnp$, $dnr$, $dkp$, $dkr$",
        "explanation": "Weryfikujemy wynik wypisując wszystkie możliwe kody",
        "interactive_choice": {
          "prompt": "Jak zweryfikować, że wynik $12$ jest poprawny?",
          "options": [
            {
              "id": "A",
              "text": "Wypisać kilka przykładowych kodów: $bnp$, $bkp$, $bnr$...",
              "feedback": "Dobry pomysł! Możesz sprawdzić czy da się utworzyć $12$ różnych kodów.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć kody dla jednej litery z $A$ i pomnożyć przez $3$",
              "feedback": "Świetnie! Dla $b$ mamy $2 \\cdot 2 = 4$ kody, więc $3 \\cdot 4 = 12$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Nie trzeba sprawdzać - reguła mnożenia zawsze działa",
              "feedback": "Choć reguła jest poprawna, weryfikacja pomaga zrozumieć problem i uniknąć błędów.",
              "is_correct": false
            }
          ],
          "explanation_after": "Weryfikacja wyniku to dobra praktyka. Dla $b$: $bnp$, $bnr$, $bkp$, $bkr$ (4 kody). Analogicznie dla $c$ i $d$, razem $3 \\cdot 4 = 12$."
        }
      }
    ],
    "solutions": [
      "$12$"
    ],
    "parameters": {
      "sets": "$A=\\{a, b, c, d, e\\}$, $B=\\{i, n, k\\}$, $C=\\{o, p, r\\}$",
      "consonants_A": "$\\{b, c, d\\}$",
      "consonants_B": "$\\{n, k\\}$",
      "consonants_C": "$\\{p, r\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:39:29.487Z"
  },
  {
    "id": "parity_counting_problem",
    "topic": "Kombinatoryka - parzystość sum",
    "difficulty": 4,
    "statement": "Dane są zbiory $A=\\{0,1,2\\}$, $B=\\{3,4,5,6,7,8,9\\}$ oraz $C=\\{10,11,12,13,14,15\\}$. Niech $a \\in A$, $b \\in B$, $c \\in C$. Oblicz, na ile sposobów można wybrać trójkę liczb $(a, b, c)$ taką, że suma $a+b+c$ jest liczbą parzystą.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy suma trzech liczb jest parzysta?",
        "expression": "Suma parzysta $\\Leftrightarrow$ $0$ lub $2$ nieparzyste składniki",
        "explanation": "Analizujemy parzystość sumy trzech liczb",
        "why": "To kluczowa obserwacja - zamiast sprawdzać wszystkie kombinacje, dzielimy problem na przypadki według parzystości.",
        "interactive_choice": {
          "prompt": "Jakie kombinacje parzystości trzech liczb dają sumę parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie trzy parzyste LUB wszystkie trzy nieparzyste",
              "feedback": "Nie do końca - sprawdź: $2+2+1=5$ (nieparzyste!). Liczy się liczba nieparzystych.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Parzysta liczba nieparzystych składników ($0$ lub $2$ nieparzyste)",
              "feedback": "Dokładnie! $0$ nieparzystych: $P+P+P=P$, $2$ nieparzyste: $N+N+P=P$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Co najmniej dwa składniki parzyste",
              "feedback": "Nie - $N+N+N=N$ (trzy nieparzyste dają nieparzystą), a to też ma dwa nieparzyste.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma jest parzysta gdy mamy parzystą liczbę nieparzystych składników: PPP lub NNP (w dowolnej kolejności)."
        }
      },
      {
        "step": 2,
        "hint": "Które liczby w zbiorze $A$ są parzyste, a które nieparzyste?",
        "expression": "$A = \\{0, 1, 2\\}$: parzyste $\\{0, 2\\}$, nieparzyste $\\{1\\}$",
        "explanation": "W zbiorze $A$ mamy $2$ liczby parzyste i $1$ nieparzystą"
      },
      {
        "step": 3,
        "hint": "Które liczby w zbiorze $B$ są parzyste, a które nieparzyste?",
        "expression": "$B = \\{3, 4, 5, 6, 7, 8, 9\\}$: parzyste $\\{4, 6, 8\\}$, nieparzyste $\\{3, 5, 7, 9\\}$",
        "explanation": "W zbiorze $B$ mamy $3$ liczby parzyste i $4$ nieparzyste"
      },
      {
        "step": 4,
        "hint": "Które liczby w zbiorze $\\mathbb{C}$ są parzyste, a które nieparzyste?",
        "expression": "$C = \\{10, 11, 12, 13, 14, 15\\}$: parzyste $\\{10, 12, 14\\}$, nieparzyste $\\{11, 13, 15\\}$",
        "explanation": "W zbiorze $C$ mamy $3$ liczby parzyste i $3$ nieparzyste"
      },
      {
        "step": 5,
        "hint": "Jakie przypadki dają sumę parzystą?",
        "expression": "Przypadki: I) $PPP$, II) $NNP$, III) $NPN$, IV) $PNN$",
        "explanation": "Rozbijamy na 4 rozłączne przypadki",
        "interactive_choice": {
          "prompt": "Które kombinacje parzystości $a$, $b$, $c$ dają sumę parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Przypadek I: $PPP$ (wszystkie parzyste)",
              "feedback": "Tak! To daje $0$ nieparzystych składników.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Przypadek II: $NNP$, $NPN$, $PNN$ (dokładnie $2$ nieparzyste)",
              "feedback": "Świetnie! To wszystkie możliwości z $2$ nieparzystymi.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Przypadek III: $NNN$ (wszystkie nieparzyste)",
              "feedback": "Nie - to daje $3$ nieparzyste składniki, więc sumę nieparzystą!",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy rozpatrzyć: PPP ($0$ nieparzystych) oraz wszystkie układy z dokładnie $2$ nieparzystymi."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest trójek ($a$, $b$, $c$) typu PPP?",
        "expression": "Przypadek I (PPP): $2 \\cdot 3 \\cdot 3 = 18$",
        "explanation": "Wybieramy: parzystą z $A$ ($2$ możliwości), parzystą z $B$ ($3$ możliwości), parzystą z $C$ ($3$ możliwości)"
      },
      {
        "step": 7,
        "hint": "Ile jest trójek ($a$, $b$, $c$) typu NNP?",
        "expression": "Przypadek II (NNP): $1 \\cdot 4 \\cdot 3 = 12$",
        "explanation": "Nieparzysta z $A$ ($1$), nieparzysta z $B$ ($4$), parzysta z $C$ ($3$)"
      },
      {
        "step": 8,
        "hint": "Ile jest trójek ($a$, $b$, $c$) typu NPN?",
        "expression": "Przypadek III (NPN): $1 \\cdot 3 \\cdot 3 = 9$",
        "explanation": "Nieparzysta z $A$ ($1$), parzysta z $B$ ($3$), nieparzysta z $C$ ($3$)"
      },
      {
        "step": 9,
        "hint": "Ile jest trójek $a$, $b$, $c$ typu PNN?",
        "expression": "Przypadek IV (PNN): $2 \\cdot 4 \\cdot 3 = 24$",
        "explanation": "Parzysta z $A$ ($2$), nieparzysta z $B$ ($4$), nieparzysta z $C$ ($3$)"
      },
      {
        "step": 10,
        "hint": "Jak obliczyć całkowitą liczbę trójek o parzystej sumie?",
        "expression": "$18 + 12 + 9 + 24 = 63$",
        "explanation": "Sumujemy wszystkie rozłączne przypadki",
        "interactive_choice": {
          "prompt": "Dlaczego możemy dodać wyniki z poszczególnych przypadków?",
          "options": [
            {
              "id": "A",
              "text": "Bo przypadki się wykluczają - każda trójka należy do dokładnie jednego przypadku",
              "feedback": "Dokładnie! Zasada sumy: gdy zdarzenia są rozłączne, prawdopodobieństwa/liczności się dodają.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bo wszystkie przypadki są jednakowo prawdopodobne",
              "feedback": "To nie jest powód - dodajemy bo przypadki są rozłączne, nie bo są równoprawdopodobne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Bo używamy reguły mnożenia",
              "feedback": "Reguła mnożenia była w każdym przypadku osobno. Tu używamy reguły dodawania dla zdarzeń rozłącznych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne (żadna trójka nie należy do dwóch przypadków jednocześnie), więc stosujemy regułę sumy."
        }
      }
    ],
    "solutions": [
      "$63$"
    ],
    "parameters": {
      "sets": "$A=\\{0,1,2\\}$, $B=\\{3,4,5,6,7,8,9\\}$, $C=\\{10,11,12,13,14,15\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T06:40:15.292Z"
  },
  {
    "id": "combinatorics_seven_digit",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 2,
    "statement": "Oblicz, ile liczb siedmiocyfrowych można utworzyć z cyfr należących do zbioru $\\{2,3,4,5,6,7,8,9\\}$ jeżeli cyfry w tej liczbie mogą się powtarzać.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr mamy do dyspozycji w zbiorze?",
        "expression": "Zbiór $\\{2,3,4,5,6,7,8,9\\}$ zawiera $8$ cyfr",
        "explanation": "Liczymy elementy zbioru"
      },
      {
        "step": 2,
        "hint": "Ile pozycji musimy zapełnić w liczbie siedmiocyfrowej?",
        "expression": "Liczba siedmiocyfrowa ma $7$ pozycji do zapełnienia",
        "explanation": "Każda pozycja to miejsce na jedną cyfrę"
      },
      {
        "step": 3,
        "hint": "Którą metodę kombinatoryczną zastosować do tego problemu?",
        "expression": "Zasada mnożenia: dla każdej z $7$ pozycji liczymy możliwości",
        "explanation": "Każda pozycja jest niezależna, cyfry mogą się powtarzać",
        "why": "Zasada mnożenia mówi: jeśli mamy $k$ niezależnych wyborów z odpowiednio $n_1$, $n_2$, ..., $n_k$ możliwościami, to łączna liczba sposobów to $n_1 \\cdot n_2 \\cdot ... \\cdot n_k$",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę możliwych liczb siedmiocyfrowych z powtórzeniami?",
          "options": [
            {
              "id": "A",
              "text": "Użyć permutacji bez powtórzeń $P_8$",
              "feedback": "Nie - permutacje bez powtórzeń to gdy każda cyfra może wystąpić tylko raz",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć zasady mnożenia: dla każdej pozycji policzyć możliwości",
              "feedback": "Doskonale! Cyfry mogą się powtarzać, więc dla każdej pozycji mamy tyle samo wyborów",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć kombinacji $\\binom{8}{7}$",
              "feedback": "Nie - kombinacje to wybór podzbioru, a tu tworzymy ciąg z powtórzeniami",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy cyfry mogą się powtarzać, stosujemy zasadę mnożenia - mnożymy liczbę możliwości dla każdej pozycji."
        }
      },
      {
        "step": 4,
        "hint": "Ile cyfr możemy wybrać na pierwszą pozycję?",
        "expression": "Na pierwszą pozycję: $8$ możliwości",
        "explanation": "Możemy wybrać dowolną z $8$ cyfr ze zbioru"
      },
      {
        "step": 5,
        "hint": "Czy na drugą pozycję mamy więcej, mniej czy tyle samo możliwości?",
        "expression": "Na drugą pozycję: $8$ możliwości",
        "explanation": "Cyfry mogą się powtarzać, więc znów $8$ wyborów",
        "interactive_choice": {
          "prompt": "Ile cyfr możemy wybrać na drugą pozycję?",
          "options": [
            {
              "id": "A",
              "text": "$7$ cyfr - bo jedna została już użyta",
              "feedback": "Nie - cyfry MOGĄ SIĘ POWTARZAĆ! Możemy użyć tej samej cyfry ponownie",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$8$ cyfr - cyfry mogą się powtarzać",
              "feedback": "Tak! Powtórzenia są dozwolone, więc znów mamy wszystkie $8$ cyfr do wyboru",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "9 cyfr - bo możemy też użyć $0$ lub $1$",
              "feedback": "Nie - możemy używać tylko cyfr ze zbioru $\\{2,3,4,5,6,7,8,9\\}$",
              "is_correct": false
            }
          ],
          "explanation_after": "Kluczowe słowo w zadaniu: 'cyfry mogą się powtarzać' - oznacza to, że na każdej pozycji mamy pełny wybór wszystkich $8$ cyfr."
        }
      },
      {
        "step": 6,
        "hint": "Ile możliwości jest na każdej z pozostałych pozycji?",
        "expression": "Na każdą z $7$ pozycji: $8$ możliwości",
        "explanation": "Dla każdej pozycji mamy te same $8$ cyfr do wyboru"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę możliwości?",
        "expression": "$8 \\cdot 8 \\cdot 8 \\cdot 8 \\cdot 8 \\cdot 8 \\cdot 8 = 8^7$",
        "explanation": "Mnożymy liczbę możliwości dla każdej z $7$ pozycji"
      },
      {
        "step": 8,
        "hint": "Ile wynosi $8^7$?",
        "expression": "$8^7 = 2097152$",
        "explanation": "Obliczamy potęgę"
      }
    ],
    "solutions": [
      "$8^7 = 2097152$"
    ],
    "parameters": {
      "set": "$\\{2,3,4,5,6,7,8,9\\}$",
      "repetitions": "dozwolone"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:40:50.710Z"
  },
  {
    "id": "permutations_fixed_position",
    "topic": "Permutacje z warunkiem",
    "difficulty": 3,
    "statement": "Oblicz, ile liczb siedmiocyfrowych można utworzyć z cyfr należących do zbioru $\\{2,3,4,5,6,7,8,9\\}$ jeżeli cyfry w liczbie nie powtarzają się, a siódemka jest trzecią cyfrą w tej liczbie.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr mamy do dyspozycji i ile miejsc do zapełnienia?",
        "expression": "Mamy 8 cyfr: $\\{2,3,4,5,6,7,8,9\\}$ i $7$ pozycji do zapełnienia",
        "explanation": "Identyfikujemy dane: $8$ różnych cyfr, liczba siedmiocyfrowa ($7$ pozycji)"
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek, że siódemka jest trzecią cyfrą?",
        "expression": "Pozycja $3$ jest zajęta przez cyfrę $7$: _ _ $7$ _ _ _ _",
        "explanation": "Trzecia pozycja jest ustalona, pozostaje $6$ wolnych pozycji"
      },
      {
        "step": 3,
        "hint": "Którą metodę zastosujemy do rozwiązania tego problemu?",
        "expression": "Cyfra $7$ zajmuje pozycję $3$, zostaje $7$ cyfr: $\\{2,3,4,5,6,8,9\\}$",
        "explanation": "Po ustaleniu cyfry $7$ na pozycji $3$, mamy $7$ pozostałych cyfr do rozmieszczenia",
        "interactive_choice": {
          "prompt": "Jak podejść do problemu z ustaloną pozycją jednej cyfry?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw ustalić cyfrę $7$, potem rozmieścić pozostałe",
              "feedback": "Świetnie! To najprostsze podejście - cyfra $7$ jest już na miejscu, zostaje rozmieścić $7$ cyfr na $6$ pozycjach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć wszystkie permutacje i odjąć te bez $7$ na pozycji $3$",
              "feedback": "Możliwe, ale bardzo skomplikowane - musielibyśmy odejmować wiele przypadków.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - cyfry się nie powtarzają, więc to nie jest odpowiedni wzór.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy jedna pozycja jest ustalona, najłatwiej jest ją zignorować i skupić się na pozostałych."
        }
      },
      {
        "step": 4,
        "hint": "Ile mamy wolnych pozycji do zapełnienia?",
        "expression": "Mamy $6$ wolnych pozycji: pozycje $1$, $2$, $4$, $5$, $6$, $7$",
        "explanation": "Pozycja $3$ jest zajęta, więc pozostaje $6$ miejsc",
        "why": "To kluczowy moment - musimy wybrać $6$ cyfr z $7$ dostępnych i je uporządkować. To jest permutacja bez powtórzeń."
      },
      {
        "step": 5,
        "hint": "Jak obliczyć liczbę sposobów wyboru i uporządkowania $6$ cyfr z $7$?",
        "expression": "$V_7^6 = \\frac{7!}{(7-6)!} = \\frac{7!}{1!} = 7!$",
        "explanation": "Stosujemy wzór na wariacje bez powtórzeń",
        "interactive_choice": {
          "prompt": "Który wzór zastosować do wyboru i uporządkowania $6$ cyfr z $7$?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $P(7) = 7!$",
              "feedback": "Nie - to byłoby gdybyśmy używali wszystkich $7$ cyfr.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wariacje: $V_7^6 = \\frac{7!}{(7-6)!} = \\frac{7!}{1!}$",
              "feedback": "Dokładnie! Wybieramy $6$ z $7$ cyfr i kolejność ma znaczenie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Kombinacje: $C_7^6 = \\binom{7}{6}$",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu kolejność cyfr jest istotna.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wariacje bez powtórzeń $V_n^k$ używamy gdy wybieramy $k$ elementów z $n$ i kolejność ma znaczenie."
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć wartość $7!$?",
        "expression": "$7! = 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1$",
        "explanation": "Rozpisujemy silnię"
      },
      {
        "step": 7,
        "hint": "Jaki jest wynik mnożenia?",
        "expression": "$7! = 5040$",
        "explanation": "Obliczamy: $7 \\cdot 6 = 42$, $42 \\cdot 5 = 210$, $210 \\cdot 4 = 840$, $840 \\cdot 3 = 2520$, $2520 \\cdot 2 = 5040$"
      },
      {
        "step": 8,
        "hint": "Ile liczb siedmiocyfrowych spełnia warunki zadania?",
        "expression": "Można utworzyć $5040$ liczb siedmiocyfrowych",
        "explanation": "Odpowiedź: $5040$ liczb z cyfrą $7$ na trzeciej pozycji"
      }
    ],
    "solutions": [
      "$5040$"
    ],
    "parameters": {
      "available_digits": "$\\{2,3,4,5,6,7,8,9\\}$",
      "fixed_position": "cyfra $7$ na pozycji $3$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:41:21.137Z"
  },
  {
    "id": "phone_code_last_digit_8",
    "topic": "Kombinatoryka - reguła mnożenia",
    "difficulty": 2,
    "statement": "Kod do telefonu złożony jest z czterech cyfr. Oblicz, ile jest takich kodów, w których na ostatnim miejscu stoi cyfra $8$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr możemy użyć do tworzenia kodu?",
        "expression": "Cyfry: $0, 1, 2, 3, 4, 5, 6, 7, 8, 9$ - razem $10$ cyfr",
        "explanation": "Mamy do dyspozycji wszystkie cyfry od $0$ do $9$"
      },
      {
        "step": 2,
        "hint": "Jaką strukturę ma kod czterocyfrowy?",
        "expression": "Kod: _ _ _ $8$ (ostatnie miejsce ustalone)",
        "explanation": "Ostatnie miejsce jest już zajęte przez cyfrę $8$",
        "interactive_choice": {
          "prompt": "Jak najlepiej myśleć o kodzie czterocyfrowym?",
          "options": [
            {
              "id": "A",
              "text": "Jako cztery miejsca do wypełnienia: $\\_$ $\\_$ $\\_$ $\\_$",
              "feedback": "Świetnie! To pozwala zastosować regułę mnożenia - każde miejsce niezależnie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako jedną liczbę od $0000$ do $9999$",
              "feedback": "Można tak myśleć, ale trudniej uwzględnić warunek o ostatniej cyfrze.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Jako permutację czterech cyfr",
              "feedback": "Nie - cyfry mogą się powtarzać, więc to nie jest permutacja.",
              "is_correct": false
            }
          ],
          "explanation_after": "Myślenie o miejscach do wypełnienia pozwala zastosować regułę mnożenia."
        }
      },
      {
        "step": 3,
        "hint": "Ile możliwości mamy dla pierwszego miejsca?",
        "expression": "Pierwsze miejsce: $10$ możliwości (dowolna cyfra od $0$ do $9$)",
        "explanation": "Na pierwszym miejscu może być dowolna z $10$ cyfr"
      },
      {
        "step": 4,
        "hint": "Ile możliwości mamy dla drugiego miejsca?",
        "expression": "Drugie miejsce: $10$ możliwości (dowolna cyfra od $0$ do $9$)",
        "explanation": "Na drugim miejscu również może być dowolna z $10$ cyfr"
      },
      {
        "step": 5,
        "hint": "Ile możliwości mamy dla trzeciego miejsca?",
        "expression": "Trzecie miejsce: $10$ możliwości (dowolna cyfra od $0$ do $9$)",
        "explanation": "Na trzecim miejscu również może być dowolna z $10$ cyfr"
      },
      {
        "step": 6,
        "hint": "Ile możliwości mamy dla czwartego miejsca?",
        "expression": "Czwarte miejsce: $1$ możliwość (tylko cyfra $8$)",
        "explanation": "Ostatnie miejsce jest ustalone - musi być cyfra $8$"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę kodów?",
        "expression": "$10 \\cdot 10 \\cdot 10 \\cdot 1 = 1000$",
        "explanation": "Mnożymy liczby możliwości dla każdego miejsca",
        "why": "Reguła mnożenia: jeśli mamy $n_1$ możliwości dla pierwszego wyboru, $n_2$ dla drugiego itd., to łącznie mamy $n_1 \\cdot n_2 \\cdot ... \\cdot n_k$ możliwości.",
        "interactive_choice": {
          "prompt": "Którą regułę zastosować do obliczenia liczby wszystkich kodów?",
          "options": [
            {
              "id": "A",
              "text": "Reguła mnożenia: $10 \\cdot 10 \\cdot 10 \\cdot 1$",
              "feedback": "Doskonale! Mnożymy liczby możliwości dla każdego miejsca.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Reguła dodawania: $10 + 10 + 10 + 1$",
              "feedback": "Nie - dodawanie używamy gdy wybieramy ALBO jedno ALBO drugie. Tu wybieramy wszystkie miejsca jednocześnie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Permutacje: $\\frac{10!}{(10-4)!}$",
              "feedback": "Nie - to byłoby gdyby cyfry się nie powtarzały. Tu mogą się powtarzać.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła mnożenia: gdy wybieramy kolejno i niezależnie, mnożymy liczby możliwości."
        }
      }
    ],
    "solutions": [
      "$1000$"
    ],
    "parameters": {
      "code_length": 4,
      "last_digit": 8
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:41:46.038Z"
  },
  {
    "id": "combinatorics_phone_code_with_seven",
    "topic": "Kombinatoryka - rozmieszczenia z powtórzeniami",
    "difficulty": 4,
    "statement": "Kod do telefonu złożony jest z czterech cyfr. Oblicz, ile jest wszystkich takich kodów, w których dokładnie $2$ razy występuje cyfra $7$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są kluczowe elementy tego problemu?",
        "expression": "Kod: $4$ pozycje, dokładnie $2$ siódemki, pozostałe cyfry: dowolne z $\\{0,1,2,3,4,5,6,8,9\\}$",
        "explanation": "Identyfikujemy strukturę problemu: $4$ miejsca, $2$ muszą być siódemkami, $2$ inne cyframi"
      },
      {
        "step": 2,
        "hint": "Jak podejść do rozwiązania tego problemu?",
        "expression": "Metoda: wybór $2$ pozycji z $4$ dla siódemek, potem wypełnienie $2$ pozostałych",
        "explanation": "Rozbijamy problem na dwa niezależne zadania",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do policzenia kodów z dokładnie dwiema siódemkami?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać miejsca dla siódemek, potem wypełnić pozostałe pozycje",
              "feedback": "Świetnie! To klasyczne podejście: wybór pozycji ($\\binom{4}{2}$), potem uzupełnienie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie kody i odjąć te bez siódemek",
              "feedback": "To by dało kody z co najmniej jedną siódemką, nie dokładnie dwiema.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć wszystkie możliwe ustawienia cyfr po kolei",
              "feedback": "Możliwe, ale bardzo pracochłonne - jest $10^4 = 10000$ kodów do sprawdzenia!",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzielimy problem na etapy: wybór miejsc dla siódemek, potem wypełnienie pozostałych pozycji."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów możemy wybrać $2$ pozycje z $4$ dla cyfry $7$?",
        "expression": "$\\binom{4}{2} = \\frac{4!}{2! \\cdot 2!} = \\frac{4 \\cdot 3}{2 \\cdot 1} = 6$",
        "explanation": "Liczba kombinacji $2$ pozycji z $4$ dostępnych",
        "why": "Symbol Newtona $\\binom{n}{k}$ liczy wybory $k$ elementów z $n$, gdy kolejność nie ma znaczenia. Tu wybieramy które $2$ z $4$ pozycji zajmą siódemki."
      },
      {
        "step": 4,
        "hint": "Jakie cyfry mogą być na pozostałych dwóch pozycjach?",
        "expression": "Na każdej z $2$ pozostałych pozycji: $9$ możliwości (cyfry $0,1,2,3,4,5,6,8,9$)",
        "explanation": "Wykluczamy tylko cyfrę $7$, pozostałe mogą się powtarzać",
        "interactive_choice": {
          "prompt": "Które cyfry mogą wystąpić na dwóch pozostałych pozycjach kodu?",
          "options": [
            {
              "id": "A",
              "text": "Dowolne cyfry od $0$ do $9$",
              "feedback": "Nie - cyfra $7$ już występuje dwa razy, więcej nie może być!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko cyfry różne od 7, czyli $\\{0,1,2,3,4,5,6,8,9\\}$",
              "feedback": "Dokładnie! Mamy $9$ możliwości na każdą z pozostałych pozycji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko cyfry różne od $7$ i różne między sobą",
              "feedback": "Nie - cyfry na pozostałych pozycjach mogą się powtarzać, np. kod $7733$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'dokładnie dwie siódemki' oznacza, że pozostałe pozycje muszą być cyframi innymi niż $7$."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów możemy wypełnić dwie pozostałe pozycje?",
        "expression": "$9 \\cdot 9 = 81$",
        "explanation": "Dla każdej z dwóch pozycji mamy $9$ niezależnych wyborów",
        "why": "Zasada mnożenia: jeśli pierwsze zadanie można wykonać na $m$ sposobów, a drugie na $n$ sposobów, to oba razem na $m \\cdot n$ sposobów."
      },
      {
        "step": 6,
        "hint": "Jak połączyć wybór pozycji dla siódemek z wypełnieniem pozostałych miejsc?",
        "expression": "$6 \\cdot 81 = 486$",
        "explanation": "Mnożymy liczbę sposobów wyboru pozycji przez liczbę sposobów wypełnienia",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę kodów?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $6 + 81 = 87$",
              "feedback": "Nie - dodawanie używamy gdy mamy alternatywę (lub). Tu mamy kolejne etapy.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $6 \\cdot 81 = 486$",
              "feedback": "Tak! Zasada mnożenia - każdy wybór pozycji daje $81$ możliwości wypełnienia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podnieść do potęgi: $6^{81}$",
              "feedback": "Nie - potęgowanie to wielokrotne mnożenie tej samej liczby, tu mamy dwa różne etapy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: wybór pozycji ($6$ sposobów) i wypełnienie ($81$ sposobów) to niezależne etapy."
        }
      },
      {
        "step": 7,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba kodów z dokładnie dwiema siódemkami: $486$",
        "explanation": "Otrzymujemy $486$ różnych kodów spełniających warunek zadania"
      }
    ],
    "solutions": [
      "$486$"
    ],
    "parameters": {
      "code_length": 4,
      "target_digit": 7,
      "occurrences": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:42:33.636Z"
  },
  {
    "id": "tablet_code_sequence",
    "topic": "Kombinatoryka - ciągi rosnące",
    "difficulty": 3,
    "statement": "Kod do tabletu złożony jest z $6$ cyfr. Oblicz, ile jest takich kodów, w których pierwsza cyfra jest parzysta, a każda następna jest o $1$ większa od poprzedniej.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą być na pierwszej pozycji kodu?",
        "expression": "Pierwsza cyfra może być: $0$, $2$ lub $4$",
        "explanation": "Tylko te cyfry parzyste pozwalają zbudować $6$-cyfrowy ciąg rosnący o $1$",
        "why": "Od cyfry $6$ dostalibyśmy ciąg $6,7,8,9,10,11$ - ale $10$ i $11$ to nie są pojedyncze cyfry! Od $8$ byłoby jeszcze gorzej.",
        "interactive_choice": {
          "prompt": "Które cyfry parzyste mogą rozpoczynać 6-cyfrowy kod rosnący?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie parzyste: $0$, $2$, $4$, $6$, $8$",
              "feedback": "Nie wszystkie! Pamiętaj, że każda następna cyfra musi być o $1$ większa. Sprawdź, czy od $8$ można zbudować $6$-cyfrowy ciąg.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko $0$, $2$, $4$",
              "feedback": "Świetnie! Od $0$ mamy ciąg $0,1,2,3,4,5$; od $2$: $2,3,4,5,6,7$; od $4$: $4,5,6,7,8,9$. Dalsze są za duże.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko $2$, $4$, $6$, $8$ (bez zera)",
              "feedback": "Zero też może być pierwszą cyfrą! A cyfry $6$ i $8$ są za duże - sprawdź co by było dalej.",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy sprawdzić, które cyfry parzyste pozwolą zbudować $6$-cyfrowy ciąg kończący się maksymalnie na $9$."
        }
      },
      {
        "step": 2,
        "hint": "Jak wygląda kod zaczynający się od $0$?",
        "expression": "Kod: $0, 1, 2, 3, 4, 5$",
        "explanation": "Każda cyfra o $1$ większa od poprzedniej"
      },
      {
        "step": 3,
        "hint": "Jak wygląda kod zaczynający się od $2$?",
        "expression": "Kod: $2, 3, 4, 5, 6, 7$",
        "explanation": "Każda cyfra o $1$ większa od poprzedniej"
      },
      {
        "step": 4,
        "hint": "Jak wygląda kod zaczynający się od $4$?",
        "expression": "Kod: $4$, $5$, $6$, $7$, $8$, $9$",
        "explanation": "Każda cyfra o $1$ większa od poprzedniej"
      },
      {
        "step": 5,
        "hint": "Czy dla każdej pierwszej cyfry mamy więcej możliwości?",
        "expression": "Dla każdej pierwszej cyfry istnieje dokładnie $1$ kod",
        "explanation": "Wybór pierwszej cyfry jednoznacznie określa wszystkie pozostałe",
        "why": "Warunek rosnięcia o 1 nie daje nam swobody wyboru - to nie jest wybór z powtórzeniami ani permutacja!",
        "interactive_choice": {
          "prompt": "Ile różnych kodów możemy utworzyć dla każdej wybranej pierwszej cyfry?",
          "options": [
            {
              "id": "A",
              "text": "Wiele - możemy wybierać kolejne cyfry na różne sposoby",
              "feedback": "Nie! Gdy ustaliliśmy pierwszą cyfrę, cały kod jest już zdeterminowany - każda następna to poprzednia $+ 1$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dokładnie jeden kod dla każdej pierwszej cyfry",
              "feedback": "Dokładnie! Pierwsza cyfra jednoznacznie określa cały kod. Nie mamy wyboru dla pozostałych pozycji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "6 kodów - po jednym dla każdej pozycji",
              "feedback": "Nie - nie wybieramy pozycji. Gdy znamy pierwszą cyfrę, reszta jest ustalona automatycznie.",
              "is_correct": false
            }
          ],
          "explanation_after": "To kluczowa obserwacja: warunek 'każda następna o $1$ większa' oznacza, że wybór pierwszej cyfry determinuje cały kod."
        }
      },
      {
        "step": 6,
        "hint": "Ile mamy możliwych pierwszych cyfr?",
        "expression": "Liczba możliwych pierwszych cyfr: $3$",
        "explanation": "Cyfry $0$, $2$, $4$"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę kodów?",
        "expression": "Całkowita liczba kodów: $3 \\times 1 = 3$",
        "explanation": "Trzy możliwe pierwsze cyfry, każda daje dokładnie jeden kod",
        "interactive_choice": {
          "prompt": "Jak połączyć liczbę możliwych pierwszych cyfr z liczbą kodów dla każdej?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $3 + 1 = 4$ kody",
              "feedback": "Nie - dodawanie używamy gdy mamy rozłączne przypadki do zsumowania. Tu mnożymy!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $3 \\times 1 = 3$ kody",
              "feedback": "Tak! Reguła mnożenia: $3$ wybory pierwszej cyfry, każdy daje $1$ kod. Razem $3 \\times 1 = 3$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podnieść do potęgi: $3^1 = 3$ kody",
              "feedback": "Wynik przypadkiem się zgadza, ale potęgowanie używamy gdy mamy niezależne wybory na każdej pozycji. Tu tak nie jest.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła mnożenia w kombinatoryce: gdy mamy $k$-etapowy proces, mnożymy liczby możliwości na każdym etapie."
        }
      },
      {
        "step": 8,
        "hint": "Jakie są wszystkie możliwe kody?",
        "expression": "Kody: $012345$, $234567$, $456789$",
        "explanation": "To wszystkie możliwe $6$-cyfrowe kody spełniające warunki zadania"
      }
    ],
    "solutions": [
      "$3$"
    ],
    "parameters": {
      "codes": [
        "012345",
        "234567",
        "456789"
      ]
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:43:12.345Z"
  },
  {
    "id": "combinatorics_passengers_wagons",
    "topic": "Kombinatoryka - wariacje z powtórzeniami",
    "difficulty": 2,
    "statement": "Osiem osób wsiada do pociągu. Każda osoba losowo wybiera jeden z $10$ wagonów. Oblicz, na ile sposobów pasażerowie mogą zająć miejsca w wagonach tego pociągu, jeżeli każdy pasażer może wybrać dowolny wagon.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile wyborów ma pierwsza osoba wsiadająca do pociągu?",
        "expression": "Pierwsza osoba może wybrać jeden z $10$ wagonów",
        "explanation": "Każda osoba ma do wyboru wszystkie $10$ wagonów"
      },
      {
        "step": 2,
        "hint": "Czy wybór pierwszej osoby wpływa na liczbę możliwości drugiej osoby?",
        "expression": "Druga osoba również ma $10$ wyborów",
        "explanation": "Wagony nie są 'zajmowane' - każda osoba ma pełen wybór",
        "why": "To jest sytuacja z powtórzeniami - kluczowa różnica od permutacji bez powtórzeń. Gdyby każda osoba musiała wybrać inny wagon, byłoby to $10 \\cdot 9 \\cdot 8 \\cdot ...$",
        "interactive_choice": {
          "prompt": "Ile wyborów ma druga osoba po wyborze pierwszej?",
          "options": [
            {
              "id": "A",
              "text": "9 wagonów - bo jeden jest już zajęty",
              "feedback": "Nie! Zadanie mówi, że każdy może wybrać dowolny wagon. Wagony nie są 'zajmowane' - wiele osób może być w tym samym wagonie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$10$ wagonów - każdy może wybrać dowolny",
              "feedback": "Dokładnie! Pasażerowie mogą być w tym samym wagonie. To kluczowa informacja - mamy powtórzenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zależy od tego, który wagon wybrała pierwsza osoba",
              "feedback": "Nie - liczba dostępnych wagonów nie zmienia się. Każda osoba zawsze ma $10$ możliwości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Ponieważ wiele osób może być w tym samym wagonie, każda z $8$ osób ma niezależnie $10$ wyborów."
        }
      },
      {
        "step": 3,
        "hint": "Jaki wzór kombinatoryczny pasuje do tej sytuacji?",
        "expression": "Stosujemy wzór na wariacje z powtórzeniami: $n^k$",
        "explanation": "Gdzie $n = 10$ (liczba wagonów), $k = 8$ (liczba osób)",
        "interactive_choice": {
          "prompt": "Którą regułę kombinatoryczną zastosować do tego problemu?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $P_n = n!$",
              "feedback": "Nie - permutacje to ustawienia $n$ różnych elementów. Tu mamy wybory z powtórzeniami.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wariacje z powtórzeniami: $n^k$",
              "feedback": "Świetnie! Mamy $n=10$ możliwości (wagonów) dla każdej z $k=8$ osób. To daje $10^8$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Kombinacje: $\\binom{n}{k}$",
              "feedback": "Nie - kombinacje to wybór bez kolejności. Tu kolejność osób ma znaczenie (inna osoba = inny wybór).",
              "is_correct": false
            }
          ],
          "explanation_after": "Wariacje z powtórzeniami: każda z $k$ osób wybiera niezależnie jeden z $n$ obiektów. Wzór: $n^k$."
        }
      },
      {
        "step": 4,
        "hint": "Jak zastosować regułę mnożenia do wszystkich ośmiu osób?",
        "expression": "Liczba sposobów = $10 \\cdot 10 \\cdot 10 \\cdot 10 \\cdot 10 \\cdot 10 \\cdot 10 \\cdot 10$",
        "explanation": "Każda z $8$ osób ma $10$ niezależnych wyborów"
      },
      {
        "step": 5,
        "hint": "Jak zapisać to wyrażenie w zwartej formie?",
        "expression": "Liczba sposobów = $10^8$",
        "explanation": "Iloczyn ośmiu dziesiątek zapisujemy jako potęgę"
      },
      {
        "step": 6,
        "hint": "Ile to wynosi?",
        "expression": "$10^8 = 100\\,000\\,000$",
        "explanation": "Obliczamy wartość potęgi"
      }
    ],
    "solutions": [
      "$10^8 = 100\\,000\\,000$"
    ],
    "parameters": {
      "passengers": 8,
      "wagons": 10
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:43:40.605Z"
  },
  {
    "id": "permutations_wagons",
    "topic": "Permutacje",
    "difficulty": 3,
    "statement": "Osiem osób wsiada do pociągu. Każda osoba losowo wybiera jeden z $10$ wagonów. Oblicz, na ile sposobów pasażerowie mogą zająć miejsca w wagonach tego pociągu, jeżeli każdy pasażer wybrał inny wagon.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek, że każdy pasażer wybrał inny wagon?",
        "expression": "Mamy $8$ osób i $10$ wagonów, każda osoba w innym wagonie",
        "explanation": "To oznacza, że wybieramy $8$ różnych wagonów spośród $10$ dostępnych i przypisujemy do nich osoby"
      },
      {
        "step": 2,
        "hint": "Czy kolejność wyboru wagonów ma znaczenie?",
        "expression": "Stosujemy wzór na wariacje bez powtórzeń: $V^k_n = \\frac{n!}{(n-k)!}$",
        "explanation": "Wariacje bez powtórzeń - wybieramy $k$ elementów z $n$, kolejność ma znaczenie",
        "why": "Wariacje używamy gdy: (1) wybieramy część elementów ze zbioru, (2) kolejność ma znaczenie, (3) bez powtórzeń. Tu wszystkie warunki są spełnione.",
        "interactive_choice": {
          "prompt": "Jak podejść do tego problemu kombinatorycznego?",
          "options": [
            {
              "id": "A",
              "text": "Użyć kombinacji $\\binom{10}{8}$ - wybieramy $8$ wagonów z $10$",
              "feedback": "Nie do końca - kombinacje nie uwzględniają, która osoba do którego wagonu wsiada. Kolejność ma znaczenie!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć wariacji $V^8_{10}$ - wybieramy 8 wagonów z 10 z uwzględnieniem kolejności",
              "feedback": "Doskonale! Pierwsza osoba wybiera z $10$ wagonów, druga z $9$, trzecia z $8$ itd. Kolejność ma znaczenie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć permutacji $8!$ - ustawiamy 8 osób",
              "feedback": "To by działało gdyby było dokładnie $8$ wagonów. Ale mamy $10$ wagonów do wyboru!",
              "is_correct": false
            }
          ],
          "explanation_after": "To problem wariacji - wybieramy i ustawiamy $8$ elementów z $10$. Kolejność ma znaczenie, bo inna osoba w wagonie $1$ niż w wagonie $2$ to inna sytuacja."
        }
      },
      {
        "step": 3,
        "hint": "Jakie wartości podstawić do wzoru na wariacje?",
        "expression": "$V^8_{10} = \\frac{10!}{(10-8)!} = \\frac{10!}{2!}$",
        "explanation": "Podstawiamy $n = 10$ (liczba wagonów) i $k = 8$ (liczba osób)"
      },
      {
        "step": 4,
        "hint": "Jak można inaczej zapisać ten wzór bez pełnych silni?",
        "expression": "$\\frac{10!}{2!} = 10 \\cdot 9 \\cdot 8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3$",
        "explanation": "Skracamy silnię w mianowniku z częścią silni w liczniku",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć $\\frac{10!}{2!}$?",
          "options": [
            {
              "id": "A",
              "text": "Obliczyć $10! = 3628800$ i podzielić przez $2! = 2$",
              "feedback": "Możliwe, ale niepotrzebnie obliczamy ogromną liczbę. Jest prostszy sposób!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\frac{10!}{2!} = 10 \\cdot 9 \\cdot 8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3$",
              "feedback": "Świetnie! Skracamy $\\frac{10 \\cdot 9 \\cdot 8 \\cdot ... \\cdot 3 \\cdot 2!}{2!}$ i zostaje iloczyn $8$ kolejnych liczb.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru $10^8$ - każda osoba ma $10$ wyborów",
              "feedback": "Nie - to by uwzględniało powtórzenia wagonów. Mamy warunek że każdy wagon jest inny!",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy wariacjach zawsze warto skracać silnie - zostaje iloczyn $k$ kolejnych liczb od $n$ w dół."
        }
      },
      {
        "step": 5,
        "hint": "Jak obliczyć ten iloczyn krok po kroku?",
        "expression": "$10 \\cdot 9 = 90$, $90 \\cdot 8 = 720$, $720 \\cdot 7 = 5040$",
        "explanation": "Mnożymy kolejno pierwsze liczby"
      },
      {
        "step": 6,
        "hint": "Kontynuuj obliczenia dla pozostałych czynników",
        "expression": "$5040 \\cdot 6 = 30240$, $30240 \\cdot 5 = 151200$",
        "explanation": "Mnożymy dalej"
      },
      {
        "step": 7,
        "hint": "Dokończ obliczenia",
        "expression": "$151200 \\cdot 4 = 604800$, $604800 \\cdot 3 = 1814400$",
        "explanation": "Ostatnie mnożenia"
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "$V^8_{10} = 1814400$",
        "explanation": "Pasażerowie mogą zająć miejsca w wagonach na $1\\,814\\,400$ sposobów"
      }
    ],
    "solutions": [
      "$1814400$"
    ],
    "parameters": {
      "passengers": 8,
      "wagons": 10
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-10-03T06:44:12.451Z"
  },
  {
    "id": "lottery_combinatorics_at_least_two",
    "topic": "Kombinatoryka - kombinacje z warunkiem",
    "difficulty": 4,
    "statement": "W pudełku jest $100$ losów, w tym $11$ wygrywających. Oblicz, na ile sposobów można wyciągnąć trzy losy w taki sposób, żeby wśród nich były co najmniej dwa wygrywające.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile mamy losów wygrywających i ile przegrywających?",
        "expression": "Losy wygrywające: $11$, losy przegrywające: $100 - 11 = 89$",
        "explanation": "Identyfikujemy dwa rodzaje losów w pudełku"
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek 'co najmniej dwa wygrywające'?",
        "expression": "Przypadek 1: dokładnie $2$ wygrywające i $1$ przegrywający\nPrzypadek 2: dokładnie $3$ wygrywające",
        "explanation": "Rozbijamy problem na dwa rozłączne przypadki",
        "why": "To kluczowa strategia w kombinatoryce: warunek 'co najmniej' rozbijamy na sumę rozłącznych przypadków. Dzięki temu możemy użyć reguły sumy.",
        "interactive_choice": {
          "prompt": "Jak rozumieć warunek 'co najmniej dwa wygrywające losy'?",
          "options": [
            {
              "id": "A",
              "text": "Dokładnie dwa wygrywające",
              "feedback": "Nie - 'co najmniej' oznacza dwa LUB więcej, nie tylko dokładnie dwa",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dwa wygrywające LUB trzy wygrywające",
              "feedback": "Doskonale! To są wszystkie możliwe przypadki spełniające warunek",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wszystkie trzy losy wygrywające",
              "feedback": "To tylko jeden z przypadków - zapominasz o sytuacji z dokładnie dwoma wygrywającymi",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'co najmniej dwa' dzieli się na dwa rozłączne przypadki: dokładnie $2$ wygrywające + $1$ przegrywający ORAZ dokładnie $3$ wygrywające."
        }
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę sposobów dla przypadku 1?",
        "expression": "Przypadek 1: $\\binom{11}{2} \\cdot \\binom{89}{1}$",
        "explanation": "Wybieramy $2$ wygrywające z $11$ ORAZ $1$ przegrywający z $89$",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wybrania $2$ wygrywających i $1$ przegrywającego?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $\\binom{11}{2} + \\binom{89}{1}$",
              "feedback": "Nie - dodawanie użyjemy później. Tu wybieramy JEDNOCZEŚNIE z dwóch grup",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $\\binom{11}{2} \\cdot \\binom{89}{1}$",
              "feedback": "Świetnie! Reguła iloczynu - wybieramy $2$ z $11$ ORAZ $1$ z $89$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru: $\\binom{100}{3}$",
              "feedback": "To dałoby wszystkie możliwe trójki, bez uwzględnienia warunku",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy wybieramy z różnych grup jednocześnie, używamy reguły iloczynu (mnożymy liczby możliwości)."
        }
      },
      {
        "step": 4,
        "hint": "Ile wynosi $\\binom{11}{2}$?",
        "expression": "$\\binom{11}{2} = \\frac{11!}{2!(11-2)!} = \\frac{11 \\cdot 10}{2 \\cdot 1} = \\frac{110}{2} = 55$",
        "explanation": "Obliczamy liczbę sposobów wyboru $2$ losów z $11$"
      },
      {
        "step": 5,
        "hint": "Ile wynosi $\\binom{89}{1}$?",
        "expression": "$\\binom{89}{1} = 89$",
        "explanation": "Wybór $1$ elementu z $89$ to po prostu $89$ możliwości"
      },
      {
        "step": 6,
        "hint": "Ile sposobów jest w przypadku $1$?",
        "expression": "Przypadek 1: $55 \\cdot 89 = 4895$",
        "explanation": "Mnożymy liczby możliwości dla obu wyborów"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć liczbę sposobów dla przypadku $2$?",
        "expression": "Przypadek 2: $\\binom{11}{3}$",
        "explanation": "Wybieramy $3$ wygrywające losy z $11$ dostępnych"
      },
      {
        "step": 8,
        "hint": "Ile wynosi $\\binom{11}{3}$?",
        "expression": "$\\binom{11}{3} = \\frac{11!}{3!(11-3)!} = \\frac{11 \\cdot 10 \\cdot 9}{3 \\cdot 2 \\cdot 1} = \\frac{990}{6} = 165$",
        "explanation": "Obliczamy liczbę sposobów wyboru $3$ losów z $11$"
      },
      {
        "step": 9,
        "hint": "Jak połączyć wyniki z obu przypadków?",
        "expression": "$4895 + 165 = 5060$",
        "explanation": "Sumujemy wyniki z obu rozłącznych przypadków",
        "why": "Reguła sumy: gdy zdarzenia są rozłączne (wykluczają się wzajemnie), całkowitą liczbę możliwości otrzymujemy przez dodanie. Nie można jednocześnie mieć dokładnie $2$ i dokładnie $3$ wygrywające losy.",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę sposobów spełniających warunek?",
          "options": [
            {
              "id": "A",
              "text": "Pomnożyć: $4895 \\cdot 165$",
              "feedback": "Nie - mnożenie użylibyśmy gdyby oba przypadki musiały zajść jednocześnie",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodać: $4895 + 165$",
              "feedback": "Dokładnie! Reguła sumy - przypadki są rozłączne, więc dodajemy",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wybrać większą: $4895$",
              "feedback": "Nie - oba przypadki spełniają warunek, musimy je uwzględnić",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne (nie mogą zajść jednocześnie), więc używamy reguły sumy - dodajemy liczby możliwości."
        }
      }
    ],
    "solutions": [
      "$5060$"
    ],
    "parameters": {
      "total_tickets": 100,
      "winning_tickets": 11,
      "losing_tickets": 89,
      "drawn_tickets": 3,
      "condition": "co najmniej $2$ wygrywające"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:44:54.143Z"
  },
  {
    "id": "combinatorics_balls_same_color",
    "topic": "Kombinatoryka - kombinacje",
    "difficulty": 3,
    "statement": "W pojemniku znajduje się $20$ piłek różnej wielkości, w tym $8$ czerwonych, $7$ niebieskich i pozostałe białe. Oblicz, na ile sposobów można wylosować trzy piłki wszystkie w jednym kolorze.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest piłek białych?",
        "expression": "$20 - 8 - 7 = 5$ piłek białych",
        "explanation": "Obliczamy liczbę białych piłek odejmując czerwone i niebieskie od całości"
      },
      {
        "step": 2,
        "hint": "Jakie mamy możliwości wylosowania trzech piłek tego samego koloru?",
        "expression": "Przypadki: $3$ czerwone, $3$ niebieskie lub $3$ białe",
        "explanation": "Identyfikujemy wszystkie możliwe przypadki",
        "interactive_choice": {
          "prompt": "Które kombinacje kolorów są możliwe przy losowaniu 3 piłek jednego koloru?",
          "options": [
            {
              "id": "A",
              "text": "Tylko czerwone i niebieskie (białych jest za mało)",
              "feedback": "Nie - białych jest $5$, więc można wylosować $3$ białe piłki!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Czerwone, niebieskie i białe (wszystkie kolory)",
              "feedback": "Dokładnie! Każdego koloru jest co najmniej 3, więc wszystkie kombinacje są możliwe.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko czerwone (ich jest najwięcej)",
              "feedback": "Nie - niebieskich jest $7$ ($\\geq 3$) i białych $5$ ($\\geq 3$), więc też można wylosować po $3$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy $3$ rozłączne przypadki: $3$ czerwone LUB $3$ niebieskie LUB $3$ białe. Liczby sposobów dodajemy."
        }
      },
      {
        "step": 3,
        "hint": "Czy kolejność losowania piłek ma znaczenie?",
        "expression": "Używamy wzoru na kombinacje: $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$",
        "explanation": "Kolejność nie ma znaczenia, więc stosujemy kombinacje",
        "why": "Symbol Newtona $\\binom{n}{k}$ oznacza liczbę sposobów wyboru $k$ elementów z $n$ elementów, gdy kolejność nie ma znaczenia.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania $3$ piłek z $8$ czerwonych?",
          "options": [
            {
              "id": "A",
              "text": "Użyć permutacji $P(8,3) = \\frac{8!}{5!}$",
              "feedback": "Nie - permutacje stosujemy gdy kolejność ma znaczenie. Tu liczy się tylko zbiór wylosowanych piłek.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć kombinacji $\\binom{8}{3} = \\frac{8!}{3! \\cdot 5!}$",
              "feedback": "Świetnie! Kombinacje stosujemy gdy kolejność nie ma znaczenia - wybieramy podzbiór.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Po prostu $8 \\cdot 7 \\cdot 6$",
              "feedback": "To uwzględnia kolejność. Musisz podzielić przez $3!$ aby usunąć powtórzenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Losujemy zbiór piłek bez kolejności, więc używamy symbolu Newtona (kombinacji)."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wylosować $3$ czerwone piłki z $8$?",
        "expression": "$\\binom{8}{3} = \\frac{8!}{3! \\cdot 5!} = \\frac{8 \\cdot 7 \\cdot 6}{3 \\cdot 2 \\cdot 1} = \\frac{336}{6} = 56$",
        "explanation": "Obliczamy liczbę kombinacji $3$ piłek z $8$ czerwonych"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wylosować $3$ niebieskie piłki z $7$?",
        "expression": "$\\binom{7}{3} = \\frac{7!}{3! \\cdot 4!} = \\frac{7 \\cdot 6 \\cdot 5}{3 \\cdot 2 \\cdot 1} = \\frac{210}{6} = 35$",
        "explanation": "Obliczamy liczbę kombinacji $3$ piłek z $7$ niebieskich"
      },
      {
        "step": 6,
        "hint": "Na ile sposobów można wylosować $3$ białe piłki z $5$?",
        "expression": "$\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = \\frac{5 \\cdot 4}{2 \\cdot 1} = \\frac{20}{2} = 10$",
        "explanation": "Obliczamy liczbę kombinacji $3$ piłek z $5$ białych"
      },
      {
        "step": 7,
        "hint": "Jak połączyć wyniki z trzech rozłącznych przypadków?",
        "expression": "$56 + 35 + 10 = 101$",
        "explanation": "Sumujemy liczby sposobów dla wszystkich trzech kolorów",
        "why": "Stosujemy regułę sumy w kombinatoryce: jeśli zdarzenia $A$, $B$, $C$ są rozłączne, to liczba sposobów na $A$ lub $B$ lub $C$ równa się sumie liczb sposobów.",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę sposobów dla wszystkich kolorów?",
          "options": [
            {
              "id": "A",
              "text": "Pomnożyć: $56 \\cdot 35 \\cdot 10$",
              "feedback": "Nie - mnożymy gdy zdarzenia zachodzą JEDNOCZEŚNIE. Tu wybieramy JEDEN kolor.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodać: $56 + 35 + 10$",
              "feedback": "Dokładnie! Dodajemy bo przypadki są rozłączne - albo czerwone, albo niebieskie, albo białe.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wybrać największą: $56$",
              "feedback": "Nie - wszystkie przypadki są możliwe, więc musimy je zsumować.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła sumy: gdy zdarzenia są rozłączne (nie mogą zajść jednocześnie), dodajemy liczby możliwości."
        }
      }
    ],
    "solutions": [
      "$101$"
    ],
    "parameters": {
      "czerwone": 8,
      "niebieskie": 7,
      "białe": 5,
      "losowane": 3
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:45:28.692Z"
  },
  {
    "id": "combinatorics_balls_selection",
    "topic": "Kombinatoryka - wybór z podziałem na grupy",
    "difficulty": 4,
    "statement": "W pojemniku znajduje się $20$ piłek różnej wielkości, w tym $8$ czerwonych, $7$ niebieskich i pozostałe białe. Oblicz, na ile sposobów można wylosować trzy piłki z których tylko jedna jest biała.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile piłek białych znajduje się w pojemniku?",
        "expression": "$20 - 8 - 7 = 5$ piłek białych",
        "explanation": "Obliczamy liczbę białych piłek odejmując czerwone i niebieskie od całkowitej liczby"
      },
      {
        "step": 2,
        "hint": "Co oznacza warunek 'tylko jedna piłka jest biała'?",
        "expression": "Losujemy: $1$ białą i $2$ niebiałe (czerwone lub niebieskie)",
        "explanation": "Rozkładamy problem na wybór piłek według kolorów",
        "why": "Warunek 'tylko jedna biała' oznacza dokładnie $1$ białą, więc pozostałe $2$ muszą być z grupy czerwonych i niebieskich."
      },
      {
        "step": 3,
        "hint": "Jaką metodę zastosować do obliczenia liczby sposobów?",
        "expression": "Liczba sposobów = $\\binom{5}{1} \\cdot \\binom{15}{2}$",
        "explanation": "Wybieramy $1$ białą z $5$ i $2$ niebiałe z pozostałych $15$ piłek",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania 1 białej i 2 niebiałych piłek?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru na permutacje $P(n) = n!$",
              "feedback": "Nie - permutacje dotyczą uporządkowania, a tu kolejność losowania nie ma znaczenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć kombinacji i zasady mnożenia: $\\binom{5}{1} \\cdot \\binom{15}{2}$",
              "feedback": "Świetnie! Wybieramy $1$ z $5$ białych, potem $2$ z $15$ niebiałych i mnożymy.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Dodać wszystkie możliwe kombinacje: $\\binom{5}{1} + \\binom{15}{2}$",
              "feedback": "Nie - dodawanie używamy gdy zdarzenia się wykluczają. Tu wybory są jednoczesne, więc mnożymy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy zasady mnożenia: wybieramy białą ORAZ niebiałe, więc liczby sposobów mnożymy."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest niebiałych piłek?",
        "expression": "$8 + 7 = 15$ piłek niebiałych (czerwone i niebieskie)",
        "explanation": "Sumujemy czerwone i niebieskie piłki"
      },
      {
        "step": 5,
        "hint": "Ile wynosi $\\binom{5}{1}$?",
        "expression": "$\\binom{5}{1} = 5$",
        "explanation": "Liczba sposobów wyboru $1$ piłki z $5$"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć $\\binom{15}{2}$?",
        "expression": "$\\binom{15}{2} = \\frac{15!}{2! \\cdot 13!} = \\frac{15 \\cdot 14}{2 \\cdot 1} = \\frac{210}{2} = 105$",
        "explanation": "Stosujemy wzór na symbol Newtona i upraszczamy"
      },
      {
        "step": 7,
        "hint": "Czy możemy rozważyć inny sposób podziału $2$ niebiałych piłek?",
        "expression": "Alternatywnie: $\\binom{5}{1} \\cdot [\\binom{8}{2} + \\binom{7}{2} + \\binom{8}{1} \\cdot \\binom{7}{1}]$",
        "explanation": "Rozbijamy na przypadki: $2$ czerwone, $2$ niebieskie, lub $1$ czerwona i $1$ niebieska",
        "interactive_choice": {
          "prompt": "Czy warto rozpatrzyć osobno przypadki: $2$ czerwone, $2$ niebieskie, $1$ czerwona i $1$ niebieska?",
          "options": [
            {
              "id": "A",
              "text": "Tak, to da dokładniejszy wynik",
              "feedback": "Można tak zrobić jako alternatywną metodę, ale wynik będzie taki sam. Spróbujmy!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, już mamy poprawny wynik $5 \\cdot 105$",
              "feedback": "Zgadza się! Wynik $5 \\cdot 105 = 525$ jest poprawny. Ale sprawdźmy alternatywnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Nie, to by zmieniło warunki zadania",
              "feedback": "Nie zmienia warunków - to tylko inna metoda liczenia tych samych przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Obie metody są poprawne. Sprawdźmy alternatywne podejście dla pewności."
        }
      },
      {
        "step": 8,
        "hint": "Ile wynoszą poszczególne kombinacje?",
        "expression": "$\\binom{8}{2} = 28$, $\\binom{7}{2} = 21$, $\\binom{8}{1} \\cdot \\binom{7}{1} = 8 \\cdot 7 = 56$",
        "explanation": "Obliczamy każdy przypadek osobno"
      },
      {
        "step": 9,
        "hint": "Jaka jest suma wszystkich przypadków dla niebiałych piłek?",
        "expression": "$28 + 21 + 56 = 105$",
        "explanation": "Sumujemy wszystkie możliwości wyboru $2$ niebiałych piłek",
        "why": "Otrzymaliśmy ten sam wynik co wcześniej $\\binom{15}{2} = 105$, co potwierdza poprawność obu metod."
      },
      {
        "step": 10,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$5 \\cdot 105 = 525$",
        "explanation": "Mnożymy liczbę sposobów wyboru białej piłki przez liczbę sposobów wyboru niebiałych"
      }
    ],
    "solutions": [
      "$525$"
    ],
    "parameters": {
      "total_balls": 20,
      "red_balls": 8,
      "blue_balls": 7,
      "white_balls": 5,
      "balls_to_draw": 3,
      "white_required": 1
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:46:01.608Z"
  },
  {
    "id": "combinatorics_three_colors",
    "topic": "Kombinatoryka - reguła mnożenia",
    "difficulty": 2,
    "statement": "W pojemniku znajduje się $20$ piłek różnej wielkości, w tym $8$ czerwonych, $7$ niebieskich i pozostałe białe. Oblicz, na ile sposobów można wylosować trzy piłki każdą w innym kolorze.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile piłek białych znajduje się w pojemniku?",
        "expression": "$20 - 8 - 7 = 5$ piłek białych",
        "explanation": "Obliczamy liczbę białych piłek odejmując czerwone i niebieskie od całości"
      },
      {
        "step": 2,
        "hint": "Jakie kolory piłek musimy wylosować?",
        "expression": "Musimy wylosować: $1$ czerwoną, $1$ niebieską i $1$ białą",
        "explanation": "Warunek zadania - każda piłka w innym kolorze"
      },
      {
        "step": 3,
        "hint": "Którą zasadę kombinatoryki zastosować do tego problemu?",
        "expression": "Liczba sposobów = ($liczba$ czerwonych) $\\cdot$ ($liczba$ niebieskich) $\\cdot$ ($liczba$ białych)",
        "explanation": "Stosujemy regułę mnożenia dla niezależnych wyborów",
        "why": "Reguła mnożenia: gdy wybieramy kolejno z różnych grup, mnożymy liczby możliwości. Każdy wybór czerwonej można połączyć z każdym wyborem niebieskiej i każdym wyborem białej.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów wylosowania trzech piłek w różnych kolorach?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby piłek: $8 + 7 + 5$",
              "feedback": "Nie - dodawanie używamy gdy wybieramy ALBO jeden ALBO drugi wariant. Tu wybieramy wszystkie kolory jednocześnie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć liczby piłek: $8 \\cdot 7 \\cdot 5$",
              "feedback": "Doskonale! Reguła mnożenia - wybieramy $I$ czerwoną $I$ niebieską $I$ białą.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na kombinacje $\\binom{20}{3}$",
              "feedback": "Nie - ten wzór liczyłby wszystkie trójki piłek bez warunku o kolorach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła mnożenia: gdy wykonujemy kilka niezależnych wyborów, mnożymy liczby możliwości."
        }
      },
      {
        "step": 4,
        "hint": "Ile mamy możliwości wyboru czerwonej piłki?",
        "expression": "$8$ sposobów wyboru czerwonej piłki",
        "explanation": "Możemy wybrać dowolną z $8$ czerwonych piłek"
      },
      {
        "step": 5,
        "hint": "Ile mamy możliwości wyboru niebieskiej piłki?",
        "expression": "$7$ sposobów wyboru niebieskiej piłki",
        "explanation": "Możemy wybrać dowolną z $7$ niebieskich piłek"
      },
      {
        "step": 6,
        "hint": "Ile mamy możliwości wyboru białej piłki?",
        "expression": "$5$ sposobów wyboru białej piłki",
        "explanation": "Możemy wybrać dowolną z $5$ białych piłek"
      },
      {
        "step": 7,
        "hint": "Jaki jest całkowity wynik mnożenia?",
        "expression": "$8 \\cdot 7 \\cdot 5 = 280$",
        "explanation": "Mnożymy liczby możliwości dla każdego koloru"
      }
    ],
    "solutions": [
      "$280$ sposobów"
    ],
    "parameters": {
      "total_balls": 20,
      "red_balls": 8,
      "blue_balls": 7,
      "white_balls": 5
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 1,
        "totalOptions": 3,
        "correctOptions": 1
      }
    },
    "timestamp": "2025-10-03T06:46:19.432Z"
  },
  {
    "id": "combinatorics_even_product",
    "topic": "Kombinatoryka - prawdopodobieństwo",
    "difficulty": 3,
    "statement": "Ze zbioru piętnastu liczb $\\{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15\\}$ losujemy jednocześnie dwie liczby. Oblicz, ile jest możliwości wylosowania z tego zbioru dwóch liczb, tak aby ich iloczyn był parzysty.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle jest sposobów wylosowania dwóch liczb z piętnastu?",
        "expression": "Liczba wszystkich możliwości: $\\binom{15}{2} = \\frac{15 \\cdot 14}{2} = 105$",
        "explanation": "Obliczamy liczbę kombinacji $2$-elementowych z $15$-elementowego zbioru"
      },
      {
        "step": 2,
        "hint": "Kiedy iloczyn dwóch liczb jest parzysty?",
        "expression": "Iloczyn parzysty $\\Leftrightarrow$ przynajmniej jedna liczba parzysta",
        "explanation": "Ustalamy warunek dla parzystości iloczynu",
        "why": "To kluczowa obserwacja. Zamiast liczyć bezpośrednio pary z liczbą parzystą, łatwiej policzyć dopełnienie - pary dwóch nieparzystych.",
        "interactive_choice": {
          "prompt": "Kiedy iloczyn dwóch liczb jest liczbą parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Gdy obie liczby są parzyste",
              "feedback": "To prawda, ale to nie jedyny przypadek! Iloczyn jest parzysty także gdy jedna liczba jest parzysta.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Gdy przynajmniej jedna liczba jest parzysta",
              "feedback": "Dokładnie! Wystarczy jedna parzysta liczba, aby iloczyn był parzysty.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Gdy obie liczby są nieparzyste",
              "feedback": "Nie - iloczyn dwóch nieparzystych jest nieparzysty (np. $3 \\cdot 5 = 15$).",
              "is_correct": false
            }
          ],
          "explanation_after": "Iloczyn jest parzysty gdy przynajmniej jedna liczba jest parzysta. Iloczyn jest nieparzysty tylko gdy obie liczby są nieparzyste."
        }
      },
      {
        "step": 3,
        "hint": "Jak najefektywniej policzyć pary dające parzysty iloczyn?",
        "expression": "Strategia: pary z parzystym iloczynem = wszystkie pary - pary z nieparzystym iloczynem",
        "explanation": "Wybieramy metodę dopełnienia jako najefektywniejszą",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do obliczenia liczby par o parzystym iloczynie?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć bezpośrednio: $(parzysta, parzysta) + (parzysta, nieparzysta)$",
              "feedback": "Możliwe, ale wymaga liczenia dwóch przypadków osobno - więcej pracy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć dopełnienia: wszystkie pary minus pary $(nieparzysta, nieparzysta)$",
              "feedback": "Świetnie! To najprostsza metoda - jeden przypadek do policzenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Policzyć tylko pary $(parzysta, parzysta)$",
              "feedback": "To za mało - pomijasz pary (parzysta, nieparzysta), które też dają parzysty iloczyn.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda dopełnienia jest najszybsza: wszystkie możliwości minus te z nieparzystym iloczynem."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest liczb nieparzystych w zbiorze $\\{1,2,3,...,15\\}$?",
        "expression": "Liczby nieparzyste: $\\{1,3,5,7,9,11,13,15\\}$, czyli $8$ liczb",
        "explanation": "Identyfikujemy liczby nieparzyste w zbiorze"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wylosować dwie liczby nieparzyste?",
        "expression": "Liczba par (nieparzysta, nieparzysta): $\\binom{8}{2} = \\frac{8 \\cdot 7}{2} = 28$",
        "explanation": "Obliczamy liczbę kombinacji $2$-elementowych z $8$ liczb nieparzystych"
      },
      {
        "step": 6,
        "hint": "Ile jest par dających parzysty iloczyn?",
        "expression": "Pary z parzystym iloczynem: $105 - 28 = 77$",
        "explanation": "Odejmujemy od wszystkich możliwości te z nieparzystym iloczynem"
      },
      {
        "step": 7,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Odpowiedź: $77$ możliwości",
        "explanation": "Istnieje $77$ sposobów wylosowania dwóch liczb tak, aby ich iloczyn był parzysty"
      }
    ],
    "solutions": [
      "$77$"
    ],
    "parameters": {
      "total_numbers": 15,
      "odd_numbers": 8,
      "even_numbers": 7
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:46:43.696Z"
  },
  {
    "id": "combinatorics_even_sum_three",
    "topic": "Kombinatoryka - sumy parzyste",
    "difficulty": 4,
    "statement": "Oblicz, na ile sposobów ze zbioru $\\{1,2,3, \\ldots, 99\\}$ można wybrać trzy różne liczby, tak, aby suma tych liczb była parzysta.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy suma trzech liczb jest parzysta?",
        "expression": "Suma parzysta $\\Leftrightarrow$ ($3$ parzyste) lub ($1$ parzysta i $2$ nieparzyste)",
        "explanation": "Analizujemy parzystość sumy trzech liczb",
        "why": "To kluczowy krok - dzielimy problem na dwa rozłączne przypadki, które możemy policzyć osobno.",
        "interactive_choice": {
          "prompt": "Jakie kombinacje parzystości trzech liczb dają sumę parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Trzy liczby parzyste LUB trzy liczby nieparzyste",
              "feedback": "Nie do końca! Sprawdź: $P+P+P=P$ (tak), ale $N+N+N=N$ (nie).",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Trzy liczby parzyste LUB jedna parzysta i dwie nieparzyste",
              "feedback": "Świetnie! $P+P+P=P$ oraz $P+N+N=P$. To jedyne przypadki dające sumę parzystą.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Dowolne trzy liczby, jeśli ich suma jest podzielna przez $2$",
              "feedback": "To prawda, ale nie pomaga w zliczaniu. Potrzebujemy konkretnych przypadków parzystości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma jest parzysta gdy: $(P+P+P)$ lub $(P+N+N)$. Przypadki $(N+N+N)$ i $(P+P+N)$ dają sumę nieparzystą."
        }
      },
      {
        "step": 2,
        "hint": "Ile jest liczb parzystych i nieparzystych w zbiorze $\\{1,2,3,\\ldots,99\\}$?",
        "expression": "Parzyste: $\\{2,4,6,\\ldots,98\\}$ - jest ich $49$. Nieparzyste: $\\{1,3,5,\\ldots,99\\}$ - jest ich $50$",
        "explanation": "Liczymy elementy każdego typu w zbiorze"
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę sposobów wyboru trzech liczb parzystych?",
        "expression": "Przypadek 1: $\\binom{49}{3} = \\frac{49 \\cdot 48 \\cdot 47}{3 \\cdot 2 \\cdot 1}$",
        "explanation": "Liczba sposobów wyboru $3$ liczb parzystych z $49$",
        "interactive_choice": {
          "prompt": "Którą formułę zastosować do wyboru $3$ liczb z $49$ parzystych?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $P(49,3) = \\frac{49!}{46!}$",
              "feedback": "Nie - permutacje uwzględniają kolejność, a my wybieramy zbiór bez kolejności.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Kombinacje: $\\binom{49}{3} = \\frac{49!}{3! \\cdot 46!}$",
              "feedback": "Doskonale! Kombinacje to wybór bez kolejności - dokładnie to, czego potrzebujemy.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wariacje: $V(49,3) = 49 \\cdot 48 \\cdot 47$",
              "feedback": "Wariacje też uwzględniają kolejność. Potrzebujemy kombinacji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybieramy podzbiór $3$-elementowy z $49$ elementów bez względu na kolejność - to kombinacje."
        }
      },
      {
        "step": 4,
        "hint": "Ile wynosi $\\binom{49}{3}$?",
        "expression": "$\\binom{49}{3} = \\frac{49 \\cdot 48 \\cdot 47}{6} = \\frac{110544}{6} = 18424$",
        "explanation": "Obliczamy wartość kombinacji dla pierwszego przypadku"
      },
      {
        "step": 5,
        "hint": "Jak obliczyć liczbę sposobów wyboru $1$ parzystej i $2$ nieparzystych?",
        "expression": "Przypadek 2: $\\binom{49}{1} \\cdot \\binom{50}{2} = 49 \\cdot \\frac{50 \\cdot 49}{2}$",
        "explanation": "Wybieramy $1$ parzystą i niezależnie $2$ nieparzyste",
        "why": "Stosujemy regułę iloczynu, bo wybory są niezależne - najpierw wybieramy parzystą, potem dwie nieparzyste.",
        "interactive_choice": {
          "prompt": "Jak połączyć wybór $1$ liczby z $49$ parzystych i $2$ z $50$ nieparzystych?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $\\binom{49}{1} + \\binom{50}{2}$",
              "feedback": "Nie - dodawanie byłoby dla przypadków rozłącznych. Tu wybieramy JEDNOCZEŚNIE z obu zbiorów.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Mnożyć: $\\binom{49}{1} \\cdot \\binom{50}{2}$",
              "feedback": "Tak! Reguła iloczynu: dla każdego wyboru parzystej mamy $\\binom{50}{2}$ wyborów nieparzystych.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć $\\binom{99}{3}$ i odjąć złe przypadki",
              "feedback": "Możliwe, ale bardzo skomplikowane. Mnożenie jest prostsze i bezpośrednie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: gdy wykonujemy dwa niezależne wybory, mnożymy liczby możliwości."
        }
      },
      {
        "step": 6,
        "hint": "Ile wynosi $\\binom{49}{1} \\cdot \\binom{50}{2}$?",
        "expression": "$49 \\cdot \\frac{50 \\cdot 49}{2} = 49 \\cdot \\frac{2450}{2} = 49 \\cdot 1225 = 60025$",
        "explanation": "Obliczamy wartość dla drugiego przypadku"
      },
      {
        "step": 7,
        "hint": "Jak połączyć oba przypadki?",
        "expression": "$18424 + 60025 = 78449$",
        "explanation": "Dodajemy oba rozłączne przypadki (reguła sumy)",
        "why": "Przypadki są rozłączne (nie możemy jednocześnie wybrać $3$ parzystych i $1$ parzystą z $2$ nieparzystymi), więc dodajemy."
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba sposobów = $78449$",
        "explanation": "Otrzymujemy całkowitą liczbę sposobów wyboru trzech liczb o sumie parzystej"
      }
    ],
    "solutions": [
      "$78449$"
    ],
    "parameters": {
      "set": "$\\{1,2,3,\\ldots,99\\}$",
      "even_count": "$49$",
      "odd_count": "$50$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:47:17.523Z"
  },
  {
    "id": "combinatorics_odd_product",
    "topic": "Kombinatoryka - wybór z warunkiem",
    "difficulty": 4,
    "statement": "Oblicz, na ile sposobów ze zbioru $\\{1,2,3, \\ldots, 99\\}$ można wybrać trzy różne liczby, tak, aby iloczyn tych liczb był nieparzysty.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy iloczyn trzech liczb jest nieparzysty?",
        "expression": "Iloczyn jest nieparzysty $\\Leftrightarrow$ wszystkie trzy liczby są nieparzyste",
        "explanation": "Ustalamy warunek konieczny i wystarczający",
        "why": "To kluczowa obserwacja: iloczyn dziedziczy parzystość. Jeśli choć jeden czynnik jest parzysty (zawiera $2$), to cały iloczyn jest parzysty.",
        "interactive_choice": {
          "prompt": "Jaki warunek muszą spełniać trzy liczby, aby ich iloczyn był nieparzysty?",
          "options": [
            {
              "id": "A",
              "text": "Co najmniej jedna z nich musi być nieparzysta",
              "feedback": "Nie - jeśli jedna jest nieparzysta, a dwie parzyste, to iloczyn będzie parzysty (zawiera czynnik $2$).",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wszystkie trzy muszą być nieparzyste",
              "feedback": "Dokładnie! Iloczyn jest nieparzysty tylko gdy żaden czynnik nie zawiera $2$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Co najmniej dwie muszą być nieparzyste",
              "feedback": "Nie wystarczy - jeśli trzecia jest parzysta, cały iloczyn będzie parzysty.",
              "is_correct": false
            }
          ],
          "explanation_after": "Iloczyn jest nieparzysty wtedy i tylko wtedy, gdy wszystkie czynniki są nieparzyste. Wystarczy jeden parzysty czynnik, aby iloczyn był parzysty."
        }
      },
      {
        "step": 2,
        "hint": "Ile liczb nieparzystych jest w zbiorze $\\{1,2,3, \\ldots, 99\\}$?",
        "expression": "Liczby nieparzyste: $1, 3, 5, 7, \\ldots, 97, 99$",
        "explanation": "To ciąg arytmetyczny o pierwszym wyrazie $a_1 = 1$ i różnicy $r = 2$"
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę wyrazów ciągu $1, 3, 5, \\ldots, 99$?",
        "expression": "Wzór na n-ty wyraz: $a_n = a_1 + (n-1) \\cdot r$",
        "explanation": "Podstawiamy $a_n = 99$, $a_1 = 1$, $r = 2$"
      },
      {
        "step": 4,
        "hint": "Rozwiąż równanie $99 = 1 + (n-1) \\cdot 2$",
        "expression": "$99 = 1 + 2(n-1)$\n$98 = 2(n-1)$\n$49 = n-1$\n$n = 50$",
        "explanation": "W zbiorze $\\{1,2,3, \\ldots, 99\\}$ jest dokładnie $50$ liczb nieparzystych"
      },
      {
        "step": 5,
        "hint": "Jak wybrać $3$ różne liczby z $50$ liczb nieparzystych?",
        "expression": "Liczba sposobów = $\\binom{50}{3}$",
        "explanation": "Wybieramy $3$-elementowy podzbiór z $50$-elementowego zbioru",
        "why": "Kombinacja to wybór bez zwracania uwagi na kolejność. Wzór: $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$",
        "interactive_choice": {
          "prompt": "Czy kolejność wyboru trzech liczb ma znaczenie dla obliczenia iloczynu?",
          "options": [
            {
              "id": "A",
              "text": "Tak, kolejność ma znaczenie - użyj wariacji $V_{50}^3$",
              "feedback": "Nie - iloczyn nie zależy od kolejności: $3 \\cdot 5 \\cdot 7 = 7 \\cdot 3 \\cdot 5$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Nie, kolejność nie ma znaczenia - użyj kombinacji $\\binom{50}{3}$",
              "feedback": "Świetnie! Wybieramy zbiór trzech liczb, a mnożenie jest przemienne.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Trzeba rozważyć oba przypadki",
              "feedback": "Nie - to jedno zadanie z jednoznaczną interpretacją. Liczy się tylko zbiór wybranych liczb.",
              "is_correct": false
            }
          ],
          "explanation_after": "Ponieważ mnożenie jest przemienne, wybieramy kombinacje (zbiory), nie wariacje (ciągi uporządkowane)."
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć $\\binom{50}{3}$?",
        "expression": "$\\binom{50}{3} = \\frac{50 \\cdot 49 \\cdot 48}{3 \\cdot 2 \\cdot 1}$",
        "explanation": "Rozwijamy wzór na symbol Newtona",
        "interactive_choice": {
          "prompt": "Którą formę wzoru na $\\binom{50}{3}$ najłatwiej obliczyć?",
          "options": [
            {
              "id": "A",
              "text": "$\\frac{50!}{3! \\cdot 47!}$ - pełne silnie",
              "feedback": "Możliwe, ale bardzo pracochłonne - silnie są ogromne!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\frac{50 \\cdot 49 \\cdot 48}{3 \\cdot 2 \\cdot 1}$ - skrócona forma",
              "feedback": "Doskonale! Skracamy silnie i zostają tylko potrzebne czynniki.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\binom{50}{47}$ - symetria symbolu Newtona",
              "feedback": "To prawda, że $\\binom{50}{3} = \\binom{50}{47}$, ale nie ułatwia obliczeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Skrócona forma wykorzystuje fakt, że $\\frac{50!}{47!} = 50 \\cdot 49 \\cdot 48$, co znaczy znacznie upraszcza obliczenia."
        }
      },
      {
        "step": 7,
        "hint": "Oblicz licznik: $50 \\cdot 49 \\cdot 48$",
        "expression": "$50 \\cdot 49 = 2450$\n$2450 \\cdot 48 = 117600$",
        "explanation": "Mnożymy kolejno liczby w liczniku"
      },
      {
        "step": 8,
        "hint": "Oblicz mianownik: $3 \\cdot 2 \\cdot 1$",
        "expression": "$3! = 6$",
        "explanation": "Silnia z $3$"
      },
      {
        "step": 9,
        "hint": "Podziel licznik przez mianownik",
        "expression": "$\\frac{117600}{6} = 19600$",
        "explanation": "Wykonujemy dzielenie"
      },
      {
        "step": 10,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba sposobów = $19600$",
        "explanation": "Ze zbioru $\\{1,2,3, \\ldots, 99\\}$ można na $19600$ sposobów wybrać trzy różne liczby o nieparzystym iloczynie"
      }
    ],
    "solutions": [
      "$19600$"
    ],
    "parameters": {
      "set": "$\\{1,2,3, \\ldots, 99\\}$",
      "condition": "iloczyn nieparzysty"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:47:57.014Z"
  },
  {
    "id": "combinatorics_four_digit_odd",
    "topic": "Kombinatoryka - permutacje z warunkami",
    "difficulty": 3,
    "statement": "Oblicz, ile liczb czterocyfrowych nieparzystych można utworzyć z cyfr liczby $9643$ bez powtarzania żadnej z nich.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mamy do dyspozycji i co o nich wiemy?",
        "expression": "Cyfry: $9, 6, 4, 3$ - wszystkie różne",
        "explanation": "Identyfikujemy dostępne cyfry z liczby $9643$"
      },
      {
        "step": 2,
        "hint": "Które cyfry mogą stać na końcu liczby nieparzystej?",
        "expression": "Ostatnia cyfra: $9$ lub $3$ (2 możliwości)",
        "explanation": "Mamy $2$ cyfry nieparzyste do wyboru na ostatnie miejsce",
        "why": "To kluczowy warunek - najpierw ustalamy ostatnią cyfrę, bo jest ograniczenie.",
        "interactive_choice": {
          "prompt": "Która cyfra MUSI być na ostatnim miejscu, aby liczba była nieparzysta?",
          "options": [
            {
              "id": "A",
              "text": "Cyfra $9$ lub $3$ (nieparzyste)",
              "feedback": "Doskonale! Liczba jest nieparzysta gdy kończy się cyfrą nieparzystą.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfra $6$ lub $4$ (parzyste)",
              "feedback": "Nie - te cyfry dają liczby parzyste. Potrzebujemy cyfr nieparzystych.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dowolna cyfra",
              "feedback": "Nie - tylko cyfry nieparzyste ($9$ lub $3$) dają liczby nieparzyste.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba jest nieparzysta wtedy i tylko wtedy, gdy jej ostatnia cyfra jest nieparzysta."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do liczenia wszystkich możliwości?",
        "expression": "Przypadek 1: ostatnia cyfra = $9$, Przypadek 2: ostatnia cyfra = $3$",
        "explanation": "Rozpatrujemy oba przypadki osobno",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do policzenia wszystkich liczb?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć osobno przypadki: ostatnia cyfra = $9$ i ostatnia cyfra = $3$",
              "feedback": "Świetnie! To systematyczne podejście - liczymy każdy przypadek osobno, potem sumujemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje $4$ cyfr i podzielić przez $2$",
              "feedback": "Nie - to nie zadziała, bo nie wszystkie permutacje dają liczby nieparzyste.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - wszystkie cyfry są różne, więc nie ma powtórzeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy mamy warunek na konkretną pozycję, najlepiej rozpatrzyć przypadki osobno."
        }
      },
      {
        "step": 4,
        "hint": "Jeśli ostatnia cyfra to $9$, ile cyfr zostaje na pozostałe miejsca?",
        "expression": "Przypadek 1: _ _ _ $9$, pozostałe cyfry: $6$, $4$, $3$",
        "explanation": "Po wyborze $9$ na koniec, zostają $3$ cyfry na $3$ pierwsze miejsca"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można ustawić $3$ cyfry na $3$ miejscach?",
        "expression": "$3! = 3 \\cdot 2 \\cdot 1 = 6$ sposobów",
        "explanation": "Permutacje $3$ cyfr bez powtórzeń",
        "why": "Dla pierwszego miejsca mamy $3$ wybory, dla drugiego $2$, dla trzeciego $1$. Mnożymy: $3 \\cdot 2 \\cdot 1 = 6$."
      },
      {
        "step": 6,
        "hint": "Ile liczb otrzymamy gdy ostatnia cyfra to $3$?",
        "expression": "Przypadek 2: _ _ _ $3$, pozostałe cyfry: $9$, $6$, $4$",
        "explanation": "Po wyborze $3$ na koniec, zostają $3$ cyfry na $3$ pierwsze miejsca"
      },
      {
        "step": 7,
        "hint": "Czy liczba permutacji będzie taka sama jak w przypadku $1$?",
        "expression": "$3!$ = $3 \\cdot 2 \\cdot 1 = 6$ sposobów",
        "explanation": "Znowu permutacje $3$ cyfr bez powtórzeń"
      },
      {
        "step": 8,
        "hint": "Jak połączyć wyniki z obu przypadków?",
        "expression": "$6 + 6 = 12$",
        "explanation": "Sumujemy liczby z obu rozłącznych przypadków",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę liczb nieparzystych?",
          "options": [
            {
              "id": "A",
              "text": "Dodać wyniki: $6 + 6$",
              "feedback": "Dokładnie! Przypadki się wykluczają (ostatnia cyfra to $9$ LUB $3$), więc dodajemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pomnożyć wyniki: $6 \\cdot 6$",
              "feedback": "Nie - mnożymy gdy wybory są niezależne. Tu mamy rozłączne przypadki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wybrać większy wynik: $\\max(6, 6)$",
              "feedback": "Nie - musimy policzyć wszystkie możliwe liczby z obu przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła sumy: gdy przypadki się wykluczają (LUB), dodajemy liczby możliwości."
        }
      },
      {
        "step": 9,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $12$ liczb czterocyfrowych nieparzystych",
        "explanation": "Otrzymujemy końcowy wynik"
      }
    ],
    "solutions": [
      "$12$"
    ],
    "parameters": {
      "cyfry": "$9, 6, 4, 3$",
      "warunek": "liczba nieparzysta, bez powtórzeń cyfr"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:48:28.040Z"
  },
  {
    "id": "permutations_divisibility_by_5",
    "topic": "Permutacje z powtórzeniami i podzielność",
    "difficulty": 4,
    "statement": "Oblicz, ile liczb siedmiocyfrowych podzielnych przez 5 można utworzyć, jeśli przestawimy cyfry w liczbie $1052534$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry występują w liczbie $1052534$ i ile razy każda?",
        "expression": "Cyfry: $0$, $1$, $2$, $3$, $4$, $5$, $5$ (cyfra $5$ występuje $2$ razy, pozostałe po $1$ razie)",
        "explanation": "Identyfikujemy dostępne cyfry - mamy $7$ cyfr, w tym dwie piątki"
      },
      {
        "step": 2,
        "hint": "Jaki warunek musi spełniać liczba, aby była podzielna przez $5$?",
        "expression": "Ostatnia cyfra: $0$ lub $5$",
        "explanation": "Rozpatrujemy dwa przypadki osobno",
        "why": "Podzielność przez $5$ zależy wyłącznie od ostatniej cyfry. Musimy rozważyć oba możliwe zakończenia.",
        "interactive_choice": {
          "prompt": "Co musi być prawdą dla liczby podzielnej przez $5$?",
          "options": [
            {
              "id": "A",
              "text": "Ostatnia cyfra musi być $0$ lub $5$",
              "feedback": "Dokładnie! To kluczowa cecha podzielności przez $5$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Suma cyfr musi być podzielna przez $5$",
              "feedback": "To warunek dla podzielności przez $3$ lub $9$, nie przez $5$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Pierwsza cyfra musi być $5$",
              "feedback": "Nie - podzielność przez $5$ zależy tylko od ostatniej cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba jest podzielna przez $5$ wtedy i tylko wtedy, gdy kończy się na $0$ lub $5$."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do problemu z dwoma możliwymi zakończeniami?",
        "expression": "Przypadek 1: ostatnia cyfra = $0$, Przypadek 2: ostatnia cyfra = $5$",
        "explanation": "Dzielimy problem na dwa rozłączne przypadki",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć liczby kończące się na $0$ lub $5$?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć osobno dla końcówki $0$ i dla końcówki $5$, potem dodać",
              "feedback": "Świetnie! To standardowa metoda - przypadki rozłączne sumujemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje i podzielić przez $2$",
              "feedback": "Nie - to nie uwzględnia ograniczeń (np. $0$ na początku).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami bez dodatkowych warunków",
              "feedback": "Za proste - musimy uwzględnić warunek na ostatnią cyfrę i pierwszą.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne (liczba nie może kończyć się jednocześnie na $0$ i $5$), więc liczymy osobno i dodajemy."
        }
      },
      {
        "step": 4,
        "hint": "Jeśli ostatnia cyfra to $0$, jakie cyfry zostają do rozmieszczenia?",
        "expression": "Pozostałe cyfry: $1$, $2$, $3$, $4$, $5$, $5$ ($6$ cyfr, w tym dwie piątki)",
        "explanation": "Po ustaleniu $0$ na końcu, zostaje $6$ pozycji do wypełnienia"
      },
      {
        "step": 5,
        "hint": "Czy wszystkie permutacje tych $6$ cyfr dają liczby siedmiocyfrowe?",
        "expression": "TAK - żadna z pozostałych cyfr ($1$, $2$, $3$, $4$, $5$, $5$) nie jest zerem",
        "explanation": "Pierwsza pozycja może być dowolną z tych cyfr, więc nie ma problemu z zerem na początku",
        "why": "Liczba siedmiocyfrowa nie może zaczynać się od $0$. Tu $0$ jest na końcu, więc wszystkie permutacje są poprawne."
      },
      {
        "step": 6,
        "hint": "Ile jest permutacji $6$ cyfr, gdy dwie są identyczne?",
        "expression": "$\\frac{6!}{2!} = \\frac{720}{2} = 360$",
        "explanation": "Permutacje z powtórzeniami: dzielimy przez $2!$ bo dwie piątki są identyczne"
      },
      {
        "step": 7,
        "hint": "Jeśli ostatnia cyfra to $5$, jakie cyfry zostają?",
        "expression": "Pozostałe cyfry: $0$, $1$, $2$, $3$, $4$, $5$ ($6$ cyfr, w tym jedna piątka i jedno zero)",
        "explanation": "Po ustaleniu jednej piątki na końcu, zostaje druga piątka i pozostałe cyfry"
      },
      {
        "step": 8,
        "hint": "Czy teraz wszystkie permutacje dają liczby siedmiocyfrowe?",
        "expression": "Problem: $0$ nie może być na pierwszej pozycji",
        "explanation": "Liczba siedmiocyfrowa nie może zaczynać się od $0$",
        "interactive_choice": {
          "prompt": "Jaki problem pojawia się przy permutacjach cyfr $0$, $1$, $2$, $3$, $4$, $5$?",
          "options": [
            {
              "id": "A",
              "text": "Zero może być na pierwszej pozycji - trzeba odjąć takie przypadki",
              "feedback": "Dokładnie! Musimy wykluczyć permutacje zaczynające się od $0$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie ma problemu - wszystkie permutacje są dobre",
              "feedback": "Nie - liczba $0123455$ nie jest siedmiocyfrowa!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Mamy powtórzenia cyfr, więc trzeba dzielić przez $2!$",
              "feedback": "Nie - w tym przypadku wszystkie cyfry są różne (jedna piątka została na końcu).",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy $0$ jest wśród permutowanych cyfr, musimy wykluczyć przypadki gdzie $0$ jest na pierwszej pozycji."
        }
      },
      {
        "step": 9,
        "hint": "Ile jest wszystkich permutacji $6$ różnych cyfr?",
        "expression": "$6! = 720$",
        "explanation": "Wszystkie permutacje cyfr $0$, $1$, $2$, $3$, $4$, $5$ (wszystkie różne)"
      },
      {
        "step": 10,
        "hint": "Ile permutacji zaczyna się od $0$?",
        "expression": "Jeśli $0$ jest na początku, permutujemy pozostałe $5$ cyfr: $5! = 120$",
        "explanation": "Ustalamy $0$ na pierwszej pozycji i permutujemy resztę"
      },
      {
        "step": 11,
        "hint": "Ile poprawnych liczb siedmiocyfrowych kończy się na $5$?",
        "expression": "$6! - 5! = 720 - 120 = 600$",
        "explanation": "Odejmujemy niepoprawne przypadki (zaczynające się od $0$)"
      },
      {
        "step": 12,
        "hint": "Jaka jest całkowita liczba siedmiocyfrowych liczb podzielnych przez $5$?",
        "expression": "$360 + 600 = 960$",
        "explanation": "Sumujemy oba przypadki: końcówka $0$ i końcówka $5$"
      }
    ],
    "solutions": [
      "$960$"
    ],
    "parameters": {
      "original_number": "$1052534$",
      "digits": "$0$, $1$, $2$, $3$, $4$, $5$, $5$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:49:09.486Z"
  },
  {
    "id": "combinatorics_five_digit_identical",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 3,
    "statement": "Ile można utworzyć liczb pięciocyfrowych, w których pierwsza, trzecia i piąta cyfra (i tylko te) są identyczne?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda struktura takiej liczby pięciocyfrowej?",
        "expression": "Liczba ma postać: $abada$, gdzie $a$ to cyfra powtarzająca się",
        "explanation": "Pierwsza, trzecia i piąta pozycja mają tę samą cyfrę $a$"
      },
      {
        "step": 2,
        "hint": "Którą metodę zastosujemy do policzenia wszystkich możliwości?",
        "expression": "Liczba wszystkich liczb = (wybory dla $a$) $\\times$ (wybory dla $b$) $\\times$ (wybory dla $d$)",
        "explanation": "Stosujemy zasadę mnożenia dla niezależnych wyborów",
        "why": "Zasada mnożenia: jeśli mamy $n_1$ sposobów na pierwszy wybór, $n_2$ na drugi itd., to łącznie mamy $n_1 \\times n_2 \\times ...$ możliwości.",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć liczbę takich liczb pięciocyfrowych?",
          "options": [
            {
              "id": "A",
              "text": "Zasada mnożenia - osobno dla każdej pozycji",
              "feedback": "Świetnie! Liczymy ile możliwości jest dla każdej pozycji, potem mnożymy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Permutacje z powtórzeniami",
              "feedback": "Nie - permutacje dotyczą przestawiania, a tu wybieramy cyfry na konkretne pozycje.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje - wybieramy cyfry ze zbioru",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu pozycje są ustalone.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: gdy wybory są niezależne, mnożymy liczby możliwości."
        }
      },
      {
        "step": 3,
        "hint": "Ile możliwości mamy dla cyfry $a$ na pierwszej pozycji?",
        "expression": "Cyfra $a$ może być jedną z: $1, 2, 3, 4, 5, 6, 7, 8, 9$ - czyli $9$ możliwości",
        "explanation": "Pierwsza cyfra liczby pięciocyfrowej nie może być $0$",
        "interactive_choice": {
          "prompt": "Jakie cyfry może przyjąć $a$ (pierwsza pozycja liczby pięciocyfrowej)?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry od $0$ do $9$ ($10$ możliwości)",
              "feedback": "Nie - liczba pięciocyfrowa nie może zaczynać się od $0$!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Cyfry od $1$ do $9$ ($9$ możliwości)",
              "feedback": "Dokładnie! Pierwsza cyfra nie może być zerem.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Cyfry od $1$ do $8$ ($8$ możliwości)",
              "feedback": "Nie - cyfra $9$ też może być na pierwszej pozycji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba pięciocyfrowa to liczba od $10000$ do $99999$, więc pierwsza cyfra musi być niezerowa."
        }
      },
      {
        "step": 4,
        "hint": "Ile możliwości mamy dla cyfry $b$ na drugiej pozycji?",
        "expression": "Cyfra $b$ może być dowolną cyfrą od $0$ do $9$ - czyli $10$ możliwości",
        "explanation": "Druga pozycja nie ma ograniczeń, może być dowolna cyfra"
      },
      {
        "step": 5,
        "hint": "Czy trzecia pozycja daje nam nowe możliwości?",
        "expression": "Trzecia pozycja to znowu cyfra $a$ - już wybrana, $0$ nowych wyborów",
        "explanation": "Trzecia pozycja jest zdeterminowana przez wybór $a$"
      },
      {
        "step": 6,
        "hint": "Ile możliwości mamy dla cyfry $d$ na czwartej pozycji?",
        "expression": "Cyfra $d$ może być dowolną cyfrą od $0$ do $9$ - czyli $10$ możliwości",
        "explanation": "Czwarta pozycja nie ma ograniczeń",
        "interactive_choice": {
          "prompt": "Jakie cyfry może przyjąć $d$ na czwartej pozycji?",
          "options": [
            {
              "id": "A",
              "text": "Dowolną cyfrę od $0$ do $9$ ($10$ możliwości)",
              "feedback": "Dokładnie! Czwarta pozycja nie ma żadnych ograniczeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko cyfry różne od $a$ ($9$ możliwości)",
              "feedback": "Nie - zadanie nie wymaga, żeby $d$ było różne od $a$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko cyfry różne od $a$ i $b$ ($8$ możliwości)",
              "feedback": "Nie - zadanie nie nakłada takich ograniczeń na $d$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfra $d$ jest niezależna - może być taka sama jak $a$ lub $b$, lub inna."
        }
      },
      {
        "step": 7,
        "hint": "Czy piąta pozycja daje nam nowe możliwości?",
        "expression": "Piąta pozycja to znowu cyfra $a$ - już wybrana, $0$ nowych wyborów",
        "explanation": "Piąta pozycja jest zdeterminowana przez wybór $a$"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć całkowitą liczbę możliwości?",
        "expression": "Liczba wszystkich liczb = $9 \\times 10 \\times 10$",
        "explanation": "Mnożymy liczby możliwości dla każdej niezależnej pozycji",
        "why": "Pozycje $1$, $2$, $4$ dają niezależne wybory. Pozycje $3$ i $5$ są zdeterminowane przez pozycję $1$."
      },
      {
        "step": 9,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "$9 \\times 10 \\times 10 = 900$",
        "explanation": "Obliczamy iloczyn"
      }
    ],
    "solutions": [
      "$900$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:49:39.369Z"
  },
  {
    "id": "five_digit_two_nonzero_digits",
    "topic": "Kombinatoryka - liczby z ograniczeniami",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb pięciocyfrowych, w zapisie których użyto tylko dwóch cyfr i żadna z nich nie jest zerem.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry możemy użyć w zapisie liczby pięciocyfrowej?",
        "expression": "Cyfry od $1$ do $9$ (bez zera)",
        "explanation": "Mamy do dyspozycji cyfry: $1$, $2$, $3$, $4$, $5$, $6$, $7$, $8$, $9$",
        "why": "Zero jest wykluczone z warunków zadania. Liczba pięciocyfrowa nie może zaczynać się od $0$."
      },
      {
        "step": 2,
        "hint": "Jak podejść do problemu wyboru dwóch cyfr i ich rozmieszczenia?",
        "expression": "Liczba sposobów = $\\binom{10}{2}$ × $\\binom{5}{2}$",
        "explanation": "Stosujemy regułę mnożenia dla zdarzeń niezależnych",
        "interactive_choice": {
          "prompt": "Jak najlepiej rozwiązać ten problem kombinatoryczny?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać $2$ cyfry, potem rozłożyć je na $5$ pozycji",
              "feedback": "Świetnie! To systematyczne podejście: wybór cyfr $\\times$ rozmieszczenie",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dla każdej pozycji wybrać cyfrę z dostępnych",
              "feedback": "To skomplikuje sprawę - trudno kontrolować warunek 'dokładnie 2 cyfry'",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie liczby i odjąć te z więcej niż $2$ cyframi",
              "feedback": "Możliwe, ale bardzo pracochłonne - lepiej liczyć bezpośrednio",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzielimy problem: wybór pary cyfr, następnie ich rozmieszczenie na pozycjach."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów możemy wybrać $2$ różne cyfry spośród $9$?",
        "expression": "$\\binom{9}{2} = \\frac{9!}{2! \\cdot 7!} = \\frac{9 \\cdot 8}{2} = 36$",
        "explanation": "Wybieramy $2$-elementowy podzbiór z $9$-elementowego zbioru",
        "why": "Używamy symbolu Newtona (kombinacji), bo kolejność wyboru cyfr nie ma znaczenia - pary $\\{3,7\\}$ i $\\{7,3\\}$ to to samo."
      },
      {
        "step": 4,
        "hint": "Mając ustalone dwie cyfry, jak je rozmieścić na 5 pozycjach?",
        "expression": "$2^5 = 32$ sposoby rozmieszczenia",
        "explanation": "Każda pozycja: $2$ wybory, więc $2 \\cdot 2 \\cdot 2 \\cdot 2 \\cdot 2 = 32$",
        "interactive_choice": {
          "prompt": "Jak policzyć rozmieszczenia dwóch cyfr na $5$ pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "Każda pozycja ma $2$ możliwości, więc $2^5$",
              "feedback": "Świetnie! Każda z $5$ pozycji może mieć pierwszą lub drugą cyfrę",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "To permutacje: $5!$",
              "feedback": "Nie - permutacje byłyby gdyby wszystkie cyfry były różne",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje: $\\binom{5}{2}$",
              "feedback": "To policzyłoby tylko wybór pozycji dla jednej cyfry, bez uwzględnienia drugiej",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla każdej z $5$ pozycji mamy niezależny wybór: pierwsza lub druga cyfra."
        }
      },
      {
        "step": 5,
        "hint": "Czy wszystkie te $32$ rozmieszczenia są poprawne?",
        "expression": "$32 - 2 = 30$ poprawnych rozmieszczeni",
        "explanation": "Odejmujemy 2 przypadki: $11111$ i $22222$ (dla przykładowej pary {$1$,$2$})",
        "why": "Z $2^5$ odejmujemy przypadki gdzie wszystkie pozycje mają tę samą cyfrę ($2$ takie przypadki).",
        "interactive_choice": {
          "prompt": "Które rozmieszczenia musimy wykluczyć z $32$ możliwości?",
          "options": [
            {
              "id": "A",
              "text": "Żadne - wszystkie są dobre",
              "feedback": "Nie! Warunek mówi 'użyto TYLKO dwóch cyfr' - obie muszą wystąpić",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Te gdzie użyto tylko jednej cyfry (np. $33333$ lub $77777$)",
              "feedback": "Dokładnie! Musimy odjąć $2$ przypadki: wszystkie pierwsza cyfra i wszystkie druga cyfra",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Te gdzie cyfry się powtarzają",
              "feedback": "Nie - powtórzenia są dozwolone, byleby użyto obu cyfr",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'użyto dwóch cyfr' oznacza, że obie muszą wystąpić przynajmniej raz."
        }
      },
      {
        "step": 6,
        "hint": "Ile łącznie jest liczb spełniających warunki zadania?",
        "expression": "$36 \\cdot 30 = 1080$",
        "explanation": "Mnożymy liczbę par cyfr przez liczbę poprawnych rozmieszczeni każdej pary"
      },
      {
        "step": 7,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczb pięciocyfrowych z dokładnie dwoma różnymi cyframi niezerowymi jest $1080$",
        "explanation": "Otrzymujemy wynik końcowy"
      }
    ],
    "solutions": [
      "$1080$"
    ],
    "parameters": {
      "type": "liczby pięciocyfrowe",
      "constraint": "dokładnie $2$ różne cyfry, obie niezerowe"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:50:18.324Z"
  },
  {
    "id": "counting_digits_7_9_million",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 3,
    "statement": "Oblicz, ile liczb mniejszych od $1000000$ można utworzyć z cyfr $7$ lub $9$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie liczby są mniejsze od miliona?",
        "expression": "Liczby mniejsze od $1\\,000\\,000$ to liczby od $1$ do $999\\,999$",
        "explanation": "Milion to liczba siedmiocyfrowa, więc szukamy liczb od jednocyfrowych do sześciocyfrowych"
      },
      {
        "step": 2,
        "hint": "Jak podejść do zliczania liczb o różnej liczbie cyfr?",
        "expression": "Rozpatrzymy osobno: $1$-cyfrowe, $2$-cyfrowe, $3$-cyfrowe, $4$-cyfrowe, $5$-cyfrowe, $6$-cyfrowe",
        "explanation": "Dla każdej długości zastosujemy zasadę mnożenia",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć wszystkie liczby utworzone z cyfr $7$ i $9$?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć osobno liczby jedno-, dwu-, trzy-, cztero-, pięcio- i sześciocyfrowe",
              "feedback": "Świetnie! To systematyczne podejście - policzysz każdą grupę osobno i zsumujemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - permutacje dotyczą przestawiania elementów, a tu tworzymy liczby o różnej długości.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie liczby sześciocyfrowe i odjąć te większe od $1000000$",
              "feedback": "Skomplikowane - łatwiej policzyć każdą długość osobno, bo nie ma ograniczeń na pierwszą cyfrę.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podzielimy problem na przypadki według liczby cyfr i użyjemy zasady mnożenia dla każdego."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest liczb jednocyfrowych złożonych z cyfr $7$ lub $9$?",
        "expression": "Liczby 1-cyfrowe: $2$ możliwości $(7$ lub $9)$",
        "explanation": "Mamy dokładnie dwie liczby jednocyfrowe: $7$ i $9$",
        "why": "Każda pozycja cyfry może być wypełniona na $2$ sposoby (cyfrą $7$ lub $9$). To podstawa zasady mnożenia."
      },
      {
        "step": 4,
        "hint": "Ile jest liczb dwucyfrowych, jeśli każda cyfra może być $7$ lub $9$?",
        "expression": "Liczby 2-cyfrowe: $2 \\cdot 2 = 4$ możliwości",
        "explanation": "Pierwsza cyfra: $2$ wybory, druga cyfra: $2$ wybory, razem $2 \\cdot 2 = 4$"
      },
      {
        "step": 5,
        "hint": "Czy widzisz wzór dla liczb o większej liczbie cyfr?",
        "expression": "Liczby n-cyfrowe: $2^n$ możliwości",
        "explanation": "Dla każdej z $n$ pozycji mamy $2$ wybory, więc $2 \\cdot 2 \\cdot ... \\cdot 2 = 2^n$",
        "interactive_choice": {
          "prompt": "Jaki wzór opisuje liczbę $n$-cyfrowych liczb z cyfr $7$ i $9$?",
          "options": [
            {
              "id": "A",
              "text": "$2^n$ - każda z $n$ pozycji ma $2$ możliwości",
              "feedback": "Doskonale! Zasada mnożenia: $2 \\cdot 2 \\cdot ... \\cdot 2$ (n razy) = $2^n$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$2n$ - dwie cyfry razy liczba pozycji",
              "feedback": "Nie - to byłoby dodawanie. Tu mnożymy możliwości dla każdej pozycji.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$n^2$ - liczba pozycji do kwadratu",
              "feedback": "Nie - to nie uwzględnia liczby dostępnych cyfr $2$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: jeśli mamy $n$ pozycji i każda ma $2$ możliwości, to razem $2^n$ kombinacji."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest liczb dla każdej długości od $1$ do $6$ cyfr?",
        "expression": "1-cyfrowe: $2^1 = 2$, 2-cyfrowe: $2^2 = 4$, 3-cyfrowe: $2^3 = 8$, 4-cyfrowe: $2^4 = 16$, 5-cyfrowe: $2^5 = 32$, 6-cyfrowe: $2^6 = 64$",
        "explanation": "Obliczamy potęgi dwójki dla każdej długości"
      },
      {
        "step": 7,
        "hint": "Jak otrzymać całkowitą liczbę wszystkich możliwych liczb?",
        "expression": "$2 + 4 + 8 + 16 + 32 + 64 = 126$",
        "explanation": "Sumujemy liczby dla wszystkich długości"
      },
      {
        "step": 8,
        "hint": "Czy można to zapisać krócej używając wzoru na sumę ciągu geometrycznego?",
        "expression": "Alternatywnie: $2^1 + 2^2 + 2^3 + 2^4 + 2^5 + 2^6 = 2^7 - 2 = 128 - 2 = 126$",
        "explanation": "Używając wzoru na sumę ciągu geometrycznego otrzymujemy ten sam wynik",
        "interactive_choice": {
          "prompt": "Jak można zapisać sumę $2 + 4 + 8 + 16 + 32 + 64$?",
          "options": [
            {
              "id": "A",
              "text": "Jako sumę ciągu geometrycznego: $2(2^6 - 1)/(2-1) = 2^7 - 2$",
              "feedback": "Świetnie! Wzór na sumę: $S_n = a_1(q^n - 1)/(q-1)$, tu daje $2^7 - 2 = 126$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako $6 \\cdot 2^3 = 48$",
              "feedback": "Nie - to nie uwzględnia struktury potęg dwójki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie da się krócej, trzeba dodać wszystkie składniki",
              "feedback": "Da się! To ciąg geometryczny o pierwszym wyrazie $2$ i ilorazie $2$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma $2^1 + 2^2 + ... + 2^6 = 2(1 + 2 + 4 + ... + 32) = 2 \\cdot \\frac{2^6-1}{2-1} = 2(64-1) = 126$"
        }
      }
    ],
    "solutions": [
      "$126$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:50:56.626Z"
  },
  {
    "id": "combinatorics_four_digit_numbers",
    "topic": "Kombinatoryka - permutacje z powtórzeniami",
    "difficulty": 4,
    "statement": "Oblicz, ile różnych liczb czterocyfrowych można utworzyć z cyfr $1$, $2$, $3$ przy założeniu, że cyfry $1$ i $2$ mogą być użyte jednokrotnie.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mamy do dyspozycji i ile razy możemy ich użyć?",
        "expression": "Cyfry: $1$ (raz), $2$ (raz), $3$ (dowolnie wiele razy)",
        "explanation": "Identyfikujemy dostępne cyfry i ograniczenia ich użycia"
      },
      {
        "step": 2,
        "hint": "Jak podejść do problemu liczenia czterocyfrowych liczb z ograniczeniami?",
        "expression": "Przypadki: (I) bez $1$ i $2$, (II) tylko $1$, (III) tylko $2$, (IV) $1$ i $2$",
        "explanation": "Dzielimy problem na rozłączne przypadki",
        "why": "Cyfry $1$ i $2$ mogą wystąpić $0$ lub $1$ raz, więc mamy $4$ rozłączne sytuacje. Zsumujemy wyniki z każdego przypadku.",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do zliczenia liczb czterocyfrowych?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć przypadki według liczby użytych cyfr $1$ i $2$",
              "feedback": "Świetnie! To systematyczne podejście - podzielimy na przypadki: bez $1$ i $2$, tylko z $1$, tylko z $2$, z $1$ i $2$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na permutacje z powtórzeniami $\\frac{n!}{n_1! \\cdot n_2! \\cdot n_3!}$",
              "feedback": "Ten wzór działa gdy mamy ustaloną liczbę każdej cyfry, ale tu cyfra $3$ może wystąpić różną liczbę razy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie możliwości dla każdej pozycji: $3 \\cdot 3 \\cdot 3 \\cdot 3$",
              "feedback": "To by działało gdyby wszystkie cyfry mogły być użyte dowolnie, ale $1$ i $2$ mają ograniczenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział na przypadki według użycia cyfr $1$ i $2$ pozwala systematycznie uwzględnić wszystkie ograniczenia."
        }
      },
      {
        "step": 3,
        "hint": "Ile liczb możemy utworzyć używając tylko cyfry $3$?",
        "expression": "Przypadek I: tylko cyfra $3$ → $3333$ → 1 liczba",
        "explanation": "Gdy nie używamy $1$ ani $2$, wszystkie pozycje zajmuje cyfra $3$"
      },
      {
        "step": 4,
        "hint": "Ile liczb powstanie gdy użyjemy cyfry $1$ dokładnie raz (reszta to $3$)?",
        "expression": "Przypadek II: jedna $1$, trzy $3$ → $\\frac{4!}{1! \\cdot 3!} = 4$ liczby",
        "explanation": "Cyfra $1$ może być na $4$ różnych pozycjach",
        "interactive_choice": {
          "prompt": "Jak policzyć liczby z jedną cyfrą $1$ i trzema cyframi $3$?",
          "options": [
            {
              "id": "A",
              "text": "Cyfra $1$ może być na $4$ pozycjach, więc $4$ liczby",
              "feedback": "Dokładnie! Liczby: $1333$, $3133$, $3313$, $3331$. Cyfra $1$ wybiera swoją pozycję.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru $\\frac{4!}{1! \\cdot 3!} = 4$",
              "feedback": "Poprawny wynik! To permutacje z powtórzeniami: $1$ raz cyfra $1$, $3$ razy cyfra $3$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To $4 \\cdot 3 = 12$ liczb",
              "feedback": "Nie - nie mnożymy pozycji. Cyfra $1$ po prostu wybiera jedną z $4$ pozycji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfra $1$ może zajmować dowolną z $4$ pozycji, reszta to cyfry $3$. Wzór na permutacje potwierdza: $\\frac{4!}{3!} = 4$."
        }
      },
      {
        "step": 5,
        "hint": "Ile liczb powstanie gdy użyjemy cyfry $2$ dokładnie raz (reszta to $3$)?",
        "expression": "Przypadek III: jedna $2$, trzy $3$ → $\\frac{4!}{1! \\cdot 3!} = 4$ liczby",
        "explanation": "Analogicznie jak dla cyfry $1$ - cyfra $2$ może być na $4$ pozycjach"
      },
      {
        "step": 6,
        "hint": "Ile liczb powstanie gdy użyjemy obu cyfr $1$ i $2$ (reszta to $3$)?",
        "expression": "Przypadek IV: $1$, $2$ i dwie $3$ → $\\frac{4!}{2!} = \\frac{24}{2} = 12$ liczb",
        "explanation": "Permutacje czterech cyfr z dwoma powtórzeniami cyfry $3$",
        "why": "Wzór $\\frac{n!}{n_1! \\cdot n_2! \\cdot ... \\cdot n_k!}$ stosujemy gdy mamy $n$ pozycji i cyfry powtarzające się odpowiednio $n_1, n_2, ..., n_k$ razy.",
        "interactive_choice": {
          "prompt": "Jak ułożyć cyfry $1$, $2$, $3$, $3$ w liczbie czterocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje z powtórzeniami: $\\frac{4!}{2!} = 12$",
              "feedback": "Świetnie! Mamy $4$ cyfry, z czego dwie $3$ się powtarzają: $\\frac{4!}{2!} = \\frac{24}{2} = 12$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybieramy 2 pozycje z 4 dla cyfr 1 i 2: $\\binom{4}{2} \\cdot 2! = 12$",
              "feedback": "Poprawnie! Wybieramy pozycje dla $1$ i $2$ ($\\binom{4}{2} = 6$), potem je ustawiamy ($2! = 2$): $6 \\cdot 2 = 12$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To $4! = 24$ liczby",
              "feedback": "Nie - zapominasz że dwie cyfry $3$ są identyczne, więc część permutacji się powtarza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy $4$ pozycje dla cyfr $1$, $2$, $3$, $3$. Ponieważ dwie $3$ są identyczne, dzielimy przez $2!$"
        }
      },
      {
        "step": 7,
        "hint": "Jak połączyć wyniki ze wszystkich przypadków?",
        "expression": "$1 + 4 + 4 + 12 = 21$",
        "explanation": "Sumujemy liczby z rozłącznych przypadków"
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $21$ różnych liczb czterocyfrowych",
        "explanation": "Suma wszystkich możliwości z uwzględnieniem ograniczeń"
      }
    ],
    "solutions": [
      "$21$"
    ],
    "parameters": {
      "available_digits": "$1$ (raz), $2$ (raz), $3$ (dowolnie)",
      "number_length": 4
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T06:51:35.583Z"
  },
  {
    "id": "combinatorics_seven_digit_numbers",
    "topic": "Kombinatoryka - rozmieszczenia cyfr",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb naturalnych siedmiocyfrowych, w zapisie których występują dokładnie dwie cyfry $1$ i dokładnie trzy cyfry $9$, zakładając, że nie występuje cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr musimy rozmieścić w siedmiocyfrowej liczbie?",
        "expression": "Liczba ma $7$ cyfr: dwie cyfry $1$, trzy cyfry $9$, oraz $7 - 2 - 3 = 2$ pozostałe cyfry",
        "explanation": "Identyfikujemy strukturę problemu - mamy $7$ pozycji do wypełnienia"
      },
      {
        "step": 2,
        "hint": "Jakie cyfry mogą być na dwóch pozostałych pozycjach?",
        "expression": "Pozostałe cyfry: $\\{2, 3, 4, 5, 6, 7, 8\\}$ - jest ich $7$",
        "explanation": "Dwie pozostałe pozycje wypełniamy cyframi z tego zbioru",
        "interactive_choice": {
          "prompt": "Które cyfry możemy użyć na dwóch pozostałych pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry od $2$ do $8$ (bez $0$, $1$, $9$)",
              "feedback": "Dokładnie! Mamy 7 możliwych cyfr: $2$, $3$, $4$, $5$, $6$, $7$, $8$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry od $1$ do $9$ (bez $0$)",
              "feedback": "Nie - cyfry $1$ i $9$ już występują w wymaganej liczbie!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dowolne cyfry od $0$ do $9$",
              "feedback": "Nie - cyfra $0$ nie występuje, a $1$ i $9$ już są użyte",
              "is_correct": false
            }
          ],
          "explanation_after": "Wykluczamy $0$ (z założenia), $1$ i $9$ (już występują w wymaganej liczbie). Zostaje $7$ cyfr."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do problemu rozmieszczenia cyfr?",
        "expression": "Strategia: wybieramy pozycje dla cyfr $1$, potem dla $9$, na końcu wypełniamy pozostałe",
        "explanation": "Dzielimy problem na kolejne decyzje",
        "why": "To standardowa metoda w kombinatoryce - rozbijamy złożony problem na prostsze kroki i mnożymy liczby możliwości.",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do policzenia wszystkich możliwości?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pozycje dla cyfr, potem wypełnić pozostałe",
              "feedback": "Świetnie! To klasyczne podejście: wybieramy miejsca dla $1$, potem dla $9$, potem wypełniamy resztę",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje $7$ cyfr",
              "feedback": "Nie do końca - mamy powtarzające się cyfry (dwie $1$ i trzy $9$), więc zwykła permutacja nie zadziała",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na wariacje z powtórzeniami",
              "feedback": "Nie - wariacje z powtórzeniami to gdy każda pozycja może mieć dowolną wartość. Tu mamy ograniczenia",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozbijamy problem na etapy: wybór pozycji dla jedynek, dla dziewiątek, wypełnienie reszty."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów możemy wybrać $2$ pozycje spośród $7$ dla cyfr $1$?",
        "expression": "$\\binom{7}{2} = \\frac{7!}{2! \\cdot 5!} = \\frac{7 \\cdot 6}{2} = 21$",
        "explanation": "Wybieramy $2$ pozycje z $7$ dla cyfr $1$ - to kombinacja bez względu na kolejność"
      },
      {
        "step": 5,
        "hint": "Po umieszczeniu dwóch jedynek, ile pozycji zostało dla cyfr $9$?",
        "expression": "Zostało $7 - 2 = 5$ pozycji, wybieramy 3 dla cyfr 9: $\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Z pozostałych $5$ pozycji wybieramy $3$ dla cyfr $9$"
      },
      {
        "step": 6,
        "hint": "Ile pozycji pozostało do wypełnienia i czym je wypełnimy?",
        "expression": "Pozostały $7 - 2 - 3 = 2$ pozycje, każdą wypełniamy jedną z $7$ cyfr $\\{2, 3, 4, 5, 6, 7, 8\\}$",
        "explanation": "Mamy $2$ wolne pozycje do wypełnienia"
      },
      {
        "step": 7,
        "hint": "Czy cyfry na pozostałych pozycjach mogą się powtarzać?",
        "expression": "Pierwsza pozycja: $7$ możliwości, druga pozycja: $7$ możliwości, razem $7 \\cdot 7 = 49$ sposobów",
        "explanation": "Cyfry mogą się powtarzać, więc mnożymy liczbę możliwości",
        "why": "To zasada mnożenia - gdy mamy niezależne wybory, mnożymy liczby możliwości.",
        "interactive_choice": {
          "prompt": "Jak wypełnić dwie pozostałe pozycje cyframi z $\\{2, 3, 4, 5, 6, 7, 8\\}$?",
          "options": [
            {
              "id": "A",
              "text": "Każda pozycja niezależnie - cyfry mogą się powtarzać",
              "feedback": "Tak! Zadanie nie zabrania powtórzeń, więc każda z $2$ pozycji ma $7$ możliwości",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bez powtórzeń - pierwsza pozycja $7$ możliwości, druga $6$",
              "feedback": "Nie - zadanie nie wymaga różnych cyfr na tych pozycjach",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Muszą być takie same cyfry na obu pozycjach",
              "feedback": "Nie - nie ma takiego wymagania w zadaniu",
              "is_correct": false
            }
          ],
          "explanation_after": "Brak ograniczeń oznacza, że cyfry mogą się powtarzać. Każda pozycja ma $7$ niezależnych wyborów."
        }
      },
      {
        "step": 8,
        "hint": "Jak połączyć wszystkie etapy w końcowy wynik?",
        "expression": "$21 \\cdot 10 \\cdot 49 = 10290$",
        "explanation": "Mnożymy liczby możliwości z każdego etapu zgodnie z zasadą mnożenia"
      },
      {
        "step": 9,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba wszystkich takich liczb siedmiocyfrowych wynosi $10290$",
        "explanation": "Otrzymujemy końcowy wynik"
      }
    ],
    "solutions": [
      "$10290$"
    ],
    "parameters": {
      "digits": "$7$ cyfr",
      "ones": "dokładnie $2$ cyfry $1$",
      "nines": "dokładnie $3$ cyfry $9$",
      "constraint": "bez cyfry $0$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:52:18.974Z"
  },
  {
    "id": "combinatorics_seven_digit_numbers",
    "topic": "Kombinatoryka - rozmieszczenie cyfr",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb naturalnych siedmiocyfrowych, w zapisie których występują dokładnie dwie cyfry $1$ i dokładnie trzy cyfry $9$, zakładając, że może występować cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr musimy rozmieścić w liczbie siedmiocyfrowej?",
        "expression": "Liczba ma 7 cyfr: $2$ jedynki, $3$ dziewiątki i $7 - 2 - 3 = 2$ pozostałe cyfry",
        "explanation": "Identyfikujemy strukturę liczby - mamy $7$ pozycji do wypełnienia"
      },
      {
        "step": 2,
        "hint": "Czy wszystkie pozycje w liczbie są równoważne?",
        "expression": "Warunek: pierwsza cyfra $\\neq 0$",
        "explanation": "To kluczowe ograniczenie dla liczb naturalnych siedmiocyfrowych",
        "why": "Musimy podzielić problem na przypadki: gdy $0$ jest na pierwszej pozycji (niemożliwe) i gdy nie jest.",
        "interactive_choice": {
          "prompt": "Jakie ograniczenie musimy uwzględnić dla liczby siedmiocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Pierwsza cyfra nie może być zerem",
              "feedback": "Dokładnie! Liczba siedmiocyfrowa musi zaczynać się od cyfry $1$-$9$, inaczej byłaby krótsza.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie pozycje są równoważne",
              "feedback": "Nie - jeśli pierwsza cyfra to $0$, liczba nie będzie siedmiocyfrowa.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Ostatnia cyfra nie może być zerem",
              "feedback": "Nie - ostatnia cyfra może być dowolna, to pierwsza ma ograniczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Pierwsza cyfra nie może być zerem, więc musimy rozpatrzyć przypadki osobno."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do problemu z ograniczeniem na pierwszą cyfrę?",
        "expression": "Strategia: Wszystkie rozmieszczenia - rozmieszczenia z $0$ na początku",
        "explanation": "Metoda dopełnienia upraszcza obliczenia",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do zliczania z ograniczeniem na pierwszą pozycję?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie możliwości, potem odjąć te z $0$ na początku",
              "feedback": "Świetnie! To metoda dopełnienia - często najefektywniejsza.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Rozpatrzyć osobno przypadki: $1$ na początku, $9$ na początku, inna cyfra na początku",
              "feedback": "Możliwe, ale bardzo pracochłonne - trzeba rozpatrzyć wiele przypadków.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Najpierw wybrać pierwszą cyfrę spośród $1$-$9$, potem resztę",
              "feedback": "To skomplikuje sprawę - cyfry $1$ i $9$ już są 'zarezerwowane' w zadaniu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Użyjemy metody dopełnienia: wszystkie rozmieszczenia minus te z zerem na początku."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest wszystkich sposobów rozmieszczenia $2$ jedynek, $3$ dziewiątek i $2$ innych cyfr na $7$ pozycjach?",
        "expression": "Wybieramy pozycje dla cyfr: $\\binom{7}{2}$ dla jedynek, $\\binom{5}{3}$ dla dziewiątek, $\\binom{2}{2}$ dla pozostałych",
        "explanation": "Używamy kombinacji do wyboru pozycji dla każdej grupy cyfr",
        "why": "To wzór na permutacje z powtórzeniami: $\\frac{7!}{2! \\cdot 3! \\cdot 2!}$ lub równoważnie iloczyn dwumianów Newtona."
      },
      {
        "step": 5,
        "hint": "Ile wynosi $\\binom{7}{2} \\cdot \\binom{5}{3}$?",
        "expression": "$\\binom{7}{2} = \\frac{7 \\cdot 6}{2} = 21$, $\\binom{5}{3} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Obliczamy współczynniki dwumianowe"
      },
      {
        "step": 6,
        "hint": "Ile jest sposobów rozmieszczenia cyfr na $7$ pozycjach?",
        "expression": "$21 \\cdot 10 = 210$ sposobów rozmieszczenia $2$ jedynek i $3$ dziewiątek",
        "explanation": "To liczba sposobów wyboru pozycji dla ustalonych cyfr $1$ i $9$"
      },
      {
        "step": 7,
        "hint": "Jakie cyfry mogą być na dwóch pozostałych pozycjach?",
        "expression": "Dla $2$ pozostałych pozycji: $8 \\cdot 8 = 64$ możliwości",
        "explanation": "Każda z $2$ pozycji może mieć jedną z $8$ cyfr (z powtórzeniami)",
        "interactive_choice": {
          "prompt": "Które cyfry mogą wypełnić 2 pozostałe pozycje?",
          "options": [
            {
              "id": "A",
              "text": "Dowolne cyfry $0$-$9$ oprócz $1$ i $9$",
              "feedback": "Dokładnie! Mamy $8$ możliwości: {$0$, $2$, $3$, $4$, $5$, $6$, $7$, $8$}, cyfry mogą się powtarzać.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko cyfry $2$-$8$ (bez $0$, $1$, $9$)",
              "feedback": "Nie - cyfra $0$ może występować, tylko nie na pierwszej pozycji.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dowolne cyfry $0$-$9$",
              "feedback": "Nie - cyfry $1$ i $9$ są już użyte (dokładnie $2$ i $3$ razy).",
              "is_correct": false
            }
          ],
          "explanation_after": "Pozostałe $2$ pozycje wypełniamy cyframi z $\\{0, 2, 3, 4, 5, 6, 7, 8\\}$ - z powtórzeniami."
        }
      },
      {
        "step": 8,
        "hint": "Ile jest wszystkich siedmiocyfrowych ciągów z $2$ jedynkami, $3$ dziewiątkami i $2$ innymi cyframi?",
        "expression": "$210 \\cdot 64 = 13\\,440$ wszystkich ciągów",
        "explanation": "Mnożymy liczbę rozmieszczeń przez liczbę możliwości dla pozostałych cyfr"
      },
      {
        "step": 9,
        "hint": "Ile z tych ciągów ma zero na pierwszej pozycji?",
        "expression": "Jeśli pierwsza pozycja = $0$, zostaje $6$ pozycji: $\\binom{6}{2}$ dla jedynek, $\\binom{4}{3}$ dla dziewiątek",
        "explanation": "Rozpatrujemy przypadek z zerem na początku"
      },
      {
        "step": 10,
        "hint": "Oblicz liczbę nieprawidłowych ciągów z zerem na początku",
        "expression": "$\\binom{6}{2} = 15$, $\\binom{4}{3} = 4$, więc $15 \\cdot 4 = 60$ rozmieszczeń",
        "explanation": "Liczba sposobów rozmieszczenia $1$ i $9$ na pozostałych $6$ pozycjach"
      },
      {
        "step": 11,
        "hint": "Ile możliwości dla drugiej pozostałej cyfry gdy pierwsza to $0$?",
        "expression": "Druga pozostała pozycja: $8$ możliwości, razem $60 \\cdot 8 = 480$ ciągów z zerem na początku",
        "explanation": "Jedna pozycja zajęta przez $0$, druga może mieć $8$ wartości"
      },
      {
        "step": 12,
        "hint": "Ile jest prawidłowych liczb siedmiocyfrowych?",
        "expression": "$13\\,440 - 480 = 12\\,960$",
        "explanation": "Odejmujemy nieprawidłowe ciągi od wszystkich możliwych"
      }
    ],
    "solutions": [
      "$12\\,960$"
    ],
    "parameters": {
      "digits": "$7$ cyfr",
      "ones": "dokładnie $2$",
      "nines": "dokładnie $3$",
      "constraint": "pierwsza cyfra $\\neq 0$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T06:53:00.934Z"
  },
  {
    "id": "combinatorics_seven_digit_numbers",
    "topic": "Kombinatoryka - liczby z powtórzeniami cyfr",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb siedmiocyfrowych, w których zapisie dziesiętnym występuje dokładnie trzy razy cyfra $1$ i dokładnie dwa razy występuje cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry muszą wystąpić w tej liczbie siedmiocyfrowej?",
        "expression": "Liczba ma $7$ cyfr: trzy jedynki ($1$, $1$, $1$), dwa zera ($0$, $0$) i dwie inne cyfry",
        "explanation": "Identyfikujemy strukturę liczby - mamy $5$ cyfr określonych, pozostałe $2$ miejsca do wypełnienia"
      },
      {
        "step": 2,
        "hint": "Czy wszystkie siedem pozycji w liczbie jest równoważnych?",
        "expression": "Pierwsza cyfra $\\neq 0$, pozostałe $6$ pozycji bez ograniczeń",
        "explanation": "Ustalamy podstawowe ograniczenie dla liczby siedmiocyfrowej",
        "why": "To ograniczenie wymusza podział na przypadki: liczby z zerem na pierwszej pozycji (niemożliwe) i bez zera na pierwszej pozycji.",
        "interactive_choice": {
          "prompt": "Jakie ograniczenie musimy uwzględnić dla liczby siedmiocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Pierwsza cyfra nie może być zerem",
              "feedback": "Dokładnie! Liczba siedmiocyfrowa musi zaczynać się od cyfry $1$-$9$, nie może być wiodącego zera.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie pozycje są równoważne",
              "feedback": "Nie - gdyby pierwsza cyfra była zerem, mielibyśmy liczbę sześciocyfrową, nie siedmiocyfrową.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Ostatnia cyfra nie może być zerem",
              "feedback": "Nie - ostatnia cyfra może być zerem. Problem dotyczy tylko pierwszej pozycji.",
              "is_correct": false
            }
          ],
          "explanation_after": "W liczbach wielocyfrowych pierwsza cyfra nie może być zerem. To kluczowe ograniczenie w tym zadaniu."
        }
      },
      {
        "step": 3,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Strategia: (wszystkie rozmieszczenia) - (rozmieszczenia z zerem na początku)",
        "explanation": "Wybieramy metodę dopełnienia jako najbardziej efektywną",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do zliczania takich liczb?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie rozmieszczenia, potem odjąć te z zerem na początku",
              "feedback": "Świetnie! To metoda dopełnienia - najpierw liczymy bez ograniczeń, potem odejmujemy niedozwolone przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Najpierw ustalić pierwszą cyfrę, potem rozmieścić pozostałe",
              "feedback": "Możliwe, ale bardziej skomplikowane - trzeba rozpatrywać wiele podprzypadków.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami bezpośrednio",
              "feedback": "Nie wystarczy - wzór nie uwzględnia ograniczenia na pierwszą cyfrę.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda dopełnienia: liczymy wszystkie możliwości, potem odejmujemy te, które łamią warunki."
        }
      },
      {
        "step": 4,
        "hint": "Ile cyfr mamy do rozmieszczenia na $7$ pozycjach?",
        "expression": "Mamy 7 cyfr: $1$, $1$, $1$, $0$, $0$, $c_1$, $c_2$ gdzie $c_1, c_2 \\in \\{2,3,4,5,6,7,8,9\\}$",
        "explanation": "Dwie pozostałe cyfry muszą być różne od $0$ i $1$, czyli z zestawu $\\{2,3,4,5,6,7,8,9\\}$"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów możemy wybrać dwie pozostałe cyfry?",
        "expression": "Liczba sposobów wyboru $c_1$ i $c_2$: $8 \\times 8 = 64$",
        "explanation": "Każda z dwóch cyfr może być dowolną z $8$ cyfr $(2-9)$, niezależnie",
        "interactive_choice": {
          "prompt": "Jak wybrać dwie cyfry $c_1$ i $c_2$ z zestawu $\\{2,3,4,5,6,7,8,9\\}$?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry mogą się powtarzać: $8 \\times 8 = 64$ możliwości",
              "feedback": "Tak! Cyfry $c_1$ i $c_2$ mogą być takie same (np. obie mogą być $5$).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry muszą być różne: $\\binom{8}{2} = 28$ możliwości",
              "feedback": "Nie - zadanie nie wymaga, by $c_1$ i $c_2$ były różne. Mogą się powtarzać.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Cyfry muszą być różne: $8 \\times 7 = 56$ możliwości",
              "feedback": "Nie - cyfry mogą się powtarzać. Nie ma zakazu używania tej samej cyfry dwa razy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zadanie nie zabrania powtórzeń cyfr innych niż $0$ i $1$, więc każda z dwóch pozycji ma $8$ możliwości."
        }
      },
      {
        "step": 6,
        "hint": "Dla ustalonego zestawu 7 cyfr, na ile sposobów można je rozmieścić?",
        "expression": "Permutacje z powtórzeniami: $\\frac{7!}{3! \\cdot 2! \\cdot n_1! \\cdot n_2!}$",
        "explanation": "Dzielimy przez liczby powtórzeń: $3$ jedynki, $2$ zera, ewentualnie powtórzenia $c_1$ i $c_2$",
        "why": "Wzór na permutacje z powtórzeniami: $\\frac{n!}{n_1! \\cdot n_2! \\cdot ... \\cdot n_k!}$ gdzie $n_i$ to liczby powtórzeń poszczególnych elementów."
      },
      {
        "step": 7,
        "hint": "Jak podzielić $64$ przypadki wyboru cyfr $c_1, c_2$ ze względu na powtórzenia?",
        "expression": "Przypadek 1: $c_1 = c_2$ (8 możliwości), Przypadek 2: $c_1 \\neq c_2$ (56 możliwości)",
        "explanation": "Gdy $c_1 = c_2$, mamy dodatkowe powtórzenie w permutacjach"
      },
      {
        "step": 8,
        "hint": "Ile permutacji daje przypadek gdy $c_1 = c_2$?",
        "expression": "Dla $c_1 = c_2$: $\\frac{7!}{3! \\cdot 2! \\cdot 2!} = \\frac{5040}{6 \\cdot 2 \\cdot 2} = \\frac{5040}{24} = 210$",
        "explanation": "Dzielimy przez $3!$ (trzy $1$), $2!$ (dwa $0$) i $2!$ (dwa $c_1$)"
      },
      {
        "step": 9,
        "hint": "Ile permutacji daje przypadek gdy $c_1 \\neq c_2$?",
        "expression": "Dla $c_1 \\neq c_2$: $\\frac{7!}{3! \\cdot 2!} = \\frac{5040}{6 \\cdot 2} = \\frac{5040}{12} = 420$",
        "explanation": "Dzielimy tylko przez $3!$ (trzy 1) i $2!$ (dwa 0), bo $c_1$ i $c_2$ są różne"
      },
      {
        "step": 10,
        "hint": "Ile jest wszystkich siedmiocyfrowych ciągów cyfr spełniających warunki?",
        "expression": "Razem: $8 \\cdot 210 + 56 \\cdot 420 = 1680 + 23520 = 25200$",
        "explanation": "Sumujemy: $8$ przypadków z powtórzeniem (po $210$) + $56$ przypadków bez powtórzenia (po $420$)"
      },
      {
        "step": 11,
        "hint": "Ile z tych ciągów ma zero na pierwszej pozycji (są niedozwolone)?",
        "expression": "Ciągi z zerem na początku: ustalamy $0$ na pozycji $1$, rozmieszczamy pozostałe $6$ cyfr",
        "explanation": "Teraz mamy $6$ pozycji dla: $1$, $1$, $1$, $0$, $c_1$, $c_2$"
      },
      {
        "step": 12,
        "hint": "Ile permutacji pozostałych $6$ cyfr dla przypadku $c_1 = c_2$?",
        "expression": "Dla $c_1 = c_2$: $\\frac{6!}{3! \\cdot 1! \\cdot 2!} = \\frac{720}{6 \\cdot 1 \\cdot 2} = \\frac{720}{12} = 60$",
        "explanation": "Dzielimy przez $3!$ (trzy $1$), $1!$ (jedno $0$) i $2!$ (dwa $c_1$)"
      },
      {
        "step": 13,
        "hint": "Ile permutacji pozostałych $6$ cyfr dla przypadku $c_1 \\neq c_2$?",
        "expression": "Dla $c_1 \\neq c_2$: $\\frac{6!}{3! \\cdot 1!} = \\frac{720}{6 \\cdot 1} = \\frac{720}{6} = 120$",
        "explanation": "Dzielimy przez $3!$ (trzy $1$) i $1!$ (jedno $0$)"
      },
      {
        "step": 14,
        "hint": "Ile jest niedozwolonych ciągów (z zerem na początku)?",
        "expression": "Niedozwolone: $8 \\cdot 60 + 56 \\cdot 120 = 480 + 6720 = 7200$",
        "explanation": "Sumujemy przypadki z zerem na pierwszej pozycji"
      },
      {
        "step": 15,
        "hint": "Jaki jest ostateczny wynik?",
        "expression": "Liczby siedmiocyfrowe: $25200 - 7200 = 18000$",
        "explanation": "Odejmujemy niedozwolone przypadki od wszystkich możliwości"
      }
    ],
    "solutions": [
      "$18000$"
    ],
    "parameters": {
      "digits": "$7$ cyfr",
      "ones": "dokładnie $3$ razy cyfra $1$",
      "zeros": "dokładnie $2$ razy cyfra $0$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 15,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:53:52.242Z"
  },
  {
    "id": "combinatorics_digits_89",
    "topic": "Kombinatoryka - rozmieszczenie cyfr",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb ośmiocyfrowych, w których zapisie dziesiętnym występuje dokładnie trzy razy cyfra $9$ i dokładnie dwa razy występuje cyfra $8$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr w liczbie ośmiocyfrowej jest już 'zajętych' przez cyfry $9$ i $8$?",
        "expression": "Mamy $8$ pozycji cyfr, z czego: $3$ pozycje dla cyfry $9$, $2$ pozycje dla cyfry $8$",
        "explanation": "Cyfry $9$ i $8$ zajmują razem $3 + 2 = 5$ pozycji"
      },
      {
        "step": 2,
        "hint": "Ile pozycji pozostaje do wypełnienia innymi cyframi?",
        "expression": "$8 - 5 = 3$ pozycje pozostają wolne",
        "explanation": "Na pozostałych 3 pozycjach mogą być cyfry różne od $8$ i $9$"
      },
      {
        "step": 3,
        "hint": "Jakie cyfry mogą wystąpić na pozostałych trzech pozycjach?",
        "expression": "Pozostałe $3$ pozycje: cyfry z zbioru $\\{0, 1, 2, 3, 4, 5, 6, 7\\}$",
        "explanation": "Każda z $3$ wolnych pozycji może mieć jedną z $8$ cyfr",
        "interactive_choice": {
          "prompt": "Które cyfry mogą wystąpić na pozostałych 3 pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry $0$, $1$, $2$, $3$, $4$, $5$, $6$, $7$ ($8$ możliwości)",
              "feedback": "Świetnie! To wszystkie cyfry oprócz $8$ i $9$, czyli $8$ możliwości na każdą pozycję.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry $1$, $2$, $3$, $4$, $5$, $6$, $7$ ($7$ możliwości)",
              "feedback": "Nie - zapominasz o cyfrze $0$, która też może wystąpić (ale nie na pierwszej pozycji).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dowolne cyfry $0$-$9$ ($10$ możliwości)",
              "feedback": "Nie - cyfry $8$ i $9$ już występują określoną liczbę razy, nie mogą się powtórzyć.",
              "is_correct": false
            }
          ],
          "explanation_after": "Na pozostałych pozycjach mogą być cyfry $0$-$7$, czyli $8$ różnych cyfr."
        }
      },
      {
        "step": 4,
        "hint": "Jak podejść do problemu rozmieszczenia cyfr $9$, $8$ i pozostałych?",
        "expression": "Plan: rozmieścić cyfry $9$ i $8$ → wypełnić pozostałe pozycje → uwzględnić warunek pierwszej cyfry",
        "explanation": "Dzielimy problem na etapy",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do obliczenia liczby takich liczb?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pozycje dla cyfr $9$ i $8$, potem wypełnić resztę",
              "feedback": "Doskonały plan! To systematyczne podejście: rozmieszczenie → wypełnienie → korekta dla zera.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje $8$ cyfr",
              "feedback": "To nie zadziała - cyfry się powtarzają i mamy ograniczenia na pierwszą pozycję.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć osobno przypadki gdzie $0$ jest/nie jest na pierwszej pozycji",
              "feedback": "Możliwe, ale bardziej skomplikowane - lepiej najpierw rozmieścić $9$ i $8$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Strategia: wybieramy pozycje dla $9$ i $8$, wypełniamy resztę, odejmujemy przypadki z zerem na początku."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wybrać $3$ pozycje spośród $8$ dla cyfry $9$?",
        "expression": "$\\binom{8}{3} = \\frac{8!}{3! \\cdot 5!} = \\frac{8 \\cdot 7 \\cdot 6}{3 \\cdot 2 \\cdot 1} = 56$",
        "explanation": "Wybieramy $3$ pozycje z $8$ dla cyfry $9$",
        "why": "Symbol Newtona $\\binom{n}{k}$ liczy liczbę sposobów wyboru $k$ elementów z $n$, gdy kolejność nie ma znaczenia."
      },
      {
        "step": 6,
        "hint": "Po wybraniu pozycji dla $9$, ile pozycji pozostaje dla cyfry $8$?",
        "expression": "Pozostaje $8 - 3 = 5$ pozycji, wybieramy 2 dla cyfry 8: $\\binom{5}{2} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Z pozostałych $5$ pozycji wybieramy $2$ dla cyfry $8$"
      },
      {
        "step": 7,
        "hint": "Na ile sposobów można wypełnić pozostałe $3$ pozycje cyframi $0$-$7$?",
        "expression": "$8^3 = 512$",
        "explanation": "Każda z $3$ pozycji ma $8$ możliwości (cyfry $0$-$7$), z powtórzeniami"
      },
      {
        "step": 8,
        "hint": "Ile wynosi iloczyn wszystkich możliwości bez ograniczeń?",
        "expression": "$56 \\cdot 10 \\cdot 512 = 286720$",
        "explanation": "Mnożymy liczbę sposobów dla każdego etapu"
      },
      {
        "step": 9,
        "hint": "Czy wszystkie te liczby są ośmiocyfrowe?",
        "expression": "Problem: liczby zaczynające się od $0$ nie są ośmiocyfrowe",
        "explanation": "Musimy odjąć przypadki gdzie pierwsza pozycja ma cyfrę $0$",
        "why": "Liczba ośmiocyfrowa to liczba z przedziału $[10000000, 99999999]$, więc pierwsza cyfra musi być z $\\{1,2,...,9\\}$.",
        "interactive_choice": {
          "prompt": "Co może być problemem z otrzymanym wynikiem $286720$?",
          "options": [
            {
              "id": "A",
              "text": "Niektóre liczby zaczynają się od $0$, więc nie są ośmiocyfrowe",
              "feedback": "Dokładnie! Musimy odjąć przypadki gdzie pierwsza cyfra to $0$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyliśmy niektóre liczby wielokrotnie",
              "feedback": "Nie - każdy wybór pozycji i cyfr daje inną liczbę.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wynik jest poprawny, nie ma problemu",
              "feedback": "Nie - liczba ośmiocyfrowa nie może zaczynać się od $0$!",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba ośmiocyfrowa musi mieć pierwszą cyfrę różną od $0$. Musimy odjąć 'złe' przypadki."
        }
      },
      {
        "step": 10,
        "hint": "Ile jest liczb gdzie pierwsza pozycja to $0$?",
        "expression": "Pierwsza pozycja = $0$ (ustalona), pozostałe 7 pozycji: $3$ dla cyfry $9$, $2$ dla cyfry $8$, $2$ dowolne",
        "explanation": "Liczymy przypadki z zerem na początku"
      },
      {
        "step": 11,
        "hint": "Na ile sposobów rozmieścić cyfry $9$ i $8$ na pozostałych $7$ pozycjach?",
        "expression": "$\\binom{7}{3} \\cdot \\binom{4}{2} = 35 \\cdot 6 = 210$",
        "explanation": "Wybieramy $\\binom{3}{7}$ dla $9$, potem $\\binom{2}{4}$ dla $8$"
      },
      {
        "step": 12,
        "hint": "Na ile sposobów wypełnić $2$ pozostałe pozycje?",
        "expression": "$8^2 = 64$",
        "explanation": "Każda z $2$ pozycji: cyfry $0$-$7$"
      },
      {
        "step": 13,
        "hint": "Ile jest 'złych' liczb zaczynających się od $0$?",
        "expression": "$210 \\cdot 64 = 13440$",
        "explanation": "Liczba przypadków z zerem na pierwszej pozycji"
      },
      {
        "step": 14,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$286720 - 13440 = 273280$",
        "explanation": "Odejmujemy przypadki z zerem na początku od wszystkich możliwości"
      }
    ],
    "solutions": [
      "$273280$"
    ],
    "parameters": {
      "digit_length": 8,
      "count_9": 3,
      "count_8": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 14,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:54:36.028Z"
  },
  {
    "id": "combinatorics_seven_digit_constraints",
    "topic": "Kombinatoryka z ograniczeniami",
    "difficulty": 5,
    "statement": "Oblicz, ile jest wszystkich liczb naturalnych siedmiocyfrowych, w których zapisie dziesiętnym występują dokładnie trzy cyfry $7$, dokładnie jedna cyfra $5$, nie występuje cyfra $0$ i suma wszystkich cyfr jest równa $32$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry już znamy i ile miejsca zajmują?",
        "expression": "Mamy: trzy cyfry $7$, jedna cyfra $5$, czyli $4$ cyfry już ustalone",
        "explanation": "Z $7$ pozycji, $4$ są już określone: trzy siódemki i jedna piątka"
      },
      {
        "step": 2,
        "hint": "Ile cyfr pozostało do ustalenia?",
        "expression": "$7 - 4 = 3$ cyfry pozostałe do ustalenia",
        "explanation": "Musimy znaleźć $3$ pozostałe cyfry"
      },
      {
        "step": 3,
        "hint": "Jaka jest suma trzech cyfr $7$ i jednej cyfry $5$?",
        "expression": "$3 \\cdot 7 + 1 \\cdot 5 = 21 + 5 = 26$",
        "explanation": "Suma ustalonych cyfr wynosi $26$"
      },
      {
        "step": 4,
        "hint": "Jaka musi być suma trzech pozostałych cyfr?",
        "expression": "$32 - 26 = 6$",
        "explanation": "Trzy pozostałe cyfry muszą sumować się do $6$",
        "why": "To kluczowe ograniczenie - musimy znaleźć wszystkie trójki cyfr (bez zera) sumujące się do $6$"
      },
      {
        "step": 5,
        "hint": "Jak znaleźć wszystkie możliwe trójki cyfr sumujące się do $6$?",
        "expression": "Rozpatrujemy przypadki: $a \\in \\{1, 2, 3, 4\\}$",
        "explanation": "Dla $a \\geq 5$ nie da się uzyskać sumy 6 z trzech cyfr (minimum byłoby $5+1+1=7$)",
        "interactive_choice": {
          "prompt": "Jak systematycznie znaleźć wszystkie trójki cyfr $(a, b, c)$ gdzie $a + b + c = 6$ i cyfry są z zakresu $1$-$9$?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć przypadki według wartości pierwszej cyfry: $a = 1, 2, 3, 4$",
              "feedback": "Świetnie! To systematyczne podejście - dla każdego $a$ znajdziemy pary $(b, c)$ takie że $b + c = 6 - a$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na liczbę rozwiązań równania $x_1 + x_2 + x_3 = 6$",
              "feedback": "Uwaga - standardowy wzór nie uwzględnia ograniczenia 'bez zera' i 'maksymalnie 9'. Trzeba korygować.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wypisać losowo wszystkie możliwości",
              "feedback": "Ryzykowne - łatwo coś pominąć. Lepiej systematycznie według pierwszej cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Systematyczne rozpatrywanie przypadków według pierwszej cyfry gwarantuje, że nic nie pominiemy."
        }
      },
      {
        "step": 6,
        "hint": "Jakie są możliwe trójki cyfr dla każdego przypadku?",
        "expression": "Przypadek $a=1$: $b+c=5$ → $(1,1,4), (1,2,3), (1,3,2), (1,4,1)$\nPrzypadek $a=2$: $b+c=4$ → $(2,1,3), (2,2,2), (2,3,1)$\nPrzypadek $a=3$: $b+c=3$ → $(3,1,2), (3,2,1)$\nPrzypadek $a=4$: $b+c=2$ → $(4,1,1)$",
        "explanation": "Wypisujemy wszystkie uporządkowane trójki (kolejność ma znaczenie)"
      },
      {
        "step": 7,
        "hint": "Które trójki są różne jako zbiory cyfr?",
        "expression": "Unikalne zestawy:\n- $\\{1,1,4\\}$ - dwie jedynki\n- $\\{1,2,3\\}$ - wszystkie różne\n- $\\{2,2,2\\}$ - trzy dwójki",
        "explanation": "Mamy $3$ różne zestawy cyfr (bez względu na kolejność)",
        "interactive_choice": {
          "prompt": "Dlaczego musimy grupować trójki według unikalnych zestawów cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Bo liczba permutacji zależy od tego, czy cyfry się powtarzają",
              "feedback": "Dokładnie! Trójka $(1,1,4)$ ma $3$ permutacje, a $(1,2,3)$ ma $6$ permutacji.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bo chcemy policzyć tylko różne liczby",
              "feedback": "Nie do końca - chcemy policzyć wszystkie liczby, ale musimy uwzględnić powtórzenia cyfr przy permutacjach.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Bo kolejność cyfr nie ma znaczenia",
              "feedback": "Przeciwnie - kolejność ma znaczenie! Ale liczba permutacji zależy od powtórzeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Grupujemy według unikalnych zestawów, bo dla każdego zestawu osobno liczymy permutacje z uwzględnieniem powtórzeń."
        }
      },
      {
        "step": 8,
        "hint": "Ile permutacji ma każdy zestaw cyfr?",
        "expression": "$\\{1,1,4\\}$: $\\frac{3!}{2!} = 3$ permutacje\n$\\{1,2,3\\}$: $3! = 6$ permutacji\n$\\{2,2,2\\}$: $\\frac{3!}{3!} = 1$ permutacja",
        "explanation": "Używamy wzoru na permutacje z powtórzeniami: $\\frac{n!}{n_1! \\cdot n_2! \\cdot ...}$",
        "why": "Gdy cyfry się powtarzają, dzielimy przez silnie liczby powtórzeń, bo zamiany identycznych cyfr nie tworzą nowych permutacji"
      },
      {
        "step": 9,
        "hint": "Ile jest łącznie uporządkowanych trójek cyfr?",
        "expression": "$3 + 6 + 1 = 10$ różnych uporządkowanych trójek",
        "explanation": "Sumujemy permutacje wszystkich zestawów"
      },
      {
        "step": 10,
        "hint": "Jak rozmieścić $7$ cyfr: trzy $7$, jedną $5$ i trzy cyfry z wybranej trójki?",
        "expression": "Dla każdej trójki cyfr liczymy permutacje $7$ cyfr z powtórzeniami",
        "explanation": "Musimy uwzględnić powtórzenia: trzy $7$, jedna $5$, oraz powtórzenia w trójce",
        "interactive_choice": {
          "prompt": "Jak policzyć liczbę sposobów rozmieszczenia $7$ cyfr (trzy $7$, jedna $5$, trzy z trójki)?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru na permutacje z powtórzeniami: $\\frac{7!}{3! \\cdot 1! \\cdot n_1! \\cdot n_2! \\cdot n_3!}$",
              "feedback": "Świetnie! To uwzględnia powtórzenia zarówno siódemek, jak i cyfr z trójki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Po prostu $7!$ bo mamy 7 pozycji",
              "feedback": "Nie - to nie uwzględnia powtórzeń cyfr (trzy $7$ i ewentualne powtórzenia w trójce).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Najpierw rozmieścić $7$ i $5$, potem resztę",
              "feedback": "Możliwe, ale bardziej skomplikowane. Wzór na permutacje z powtórzeniami jest prostszy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wzór na permutacje z powtórzeniami automatycznie uwzględnia wszystkie identyczne cyfry."
        }
      },
      {
        "step": 11,
        "hint": "Ile permutacji daje trójka $\\{1,1,4\\}$ z trzema $7$ i jedną $5$?",
        "expression": "Cyfry: $7,7,7,5,1,1,4$ → $\\frac{7!}{3! \\cdot 2!} = \\frac{5040}{6 \\cdot 2} = \\frac{5040}{12} = 420$",
        "explanation": "Dzielimy przez $3!$ dla trzech $7$ i przez $2!$ dla dwóch $1$"
      },
      {
        "step": 12,
        "hint": "Ile permutacji daje trójka $\\{1,2,3\\}$ z trzema $7$ i jedną $5$?",
        "expression": "Cyfry: $7,7,7,5,1,2,3$ → $\\frac{7!}{3!} = \\frac{5040}{6} = 840$",
        "explanation": "Dzielimy tylko przez $3!$ dla trzech $7$ (wszystkie inne cyfry są różne)"
      },
      {
        "step": 13,
        "hint": "Ile permutacji daje trójka $\\{2,2,2\\}$ z trzema $7$ i jedną $5$?",
        "expression": "Cyfry: $7,7,7,5,2,2,2$ → $\\frac{7!}{3! \\cdot 3!} = \\frac{5040}{6 \\cdot 6} = \\frac{5040}{36} = 140$",
        "explanation": "Dzielimy przez $3!$ dla trzech $7$ i przez $3!$ dla trzech $2$"
      },
      {
        "step": 14,
        "hint": "Jaka jest całkowita liczba siedmiocyfrowych liczb spełniających warunki?",
        "expression": "$420 + 840 + 140 = 1400$",
        "explanation": "Sumujemy liczby permutacji dla wszystkich możliwych trójek cyfr"
      }
    ],
    "solutions": [
      "$1400$"
    ],
    "parameters": {
      "constraints": "siedmiocyfrowe, trzy cyfry $7$, jedna cyfra $5$, bez $0$, suma cyfr = $32$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 14,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:55:41.601Z"
  },
  {
    "id": "four_digit_numbers_with_zero",
    "topic": "Kombinatoryka - liczby czterocyfrowe z warunkami",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb czterocyfrowych, w zapisie których jedynie cyfra $0$ może się powtórzyć i nie występuje na pierwszym miejscu.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą stać na pierwszym miejscu liczby czterocyfrowej?",
        "expression": "Pierwsza cyfra: $1, 2, 3, 4, 5, 6, 7, 8, 9$ (9 możliwości)",
        "explanation": "Liczba czterocyfrowa nie może zaczynać się od $0$, więc mamy $9$ wyborów",
        "why": "To kluczowy warunek - zero nie może być na pierwszym miejscu, co ogranicza nasze wybory."
      },
      {
        "step": 2,
        "hint": "Jak rozumiesz warunek 'jedynie cyfra $0$ może się powtórzyć'?",
        "expression": "Cyfry $1-9$: każda max 1 raz; cyfra $0$: może się powtarzać",
        "explanation": "Interpretujemy warunek zadania",
        "interactive_choice": {
          "prompt": "Co oznacza warunek 'jedynie cyfra $0$ może się powtórzyć'?",
          "options": [
            {
              "id": "A",
              "text": "Cyfra $0$ MUSI wystąpić co najmniej dwa razy",
              "feedback": "Nie - warunek mówi że $0$ MOŻE się powtórzyć, nie że MUSI. Zero może w ogóle nie wystąpić!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wszystkie cyfry różne od $0$ muszą być różne, a $0$ może wystąpić wielokrotnie",
              "feedback": "Dokładnie! Cyfry $1$-$9$ nie mogą się powtarzać, ale $0$ może wystąpić $0$, $1$, $2$ lub $3$ razy.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko jedna cyfra w liczbie może się powtórzyć i musi to być $0$",
              "feedback": "Częściowo tak, ale zero nie musi wystąpić - może być liczba bez zer, np. $1234$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek oznacza: cyfry $1$-$9$ występują maksymalnie raz każda, a $0$ może wystąpić dowolną liczbę razy (lub wcale)."
        }
      },
      {
        "step": 3,
        "hint": "Jak najlepiej podzielić problem na przypadki?",
        "expression": "Rozpatrujemy przypadki: $0$ zer, $1$ zero, $2$ zera, $3$ zera",
        "explanation": "Dzielimy problem na $4$ przypadki według liczby wystąpień cyfry $0$",
        "interactive_choice": {
          "prompt": "Jak rozbić ten problem na prostsze przypadki?",
          "options": [
            {
              "id": "A",
              "text": "Według liczby zer w liczbie: $0$ zer, $1$ zero, $2$ zera, $3$ zera",
              "feedback": "Świetny pomysł! To naturalny podział - każdy przypadek ma inną strukturę.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Według pierwszej cyfry: zaczynające się od $1$, od $2$, ..., od $9$",
              "feedback": "Możliwe, ale bardzo pracochłonne - musisz rozpatrzyć $9$ przypadków!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Według parzystości: liczby parzyste i nieparzyste",
              "feedback": "To nie pomoże - warunek dotyczy powtarzania cyfr, nie parzystości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział według liczby zer jest naturalny, bo zero to jedyna cyfra która może się powtarzać."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest liczb czterocyfrowych bez cyfry $0$?",
        "expression": "Przypadek 1 (0 zer): $9 \\cdot 8 \\cdot 7 \\cdot 6 = 3024$",
        "explanation": "Wszystkie $4$ cyfry z $\\{1,2,...,9\\}$, każda różna: $9$ wyborów na I miejsce, $8$ na II, $7$ na III, $6$ na IV",
        "why": "Bez zera mamy tylko cyfry $1$-$9$, które muszą być wszystkie różne. To permutacja bez powtórzeń."
      },
      {
        "step": 5,
        "hint": "Ile jest liczb z dokładnie jednym zerem?",
        "expression": "Przypadek 2 (1 zero): $\\binom{3}{1} \\cdot 9 \\cdot 8 \\cdot 7 = 3 \\cdot 504 = 1512$",
        "explanation": "Wybieramy $1$ z $3$ miejsc na zero (nie pierwsze!), potem $3$ różne cyfry z {$1$-$9$}",
        "why": "Zero może być na pozycji $2$, $3$ lub $4$ ($3$ możliwości). Pozostałe $3$ miejsca: $9 \\cdot 8 \\cdot 7$ permutacji cyfr $1$-$9$."
      },
      {
        "step": 6,
        "hint": "Ile jest liczb z dokładnie dwoma zerami?",
        "expression": "Przypadek 3 (2 zera): $\\binom{3}{2} \\cdot 9 \\cdot 8 = 3 \\cdot 72 = 216$",
        "explanation": "Wybieramy $2$ z $3$ miejsc (pozycje $2$, $3$, $4$) na zera, potem $2$ różne cyfry z $\\{1-9\\}$ na pozostałe miejsca",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę liczb z dwoma zerami?",
          "options": [
            {
              "id": "A",
              "text": "Wybieramy $2$ z $3$ miejsc na zera, potem $2$ różne cyfry z $\\{1-9\\}$",
              "feedback": "Dokładnie! $\\binom{3}{2} \\cdot 9 \\cdot 8 = 3 \\cdot 72 = 216$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybieramy $2$ z $4$ miejsc na zera, potem $2$ różne cyfry z $\\{1-9\\}$",
              "feedback": "Nie - pierwsze miejsce nie może być zerem! Mamy tylko $3$ miejsca do wyboru.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Po prostu $9 \\cdot 8 = 72$ bo dwa miejsca na cyfry niezerowe",
              "feedback": "Zapomniałeś o wyborze pozycji dla zer! Trzeba uwzględnić $\\binom{3}{2}$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dwa zera mogą być na pozycjach $(2,3)$, $(2,4)$ lub $(3,4)$. To $\\binom{3}{2}=3$ możliwości."
        }
      },
      {
        "step": 7,
        "hint": "Ile jest liczb z trzema zerami?",
        "expression": "Przypadek 4 (3 zera): $9 \\cdot 1 \\cdot 1 \\cdot 1 = 9$",
        "explanation": "Trzy zera na pozycjach $2$, $3$, $4$; pierwsza cyfra z {$1$-$9$}: $9$ możliwości",
        "why": "Gdy mamy $3$ zera, wszystkie muszą być na pozycjach $2$, $3$, $4$. Tylko pierwsza cyfra jest do wyboru."
      },
      {
        "step": 8,
        "hint": "Jak połączyć wszystkie przypadki?",
        "expression": "$3024 + 1512 + 216 + 9 = 4761$",
        "explanation": "Sumujemy wszystkie rozłączne przypadki"
      },
      {
        "step": 9,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba szukanych liczb czterocyfrowych: $4761$",
        "explanation": "Otrzymujemy wynik końcowy"
      }
    ],
    "solutions": [
      "$4761$"
    ],
    "parameters": {
      "breakdown": "$0$ zer: $3024$, $1$ zero: $1512$, $2$ zera: $216$, $3$ zera: $9$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 4,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:56:20.000Z"
  },
  {
    "id": "combinatorics_five_digit_odd_even",
    "topic": "Kombinatoryka - permutacje z powtórzeniami",
    "difficulty": 4,
    "statement": "Oblicz, ile można utworzyć liczb pięciocyfrowych, składających się z trzech różnych cyfr nieparzystych oraz dwóch różnych cyfr parzystych, w których nie występuje cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry nieparzyste możemy użyć (bez zera)?",
        "expression": "Cyfry nieparzyste: $1, 3, 5, 7, 9$ - mamy $5$ cyfr",
        "explanation": "Identyfikujemy dostępne cyfry nieparzyste"
      },
      {
        "step": 2,
        "hint": "Jakie cyfry parzyste możemy użyć (bez zera)?",
        "expression": "Cyfry parzyste bez zera: $2, 4, 6, 8$ - mamy $4$ cyfry",
        "explanation": "Identyfikujemy dostępne cyfry parzyste (zero jest wykluczone)"
      },
      {
        "step": 3,
        "hint": "Jak podejść do tego problemu kombinatorycznego?",
        "expression": "Etap 1: Wybór cyfr, Etap 2: Ustawienie cyfr",
        "explanation": "Rozbijamy problem na dwa niezależne etapy",
        "why": "W kombinatoryce często dzielimy złożone problemy na prostsze etapy, które mnożymy (reguła iloczynu).",
        "interactive_choice": {
          "prompt": "Jak najlepiej rozwiązać to zadanie?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać cyfry, potem je ustawić",
              "feedback": "Świetnie! To klasyczne podejście: wybór + permutacja. Dzielimy problem na etapy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Od razu ustawiać cyfry na pozycjach",
              "feedback": "Możliwe, ale trudniejsze - łatwo popełnić błąd przy zliczaniu.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie liczby i odjąć te z $0$",
              "feedback": "Nie - zero już wykluczyliśmy, a to nie upraszcza problemu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzielimy na etapy: $(1)$ wybór cyfr, $(2)$ ich ustawienie. To standard w kombinatoryce."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów możemy wybrać $3$ różne cyfry nieparzyste z $5$ dostępnych?",
        "expression": "$\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = \\frac{5 \\cdot 4}{2 \\cdot 1} = 10$",
        "explanation": "Używamy kombinacji - kolejność wyboru nie ma znaczenia"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów możemy wybrać $2$ różne cyfry parzyste z $4$ dostępnych?",
        "expression": "$\\binom{4}{2} = \\frac{4!}{2! \\cdot 2!} = \\frac{4 \\cdot 3}{2 \\cdot 1} = 6$",
        "explanation": "Ponownie kombinacje - wybieramy bez uwzględniania kolejności"
      },
      {
        "step": 6,
        "hint": "Ile mamy łącznie sposobów wyboru zestawu 5 cyfr?",
        "expression": "$10 \\cdot 6 = 60$",
        "explanation": "Mnożymy niezależne wybory (reguła iloczynu)",
        "why": "Każdy wybór cyfr nieparzystych można połączyć z każdym wyborem cyfr parzystych - stąd mnożenie."
      },
      {
        "step": 7,
        "hint": "Co teraz musimy zrobić z wybranym zestawem $5$ cyfr?",
        "expression": "Dla każdego zestawu cyfr: permutacja $5$ elementów",
        "explanation": "Każdy zestaw $5$ cyfr można ustawić na wiele sposobów",
        "interactive_choice": {
          "prompt": "Mamy $5$ różnych cyfr ($3$ nieparzyste + $2$ parzyste). Co dalej?",
          "options": [
            {
              "id": "A",
              "text": "Ustawić je na $5$ pozycjach - to permutacja",
              "feedback": "Dokładnie! Mamy $5$ różnych cyfr do ustawienia na $5$ pozycjach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Osobno ustawić nieparzyste i parzyste",
              "feedback": "Nie - wszystkie $5$ cyfr traktujemy razem przy tworzeniu liczby.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć kombinacji $\\binom{5}{5}$",
              "feedback": "Nie - kombinacje ignorują kolejność, a tu kolejność cyfr tworzy różne liczby!",
              "is_correct": false
            }
          ],
          "explanation_after": "Kolejność cyfr ma znaczenie ($12345 \\neq 54321$), więc używamy permutacji, nie kombinacji."
        }
      },
      {
        "step": 8,
        "hint": "Na ile sposobów można ustawić $5$ różnych cyfr?",
        "expression": "$5! = 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 120$",
        "explanation": "Permutacja $5$ elementów - każda pozycja ma coraz mniej możliwości",
        "why": "Pierwsza pozycja: $5$ wyborów, druga: $4$ wybory, trzecia: $3$ wybory, itd. Mnożymy: $5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1$."
      },
      {
        "step": 9,
        "hint": "Jak połączyć liczbę zestawów cyfr z liczbą ich ustawień?",
        "expression": "$60 \\cdot 120 = 7200$",
        "explanation": "Każdy z $60$ zestawów cyfr można ustawić na $120$ sposobów",
        "interactive_choice": {
          "prompt": "Mamy $60$ zestawów cyfr i $120$ ustawień każdego. Co robić?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $60 + 120$",
              "feedback": "Nie - dodajemy gdy mamy alternatywy (lub). Tu mamy etapy (i).",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $60 \\cdot 120$",
              "feedback": "Tak! Każdy z $60$ zestawów daje $120$ liczb. Reguła iloczynu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podzielić: $\\frac{120}{60}$",
              "feedback": "Nie - dzielenie nie ma tu sensu kombinatorycznego.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: jeśli proces ma $n$ etapy, mnożymy liczby możliwości. Reguła sumy: jeśli mamy alternatywy, dodajemy."
        }
      },
      {
        "step": 10,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $7200$ takich liczb pięciocyfrowych",
        "explanation": "Łączna liczba liczb spełniających warunki zadania"
      }
    ],
    "solutions": [
      "$7200$"
    ],
    "parameters": {
      "cyfry_nieparzyste": "$1, 3, 5, 7, 9$",
      "cyfry_parzyste": "$2, 4, 6, 8$",
      "struktura": "$3$ różne nieparzyste + $2$ różne parzyste"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:57:15.505Z"
  },
  {
    "id": "combinatorics_five_digit_odd_even",
    "topic": "Kombinatoryka - permutacje i kombinacje",
    "difficulty": 4,
    "statement": "Oblicz, ile można utworzyć liczb pięciocyfrowych, składających się z trzech różnych cyfr nieparzystych oraz dwóch różnych cyfr parzystych, w których może występować cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry nieparzyste i parzyste mamy do dyspozycji?",
        "expression": "Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$ - $5$ cyfr, Cyfry parzyste: $\\{0, 2, 4, 6, 8\\}$ - $5$ cyfr",
        "explanation": "Identyfikujemy zbiory cyfr, z których będziemy wybierać"
      },
      {
        "step": 2,
        "hint": "Czy cyfra $0$ na pierwszej pozycji tworzy liczbę pięciocyfrową?",
        "expression": "Strategia: obliczamy wszystkie liczby, potem odejmujemy te zaczynające się od $0$",
        "explanation": "Wybieramy metodę dopełnienia do rozwiązania problemu z zerem",
        "why": "Cyfra $0$ na pierwszej pozycji daje liczbę czterocyfrową, nie pięciocyfrową. Metoda dopełnienia jest tu najefektywniejsza.",
        "interactive_choice": {
          "prompt": "Jak podejść do problemu z cyfrą $0$ na pierwszej pozycji?",
          "options": [
            {
              "id": "A",
              "text": "Obliczyć wszystkie możliwości, potem odjąć te z $0$ na początku",
              "feedback": "Świetnie! To klasyczna metoda - liczymy wszystko, potem odejmujemy nieprawidłowe przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Rozpatrzyć osobno przypadki: zero na początku i zero nie na początku",
              "feedback": "Możliwe, ale bardziej skomplikowane - łatwiej użyć metody dopełnienia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wykluczyć zero z cyfr parzystych",
              "feedback": "Nie - zadanie wyraźnie mówi, że cyfra $0$ może występować w liczbie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Użyjemy metody: wszystkie możliwości minus te z zerem na początku."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów możemy wybrać $3$ różne cyfry nieparzyste z $5$ dostępnych?",
        "expression": "$\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Wybieramy $3$ cyfry nieparzyste z $5$ dostępnych (kolejność nie ma znaczenia)"
      },
      {
        "step": 4,
        "hint": "Na ile sposobów możemy wybrać $2$ różne cyfry parzyste z $5$ dostępnych?",
        "expression": "$\\binom{5}{2} = \\frac{5!}{2! \\cdot 3!} = \\frac{5 \\cdot 4}{2} = 10$",
        "explanation": "Wybieramy $2$ cyfry parzyste z $5$ dostępnych (kolejność nie ma znaczenia)"
      },
      {
        "step": 5,
        "hint": "Ile mamy łącznie sposobów wyboru zestawu 5 cyfr?",
        "expression": "$10 \\cdot 10 = 100$",
        "explanation": "Mnożymy liczbę sposobów wyboru cyfr nieparzystych i parzystych"
      },
      {
        "step": 6,
        "hint": "Na ile sposobów możemy ustawić $5$ wybranych cyfr w liczbie?",
        "expression": "$5! = 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 120$",
        "explanation": "Każdy zestaw $5$ cyfr można ustawić na $120$ sposobów",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę permutacji $5$ różnych cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru $5!$ (silnia)",
              "feedback": "Doskonale! Mamy $5$ pozycji i $5$ różnych cyfr - to permutacja bez powtórzeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć $5^5$ (potęga)",
              "feedback": "Nie - to byłoby gdyby cyfry mogły się powtarzać. Tu mamy różne cyfry.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru $\\binom{5}{5}$",
              "feedback": "Nie - kombinacja nie uwzględnia kolejności, a tu kolejność ma znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Permutacja $5$ różnych elementów to $5! = 120$ sposobów."
        }
      },
      {
        "step": 7,
        "hint": "Ile jest wszystkich możliwych liczb (włącznie z tymi zaczynającymi się od $0$)?",
        "expression": "$100 \\cdot 120 = 12000$",
        "explanation": "Mnożymy liczbę zestawów cyfr przez liczbę ich $permutacji$"
      },
      {
        "step": 8,
        "hint": "W ilu przypadkach cyfra $0$ znajduje się w wybranym zestawie cyfr parzystych?",
        "expression": "$\\binom{4}{1} = 4$",
        "explanation": "Jeśli $0$ jest w zestawie, to drugą cyfrę parzystą wybieramy z pozostałych $4$",
        "why": "Musimy policzyć przypadki, gdzie $0$ może być na pierwszej pozycji. To możliwe tylko gdy $0$ jest w wybranym zestawie cyfr parzystych."
      },
      {
        "step": 9,
        "hint": "Ile jest zestawów zawierających cyfrę $0$?",
        "expression": "$10 \\cdot 4 = 40$",
        "explanation": "$10$ sposobów wyboru cyfr nieparzystych razy $4$ sposoby wyboru drugiej cyfry parzystej (gdy $0$ jest wybrane)"
      },
      {
        "step": 10,
        "hint": "Na ile sposobów można ustawić $5$ cyfr gdy $0$ jest na pierwszej pozycji?",
        "expression": "$4! = 4 \\cdot 3 \\cdot 2 \\cdot 1 = 24$",
        "explanation": "Permutacja $4$ pozostałych cyfr ($0$ jest już na pierwszej pozycji)",
        "interactive_choice": {
          "prompt": "Jeśli $0$ jest na pierwszej pozycji, ile pozostaje możliwości dla pozostałych $4$ cyfr?",
          "options": [
            {
              "id": "A",
              "text": "$4!$ - permutacja pozostałych $4$ cyfr",
              "feedback": "Dokładnie! Pierwsza pozycja zajęta przez $0$, pozostałe $4$ cyfry permutujemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$5!$ - wszystkie permutacje",
              "feedback": "Nie - $0$ jest już ustalone na pierwszej pozycji, nie permutujemy go.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\binom{4}{4}$ - kombinacja $4$ cyfr",
              "feedback": "Nie - kombinacja nie uwzględnia kolejności, a tu kolejność ma znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy $0$ jest na pierwszej pozycji, pozostałe $4$ cyfry permutujemy: $4! = 24$."
        }
      },
      {
        "step": 11,
        "hint": "Ile jest liczb zaczynających się od $0$ (nieprawidłowych)?",
        "expression": "$40 \\cdot 24 = 960$",
        "explanation": "Mnożymy liczbę zestawów z $0$ przez liczbę permutacji z $0$ na początku"
      },
      {
        "step": 12,
        "hint": "Ile jest prawidłowych liczb pięciocyfrowych?",
        "expression": "$12000 - 960 = 11040$",
        "explanation": "Od wszystkich możliwości odejmujemy te zaczynające się od $0$"
      }
    ],
    "solutions": [
      "$11040$"
    ],
    "parameters": {
      "cyfry_nieparzyste": "$\\{1, 3, 5, 7, 9\\}$",
      "cyfry_parzyste": "$\\{0, 2, 4, 6, 8\\}$",
      "liczba_cyfr": "$5$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:57:55.435Z"
  },
  {
    "id": "combinatorics_six_digit_parity",
    "topic": "Kombinatoryka - permutacje z warunkami",
    "difficulty": 4,
    "statement": "Oblicz, ile można utworzyć liczb sześciocyfrowych o różnych cyfrach, w których występują trzy cyfry parzyste oraz trzy cyfry nieparzyste.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry parzyste i nieparzyste mamy do dyspozycji?",
        "expression": "Cyfry parzyste: $\\{0, 2, 4, 6, 8\\}$ - $5$ cyfr, Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$ - $5$ cyfr",
        "explanation": "Identyfikujemy zbiory cyfr parzystych i nieparzystych",
        "why": "Musimy pamiętać, że $0$ jest cyfrą parzystą, ale nie może być pierwszą cyfrą liczby sześciocyfrowej."
      },
      {
        "step": 2,
        "hint": "Jak podejść do tego problemu kombinatorycznego?",
        "expression": "Strategia: wybieramy $3$ parzyste i $3$ nieparzyste, potem permutujemy z uwzględnieniem warunku na pierwszą cyfrę",
        "explanation": "Dzielimy problem na etapy: wybór cyfr, następnie ich rozmieszczenie",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do zliczania liczb sześciocyfrowych z warunkami parzystości?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać cyfry, potem je ustawić",
              "feedback": "Świetnie! To klasyczne podejście: wybór + permutacja. Pamiętaj o warunku z zerem na początku.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Od razu ustawiać cyfry pozycja po pozycji",
              "feedback": "Możliwe, ale bardzo skomplikowane - trzeba śledzić ile parzystych/nieparzystych już użyto.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie permutacje i odjąć złe",
              "feedback": "Nieefektywne - trudno wyliczyć ile jest 'złych' kombinacji parzystości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Strategia 'wybór + permutacja' jest najczystsza: wybieramy które cyfry, potem je rozmieszczamy."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów możemy wybrać $3$ cyfry parzyste z $5$ dostępnych?",
        "expression": "$\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = 10$",
        "explanation": "Liczba kombinacji $3$ elementów z $5$"
      },
      {
        "step": 4,
        "hint": "Na ile sposobów możemy wybrać $3$ cyfry nieparzyste z $5$ dostępnych?",
        "expression": "$\\binom{5}{3} = \\frac{5!}{3! \\cdot 2!} = 10$",
        "explanation": "Liczba kombinacji $3$ elementów z $5$"
      },
      {
        "step": 5,
        "hint": "Ile mamy łącznie sposobów wyboru zestawu 6 cyfr?",
        "expression": "$10 \\cdot 10 = 100$ sposobów wyboru zestawu cyfr",
        "explanation": "Mnożymy niezależne wybory: parzyste i nieparzyste"
      },
      {
        "step": 6,
        "hint": "Jak uwzględnić warunek, że liczba nie może zaczynać się od zera?",
        "expression": "Rozpatrzymy dwa przypadki: zestawy zawierające $0$ i zestawy bez $0$",
        "explanation": "Dzielimy na przypadki ze względu na obecność zera w zestawie",
        "interactive_choice": {
          "prompt": "Jak policzyć permutacje $6$ cyfr z warunkiem, że pierwsza cyfra nie może być zerem?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć osobno przypadki: gdy $0$ jest w zestawie i gdy go nie ma",
              "feedback": "Doskonale! To najprostsze podejście - dzielimy na dwa rozłączne przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje i odjąć te zaczynające się od $0$",
              "feedback": "Też działa! Metoda dopełnienia: $6! - 5!$ dla każdego zestawu z zerem.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Najpierw ustalić pierwszą cyfrę (nie-zero), potem resztę",
              "feedback": "Możliwe, ale trzeba śledzić czy $0$ jest w zestawie - komplikuje obliczenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia A i B są poprawne. Wybierzemy metodę przypadków jako bardziej przejrzystą."
        }
      },
      {
        "step": 7,
        "hint": "Ile jest zestawów 3 cyfr parzystych zawierających $0$?",
        "expression": "Jeśli $0$ jest w zestawie, wybieramy $2$ pozostałe parzyste z $\\{2, 4, 6, 8\\}$: $\\binom{4}{2} = 6$",
        "explanation": "Zero jest wybrane, dobieramy $2$ z $4$ pozostałych parzystych"
      },
      {
        "step": 8,
        "hint": "Ile jest zestawów 3 cyfr parzystych niezawierających zera?",
        "expression": "Jeśli $0$ nie jest w zestawie, wybieramy $3$ z $\\{2, 4, 6, 8\\}$: $\\binom{4}{3} = 4$",
        "explanation": "Wybieramy wszystkie $3$ parzyste z $4$ cyfr (bez zera)"
      },
      {
        "step": 9,
        "hint": "Ile permutacji daje każdy zestaw zawierający $0$?",
        "expression": "Dla zestawu z zerem: $5 \\cdot 5! = 5 \\cdot 120 = 600$ permutacji",
        "explanation": "Zero na jednej z 5 pozycji (nie pierwszej), pozostałe $5$ cyfr dowolnie",
        "interactive_choice": {
          "prompt": "Jak policzyć permutacje $6$ cyfr, gdy jedna z nich to $0$ (nie może być pierwsze)?",
          "options": [
            {
              "id": "A",
              "text": "Zero może być na 5 pozycjach (2-6), reszta dowolnie: $5 \\cdot 5!$",
              "feedback": "Świetnie! Zero na jednej z $5$ pozycji, pozostałe $5$ cyfr permutujemy: $5 \\cdot 5! = 600$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie permutacje minus te z zerem na początku: $6! - 5!$",
              "feedback": "Też poprawne! $720 - 120 = 600$. Oba sposoby dają ten sam wynik.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Po prostu $6!$ bo to $6$ cyfr",
              "feedback": "Nie - zapominasz o warunku! Zero nie może być pierwsze, więc nie wszystkie $6!$ permutacji są dozwolone.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia $A$ i $B$ są równoważne i dają $600$ permutacji dla każdego zestawu z zerem."
        }
      },
      {
        "step": 10,
        "hint": "Ile permutacji daje każdy zestaw niezawierający zera?",
        "expression": "Dla zestawu bez zera: $6! = 720$ permutacji",
        "explanation": "Wszystkie $6$ cyfr można dowolnie permutować (żadna nie jest zerem)"
      },
      {
        "step": 11,
        "hint": "Ile liczb powstaje z zestawów zawierających zero?",
        "expression": "Zestawy z zerem: $6 \\cdot 10 \\cdot 600 = 36000$",
        "explanation": "6 sposobów wyboru parzystych (z zerem), $10$ sposobów wyboru nieparzystych, $600$ permutacji każdego zestawu"
      },
      {
        "step": 12,
        "hint": "Ile liczb powstaje z zestawów niezawierających zera?",
        "expression": "Zestawy bez zera: $4 \\cdot 10 \\cdot 720 = 28800$",
        "explanation": "4 sposoby wyboru parzystych (bez zera), $10$ sposobów wyboru nieparzystych, $720$ permutacji każdego zestawu"
      },
      {
        "step": 13,
        "hint": "Jaka jest całkowita liczba szukanych liczb sześciocyfrowych?",
        "expression": "$36000 + 28800 = 64800$",
        "explanation": "Sumujemy liczby z obu rozłącznych przypadków"
      }
    ],
    "solutions": [
      "$64800$"
    ],
    "parameters": {
      "constraints": "Cyfry różne, $3$ parzyste i $3$ nieparzyste, liczba sześciocyfrowa"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T06:58:45.747Z"
  },
  {
    "id": "combinatorics_four_digit_even",
    "topic": "Kombinatoryka - zasada mnożenia i dodawania",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb czterocyfrowych parzystych, w których zapisie cyfra $8$ występuje co najwyżej dwa razy i nie występuje cyfra $0$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać szukana liczba czterocyfrowa?",
        "expression": "Liczba postaci $\\overline{abcd}$ gdzie: parzysta ($d$ parzyste), bez cyfry $0$, cyfra $8$ występuje $0$, $1$ lub $2$ razy",
        "explanation": "Identyfikujemy wszystkie ograniczenia zadania"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podzielić problem na przypadki?",
        "expression": "Przypadki: (I) bez cyfry $8$, (II) dokładnie jedna $8$, (III) dokładnie dwie $8$",
        "explanation": "Dzielimy na rozłączne przypadki według liczby wystąpień cyfry $8$",
        "interactive_choice": {
          "prompt": "Według czego podzielić liczby na rozłączne przypadki?",
          "options": [
            {
              "id": "A",
              "text": "Według pozycji cyfry $8$ w liczbie",
              "feedback": "Możliwe, ale skomplikowane - będzie wiele nakładających się przypadków",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Według liczby wystąpień cyfry $8$ ($0$, $1$ lub $2$ razy)",
              "feedback": "Doskonale! To daje rozłączne przypadki: bez $8$, z jedną $8$, z dwiema $8$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Według ostatniej cyfry $2$, $4$, $6$, $8$",
              "feedback": "Skomplikuje sprawę - cyfra $8$ na końcu wymaga osobnego traktowania",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział według liczby ósemek daje $3$ rozłączne przypadki, które łatwo policzyć osobno."
        }
      },
      {
        "step": 3,
        "hint": "Ile liczb parzystych bez cyfry $8$ i bez $0$ możemy utworzyć?",
        "expression": "Przypadek I: cyfry z $\\{1,2,3,4,5,6,7,9\\}$, ostatnia z $\\{2,4,6\\}$",
        "explanation": "Bez $8$ i bez $0$ mamy $8$ cyfr, ale ostatnia musi być parzysta (nie $8$)",
        "why": "Liczba parzysta kończy się cyfrą parzystą. Bez $0$ i $8$ parzyste to: $2$, $4$, $6$."
      },
      {
        "step": 4,
        "hint": "Ile możliwości dla każdej pozycji w przypadku $I$?",
        "expression": "$a$: 8 cyfr, $b$: 8 cyfr, $c$: 8 cyfr, $d$: 3 cyfry $(2,4,6)$",
        "explanation": "Pierwsze trzy pozycje dowolne z $8$ cyfr, ostatnia z $3$ parzystych"
      },
      {
        "step": 5,
        "hint": "Ile wynosi iloczyn możliwości dla przypadku I?",
        "expression": "$8 \\cdot 8 \\cdot 8 \\cdot 3 = 1536$",
        "explanation": "Zasada mnożenia: mnożymy liczby możliwości dla każdej pozycji"
      },
      {
        "step": 6,
        "hint": "Jak policzyć liczby z dokładnie jedną cyfrą $8$?",
        "expression": "Przypadek II: $8$ na pozycji $a$, $b$, $c$ lub $d$",
        "explanation": "Rozpatrujemy 4 podprzypadki według pozycji jedynej ósemki",
        "interactive_choice": {
          "prompt": "Jak rozpatrzyć przypadek z dokładnie jedną ósemką?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć 4 podprzypadki: $8$ na $1$., $2$., $3$. lub $4$. pozycji",
              "feedback": "Świetnie! Pozycja 8 ma znaczenie - szczególnie gdy jest na końcu",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać pozycję dla $8$ na $4$ sposoby, resztę dowolnie",
              "feedback": "Nie - gdy $8$ jest na końcu, liczba jest parzysta automatycznie, a gdy nie - musimy wybrać inną cyfrę parzystą",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie z $8$, odjąć te z dwiema lub więcej",
              "feedback": "Zbyt skomplikowane - lepiej bezpośrednio policzyć podprzypadki",
              "is_correct": false
            }
          ],
          "explanation_after": "Pozycja cyfry $8$ ma znaczenie: jeśli jest na końcu, liczba jest parzysta; jeśli nie - musimy zapewnić parzystość inaczej."
        }
      },
      {
        "step": 7,
        "hint": "Ile liczb gdy $8$ jest na pierwszej pozycji?",
        "expression": "Podprzypadek IIa: $8bcd$, gdzie $b,c \\in \\{1,2,3,4,5,6,7,9\\}$, $d \\in \\{2,4,6\\}$",
        "explanation": "Pierwsza pozycja: $8$, środkowe: $7$ cyfr (bez $0$ i $8$), ostatnia: $3$ parzyste (bez $8$)"
      },
      {
        "step": 8,
        "hint": "Ile to daje możliwości dla podprzypadku IIa?",
        "expression": "$1 \\cdot 7 \\cdot 7 \\cdot 3 = 147$",
        "explanation": "Mnożymy możliwości: $1$ dla pierwszej, $7$ dla drugiej, $7$ dla trzeciej, $3$ dla czwartej"
      },
      {
        "step": 9,
        "hint": "Ile liczb gdy $8$ jest na drugiej lub trzeciej pozycji?",
        "expression": "Podprzypadki IIb i IIc: $a8cd$ lub $ab8d$, analogicznie po $1 \\cdot 7 \\cdot 7 \\cdot 3 = 147$ każdy",
        "explanation": "Symetria: gdy $8$ jest na środkowej pozycji, mamy taką samą liczbę możliwości"
      },
      {
        "step": 10,
        "hint": "Co się zmienia gdy $8$ jest na ostatniej pozycji?",
        "expression": "Podprzypadek IId: $abc8$, liczba automatycznie parzysta, $a,b,c \\in \\{1,2,3,4,5,6,7,9\\}$",
        "explanation": "Gdy ostatnia cyfra to $8$, warunek parzystości spełniony, pozostałe $3$ pozycje dowolne",
        "why": "8 jest parzyste, więc liczba kończąca się na $8$ jest parzysta. Nie musimy ograniczać ostatniej cyfry."
      },
      {
        "step": 11,
        "hint": "Ile możliwości dla podprzypadku IId?",
        "expression": "$7 \\cdot 7 \\cdot 7 \\cdot 1 = 343$",
        "explanation": "Każda z trzech pierwszych pozycji: $7$ cyfr, ostatnia: tylko $8$"
      },
      {
        "step": 12,
        "hint": "Ile łącznie liczb z dokładnie jedną ósemką?",
        "expression": "$147 + 147 + 147 + 343 = 784$",
        "explanation": "Sumujemy wszystkie podprzypadki dla przypadku II"
      },
      {
        "step": 13,
        "hint": "Jak rozpatrzyć liczby z dokładnie dwiema ósemkami?",
        "expression": "Przypadek III: dwie 8, rozpatrujemy czy jedna jest na pozycji $d$",
        "explanation": "Dzielimy na podprzypadki: $8$ na końcu lub nie na końcu",
        "interactive_choice": {
          "prompt": "Jak podzielić przypadek z dwiema ósemkami?",
          "options": [
            {
              "id": "A",
              "text": "Według tego, czy $8$ jest na ostatniej pozycji",
              "feedback": "Doskonale! To kluczowy podział: $8$ na końcu (parzysta) vs $8$ nie na końcu (potrzebna inna parzysta)",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać 2 pozycje z 4 na ${4 \\choose 2}$ sposobów",
              "feedback": "Nie uwzględnia różnicy: gdy $8$ jest na końcu vs nie jest - to wpływa na parzystość",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć wszystkie $6$ par pozycji osobno",
              "feedback": "Możliwe, ale pracochłonne - lepiej pogrupować według ostatniej pozycji",
              "is_correct": false
            }
          ],
          "explanation_after": "Kluczowe: czy jedna z dwóch ósemek jest na końcu (zapewnia parzystość) czy nie (trzeba dodać cyfrę parzystą)."
        }
      },
      {
        "step": 14,
        "hint": "Ile liczb gdy jedna z dwóch ósemek jest na końcu?",
        "expression": "Podprzypadek IIIa: $**8$ gdzie jedna z pierwszych trzech pozycji to $8$, reszta z $\\{1,2,3,4,5,6,7,9\\}$",
        "explanation": "Ostatnia pozycja: $8$, jedna z trzech pierwszych: $8$, dwie pozostałe: $7$ cyfr każda"
      },
      {
        "step": 15,
        "hint": "Na ile sposobów wybrać pozycję dla drugiej $8$?",
        "expression": "Druga $8$ na pozycji $a$, $b$ lub $c$: $3$ możliwości, pozostałe $2$ pozycje: $7 \\cdot 7$",
        "explanation": "Wybieramy $1$ z $3$ pozycji dla drugiej ósemki, resztę wypełniamy $7$ cyframi"
      },
      {
        "step": 16,
        "hint": "Ile wynosi iloczyn dla podprzypadku IIIa?",
        "expression": "$3 \\cdot 7 \\cdot 7 = 147$",
        "explanation": "3 pozycje dla drugiej $8$, potem $7 \\cdot 7$ dla pozostałych dwóch pozycji"
      },
      {
        "step": 17,
        "hint": "Co gdy obie ósemki są na pierwszych trzech pozycjach?",
        "expression": "Podprzypadek IIIb: dwie $8$ wśród $a,b,c$, ostatnia $d \\in \\{2,4,6\\}$, jedna pozostała z $7$ cyfr",
        "explanation": "Wybieramy $2$ z $3$ pozycji dla ósemek, jedna pozycja zostaje dla cyfry z $7$, ostatnia parzysta (bez $8$)"
      },
      {
        "step": 18,
        "hint": "Ile sposobów wyboru pozycji dla dwóch ósemek z trzech miejsc?",
        "expression": "${3 \\choose 2} = 3$ sposoby, pozostała pozycja: $7$ cyfr, ostatnia: $3$ cyfry",
        "explanation": "Kombinacja $2$ z $3$ pozycji, potem $7$ możliwości dla środkowej, $3$ dla ostatniej"
      },
      {
        "step": 19,
        "hint": "Ile wynosi iloczyn dla podprzypadku IIIb?",
        "expression": "$3 \\cdot 7 \\cdot 3 = 63$",
        "explanation": "Mnożymy: $3$ wybory pozycji, $7$ cyfr dla pozostałej środkowej, $3$ parzyste dla końcowej"
      },
      {
        "step": 20,
        "hint": "Ile łącznie liczb z dokładnie dwiema ósemkami?",
        "expression": "$147 + 63 = 210$",
        "explanation": "Sumujemy oba podprzypadki dla przypadku III"
      },
      {
        "step": 21,
        "hint": "Ile łącznie jest liczb spełniających wszystkie warunki?",
        "expression": "$1536 + 784 + 210 = 2530$",
        "explanation": "Sumujemy wszystkie trzy rozłączne przypadki: bez $8$, z jedną $8$, z dwiema $8$"
      }
    ],
    "solutions": [
      "$2530$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 21,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T06:59:48.586Z"
  },
  {
    "id": "seven_digit_sum_4",
    "topic": "Kombinatoryka - rozmieszczenia z ograniczeniami",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb siedmiocyfrowych, w których suma cyfr jest równa $4$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry może mieć liczba siedmiocyfrowa na pierwszej pozycji?",
        "expression": "Pierwsza cyfra: $c_1 \\in \\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$, pozostałe: $c_2, c_3, ..., c_7 \\in \\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Liczba siedmiocyfrowa nie może zaczynać się od zera",
        "why": "To kluczowe ograniczenie - musimy osobno rozpatrzyć pierwszą cyfrę i pozostałe pozycje."
      },
      {
        "step": 2,
        "hint": "Jak zapisać warunek na sumę cyfr matematycznie?",
        "expression": "$c_1 + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 = 4$, gdzie $c_1 \\geq 1$ i $c_i \\geq 0$ dla $i = 2, 3, ..., 7$",
        "explanation": "Szukamy liczby rozwiązań tego równania w liczbach całkowitych nieujemnych"
      },
      {
        "step": 3,
        "hint": "Którą metodę kombinatoryczną zastosować do tego problemu?",
        "expression": "Zastosujemy wzór na liczbę rozwiązań równania w liczbach całkowitych nieujemnych",
        "explanation": "Metoda 'stars and bars' z modyfikacją dla pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć rozmieszczenia cyfr o sumie $4$?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednie wyliczenie wszystkich możliwości",
              "feedback": "Możliwe, ale bardzo pracochłonne - jest wiele przypadków do rozpatrzenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wzór na liczbę rozwiązań równania $x_1 + x_2 + ... + x_n = k$ (stars and bars)",
              "feedback": "Świetnie! To klasyczne zastosowanie metody 'kule i przegrody', ale pamiętaj o warunku $c_1 \\geq 1$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zasada włączeń i wyłączeń",
              "feedback": "Zbyt skomplikowane dla tego problemu - metoda 'kule i przegrody' jest prostsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Użyjemy metody 'kule i przegrody' z uwzględnieniem warunku $c_1 \\geq 1$."
        }
      },
      {
        "step": 4,
        "hint": "Jak pozbyć się warunku $c_1 \\geq 1$?",
        "expression": "Podstawienie: $c_1 = 1 + d_1$, gdzie $d_1 \\geq 0$",
        "explanation": "Zamieniamy warunek $c_1 \\geq 1$ na $d_1 \\geq 0$",
        "why": "To standardowy trik - podstawienie redukuje problem do standardowej postaci, gdzie wszystkie zmienne są nieujemne."
      },
      {
        "step": 5,
        "hint": "Jak wygląda równanie po podstawieniu?",
        "expression": "$(1 + d_1) + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 = 4$",
        "explanation": "Podstawiamy $c_1 = 1 + d_1$ do równania"
      },
      {
        "step": 6,
        "hint": "Jak uprościć to równanie?",
        "expression": "$d_1 + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 = 3$",
        "explanation": "Odejmujemy $1$ od obu stron, teraz wszystkie zmienne $\\geq 0$"
      },
      {
        "step": 7,
        "hint": "Jaki wzór zastosować do policzenia rozwiązań równania $x_1 + x_2 + ... + x_n = k$?",
        "expression": "Liczba rozwiązań = $\\binom{7+3-1}{3} = \\binom{9}{3}$",
        "explanation": "Mamy $7$ zmiennych i sumę równą $3$",
        "interactive_choice": {
          "prompt": "Ile jest rozwiązań równania $d_1 + c_2 + ... + c_7 = 3$ w liczbach całkowitych nieujemnych?",
          "options": [
            {
              "id": "A",
              "text": "Wzór: $\\binom{n+k-1}{k}$ gdzie $n=7$, $k=3$",
              "feedback": "Dokładnie! To daje $\\binom{7+3-1}{3} = \\binom{9}{3}$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzór: $\\binom{n}{k}$ gdzie $n=7$, $k=3$",
              "feedback": "Nie - to byłby wybór $3$ elementów z $7$, a nie rozmieszczenie sumy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wzór: $n^k$ gdzie $n=7$, $k=3$",
              "feedback": "Nie - to liczba ciągów długości $3$ z alfabetu $7$-elementowego, nie rozmieszczenie sumy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wzór 'stars and bars': liczba rozwiązań $x_1 + ... + x_n = k$ to $\\binom{n+k-1}{k} = \\binom{n+k-1}{n-1}$."
        }
      },
      {
        "step": 8,
        "hint": "Czy wszystkie te rozwiązania są dopuszczalne dla cyfr?",
        "expression": "Wszystkie rozwiązania są dopuszczalne, bo maksymalna wartość cyfry to $3$",
        "explanation": "Nie musimy wykluczać żadnych przypadków",
        "interactive_choice": {
          "prompt": "Czy musimy sprawdzić dodatkowe ograniczenia na cyfry?",
          "options": [
            {
              "id": "A",
              "text": "Tak - cyfry muszą być $\\leq 9$",
              "feedback": "Dobra intuicja! Ale przy sumie $3$ żadna cyfra nie przekroczy $9$, więc to ograniczenie jest automatycznie spełnione.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Nie - przy sumie $3$ wszystkie cyfry są automatycznie $\\leq 9$",
              "feedback": "Świetnie! Maksymalna wartość pojedynczej cyfry to $3$, więc wszystkie rozwiązania są dopuszczalne.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tak - musimy wykluczyć przypadki z $0$",
              "feedback": "Nie - zera są dozwolone na wszystkich pozycjach oprócz pierwszej, co już uwzględniliśmy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Ponieważ suma wynosi tylko $3$, żadna cyfra nie może przekroczyć $9$. Wszystkie rozwiązania kombinatoryczne są dopuszczalne."
        }
      },
      {
        "step": 9,
        "hint": "Ile wynosi $\\binom{9}{3}$?",
        "expression": "$\\binom{9}{3} = \\frac{9!}{3! \\cdot 6!} = \\frac{9 \\cdot 8 \\cdot 7}{3 \\cdot 2 \\cdot 1} = \\frac{504}{6} = 84$",
        "explanation": "Obliczamy wartość symbolu Newtona"
      },
      {
        "step": 10,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba siedmiocyfrowych liczb o sumie cyfr równej $4$ wynosi $84$",
        "explanation": "To liczba wszystkich dopuszczalnych rozmieszczeń cyfr"
      }
    ],
    "solutions": [
      "$84$"
    ],
    "parameters": {
      "digits": 7,
      "sum": 4
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:00:29.343Z"
  },
  {
    "id": "seven_digit_sum_six",
    "topic": "Kombinatoryka - rozmieszczenia z ograniczeniami",
    "difficulty": 5,
    "statement": "Oblicz, ile jest wszystkich liczb siedmiocyfrowych, w których suma cyfr jest równa $6$.",
    "steps": [
      {
        "step": 1,
        "hint": "Czym różni się liczba siedmiocyfrowa od dowolnego ciągu siedmiu cyfr?",
        "expression": "Liczba siedmiocyfrowa: pierwsza cyfra $\\neq 0$, pozostałe cyfry mogą być $0$, $1$, $2$, ..., $9$",
        "explanation": "Liczba siedmiocyfrowa ma cyfry od pozycji $1$ do $7$, gdzie pierwsza cyfra musi być niezerowa",
        "why": "To kluczowe ograniczenie - nie możemy po prostu rozłożyć $6$ na $7$ cyfr, bo pierwsza nie może być zerem."
      },
      {
        "step": 2,
        "hint": "Jak możemy podejść do tego problemu z ograniczeniem na pierwszą cyfrę?",
        "expression": "Strategia: dla każdej pierwszej cyfry $a_1 \\in \\{1, 2, 3, 4, 5, 6\\}$ zliczamy rozkłady pozostałych $6$ cyfr",
        "explanation": "Rozbijamy problem na przypadki według wartości pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do zliczenia liczb z sumą cyfr równą $6$?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć wszystkie możliwe wartości pierwszej cyfry ($1$-$6$) osobno",
              "feedback": "Świetnie! To pozwoli kontrolować warunek, że pierwsza cyfra jest niezerowa.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć wszystkie rozkłady $6$ na $7$ cyfr, potem odjąć te z zerem na początku",
              "feedback": "Dobra idea! To metoda dopełnienia - też prowadzi do celu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć permutacji z powtórzeniami dla cyfr sumujących się do $6$",
              "feedback": "To nie wystarczy - permutacje nie uwzględniają, że cyfry mogą się powtarzać w różnych konfiguracjach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Obie metody $A$ i $B$ działają. Wybierzemy metodę $A$ - rozpatrywanie przypadków według pierwszej cyfry."
        }
      },
      {
        "step": 3,
        "hint": "Jeśli pierwsza cyfra to $a_1$, ile musi wynosić suma pozostałych sześciu cyfr?",
        "expression": "Suma pozostałych cyfr: $a_2 + a_3 + a_4 + a_5 + a_6 + a_7 = 6 - a_1$",
        "explanation": "Pozostałe cyfry muszą sumować się do $6 - a_1$, gdzie każda cyfra $\\in \\{0, 1, ..., 9\\}$"
      },
      {
        "step": 4,
        "hint": "Jak zliczyć liczbę sposobów rozłożenia liczby $k$ na sumę $6$ cyfr (każda od $0$ do $9$)?",
        "expression": "Liczba rozwiązań $x_1 + ... + x_6 = k$ w liczbach całkowitych nieujemnych: $\\binom{k+5}{5}$",
        "explanation": "Wzór stars and bars: rozmieszczamy $k$ identycznych kulek w $6$ pudełkach",
        "why": "To klasyczny wzór kombinatoryczny: $\\binom{n+k-1}{k-1}$ dla $n$ niewiadomych. Tu $n=6$, więc $\\binom{k+5}{5}$.",
        "interactive_choice": {
          "prompt": "Którą metodę kombinatoryczną użyć do zliczenia rozwiązań równania $x_1 + x_2 + ... + x_6 = k$ gdzie $x_i \\in \\{0,1,...,9\\}$?",
          "options": [
            {
              "id": "A",
              "text": "Wzór na kombinacje z powtórzeniami (stars and bars)",
              "feedback": "Dobry start, ale uwaga - musimy odjąć przypadki gdzie cyfra > $9$!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Zasada włączeń i wyłączeń dla ograniczenia $x_i \\leq 9$",
              "feedback": "Dokładnie! To uwzględni górne ograniczenie na cyfry.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Bezpośrednie wyliczenie wszystkich możliwych kombinacji cyfr",
              "feedback": "Możliwe dla małych $k$, ale nieefektywne i podatne na błędy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Użyjemy kombinacji z powtórzeniami, ale dla małych wartości $k \\leq 6$ ograniczenie $x_i \\leq 9$ nie ma znaczenia."
        }
      },
      {
        "step": 5,
        "hint": "Czy dla $k \\leq 6$ musimy martwić się ograniczeniem $x_i \\leq 9$?",
        "expression": "Dla $k \\leq 6$: każda cyfra $\\leq k \\leq 6 < 9$, więc ograniczenie automatycznie spełnione",
        "explanation": "Gdy suma wynosi maksymalnie $6$, żadna pojedyncza cyfra nie może przekroczyć $9$"
      },
      {
        "step": 6,
        "hint": "Ile jest liczb dla każdej wartości pierwszej cyfry?",
        "expression": "Dla $a_1 = 1$: $\\binom{5+5}{5} = \\binom{10}{5} = 252$\n\nDla $a_1 = 2$: $\\binom{4+5}{5} = \\binom{9}{5} = 126$\n\nDla $a_1 = 3$: $\\binom{3+5}{5} = \\binom{8}{5} = 56$\n\nDla $a_1 = 4$: $\\binom{2+5}{5} = \\binom{7}{5} = 21$\n\nDla $a_1 = 5$: $\\binom{1+5}{5} = \\binom{6}{5} = 6$\n\nDla $a_1 = 6$: $\\binom{0+5}{5} = \\binom{5}{5} = 1$",
        "explanation": "Obliczamy liczbę rozwiązań dla każdego przypadku osobno"
      },
      {
        "step": 7,
        "hint": "Jak otrzymać całkowitą liczbę siedmiocyfrowych liczb z sumą cyfr równą $6$?",
        "expression": "Suma: $252 + 126 + 56 + 21 + 6 + 1$",
        "explanation": "Dodajemy wyniki ze wszystkich przypadków",
        "interactive_choice": {
          "prompt": "Co zrobić z wynikami dla poszczególnych wartości pierwszej cyfry?",
          "options": [
            {
              "id": "A",
              "text": "Zsumować wszystkie przypadki",
              "feedback": "Tak! Przypadki się wykluczają (pierwsza cyfra ma dokładnie jedną wartość), więc sumujemy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pomnożyć przez $6$ (liczba możliwych pierwszych cyfr)",
              "feedback": "Nie - każdy przypadek ma inną liczbę rozwiązań, nie możemy po prostu mnożyć.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wybrać maksimum z obliczonych wartości",
              "feedback": "Nie - chcemy wszystkie liczby, nie tylko te z najczęstszą pierwszą cyfrą.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne (każda liczba ma dokładnie jedną pierwszą cyfrę), więc stosujemy regułę sumy."
        }
      },
      {
        "step": 8,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "$252 + 126 + 56 + 21 + 6 + 1 = 462$",
        "explanation": "Obliczamy sumę wszystkich przypadków"
      }
    ],
    "solutions": [
      "$462$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T07:01:27.301Z"
  },
  {
    "id": "nine_digit_product_six",
    "topic": "Kombinatoryka - rozkłady liczb",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb dziewięciocyfrowych, w których iloczyn cyfr jest równy $6$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą wystąpić w liczbie, aby ich iloczyn wynosił $6$?",
        "expression": "Możliwe cyfry: $\\{1, 2, 3, 6\\}$",
        "explanation": "Tylko dzielniki $6$ mogą wystąpić w liczbie",
        "why": "Iloczyn cyfr równy $6$ oznacza, że każda cyfra musi być dzielnikiem $6$. Cyfra $1$ służy jako wypełniacz (nie zmienia iloczynu).",
        "interactive_choice": {
          "prompt": "Które cyfry mogą wystąpić w liczbie dziewięciocyfrowej z iloczynem cyfr równym $6$?",
          "options": [
            {
              "id": "A",
              "text": "Tylko cyfry będące dzielnikami $6$: $1$, $2$, $3$, $6$",
              "feedback": "Świetnie! Iloczyn cyfr to $6$, więc każda cyfra musi być dzielnikiem $6$. Dodatkowo potrzebujemy cyfr $1$ jako wypełniaczy.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie cyfry od $0$ do $9$",
              "feedback": "Nie - cyfra $0$ dałaby iloczyn $0$, a cyfry większe niż $6$ (np. $7$, $8$, $9$) nie są dzielnikami $6$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Cyfry $1$, $2$, $3$, $6$ oraz $0$ jako wypełniacz",
              "feedback": "Nie - cyfra $0$ w iloczynie daje $0$, nie $6$. Nie możemy jej użyć.",
              "is_correct": false
            }
          ],
          "explanation_after": "Możliwe cyfry to tylko $1$, $2$, $3$, $6$. Cyfra $1$ nie zmienia iloczynu, pozostałe są dzielnikami $6$."
        }
      },
      {
        "step": 2,
        "hint": "Na ile sposobów można rozłożyć $6$ na iloczyn cyfr z zestawu $\\{1, 2, 3, 6\\}$?",
        "expression": "Rozkłady: (1) $6$, (2) $2 \\cdot 3$, (3) $1 \\cdot 6$, (4) $1 \\cdot 2 \\cdot 3$",
        "explanation": "Wszystkie możliwe rozkłady liczby $6$ na iloczyn dostępnych cyfr",
        "interactive_choice": {
          "prompt": "Jakie są możliwe rozkłady liczby $6$ na iloczyn cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $6 = 6$ i $6 = 2 \\cdot 3$",
              "feedback": "Brakuje przypadku $6 = 1 \\cdot 6$ oraz $6 = 1 \\cdot 2 \\cdot 3$ - jedynki możemy dodawać!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$6 = 6$, $6 = 2 \\cdot 3$, $6 = 1 \\cdot 6$, $6 = 1 \\cdot 2 \\cdot 3$",
              "feedback": "Dokładnie! To wszystkie możliwe rozkłady używając cyfr $1$, $2$, $3$, $6$. Resztę pozycji wypełnimy jedynkami.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$6 = 6$, $6 = 2 \\cdot 3$, $6 = 1 \\cdot 1 \\cdot 6$, $6 = 1 \\cdot 1 \\cdot 2 \\cdot 3$",
              "feedback": "Prawie! Ale $1 \\cdot 6$ i $1 \\cdot 1 \\cdot 6$ to ten sam rozkład - jedynki dodamy później.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy $4$ podstawowe rozkłady. Pozostałe pozycje (do $9$ cyfr) wypełnimy jedynkami."
        }
      },
      {
        "step": 3,
        "hint": "Ile cyfr $1$ potrzebujemy w każdym rozkładzie, aby uzyskać $9$ cyfr?",
        "expression": "(1) $8$ jedynek + cyfra $6$; (2) $7$ jedynek + cyfry $2$, $3$; (3) $7$ jedynek + cyfry $1$, $6$; (4) $6$ jedynek + cyfry $1$, $2$, $3$",
        "explanation": "Uzupełniamy każdy rozkład jedynkami do $9$ cyfr",
        "why": "Liczba jest dziewięciocyfrowa, więc musimy mieć dokładnie $9$ cyfr. Jedynki nie zmieniają iloczynu."
      },
      {
        "step": 4,
        "hint": "Ile jest permutacji dla rozkładu $(1)$: osiem jedynek i jedna szóstka?",
        "expression": "Rozkład (1): $\\frac{9!}{8! \\cdot 1!} = 9$",
        "explanation": "Permutacje z powtórzeniami - szóstka może być na $9$ pozycjach"
      },
      {
        "step": 5,
        "hint": "Czy wszystkie te permutacje dają liczby dziewięciocyfrowe?",
        "expression": "Rozkład $(1)$: $9$ liczb",
        "explanation": "Wszystkie permutacje są poprawne, bo nie ma cyfry $0$",
        "interactive_choice": {
          "prompt": "Czy w rozkładzie $(1)$ wszystkie $9$ permutacji są poprawne?",
          "options": [
            {
              "id": "A",
              "text": "Tak, wszystkie $9$ permutacji są poprawne",
              "feedback": "Nie! Jeśli szóstka jest na pierwszej pozycji, to mamy liczbę dziewięciocyfrową. Ale jeśli jedynka jest pierwsza, liczba zaczyna się od $1$, co też jest OK. Wszystkie są poprawne!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, musimy odrzucić przypadki gdy $1$ jest pierwsza",
              "feedback": "Błąd! Liczba zaczynająca się od $1$ (np. $111111116$) też jest dziewięciocyfrowa.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie, musimy odrzucić przypadki gdy $6$ jest pierwsza",
              "feedback": "Nie - liczba zaczynająca się od $6$ (np. $611111111$) jest poprawną liczbą dziewięciocyfrową.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wszystkie cyfry ($1$ i $6$) są niezerowe, więc każda permutacja daje liczbę dziewięciocyfrową."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest permutacji dla rozkładu $(2)$: siedem jedynek, jedna dwójka i jedna trójka?",
        "expression": "Rozkład (2): $\\frac{9!}{7! \\cdot 1! \\cdot 1!} = \\frac{9 \\cdot 8 \\cdot 7!}{7!} = 72$",
        "explanation": "Permutacje z powtórzeniami - cyfry $2$ i $3$ na różnych pozycjach"
      },
      {
        "step": 7,
        "hint": "Ile jest permutacji dla rozkładu $(3)$: siedem jedynek, jedna jedynka (razem $8$) i jedna szóstka?",
        "expression": "Rozkład $(3)$: $\\frac{9!}{8! \\cdot 1!} = 9$",
        "explanation": "Mamy $8$ jedynek i $1$ szóstkę - szóstka może być na $9$ pozycjach"
      },
      {
        "step": 8,
        "hint": "Ile jest permutacji dla rozkładu $(4)$: sześć jedynek, jedna jedynka (razem $7$), jedna dwójka i jedna trójka?",
        "expression": "Rozkład $(4)$: $\\frac{9!}{7! \\cdot 1! \\cdot 1!} = 72$",
        "explanation": "Mamy $7$ jedynek, $1$ dwójkę i $1$ trójkę"
      },
      {
        "step": 9,
        "hint": "Ile wynosi suma wszystkich możliwości?",
        "expression": "$9 + 72 + 9 + 72 = 162$",
        "explanation": "Sumujemy liczby z wszystkich czterech rozkładów"
      }
    ],
    "solutions": [
      "$162$"
    ],
    "parameters": {
      "note": "Liczba dziewięciocyfrowa nie może zaczynać się od $0$, ale w tym zadaniu cyfra $0$ nie występuje"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:02:23.191Z"
  },
  {
    "id": "nine_digit_product_12",
    "topic": "Kombinatoryka - rozkłady liczb",
    "difficulty": 5,
    "statement": "Oblicz, ile jest wszystkich liczb dziewięciocyfrowych, w których iloczyn cyfr jest równy $12$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą wystąpić w liczbie dziewięciocyfrowej?",
        "expression": "Cyfry od $1$ do $9$ (pierwsza cyfra nie może być $0$), pozostałe cyfry od $0$ do $9$",
        "explanation": "Liczba dziewięciocyfrowa ma cyfry $c_1c_2c_3c_4c_5c_6c_7c_8c_9$ gdzie $c_1 \\neq 0$",
        "why": "Jeśli iloczyn cyfr ma być równy $12$, to żadna cyfra nie może być zerem (bo $0 \\cdot x = 0$). Wszystkie cyfry muszą być z zakresu $1$-$9$."
      },
      {
        "step": 2,
        "hint": "Jak podejść do problemu iloczynu cyfr równego $12$?",
        "expression": "$12 = 2^2 \\cdot 3$",
        "explanation": "Rozkład liczby $12$ na czynniki pierwsze",
        "interactive_choice": {
          "prompt": "Jaka strategia będzie najlepsza do rozwiązania tego problemu?",
          "options": [
            {
              "id": "A",
              "text": "Znaleźć wszystkie rozkłady liczby $12$ na czynniki pierwsze i rozważyć permutacje",
              "feedback": "Świetnie! To systematyczne podejście - rozkładamy $12$ na czynniki i liczymy ustawienia.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Sprawdzić wszystkie możliwe kombinacje cyfr metodą prób i błędów",
              "feedback": "Zbyt pracochłonne - przy $9$ cyfrach to miliony możliwości do sprawdzenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami bez analizy rozkładów",
              "feedback": "Nie wystarczy - najpierw musimy wiedzieć JAKIE cyfry użyć, potem liczyć permutacje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Kluczem jest rozkład $12$ na czynniki, które są cyframi ($1$-$9$), a potem liczenie permutacji."
        }
      },
      {
        "step": 3,
        "hint": "Jakie cyfry (od $1$ do $9$) mogą być czynnikami w iloczynie równym $12$?",
        "expression": "Możliwe cyfry: $1$, $2$, $3$, $4$, $6$ (bo $4 = 2^2$, $6 = 2 \\cdot 3$)",
        "explanation": "Cyfry $5$, $7$, $8$, $9$ nie mogą wystąpić, bo nie dzielą $12$",
        "why": "Jeśli cyfra $c$ występuje w liczbie, to $c$ musi dzielić $12$. Cyfry $5$, $7$, $8$, $9$ nie dzielą $12$, więc ich użycie uniemożliwi otrzymanie iloczynu $12$."
      },
      {
        "step": 4,
        "hint": "Ile jedynek musimy użyć, aby uzupełnić do 9 cyfr?",
        "expression": "Szukamy rozkładów $12$ na cyfry (bez jedynek), potem dodajemy jedynki",
        "explanation": "Strategia: znajdź rozkłady $12$, resztę miejsc wypełnij jedynkami",
        "interactive_choice": {
          "prompt": "Jak traktować jedynki w rozkładzie na 9 cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Jedynki nie wpływają na iloczyn, więc uzupełniamy nimi do $9$ cyfr",
              "feedback": "Dokładnie! Jedynki są neutralne dla iloczynu ($1 \\cdot x = x$), więc wypełniamy nimi pozostałe miejsca.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie możemy używać jedynek, bo zmieniają one $iloczyn$",
              "feedback": "Nieprawda - jedynka jest elementem neutralnym mnożenia, nie zmienia iloczynu.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Jedynki możemy zastąpić innymi cyframi dającymi ten sam iloczyn",
              "feedback": "Nie - inne cyfry zmienią iloczyn. Tylko jedynki zachowują iloczyn $12$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Jedynki są kluczowe - pozwalają uzupełnić liczbę do $9$ cyfr bez zmiany iloczynu."
        }
      },
      {
        "step": 5,
        "hint": "Jakie są wszystkie możliwe rozkłady liczby $12$ na cyfry od $2$ do $9$?",
        "expression": "Rozkłady: (1) $12 = 2 \\cdot 6$, (2) $12 = 3 \\cdot 4$, (3) $12 = 2 \\cdot 2 \\cdot 3$",
        "explanation": "Znajdujemy wszystkie sposoby zapisania $12$ jako iloczyn cyfr $2$-$9$",
        "why": "To wszystkie możliwe rozkłady, bo: $12 = 12$ (cyfra $12$ nie istnieje), $12 = 2 \\cdot 6 = 3 \\cdot 4 = 2 \\cdot 2 \\cdot 3$. Inne kombinacje jak $1 \\cdot 12$ lub $1 \\cdot 2 \\cdot 6$ sprowadzają się do tych samych po usunięciu jedynek."
      },
      {
        "step": 6,
        "hint": "Ile cyfr użyjemy w każdym rozkładzie i ile jedynek potrzebujemy?",
        "expression": "Rozkład $(1)$: $2$ cyfry + $7$ jedynek, Rozkład $(2)$: $2$ cyfry + $7$ jedynek, Rozkład $(3)$: $3$ cyfry + $6$ jedynek",
        "explanation": "Każdy rozkład wymaga uzupełnienia jedynkami do $9$ cyfr"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć liczbę permutacji dla rozkładu $2, 6, 1, 1, 1, 1, 1, 1, 1$?",
        "expression": "Rozkład (1): $\\frac{9!}{1! \\cdot 1! \\cdot 7!} = \\frac{9!}{7!} = 9 \\cdot 8 = 72$",
        "explanation": "Dla cyfr $2$, $6$, $1^7$ mamy $9$ pozycji, cyfra $2$ raz, cyfra $6$ raz, cyfra $1$ siedem razy",
        "interactive_choice": {
          "prompt": "Którym wzorem obliczyć permutacje z powtórzeniami?",
          "options": [
            {
              "id": "A",
              "text": "Wzór $\\frac{n!}{n_1! \\cdot n_2! \\cdot ... \\cdot n_k!}$ gdzie $n_i$ to liczby powtórzeń",
              "feedback": "Perfekcyjnie! To wzór na permutacje z powtórzeniami - dzielimy przez silnie liczb powtórzeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Zwykłe permutacje $n!$ bo wszystkie cyfry są różne",
              "feedback": "Nie - mamy $7$ jedynek, które się powtarzają, więc musimy podzielić przez $7!$",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje $\\binom{n}{k}$ bo wybieramy pozycje dla cyfr",
              "feedback": "Kombinacje nie uwzględniają kolejności wszystkich elementów - potrzebujemy permutacji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Permutacje z powtórzeniami: dzielimy $n!$ przez silnie liczb powtórzeń każdej cyfry."
        }
      },
      {
        "step": 8,
        "hint": "Ile permutacji daje rozkład $3, 4, 1, 1, 1, 1, 1, 1, 1$?",
        "expression": "Rozkład (2): $\\frac{9!}{1! \\cdot 1! \\cdot 7!} = \\frac{9!}{7!} = 9 \\cdot 8 = 72$",
        "explanation": "Analogicznie jak rozkład $(1)$ - dwie różne cyfry i $7$ jedynek"
      },
      {
        "step": 9,
        "hint": "Ile permutacji daje rozkład $2, 2, 3, 1, 1, 1, 1, 1, 1$?",
        "expression": "Rozkład $(3)$: $\\frac{9!}{2! \\cdot 1! \\cdot 6!} = \\frac{9!}{2! \\cdot 6!} = \\frac{9 \\cdot 8 \\cdot 7}{2} = \\frac{504}{2} = 252$",
        "explanation": "Cyfra $2$ występuje dwa razy, cyfra $3$ raz, cyfra $1$ sześć razy",
        "why": "Dzielimy przez $2!$ bo mamy dwie dwójki (są nierozróżnialne) i przez $6!$ bo mamy sześć jedynek."
      },
      {
        "step": 10,
        "hint": "Jaka jest suma wszystkich możliwości?",
        "expression": "$72 + 72 + 252 = 396$",
        "explanation": "Sumujemy liczby permutacji ze wszystkich trzech rozkładów"
      },
      {
        "step": 11,
        "hint": "Czy to już ostateczna odpowiedź?",
        "expression": "Liczba wszystkich liczb dziewięciocyfrowych z iloczynem cyfr równym $12$ wynosi $396$",
        "explanation": "Uwzględniliśmy wszystkie możliwe rozkłady i wszystkie permutacje"
      }
    ],
    "solutions": [
      "$396$"
    ],
    "parameters": {
      "rozkłady": "$12 = 2 \\cdot 6 = 3 \\cdot 4 = 2 \\cdot 2 \\cdot 3$",
      "permutacje": "Rozkład (1): $72$, Rozkład (2): $72$, Rozkład (3): $252$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 4,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:03:10.035Z"
  },
  {
    "id": "nine_digit_product_20",
    "topic": "Kombinatoryka - rozkład liczby na czynniki",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich liczb dziewięciocyfrowych, w których iloczyn cyfr jest równy $20$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą występować w liczbie dziewięciocyfrowej?",
        "expression": "Cyfry od $0$ do $9$, ale pierwsza cyfra nie może być $0$",
        "explanation": "Liczba dziewięciocyfrowa ma cyfry z zakresu $0$-$9$, przy czym pierwsza cyfra musi być różna od zera",
        "why": "Jeśli pierwsza cyfra byłaby $0$, liczba miałaby mniej niż $9$ cyfr. Dodatkowo, jeśli którakolwiek cyfra to $0$, iloczyn wszystkich cyfr wyniesie $0$, nie $20$."
      },
      {
        "step": 2,
        "hint": "Czy w naszej liczbie może wystąpić cyfra $0$?",
        "expression": "NIE - gdyby była cyfra $0$, to iloczyn cyfr wynosiłby $0$, nie $20$",
        "explanation": "Wykluczamy cyfrę $0$ z możliwych cyfr"
      },
      {
        "step": 3,
        "hint": "Jak rozłożyć liczbę $20$ na czynniki pierwsze?",
        "expression": "$20 = 2^2 \\cdot 5 = 4 \\cdot 5$",
        "explanation": "Rozkładamy $20$ na czynniki pierwsze",
        "interactive_choice": {
          "prompt": "Jaki jest rozkład liczby $20$ na czynniki pierwsze?",
          "options": [
            {
              "id": "A",
              "text": "$20 = 2 \\cdot 10$",
              "feedback": "To rozkład, ale nie na czynniki pierwsze - $10$ nie jest liczbą pierwszą",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$20 = 2^2 \\cdot 5$",
              "feedback": "Doskonale! To kanoniczny rozkład na czynniki pierwsze",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$20 = 4 \\cdot 5$",
              "feedback": "To rozkład, ale nie na czynniki pierwsze - $4$ nie jest liczbą pierwszą",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozkład na czynniki pierwsze to $20 = 2^2 \\cdot 5$. Teraz musimy te czynniki rozdzielić na $9$ cyfr (każda od $1$ do $9$)."
        }
      },
      {
        "step": 4,
        "hint": "Jakie cyfry (od $1$ do $9$) możemy użyć, aby ich iloczyn dał $20$?",
        "expression": "Przypadek 1: {$4$, $5$, $1$, $1$, $1$, $1$, $1$, $1$, $1$} lub Przypadek 2: {$2$, $2$, $5$, $1$, $1$, $1$, $1$, $1$, $1$}",
        "explanation": "Znajdujemy wszystkie możliwe zestawy cyfr",
        "interactive_choice": {
          "prompt": "Jak rozdzielić czynniki $2^2 \\cdot 5$ na cyfry od 1 do 9?",
          "options": [
            {
              "id": "A",
              "text": "Użyć cyfr $4$ i $5$, resztę wypełnić jedynkami",
              "feedback": "Świetnie! $4 \\cdot 5 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 = 20$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć cyfr $2$, $2$, $5$, resztę wypełnić jedynkami",
              "feedback": "Doskonale! $2 \\cdot 2 \\cdot 5 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 = 20$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć cyfr $2$, $10$, resztę wypełnić jedynkami",
              "feedback": "Nie - $-10$ nie jest cyfrą! Cyfry to liczby od $0$ do $9$",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy dwa sposoby: (1) cyfry $\\{4, 5, 1, 1, 1, 1, 1, 1, 1\\}$ lub (2) cyfry $\\{2, 2, 5, 1, 1, 1, 1, 1, 1\\}$"
        }
      },
      {
        "step": 5,
        "hint": "Ile permutacji ma zestaw cyfr {$4$, $5$, $1$, $1$, $1$, $1$, $1$, $1$, $1$}?",
        "expression": "Permutacje z powtórzeniami: $\\frac{9!}{7!} = \\frac{9!}{7! \\cdot 1! \\cdot 1!}$",
        "explanation": "Mamy $9$ pozycji, $7$ jedynek (nierozróżnialne), $1$ czwórkę, $1$ piątkę",
        "why": "Wzór na permutacje z powtórzeniami: $\\frac{n!}{n_1! \\cdot n_2! \\cdot ... \\cdot n_k!}$, gdzie $n_i$ to liczba powtórzeń $i$-tego elementu"
      },
      {
        "step": 6,
        "hint": "Ile wynosi $\\frac{9!}{7!}$?",
        "expression": "$\\frac{9!}{7!} = 9 \\cdot 8 = 72$",
        "explanation": "Obliczamy liczbę permutacji dla pierwszego przypadku"
      },
      {
        "step": 7,
        "hint": "Ile permutacji ma zestaw cyfr $\\{2, 2, 5, 1, 1, 1, 1, 1, 1\\}$?",
        "expression": "Permutacje z powtórzeniami: $\\frac{9!}{2! \\cdot 6!}$",
        "explanation": "Mamy $9$ pozycji, $2$ dwójki (nierozróżnialne), $6$ jedynek (nierozróżnialne), $1$ piątkę"
      },
      {
        "step": 8,
        "hint": "Ile wynosi $\\frac{9!}{2! \\cdot 6!}$?",
        "expression": "$\\frac{9!}{2! \\cdot 6!} = \\frac{9 \\cdot 8 \\cdot 7 \\cdot 6!}{2 \\cdot 6!} = \\frac{9 \\cdot 8 \\cdot 7}{2} = \\frac{504}{2} = 252$",
        "explanation": "Obliczamy liczbę permutacji dla drugiego przypadku"
      },
      {
        "step": 9,
        "hint": "Czy wszystkie te permutacje dają liczby dziewięciocyfrowe?",
        "expression": "Wszystkie $72 + 252$ permutacji są poprawne",
        "explanation": "Żadna permutacja nie zaczyna się od zera",
        "interactive_choice": {
          "prompt": "Czy musimy wykluczyć jakieś permutacje?",
          "options": [
            {
              "id": "A",
              "text": "Nie - wszystkie cyfry są różne od zera",
              "feedback": "Dokładnie! Skoro nie ma cyfry $0$, każda permutacja daje liczbę dziewięciocyfrową",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tak - musimy wykluczyć te zaczynające się od $1$",
              "feedback": "Nie - cyfra $1$ na początku też daje liczbę dziewięciocyfrową",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tak - musimy wykluczyć te z cyfrą $0$",
              "feedback": "Nie ma cyfry $0$ w naszych zestawach, więc nie ma co wykluczać",
              "is_correct": false
            }
          ],
          "explanation_after": "Wszystkie nasze cyfry są od $1$ do $9$, więc każda permutacja daje poprawną liczbę dziewięciocyfrową"
        }
      },
      {
        "step": 10,
        "hint": "Jaka jest całkowita liczba liczb dziewięciocyfrowych spełniających warunek?",
        "expression": "$72 + 252 = 324$",
        "explanation": "Sumujemy permutacje z obu przypadków"
      }
    ],
    "solutions": [
      "$324$"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T07:03:43.827Z"
  },
  {
    "id": "divisibility_15_combinatorics",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 4,
    "statement": "Dany jest zbiór składający się z trzech cyfr $\\{1,3,5\\}$. Oblicz, ile liczb naturalnych pięciocyfrowych podzielnych przez $15$ można utworzyć, wybierając tylko cyfry z tego zbioru.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać liczba, aby była podzielna przez $15$?",
        "expression": "Liczba podzielna przez $15 \\Leftrightarrow$ podzielna przez $3$ i przez $5$",
        "explanation": "Rozkładamy warunek na dwa prostsze warunki",
        "why": "To kluczowa obserwacja - zamiast jednego trudnego warunku mamy dwa łatwiejsze do sprawdzenia.",
        "interactive_choice": {
          "prompt": "Liczba podzielna przez $15$ musi być podzielna przez:",
          "options": [
            {
              "id": "A",
              "text": "Przez $3$ i przez $5$ jednocześnie",
              "feedback": "Doskonale! $15 = 3 \\cdot 5$, więc liczba musi spełniać oba warunki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Przez $3$ lub przez $5$",
              "feedback": "Nie - musi być podzielna przez OBA, nie przez jedno z nich.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko przez $15$",
              "feedback": "To prawda, ale nie pomaga - lepiej rozłożyć na czynniki pierwsze.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podzielność przez $15$ oznacza podzielność przez $3$ AND przez $5$. Sprawdzimy oba warunki osobno."
        }
      },
      {
        "step": 2,
        "hint": "Jaki warunek musi spełniać ostatnia cyfra liczby podzielnej przez $5$?",
        "expression": "Ostatnia cyfra musi być $0$ lub $5$",
        "explanation": "Warunek podzielności przez $5$"
      },
      {
        "step": 3,
        "hint": "Która cyfra ze zbioru $\\{1,3,5\\}$ może być ostatnią cyfrą?",
        "expression": "Ostatnia cyfra = $5$ (jedyna możliwość ze zbioru)",
        "explanation": "Ze zbioru $\\{1,3,5\\}$ tylko cyfra $5$ spełnia warunek podzielności przez $5$"
      },
      {
        "step": 4,
        "hint": "Jaki warunek musi spełniać suma cyfr liczby podzielnej przez $3$?",
        "expression": "Suma wszystkich cyfr musi być podzielna przez $3$",
        "explanation": "Warunek podzielności przez 3",
        "why": "Liczba jest podzielna przez 3 wtedy i tylko wtedy, gdy suma jej cyfr jest podzielna przez 3."
      },
      {
        "step": 5,
        "hint": "Ile wynosi suma cyfr w liczbie postaci $\\overline{abcd5}$?",
        "expression": "Suma cyfr = $a + b + c + d + 5$, gdzie $a,b,c,d \\in \\{1,3,5\\}$",
        "explanation": "Ostatnia cyfra to 5, pozostałe cztery cyfry wybieramy ze zbioru"
      },
      {
        "step": 6,
        "hint": "Jakie wartości może przyjąć suma $a + b + c + d$?",
        "expression": "Suma $a+b+c+d$ może wynosić: $4, 6, 8, 10, 12, 14, 16, 18, 20$",
        "explanation": "Wszystkie parzyste wartości od $4$ do $20$",
        "interactive_choice": {
          "prompt": "Jaki jest zakres możliwych wartości sumy $a + b + c + d$?",
          "options": [
            {
              "id": "A",
              "text": "Od $4$ do $20$ (każda cyfra od $1$ do $5$)",
              "feedback": "Nie - cyfry mogą być tylko z $\\{1,3,5\\}$, nie wszystkie od $1$ do $5$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Od $4$ do $20$, ale tylko wartości nieparzyste",
              "feedback": "Świetnie! Minimum: $1+1+1+1=4$, maksimum: $5+5+5+5=20$. Suma nieparzystych jest parzysta lub nieparzysta w zależności od ich liczby.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko wartości nieparzyste od $5$ do $19$",
              "feedback": "Nie - suma czterech liczb nieparzystych jest zawsze parzysta! Np. $1+1+1+1=4$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma czterech liczb nieparzystych jest zawsze parzysta. Minimum to $4$, maksimum to $20$."
        }
      },
      {
        "step": 7,
        "hint": "Dla jakich wartości $a+b+c+d$ suma $a+b+c+d+5$ będzie podzielna przez $3$?",
        "expression": "$a+b+c+d+5 \\equiv 0 \\pmod{3}$, czyli $a+b+c+d \\equiv -5 \\equiv 1 \\pmod{3}$",
        "explanation": "Przekształcamy warunek podzielności"
      },
      {
        "step": 8,
        "hint": "Które z wartości $\\{4,6,8,10,12,14,16,18,20\\}$ dają resztę $1$ przy dzieleniu przez $3$?",
        "expression": "Sprawdzamy reszty: $4 \\equiv 1$, $6 \\equiv 0$, $8 \\equiv 2$, $10 \\equiv 1$, $12 \\equiv 0$, $14 \\equiv 2$, $16 \\equiv 1$, $18 \\equiv 0$, $20 \\equiv 2$",
        "explanation": "Obliczamy reszty z dzielenia przez 3"
      },
      {
        "step": 9,
        "hint": "Jakie sumy $a+b+c+d$ spełniają warunek?",
        "expression": "$a+b+c+d \\in \\{4, 10, 16\\}$",
        "explanation": "Tylko te trzy wartości dają resztę $1$ przy dzieleniu przez $3$"
      },
      {
        "step": 10,
        "hint": "Ile jest sposobów uzyskania sumy $4$ z czterech cyfr ze zbioru $\\{1,3,5\\}$?",
        "expression": "Suma $4$: tylko $(1,1,1,1)$ - jedna kompozycja",
        "explanation": "Jedyny sposób: cztery jedynki",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów uzyskania konkretnej sumy?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie możliwe kombinacje cyfr",
              "feedback": "Możliwe, ale pracochłonne - trzeba systematycznie rozpatrzyć przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Dobry kierunek! Dla każdej kompozycji sumy użyjemy tego wzoru.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Po prostu $3^4 = 81$ możliwości",
              "feedback": "To wszystkie liczby, nie tylko te o konkretnej sumie cyfr.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla każdej sumy znajdziemy kompozycje (rozkłady na składniki), potem policzymy permutacje."
        }
      },
      {
        "step": 11,
        "hint": "Ile permutacji ma ciąg $(1,1,1,1)$?",
        "expression": "Liczba permutacji: $\\frac{4!}{4!} = 1$",
        "explanation": "Wszystkie cyfry identyczne, więc tylko jedna permutacja"
      },
      {
        "step": 12,
        "hint": "Jakie kompozycje dają sumę $10$?",
        "expression": "Suma $10$: $(1,1,3,5)$, $(1,3,3,3)$, $(5,5,0,0)$ - ale $0 \\notin \\{1,3,5\\}$",
        "explanation": "Szukamy wszystkich rozkładów liczby $10$ na cztery składniki z $\\{1,3,5\\}$"
      },
      {
        "step": 13,
        "hint": "Ile permutacji mają ciągi $$(1,1,3,5)$$ i $$(1,3,3,3)$$?",
        "expression": "$(1,1,3,5)$: $\\frac{4!}{2!} = 12$ permutacji; $(1,3,3,3)$: $\\frac{4!}{3!} = 4$ permutacje",
        "explanation": "Używamy wzoru na permutacje z powtórzeniami: $\\frac{n!}{n_1! \\cdot n_2! \\cdot ...}$"
      },
      {
        "step": 14,
        "hint": "Ile łącznie permutacji dla sumy $10$?",
        "expression": "Suma $10$: $12 + 4 = 16$ permutacji",
        "explanation": "Sumujemy permutacje wszystkich kompozycji"
      },
      {
        "step": 15,
        "hint": "Jakie kompozycje dają sumę $16$?",
        "expression": "Suma $16$: $(1,5,5,5)$, $(3,3,5,5)$",
        "explanation": "Rozkłady liczby $16$ na cztery składniki z $\\{1,3,5\\}$"
      },
      {
        "step": 16,
        "hint": "Ile permutacji mają te ciągi?",
        "expression": "$(1,5,5,5)$: $\\frac{4!}{3!} = 4$ permutacje; $(3,3,5,5)$: $\\frac{4!}{2! \\cdot 2!} = 6$ permutacji",
        "explanation": "Obliczamy permutacje z powtórzeniami"
      },
      {
        "step": 17,
        "hint": "Ile łącznie permutacji dla sumy $16$?",
        "expression": "Suma $16$: $4 + 6 = 10$ permutacji",
        "explanation": "Sumujemy permutacje wszystkich kompozycji"
      },
      {
        "step": 18,
        "hint": "Ile jest wszystkich liczb pięciocyfrowych podzielnych przez $15$?",
        "expression": "Łącznie: $1 + 16 + 10 = 27$ liczb",
        "explanation": "Sumujemy liczby dla wszystkich dopuszczalnych sum cyfr: $4$, $10$ i $16$"
      }
    ],
    "solutions": [
      "$27$"
    ],
    "parameters": {
      "digit_set": "$\\{1, 3, 5\\}$",
      "number_length": "$5$ cyfr",
      "divisibility": "przez $15$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 18,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T07:04:38.013Z"
  },
  {
    "id": "combinatorics_divisibility_4",
    "topic": "Kombinatoryka z warunkiem podzielności",
    "difficulty": 4,
    "statement": "Oblicz, ile różnych liczb czterocyfrowych podzielnych przez $4$ można utworzyć z cyfr $1$, $2$, $3$, $4$, $5$, jeżeli cyfry mogą się powtarzać.",
    "steps": [
      {
        "step": 1,
        "hint": "Od czego zależy podzielność liczby przez $4$?",
        "expression": "Liczba $\\overline{abcd}$ jest podzielna przez $4$ $\\Leftrightarrow$ liczba $\\overline{cd}$ jest podzielna przez $4$",
        "explanation": "Ustalamy kryterium podzielności",
        "why": "To kluczowa cecha podzielności przez $4$. Pozwala nam skupić się tylko na dwóch ostatnich cyfrach, a pierwsze dwie mogą być dowolne.",
        "interactive_choice": {
          "prompt": "Która cecha liczby decyduje o jej podzielności przez $4$?",
          "options": [
            {
              "id": "A",
              "text": "Suma wszystkich cyfr musi być podzielna przez $4$",
              "feedback": "Nie - to cecha podzielności przez $3$ i $9$. Dla $4$ liczy się coś innego.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Ostatnia cyfra musi być parzysta",
              "feedback": "To za mało - liczba $14$ ma parzystą ostatnią cyfrę, ale nie dzieli się przez $4$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dwie ostatnie cyfry tworzą liczbę podzielną przez $4$",
              "feedback": "Dokładnie! Liczba jest podzielna przez $4$ wtedy i tylko wtedy, gdy liczba utworzona z dwóch ostatnich cyfr dzieli się przez $4$.",
              "is_correct": true
            }
          ],
          "explanation_after": "Cecha podzielności przez 4: sprawdzamy tylko dwie ostatnie cyfry. Np. $3124$ dzieli się przez $4$, bo $24$ dzieli się przez $4$."
        }
      },
      {
        "step": 2,
        "hint": "Jakie dwucyfrowe liczby można utworzyć z cyfr $1$, $2$, $3$, $4$, $5$?",
        "expression": "Cyfry: $1$, $2$, $3$, $4$, $5$. Dwucyfrowe liczby: $11$, $12$, $13$, ..., $54$, $55$",
        "explanation": "Mamy $5$ możliwości na pierwszą cyfrę i $5$ na drugą, czyli $5 \\cdot 5 = 25$ liczb dwucyfrowych"
      },
      {
        "step": 3,
        "hint": "Które z tych liczb dwucyfrowych dzielą się przez $4$?",
        "expression": "Ostatnia cyfra: $2$ lub $4$ (parzysta). Sprawdzamy: $12$, $22$, $32$, $42$, $52$, $14$, $24$, $34$, $44$, $54$",
        "explanation": "Zawężamy do liczb z parzystą ostatnią cyfrą",
        "interactive_choice": {
          "prompt": "Jak najefektywniej znaleźć wszystkie dwucyfrowe liczby z cyfr $1$, $2$, $3$, $4$, $5$ podzielne przez $4$?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić wszystkie $25$ możliwości dzieląc przez $4$",
              "feedback": "Możliwe, ale pracochłonne. Można mądrzej wykorzystać cechy podzielności.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać tylko te z parzystą ostatnią cyfrą ($2$ lub $4$)",
              "feedback": "Dobry początek! To zawęża do $10$ liczb. Teraz trzeba sprawdzić które z nich dzielą się przez $4$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wziąć tylko liczby z cyfrą $4$",
              "feedback": "Nie - obecność cyfry $4$ nie gwarantuje podzielności przez $4$. Np. $14$ nie dzieli się przez $4$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najlepiej zawęzić do parzystych ostatnich cyfr $2$, $4$, a potem sprawdzić podzielność."
        }
      },
      {
        "step": 4,
        "hint": "Które z liczb $12$, $22$, $32$, $42$, $52$, $14$, $24$, $34$, $44$, $54$ dzielą się przez $4$?",
        "expression": "$12 \\div 4 = 3$ ✓, $22 \\div 4 = 5.5$ ✗, $32 \\div 4 = 8$ ✓, $42 \\div 4 = 10.5$ ✗, $52 \\div 4 = 13$ ✓",
        "explanation": "Sprawdzamy liczby kończące się na $2$"
      },
      {
        "step": 5,
        "hint": "A które z liczb kończących się na $4$?",
        "expression": "$14 \\div 4 = 3.5$ ✗, $24 \\div 4 = 6$ ✓, $34 \\div 4 = 8.5$ ✗, $44 \\div 4 = 11$ ✓, $54 \\div 4 = 13.5$ ✗",
        "explanation": "Sprawdzamy liczby kończące się na $4$"
      },
      {
        "step": 6,
        "hint": "Ile jest liczb dwucyfrowych podzielnych przez $4$?",
        "expression": "Podzielne przez 4: $12$, $24$, $32$, $44$, $52$. Razem: $5$ liczb",
        "explanation": "Mamy $5$ możliwości na dwie ostatnie cyfry liczby czterocyfrowej",
        "why": "Te $5$ par cyfr to jedyne możliwości zakończenia naszej liczby czterocyfrowej, aby była podzielna przez $4$."
      },
      {
        "step": 7,
        "hint": "Jak teraz policzyć wszystkie liczby czterocyfrowe?",
        "expression": "Pierwsza cyfra: $5$ możliwości, druga cyfra: $5$ możliwości, ostatnie dwie: $5$ par",
        "explanation": "Rozbijamy problem na niezależne wybory",
        "interactive_choice": {
          "prompt": "Mamy ustalone 5 możliwości na dwie ostatnie cyfry. Jak policzyć wszystkie liczby czterocyfrowe?",
          "options": [
            {
              "id": "A",
              "text": "Dla każdej z $5$ par ostatnich cyfr, pierwsze dwie mogą być dowolne",
              "feedback": "Świetnie! Pierwsze dwie cyfry wybieramy niezależnie - każda może być $1$, $2$, $3$, $4$ lub $5$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pomnożyć $5$ możliwości przez $4$ (bo czterocyfrowa)",
              "feedback": "Nie - cyfry mogą się powtarzać, więc każda pozycja ma $5$ możliwości, nie $4$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dodać do siebie wszystkie możliwe kombinacje",
              "feedback": "Nie trzeba - użyjemy reguły mnożenia, bo wybory są niezależne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła mnożenia: pierwsze dwie cyfry wybieramy niezależnie (po $5$ możliwości każda), ostatnie dwie mają $5$ ustalonych par."
        }
      },
      {
        "step": 8,
        "hint": "Ile wynosi iloczyn wszystkich możliwości?",
        "expression": "$5 \\cdot 5 \\cdot 5 = 125$",
        "explanation": "Mnożymy liczbę możliwości dla każdej pozycji",
        "why": "Używamy reguły mnożenia w kombinatoryce: gdy mamy niezależne wybory, mnożymy liczby możliwości."
      },
      {
        "step": 9,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $125$ różnych liczb czterocyfrowych podzielnych przez $4$",
        "explanation": "Otrzymujemy końcowy wynik"
      }
    ],
    "solutions": [
      "$125$"
    ],
    "parameters": {
      "cyfry": "$1$, $2$, $3$, $4$, $5$",
      "warunek": "cyfry mogą się powtarzać",
      "podzielnosc": "przez $4$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T07:05:21.741Z"
  },
  {
    "id": "combinatorics_divisibility_by_4",
    "topic": "Kombinatoryka z warunkami podzielności",
    "difficulty": 5,
    "statement": "Oblicz, ile jest liczb ośmiocyfrowych podzielnych przez $4$ o niepowtarzających się cyfrach należących do zbioru $\\{0,1,3,4,5,6,7,9\\}$.",
    "steps": [
      {
        "step": 1,
        "hint": "Od czego zależy podzielność liczby przez $4$?",
        "expression": "Liczba podzielna przez 4 $\\Leftrightarrow$ ostatnie dwie cyfry tworzą liczbę podzielną przez 4",
        "explanation": "Stosujemy kryterium podzielności przez $4$",
        "why": "To kluczowe kryterium pozwala nam skupić się tylko na dwóch ostatnich cyfrach zamiast analizować całą liczbę ośmiocyfrową.\n\n(No mathematical expressions were found in this text, so no changes were made.)",
        "interactive_choice": {
          "prompt": "Jak sprawdzić czy liczba jest podzielna przez 4?",
          "options": [
            {
              "id": "A",
              "text": "Suma wszystkich cyfr musi być podzielna przez $4$",
              "feedback": "Nie - to kryterium dla podzielności przez $3$ lub $9$, nie przez $4$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Ostatnie dwie cyfry muszą tworzyć liczbę podzielną przez $4$",
              "feedback": "Dokładnie! Podzielność przez $4$ zależy tylko od dwóch ostatnich cyfr",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Ostatnia cyfra musi być parzysta",
              "feedback": "To za mało - to kryterium dla podzielności przez $2$, nie przez $4$",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba jest podzielna przez $4$ wtedy i tylko wtedy, gdy liczba utworzona z dwóch ostatnich cyfr jest podzielna przez $4$."
        }
      },
      {
        "step": 2,
        "hint": "Które cyfry ze zbioru $\\{0,1,3,4,5,6,7,9\\}$ są parzyste?",
        "expression": "Cyfry parzyste: $\\{0, 4, 6\\}$",
        "explanation": "Ostatnia cyfra musi być parzysta (warunek konieczny dla podzielności przez $4$)"
      },
      {
        "step": 3,
        "hint": "Jakie dwucyfrowe liczby z naszych cyfr są podzielne przez $4$?",
        "expression": "Sprawdzamy wszystkie możliwe zakończenia: $04$, $16$, $36$, $40$, $56$, $60$, $64$, $76$, $96$",
        "explanation": "Systematycznie sprawdzamy pary cyfr gdzie ostatnia jest parzysta",
        "why": "Musimy znaleźć wszystkie możliwe zakończenia liczby. Sprawdzamy: czy $10a + b$ jest podzielne przez $4$ dla $a \\in \\{0,1,3,4,5,6,7,9\\}$ i $b \\in \\{0,4,6\\}$."
      },
      {
        "step": 4,
        "hint": "Ile mamy możliwych zakończeń spełniających warunek podzielności?",
        "expression": "Mamy 9 par cyfr: $(0,4), (1,6), (3,6), (4,0), (5,6), (6,0), (6,4), (7,6), (9,6)$",
        "explanation": "Każda para to możliwe zakończenie naszej liczby ośmiocyfrowej"
      },
      {
        "step": 5,
        "hint": "Jak podejść do liczenia pozostałych 6 cyfr?",
        "expression": "Dla każdej pary $(a,b)$ liczymy permutacje $6$ pozostałych cyfr z warunkiem: pierwsza $\\neq 0$",
        "explanation": "Ustalamy strategię: dla każdej z $9$ par osobno policzymy możliwości",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć liczby ośmiocyfrowe z ustalonymi dwoma ostatnimi cyframi?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć osobno przypadki gdy pierwsza cyfra to $0$ i gdy nie jest zerem",
              "feedback": "Świetnie! Pierwsza cyfra nie może być zerem, więc musimy to uwzględnić",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Po prostu pomnożyć $6! \\cdot 9$ (6 pozostałych pozycji razy 9 par)",
              "feedback": "Nie - zapominasz że pierwsza cyfra nie może być zerem!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - cyfry się nie powtarzają, a problem jest w zerze na pierwszej pozycji",
              "is_correct": false
            }
          ],
          "explanation_after": "Kluczowy problem: liczba ośmiocyfrowa nie może zaczynać się od zera. Musimy rozpatrzyć przypadki."
        }
      },
      {
        "step": 6,
        "hint": "Jak podzielić $9$ par na przypadki ze względu na obecność zera?",
        "expression": "Przypadek 1: pary z zerem: $(0,4), (4,0), (6,0)$ - $3$ pary\nPrzypadek 2: pary bez zera: $(1,6), (3,6), (5,6), (6,4), (7,6), (9,6)$ - $6$ par",
        "explanation": "Dzielimy na dwa przypadki ze względu na obecność zera w parze",
        "interactive_choice": {
          "prompt": "Jak najlepiej pogrupować $9$ par zakończeń?",
          "options": [
            {
              "id": "A",
              "text": "Pary zawierające zero: $(0,4), (4,0), (6,0)$ i pozostałe bez zera",
              "feedback": "Doskonale! Gdy zero jest w parze, nie może być na pierwszej pozycji",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pary z cyfrą $6$ i pary bez cyfry $6$",
              "feedback": "To nie jest istotny podział - problem dotyczy zera, nie szóstki",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie pary traktować jednakowo",
              "feedback": "Nie można - pary z zerem wymagają specjalnego traktowania",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział ze względu na zero jest kluczowy, bo $0$ nie może być pierwszą cyfrą."
        }
      },
      {
        "step": 7,
        "hint": "Ile cyfr pozostaje do wykorzystania gdy para zawiera zero?",
        "expression": "Gdy para zawiera $0$: pozostaje $6$ cyfr do rozmieszczenia na $6$ pozycjach",
        "explanation": "Z $8$ cyfr użyliśmy $2$ (w parze), zostaje $6$ cyfr"
      },
      {
        "step": 8,
        "hint": "Ile sposobów rozmieszczenia $6$ cyfr na $6$ pozycjach gdy zero jest już użyte?",
        "expression": "Dla par z zerem: $6! = 720$ permutacji",
        "explanation": "Wszystkie $6$ cyfr są niezerowe, więc dowolna może być pierwsza",
        "why": "Gdy zero jest już w parze końcowej, nie musimy się martwić o pierwszą pozycję - wszystkie pozostałe cyfry są niezerowe."
      },
      {
        "step": 9,
        "hint": "Ile liczb dają 3 pary zawierające $0$?",
        "expression": "$3 \\cdot 720 = 2160$",
        "explanation": "Mnożymy liczbę par $(3)$ przez liczbę permutacji dla każdej pary $(720)$"
      },
      {
        "step": 10,
        "hint": "Co się zmienia dla par bez zera?",
        "expression": "Gdy para nie zawiera $0$: zero jest wśród $6$ pozostałych cyfr i nie może być pierwsze",
        "explanation": "Teraz zero jest dostępne do użycia, ale nie na pierwszej pozycji"
      },
      {
        "step": 11,
        "hint": "Jak policzyć permutacje $6$ cyfr gdy jedna z nich to $0$ i nie może być pierwsza?",
        "expression": "Pierwsza pozycja: $5$ wyborów (bez zera)\nPozostałe 5 pozycji: $5!$ permutacji pozostałych cyfr",
        "explanation": "Wybieramy niezerową cyfrę na początek, resztę permutujemy"
      },
      {
        "step": 12,
        "hint": "Ile to daje permutacji dla jednej pary bez zera?",
        "expression": "$5 \\cdot 5! = 5 \\cdot 120 = 600$",
        "explanation": "Dla każdej pary bez zera mamy $600$ możliwych liczb"
      },
      {
        "step": 13,
        "hint": "Ile liczb dają $6$ par bez zera?",
        "expression": "$6 \\cdot 600 = 3600$",
        "explanation": "Mnożymy liczbę par $6$ przez liczbę permutacji dla każdej pary $600$"
      },
      {
        "step": 14,
        "hint": "Jaka jest całkowita liczba liczb ośmiocyfrowych spełniających warunki?",
        "expression": "$2160 + 3600 = 5760$",
        "explanation": "Sumujemy oba przypadki: pary z zerem i pary bez zera"
      }
    ],
    "solutions": [
      "$5760$"
    ],
    "parameters": {
      "digit_set": "$\\{0,1,3,4,5,6,7,9\\}$",
      "number_length": "$8$ cyfr",
      "condition": "podzielność przez $4$, cyfry się nie powtarzają"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 14,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:06:16.209Z"
  },
  {
    "id": "six_digit_divisible_25",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb sześciocyfrowych podzielnych przez $25$ o różnych cyfrach.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać liczba sześciocyfrowa podzielna przez $25$?",
        "expression": "Liczba sześciocyfrowa: $\\overline{abcdef}$ gdzie $a \\neq 0$ i wszystkie cyfry różne. Podzielność przez 25: $\\overline{ef} \\in \\{00, 25, 50, 75\\}$",
        "explanation": "Identyfikujemy warunki: liczba sześciocyfrowa (pierwsza cyfra $\\neq 0$), różne cyfry, końcówka podzielna przez $25$",
        "why": "Podzielność przez $25$ zależy tylko od dwóch ostatnich cyfr. To kluczowe - możemy rozpatrywać przypadki dla końcówek.",
        "interactive_choice": {
          "prompt": "Co decyduje o podzielności liczby przez $25$?",
          "options": [
            {
              "id": "A",
              "text": "Suma wszystkich cyfr musi być podzielna przez $25$",
              "feedback": "Nie - to kryterium dla podzielności przez $3$ lub $9$, nie przez $25$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dwie ostatnie cyfry muszą tworzyć liczbę podzielną przez $25$",
              "feedback": "Dokładnie! Liczba jest podzielna przez $25$ wtedy i tylko wtedy, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez $25$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Ostatnia cyfra musi być $5$",
              "feedback": "To za mało - liczby kończące się na $05$, $15$, $35$, $45$, $55$, $65$, $85$, $95$ nie są podzielne przez $25$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Kryterium podzielności przez $25$: dwie ostatnie cyfry muszą tworzyć $00$, $25$, $50$ lub $75$."
        }
      },
      {
        "step": 2,
        "hint": "Które końcówki możemy użyć przy warunku różnych cyfr?",
        "expression": "Możliwe końcówki: $\\overline{ef} \\in \\{25, 50, 75\\}$",
        "explanation": "Eliminujemy $00$ ze względu na warunek różnych cyfr",
        "interactive_choice": {
          "prompt": "Która końcówka NIE spełnia warunku różnych cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Końcówka $00$",
              "feedback": "Świetnie zauważone! W $00$ obie cyfry są takie same, więc nie możemy jej użyć.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Końcówka $25$",
              "feedback": "Ta końcówka jest OK - cyfry $2$ i $5$ są różne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Końcówka $50$",
              "feedback": "Ta końcówka jest OK - cyfry $5$ i $0$ są różne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Końcówka $00$ odpada, zostają nam trzy przypadki: $25$, $50$, $75$."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do liczenia - osobno dla każdej końcówki czy razem?",
        "expression": "Przypadek 1: końcówka $25$, Przypadek 2: końcówka $50$, Przypadek 3: końcówka $75$",
        "explanation": "Dzielimy problem na trzy niezależne przypadki",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć wszystkie liczby?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć każdą końcówkę osobno i zsumować wyniki",
              "feedback": "Doskonale! Każda końcówka daje inne ograniczenia na pozostałe cyfry.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie naraz mnożąc przez $3$ końcówki",
              "feedback": "Nie - każda końcówka ma inne cyfry zajęte, więc trzeba liczyć osobno.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - cyfry są różne, więc nie ma powtórzeń. Poza tym końcówki są ustalone.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozpatrujemy trzy przypadki osobno, bo każda końcówka 'zajmuje' inne cyfry."
        }
      },
      {
        "step": 4,
        "hint": "Ile liczb możemy utworzyć z końcówką $25$?",
        "expression": "Końcówka 25: cyfry $2$ i $5$ zajęte. Pozostałe cyfry: $\\{0, 1, 3, 4, 6, 7, 8, 9\\}$ - $8$ cyfr",
        "explanation": "Dla końcówki 25 musimy wybrać 4 cyfry z 8 pozostałych na pozycje $abcd$"
      },
      {
        "step": 5,
        "hint": "Czy pierwsza cyfra może być zerem?",
        "expression": "Pierwsza cyfra $a$: $7$ możliwości (nie może być $0$, $2$, $5$). Druga cyfra $b$: $7$ możliwości (z $8$ pozostałych minus wybrana na $a$). Trzecia cyfra $c$: $6$ możliwości. Czwarta cyfra $d$: $5$ możliwości",
        "explanation": "Liczymy pozycje od lewej: $a$ nie może być $0$, kolejne cyfry wybieramy z malejącej puli",
        "why": "Pierwsza cyfra ma specjalne ograniczenie (nie może być $0$). Każda kolejna cyfra ma o jedną możliwość mniej."
      },
      {
        "step": 6,
        "hint": "Ile liczb daje końcówka $25$?",
        "expression": "$7 \\times 7 \\times 6 \\times 5 = 1470$",
        "explanation": "Dla końcówki $25$ mamy $1470$ liczb"
      },
      {
        "step": 7,
        "hint": "Ile liczb możemy utworzyć z końcówką $50$?",
        "expression": "Końcówka 50: cyfry $5$ i $0$ zajęte. Pozostałe cyfry: $\\{1, 2, 3, 4, 6, 7, 8, 9\\}$ - $8$ cyfr",
        "explanation": "Dla końcówki $50$ musimy wybrać $4$ cyfry z $8$ pozostałych"
      },
      {
        "step": 8,
        "hint": "Czy tutaj też pierwsza cyfra ma ograniczenie?",
        "expression": "Pierwsza cyfra $a$: $8$ możliwości (wszystkie z $\\{1, 2, 3, 4, 6, 7, 8, 9\\}$, bo $0$ już zajęte). Druga cyfra $b$: $7$ możliwości. Trzecia cyfra $c$: $6$ możliwości. Czwarta cyfra $d$: $5$ możliwości",
        "explanation": "Tutaj $0$ jest już zajęte w końcówce, więc $a$ może być dowolną z $8$ pozostałych cyfr"
      },
      {
        "step": 9,
        "hint": "Ile liczb daje końcówka $50$?",
        "expression": "$8 \\times 7 \\times 6 \\times 5 = 1680$",
        "explanation": "Dla końcówki $50$ mamy $1680$ liczb"
      },
      {
        "step": 10,
        "hint": "Ile liczb możemy utworzyć z końcówką $75$?",
        "expression": "Końcówka 75: cyfry $7$ i $5$ zajęte. Pozostałe cyfry: $\\{0, 1, 2, 3, 4, 6, 8, 9\\}$ - $8$ cyfr",
        "explanation": "Dla końcówki $75$ musimy wybrać $4$ cyfry z $8$ pozostałych"
      },
      {
        "step": 11,
        "hint": "Jak policzyć dla końcówki $75$?",
        "expression": "Pierwsza cyfra $a$: $7$ możliwości (nie może być $0$, $7$, $5$). Druga cyfra $b$: $7$ możliwości. Trzecia cyfra $c$: $6$ możliwości. Czwarta cyfra $d$: $5$ możliwości",
        "explanation": "Podobnie jak dla $25$ - pierwsza cyfra nie może być $0$"
      },
      {
        "step": 12,
        "hint": "Ile liczb daje końcówka 75?",
        "expression": "$7 \\times 7 \\times 6 \\times 5 = 1470$",
        "explanation": "Dla końcówki $75$ mamy $1470$ liczb"
      },
      {
        "step": 13,
        "hint": "Jak otrzymać całkowitą liczbę szukanych liczb?",
        "expression": "$1470 + 1680 + 1470 = 4620$",
        "explanation": "Sumujemy wyniki ze wszystkich trzech przypadków"
      }
    ],
    "solutions": [
      "$4620$"
    ],
    "parameters": {
      "note": "Liczby sześciocyfrowe o różnych cyfrach podzielne przez $25$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:07:09.354Z"
  },
  {
    "id": "eight_digit_arithmetic_sequence",
    "topic": "Kombinatoryka - ciągi arytmetyczne i permutacje",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb ośmiocyfrowych o różnych cyfrach, w których trzy pierwsze cyfry tworzą ciąg arytmetyczny o różnicy równej $3$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać liczba ośmiocyfrowa?",
        "expression": "Liczba ma $8$ cyfr, wszystkie różne, pierwsza cyfra $\\neq 0$",
        "explanation": "Ustalamy podstawowe ograniczenia dla liczby ośmiocyfrowej",
        "why": "W liczbie ośmiocyfrowej pierwsza cyfra nie może być zerem (bo wtedy byłaby to liczba siedmiocyfrowa). Dodatkowo wszystkie cyfry muszą być różne."
      },
      {
        "step": 2,
        "hint": "Co oznacza, że trzy pierwsze cyfry tworzą ciąg arytmetyczny o różnicy $3$?",
        "expression": "Jeśli oznaczmy cyfry jako $a$, $b$, $c$, to $b = a + 3$ oraz $c = a + 6$",
        "explanation": "W ciągu arytmetycznym każdy kolejny wyraz powstaje przez dodanie różnicy do poprzedniego"
      },
      {
        "step": 3,
        "hint": "Jakie wartości może przyjąć pierwsza cyfra $a$?",
        "expression": "$a \\in \\{1, 2, 3\\}$",
        "explanation": "Mamy $3$ możliwe wartości dla pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Jakie ograniczenia ma pierwsza cyfra $a$ ciągu arytmetycznego?",
          "options": [
            {
              "id": "A",
              "text": "$a \\in \\{1, 2, 3\\}$ - bo $a \\neq 0$ i $a + 6 \\leq 9$",
              "feedback": "Doskonale! Musimy zapewnić że $a \\geq 1$ (pierwsza cyfra) i $a + 6 \\leq 9$ (trzecia cyfra to cyfra)",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$a \\in \\{0, 1, 2, 3\\}$ - bo $a + 6 \\leq 9$",
              "feedback": "Nie - zapominasz że pierwsza cyfra liczby nie może być zerem!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$a \\in \\{1, 2, 3, 4, 5, 6\\}$ - bo $a \\neq 0$",
              "feedback": "Nie - dla $a \\geq 4$ trzecia cyfra $c = a + 6$ przekroczyłaby $9$",
              "is_correct": false
            }
          ],
          "explanation_after": "Pierwsza cyfra musi być $\\geq 1$ (liczba ośmiocyfrowa) i $\\leq 3$ (żeby $a + 6 \\leq 9$)"
        }
      },
      {
        "step": 4,
        "hint": "Jakie trójki cyfr otrzymujemy dla każdego $a$?",
        "expression": "Dla $a=1$: $(1,4,7)$, dla $a=2$: $(2,5,8)$, dla $a=3$: $(3,6,9)$",
        "explanation": "Każda wartość $a$ wyznacza jednoznacznie trójkę pierwszych cyfr"
      },
      {
        "step": 5,
        "hint": "Ile cyfr zostało do wykorzystania na pozostałe $5$ pozycji?",
        "expression": "Pozostało $7$ cyfr na $5$ pozycji",
        "explanation": "Z $10$ cyfr wykorzystaliśmy $3$, zostało $7$ cyfr",
        "interactive_choice": {
          "prompt": "Ile cyfr mamy do wyboru na pozycje $4$-$8$?",
          "options": [
            {
              "id": "A",
              "text": "7 cyfr - bo użyliśmy już $3$ cyfry",
              "feedback": "Dokładnie! Z $10$ cyfr $(0-9)$ wykorzystaliśmy $3$, zostało $7$ różnych cyfr",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "6 cyfr - bo nie możemy użyć zera",
              "feedback": "Nie - zero możemy użyć na pozycjach $4$-$8$, tylko nie na pierwszej!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "5 cyfr - bo mamy $5$ pozostałych pozycji",
              "feedback": "Mylisz liczbę pozycji z liczbą dostępnych cyfr. Mamy $7$ cyfr na $5$ pozycji",
              "is_correct": false
            }
          ],
          "explanation_after": "Po ustaleniu $3$ pierwszych cyfr, zostaje nam $7$ cyfr do rozmieszczenia na $5$ pozostałych pozycjach"
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć liczbę sposobów ustawienia $7$ cyfr na $5$ pozycjach?",
        "expression": "$P(7,5) = \\frac{7!}{(7-5)!} = \\frac{7!}{2!}$",
        "explanation": "Permutacje $5$-elementowe ze zbioru $7$-elementowego",
        "why": "Permutacje $P(n,k)$ liczą sposoby wyboru i ustawienia $k$ elementów z $n$ elementów, gdy kolejność ma znaczenie",
        "interactive_choice": {
          "prompt": "Którą formułę zastosować do wyboru i ustawienia $5$ cyfr z $7$?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $P(7,5) = \\frac{7!}{(7-5)!}$",
              "feedback": "Świetnie! Wybieramy $5$ z $7$ cyfr i kolejność ma znaczenie - to permutacje",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Kombinacje: $C(7,5) = \\frac{7!}{5! \\cdot 2!}$",
              "feedback": "Nie - kombinacje ignorują kolejność, a tu kolejność cyfr ma znaczenie!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Po prostu: $7^5$",
              "feedback": "Nie - cyfry muszą być różne, więc nie możemy powtarzać wyborów",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy permutacji bez powtórzeń, bo kolejność ma znaczenie i cyfry są różne"
        }
      },
      {
        "step": 7,
        "hint": "Ile wynosi $P(7,5)$?",
        "expression": "$P(7,5) = 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 = 2520$",
        "explanation": "Obliczamy iloczyn kolejnych liczb: na pierwszą pozycję $7$ możliwości, na drugą $6$, itd."
      },
      {
        "step": 8,
        "hint": "Jak połączyć liczbę możliwości dla pierwszych trzech cyfr z pozostałymi pięcioma?",
        "expression": "Całkowita liczba = $3 \\cdot 2520 = 7560$",
        "explanation": "Mnożymy liczbę możliwości dla trójki początkowej $3$ przez liczbę możliwości dla pozostałych cyfr $2520$",
        "why": "Stosujemy regułę mnożenia: dla każdej z $3$ trójek początkowych mamy $2520$ sposobów uzupełnienia pozostałych cyfr"
      }
    ],
    "solutions": [
      "$7560$"
    ],
    "parameters": {
      "digit_count": 8,
      "arithmetic_difference": 3,
      "distinct_digits": true
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:07:48.584Z"
  },
  {
    "id": "geometric_sequence_digits",
    "topic": "Kombinatoryka - ciągi geometryczne w liczbach",
    "difficulty": 5,
    "statement": "Oblicz, ile jest wszystkich liczb dziesięciocyfrowych o różnych cyfrach, w których zapisie pierwsze trzy cyfry tworzą rosnący ciąg geometryczny.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać liczba dziesięciocyfrowa?",
        "expression": "Liczba ma $10$ cyfr, wszystkie różne, pierwsza cyfra $\\neq 0$",
        "explanation": "Ustalamy podstawowe ograniczenia dla liczby dziesięciocyfrowej",
        "why": "Liczba dziesięciocyfrowa używa wszystkich cyfr $0$-$9$ dokładnie raz (bo ma być $10$ różnych cyfr). Pierwsza cyfra nie może być zerem."
      },
      {
        "step": 2,
        "hint": "Co oznacza, że trzy cyfry tworzą rosnący ciąg geometryczny?",
        "expression": "Szukamy cyfr $a$, $b$, $c$ gdzie $1 \\leq a < b < c \\leq 9$ oraz $b^2 = ac$",
        "explanation": "Pierwsza cyfra $a \\geq 1$ (nie może być $0$), wszystkie różne i rosnące",
        "interactive_choice": {
          "prompt": "Jakie warunki muszą spełniać pierwsze trzy cyfry $a$, $b$, $c$ tworzące rosnący ciąg geometryczny?",
          "options": [
            {
              "id": "A",
              "text": "$a < b < c$ oraz $\\frac{b}{a} = \\frac{c}{b}$ (czyli $b^2 = ac$)",
              "feedback": "Doskonale! To definicja rosnącego ciągu geometrycznego - stały iloraz i rosnące wartości.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko $b^2 = ac$, bez warunku rosnięcia",
              "feedback": "Nie - warunek 'rosnący' jest kluczowy! Musimy mieć $a < b < c$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$a + c = 2b$ (ciąg arytmetyczny)",
              "feedback": "To warunek dla ciągu arytmetycznego, nie geometrycznego!",
              "is_correct": false
            }
          ],
          "explanation_after": "Ciąg geometryczny ma stały iloraz: $q = \\frac{b}{a} = \\frac{c}{b}$, co daje $b^2 = ac$. Warunek rosnący oznacza $a < b < c$."
        }
      },
      {
        "step": 3,
        "hint": "Jak systematycznie znaleźć wszystkie trójki cyfr spełniające $b^2 = ac$?",
        "expression": "Dla każdego $b \\in \\{2,3,4,5,6,7,8,9\\}$ szukamy $a,c$ takich że $ac = b^2$",
        "explanation": "Systematyczne przeszukiwanie - $b$ musi być $\\geq 2$ (bo $a \\geq 1$ i $a < b$)",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do znalezienia wszystkich trójek $$(a,b,c)$$?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić wszystkie możliwe trójki cyfr (brute force)",
              "feedback": "Możliwe, ale nieefektywne - to $84$ trójki do sprawdzenia!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dla każdego $b$ znaleźć pary $(a,c)$ takie że $ac = b^2$",
              "feedback": "Świetnie! To systematyczne - dla każdego $b$ szukamy dzielników $b^2$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na $n$-ty wyraz ciągu geometrycznego",
              "feedback": "To nie pomoże - nie znamy ani pierwszego wyrazu ani ilorazu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najefektywniej: dla $b = 2, 3, ..., 9$ szukamy par $(a,c)$ gdzie $a$ dzieli $b^2$ i $a < b < c \\leq 9$."
        }
      },
      {
        "step": 4,
        "hint": "Jakie trójki otrzymamy sprawdzając kolejne wartości $b$?",
        "expression": "$b=2$: $ac=4$ daje $(1,2,4)$\n$b=3$: $ac=9$ daje $(1,3,9)$\n$b=4$: $ac=16$ daje $(2,4,8)$\n$b=6$: $ac=36$ daje $(4,6,9)$",
        "explanation": "Sprawdzamy $b = 2,3,4,5,6,7,8,9$ i znajdujemy $4$ trójki spełniające wszystkie warunki",
        "why": "Dla $b=5,7,8,9$ nie ma odpowiednich par $(a,c)$ spełniających $a < b < c \\leq 9$ oraz $ac=b^2$. Na przykład dla $b=5$: $ac=25$ wymaga $a=5, c=5$ (nie różne) lub wykracza poza cyfry."
      },
      {
        "step": 5,
        "hint": "Ile mamy możliwych początków liczby (pierwszych trzech cyfr)?",
        "expression": "Mamy dokładnie $4$ możliwe trójki: $(1,2,4)$, $(1,3,9)$, $(2,4,8)$, $(4,6,9)$",
        "explanation": "To wszystkie rosnące ciągi geometryczne z cyfr"
      },
      {
        "step": 6,
        "hint": "Po ustaleniu pierwszych trzech cyfr, ile cyfr pozostało do rozmieszczenia?",
        "expression": "Pozostałe $7$ cyfr rozmieszczamy na pozycjach $4$, $5$, $6$, $7$, $8$, $9$, $10$",
        "explanation": "Dla każdej z $4$ trójek musimy ułożyć pozostałe $7$ cyfr",
        "interactive_choice": {
          "prompt": "Ile cyfr i na ilu pozycjach musimy jeszcze rozmieścić?",
          "options": [
            {
              "id": "A",
              "text": "$7$ cyfr na $7$ pozycjach",
              "feedback": "Dokładnie! Użyliśmy $3$ z $10$ cyfr, zostało $7$ cyfr na $7$ pozostałych pozycjach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$7$ cyfr na $10$ pozycjach",
              "feedback": "Nie - pozycje $1$, $2$, $3$ są już zajęte przez ciąg geometryczny!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$10$ cyfr na $7$ pozycjach",
              "feedback": "Nie - mamy tylko $7$ niewykorzystanych cyfr ($10$ minus $3$ użyte).",
              "is_correct": false
            }
          ],
          "explanation_after": "Po wyborze $3$ cyfr na początku, pozostaje $7$ cyfr do rozmieszczenia na pozycjach $4$-$10$."
        }
      },
      {
        "step": 7,
        "hint": "Na ile sposobów można ustawić $7$ różnych cyfr na $7$ pozycjach?",
        "expression": "Liczba permutacji $7$ cyfr: $7!$",
        "explanation": "To standardowa permutacja bez powtórzeń"
      },
      {
        "step": 8,
        "hint": "Ile wynosi $7!$?",
        "expression": "$7! = 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 5040$",
        "explanation": "Obliczamy silnię"
      },
      {
        "step": 9,
        "hint": "Jak obliczyć całkowitą liczbę liczb dziesięciocyfrowych?",
        "expression": "Liczba liczb = (liczba trójek) $\\times$ (permutacje pozostałych cyfr) = $4 \\times 5040$",
        "explanation": "Dla każdej z $4$ trójek mamy $5040$ sposobów ułożenia reszty",
        "why": "Stosujemy regułę mnożenia: wybieramy jedną z $4$ trójek (niezależnie), a potem dla każdej permutujemy $7$ pozostałych cyfr."
      },
      {
        "step": 10,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$4 \\times 5040 = 20160$",
        "explanation": "Otrzymujemy ostateczną odpowiedź"
      }
    ],
    "solutions": [
      "$20160$"
    ],
    "parameters": {
      "geometric_triples": "$(1,2,4)$, $(1,3,9)$, $(2,4,8)$, $(4,6,9)$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:08:30.666Z"
  },
  {
    "id": "permutation_digit_sum",
    "topic": "Kombinatoryka - permutacje i sumy",
    "difficulty": 4,
    "statement": "Oblicz, ile wynosi suma wszystkich liczb otrzymanych przez przestawienie cyfr liczby $123567$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych liczb możemy utworzyć przestawiając cyfry $1$, $2$, $3$, $5$, $6$, $7$?",
        "expression": "Liczba permutacji $6$ różnych cyfr: $6! = 720$",
        "explanation": "Mamy $6$ różnych cyfr, więc liczba wszystkich permutacji to $6! = 720$",
        "why": "Każda permutacja daje inną $6$-cyfrową liczbę. To podstawa do obliczenia sumy."
      },
      {
        "step": 2,
        "hint": "Jak podejść do obliczenia sumy wszystkich tych $720$ liczb?",
        "expression": "Analizujemy ile razy każda cyfra pojawia się na danej pozycji",
        "explanation": "Wykorzystamy fakt, że permutacje są symetryczne względem pozycji",
        "interactive_choice": {
          "prompt": "Jaka strategia będzie najefektywniejsza do obliczenia sumy?",
          "options": [
            {
              "id": "A",
              "text": "Wypisać wszystkie $720$ liczb i je zsumować",
              "feedback": "To byłoby bardzo pracochłonne i podatne na błędy. Szukamy mądrzejszego sposobu!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Policzyć ile razy każda cyfra występuje na każdej pozycji",
              "feedback": "Świetnie! To kluczowa obserwacja - wykorzystamy symetrię permutacji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć średnią liczbę i pomnożyć przez $720$",
              "feedback": "Ciekawy pomysł, ale trudno obliczyć średnią bez znajomości sumy. Metoda B jest lepsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzięki symetrii permutacji każda cyfra występuje równie często na każdej pozycji."
        }
      },
      {
        "step": 3,
        "hint": "Ile razy cyfra $1$ występuje na pozycji setek tysięcy?",
        "expression": "Cyfra 1 na pierwszej pozycji: pozostałe 5 cyfr można ustawić na $5! = 120$ sposobów",
        "explanation": "Gdy ustalamy cyfrę na jednej pozycji, pozostałe $5$ cyfr permutujemy",
        "why": "To kluczowa obserwacja: każda z 6 cyfr występuje na każdej pozycji dokładnie $\\frac{720}{6} = 120$ razy."
      },
      {
        "step": 4,
        "hint": "Czy inne cyfry też występują $120$ razy na każdej pozycji?",
        "expression": "Każda z cyfr $1$, $2$, $3$, $5$, $6$, $7$ występuje na każdej pozycji dokładnie $120$ razy",
        "explanation": "Ze względu na symetrię permutacji wszystkie cyfry są równouprawnione"
      },
      {
        "step": 5,
        "hint": "Jaki jest wkład wszystkich cyfr na pozycji setek tysięcy?",
        "expression": "Wkład pozycji setek tysięcy: $(1+2+3+5+6+7) \\cdot 120 \\cdot 100000$",
        "explanation": "Suma cyfr pomnożona przez liczbę wystąpień i wartość miejscową",
        "interactive_choice": {
          "prompt": "Jak obliczyć sumę cyfr na pozycji setek tysięcy (wartość miejscowa $100000$)?",
          "options": [
            {
              "id": "A",
              "text": "$(1+2+3+5+6+7) \\cdot 100000$",
              "feedback": "Zapomniałeś, że każda cyfra występuje $120$ razy, nie raz!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$(1+2+3+5+6+7) \\cdot 120 \\cdot 100000$",
              "feedback": "Doskonale! Suma cyfr $\\times$ liczba wystąpień $\\times$ wartość miejscowa.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$120 \\cdot 100000$",
              "feedback": "Zapomniałeś uwzględnić różne wartości cyfr ($1$, $2$, $3$, $5$, $6$, $7$).",
              "is_correct": false
            }
          ],
          "explanation_after": "Każda cyfra występuje $120$ razy, więc sumujemy: $(suma cyfr) \\times 120 \\times wartość miejscowa$."
        }
      },
      {
        "step": 6,
        "hint": "Ile wynosi suma cyfr $1+2+3+5+6+7$?",
        "expression": "$1+2+3+5+6+7 = 24$",
        "explanation": "Obliczamy sumę wszystkich cyfr"
      },
      {
        "step": 7,
        "hint": "Jak wygląda wkład każdej pozycji do całkowitej sumy?",
        "expression": "Każda pozycja: $24 \\cdot 120 \\cdot$ (wartość miejscowa)",
        "explanation": "Wzór jest taki sam dla każdej pozycji, zmienia się tylko wartość miejscowa"
      },
      {
        "step": 8,
        "hint": "Jakie są wartości miejscowe w $6$-cyfrowej liczbie?",
        "expression": "Suma wartości miejscowych: $100000 + 10000 + 1000 + 100 + 10 + 1 = 111111$",
        "explanation": "Sumujemy wszystkie wartości miejscowe w $6$-cyfrowej liczbie",
        "interactive_choice": {
          "prompt": "Jak najefektywniej zapisać sumę wszystkich wartości miejscowych?",
          "options": [
            {
              "id": "A",
              "text": "$100000 + 10000 + 1000 + 100 + 10 + 1$",
              "feedback": "Poprawnie, ale można to zapisać krócej używając sumy geometrycznej!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$111111$",
              "feedback": "Świetnie! To elegancki zapis sumy wszystkich wartości miejscowych.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\frac{10^6-1}{9}$",
              "feedback": "Matematycznie poprawne (wzór na sumę geometryczną), ale $111111$ jest prostsze.",
              "is_correct": true
            }
          ],
          "explanation_after": "Suma wartości miejscowych to $111111$. Można to też zapisać jako $\\frac{10^6-1}{9}$."
        }
      },
      {
        "step": 9,
        "hint": "Jaka jest całkowita suma wszystkich $720$ liczb?",
        "expression": "Suma = $24 \\cdot 120 \\cdot 111111$",
        "explanation": "Łączymy: $(suma cyfr) \\times (liczba wystąpień) \\times (suma wartości miejscowych)$"
      },
      {
        "step": 10,
        "hint": "Oblicz $24 \\cdot 120$",
        "expression": "$24 \\cdot 120 = 2880$",
        "explanation": "Mnożymy sumę cyfr przez liczbę wystąpień"
      },
      {
        "step": 11,
        "hint": "Ile wynosi $2880 \\cdot 111111$?",
        "expression": "$2880 \\cdot 111111 = 319999680$",
        "explanation": "Obliczamy końcowy wynik"
      }
    ],
    "solutions": [
      "$319999680$"
    ],
    "parameters": {
      "original_number": "123567",
      "number_of_permutations": "$720$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 11,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T07:09:05.458Z"
  },
  {
    "id": "linear_functions_counting",
    "topic": "Funkcje liniowe - kombinatoryka",
    "difficulty": 2,
    "statement": "Oblicz, ile można utworzyć rosnących funkcji liniowych o współczynnikach naturalnych jednocyfrowych.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda ogólna postać funkcji liniowej?",
        "expression": "$f(x) = ax + b$",
        "explanation": "Funkcja liniowa ma dwa współczynniki: $a$ (nachylenie) i $b$ (wyraz wolny)"
      },
      {
        "step": 2,
        "hint": "Co oznacza, że funkcja liniowa jest rosnąca?",
        "expression": "$a > 0$",
        "explanation": "Warunek rosnięcia funkcji liniowej",
        "why": "Współczynnik $a$ określa nachylenie prostej. Gdy $a > 0$, to wraz ze wzrostem $x$ rośnie wartość funkcji.",
        "interactive_choice": {
          "prompt": "Kiedy funkcja liniowa $f(x) = ax + b$ jest rosnąca?",
          "options": [
            {
              "id": "A",
              "text": "Gdy współczynnik $a > 0$",
              "feedback": "Dokładnie! Dodatnie nachylenie oznacza, że funkcja rośnie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Gdy współczynnik $b > 0$",
              "feedback": "Nie - wyraz wolny $b$ przesuwa wykres w pionie, ale nie wpływa na to, czy funkcja rośnie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Gdy oba współczynniki $a > 0$ i $b > 0$",
              "feedback": "Nie - tylko $a$ decyduje o rosnięciu. Wyraz $b$ może być dowolny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Funkcja liniowa rośnie wtedy i tylko wtedy, gdy współczynnik kierunkowy $a$ jest dodatni."
        }
      },
      {
        "step": 3,
        "hint": "Jakie liczby naturalne jednocyfrowe są dodatnie?",
        "expression": "$a \\in \\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Współczynnik $a$ może przyjąć 9 różnych wartości",
        "interactive_choice": {
          "prompt": "Które liczby naturalne jednocyfrowe spełniają warunek $a > 0$?",
          "options": [
            {
              "id": "A",
              "text": "Liczby od $0$ do $9$",
              "feedback": "Prawie! Ale $0$ nie jest dodatnie, więc nie spełnia warunku $a > 0$.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Liczby od $1$ do $9$",
              "feedback": "Świetnie! To dokładnie $9$ możliwości dla współczynnika $a$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczby od $1$ do $10$",
              "feedback": "Nie - $10$ to już liczba dwucyfrowa!",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczby naturalne jednocyfrowe to $0$, $1$, $2$, ..., $9$. Dodatnie z nich to $1$, $2$, $3$, $4$, $5$, $6$, $7$, $8$, $9$."
        }
      },
      {
        "step": 4,
        "hint": "Jakie wartości może przyjąć współczynnik $b$?",
        "expression": "$b \\in \\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Wyraz wolny $b$ może być dowolną liczbą naturalną jednocyfrową - jest $10$ możliwości"
      },
      {
        "step": 5,
        "hint": "Czy wybór współczynnika $a$ wpływa na wybór współczynnika $b$?",
        "expression": "$9 \\cdot 10 = 90$",
        "explanation": "Mnożymy liczbę możliwości dla $a$ przez liczbę możliwości dla $b$",
        "why": "Współczynniki $a$ i $b$ wybieramy niezależnie. Dla każdego z $9$ wyborów $a$ możemy wybrać dowolne z $10$ wartości $b$.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę wszystkich możliwych funkcji?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $9 + 10 = 19$",
              "feedback": "Nie - dodawanie używamy gdy wybieramy $a$ LUB $b$. Tu wybieramy $a$ I $b$ jednocześnie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $9 \\cdot 10 = 90$",
              "feedback": "Dokładnie! Dla każdego z $9$ wyborów $a$ mamy $10$ wyborów $b$ - zasada mnożenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć kombinacje: $\\binom{19}{2}$",
              "feedback": "Nie - to nie jest wybór $2$ elementów ze zbioru. To niezależne wybory dwóch współczynników.",
              "is_correct": false
            }
          ],
          "explanation_after": "Stosujemy regułę mnożenia: gdy mamy $k$ możliwości dla pierwszego wyboru i $n$ dla drugiego (niezależnego), to łącznie mamy $k \\cdot n$ możliwości."
        }
      },
      {
        "step": 6,
        "hint": "Ile rosnących funkcji liniowych możemy utworzyć?",
        "expression": "Odpowiedź: $90$ funkcji",
        "explanation": "Możemy utworzyć $90$ różnych rosnących funkcji liniowych o współczynnikach naturalnych jednocyfrowych"
      }
    ],
    "solutions": [
      "$90$"
    ],
    "parameters": {
      "constraint": "współczynniki naturalne jednocyfrowe",
      "condition": "funkcja rosnąca"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:09:31.302Z"
  },
  {
    "id": "quadratic_coefficients_counting",
    "topic": "Funkcje kwadratowe - analiza współczynników",
    "difficulty": 4,
    "statement": "Oblicz, ile można utworzyć funkcji kwadratowych o niepowtarzających się współczynnikach naturalnych jednocyfrowych, których wykres przecina oś $OY$ w punkcie o rzędnej $4$.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda ogólna postać funkcji kwadratowej?",
        "expression": "$f(x) = ax^2 + bx + c$, gdzie $a, b, c$ są współczynnikami",
        "explanation": "Funkcja kwadratowa w postaci ogólnej"
      },
      {
        "step": 2,
        "hint": "Co oznacza, że wykres przecina oś $OY$ w punkcie o rzędnej $4$?",
        "expression": "$f(0) = a \\cdot 0^2 + b \\cdot 0 + c = c = 4$",
        "explanation": "Podstawiamy $x = 0$ i otrzymujemy warunek na współczynnik $c$",
        "why": "Punkt przecięcia z osią $OY$ zawsze ma postać $(0, c)$ dla funkcji kwadratowej. To kluczowa własność!",
        "interactive_choice": {
          "prompt": "Jak interpretować warunek przecięcia osi $OY$ w punkcie o rzędnej $4$?",
          "options": [
            {
              "id": "A",
              "text": "Oznacza to, że $f(0) = 4$",
              "feedback": "Doskonale! Punkt przecięcia z osią $OY$ ma współrzędne $(0, 4)$, więc $f(0) = 4$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Oznacza to, że wierzchołek paraboli ma rzędną $4$",
              "feedback": "Nie - wierzchołek to inny punkt. Przecięcie z osią $OY$ to punkt $(0, y_0)$",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Oznacza to, że $a = 4$",
              "feedback": "Nie - współczynnik $a$ określa kształt paraboli, nie punkt przecięcia z osią $OY$",
              "is_correct": false
            }
          ],
          "explanation_after": "Punkt przecięcia z osią $OY$ ma $x = 0$, więc podstawiamy do wzoru funkcji."
        }
      },
      {
        "step": 3,
        "hint": "Jaki wniosek wynika z warunku $c = 4$?",
        "expression": "$c = 4$ jest ustalone",
        "explanation": "Współczynnik $c$ musi być równy $4$"
      },
      {
        "step": 4,
        "hint": "Jakie są możliwe wartości współczynników naturalnych jednocyfrowych?",
        "expression": "Liczby naturalne jednocyfrowe: $\\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Zbiór liczb naturalnych od $1$ do $9$",
        "why": "Uwaga: $0$ nie jest liczbą naturalną w standardowej definicji, a współczynnik $a$ nie może być zerem (wtedy nie byłaby to funkcja kwadratowa)."
      },
      {
        "step": 5,
        "hint": "Które współczynniki musimy jeszcze wybrać?",
        "expression": "$a, b \\in \\{1, 2, 3, 5, 6, 7, 8, 9\\}$ oraz $a \\neq b$",
        "explanation": "Mamy 8 cyfr do wyboru dla $a$ i $b$, przy czym muszą być różne",
        "interactive_choice": {
          "prompt": "Skoro $c = 4$, to które współczynniki możemy jeszcze wybierać?",
          "options": [
            {
              "id": "A",
              "text": "Wybieramy $a$ i $b$ z pozostałych cyfr (bez $4$)",
              "feedback": "Świetnie! Współczynniki muszą być różne, więc $a, b \\in \\{1,2,3,5,6,7,8,9\\}$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybieramy $a$ i $b$ z wszystkich cyfr $1$-$9$",
              "feedback": "Nie - współczynniki mają być niepowtarzające się, a $c = 4$ już jest użyte",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko $a$, bo $b$ może być zerem",
              "feedback": "Nie - współczynniki mają być naturalne jednocyfrowe, więc $b$ też z zakresu $1$-$9$",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'niepowtarzających się' oznacza $a \\neq b \\neq c \\neq a$. Skoro $c = 4$, to $a$ i $b$ wybieramy z $8$ pozostałych cyfr."
        }
      },
      {
        "step": 6,
        "hint": "Jak obliczyć liczbę sposobów wyboru dwóch różnych liczb z $8$ elementów?",
        "expression": "Liczba wariacji: $V_8^2 = 8 \\cdot 7$",
        "explanation": "Dla $a$ mamy $8$ wyborów, dla $b$ pozostaje $7$ wyborów (bo $b \\neq a$)",
        "interactive_choice": {
          "prompt": "Czy kolejność wyboru $a$ i $b$ ma znaczenie?",
          "options": [
            {
              "id": "A",
              "text": "Tak, bo $a$ i $b$ pełnią różne role w funkcji",
              "feedback": "Dokładnie! Funkcja $f(x) = 2x^2 + 3x + 4$ to inna funkcja niż $g(x) = 3x^2 + 2x + 4$. Używamy wariacji.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, bo liczy się tylko zbiór współczynników",
              "feedback": "Nie - współczynniki $a$ i $b$ mają różne znaczenie. Zamiana ich miejscami daje inną funkcję.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie ma znaczenia, bo funkcja kwadratowa jest symetryczna",
              "feedback": "Nie - symetria paraboli nie oznacza, że współczynniki są zamienne",
              "is_correct": false
            }
          ],
          "explanation_after": "To problem wariacji bez powtórzeń: wybieramy uporządkowaną parę $(a, b)$ z $8$ elementów."
        }
      },
      {
        "step": 7,
        "hint": "Ile wynosi $8 \\cdot 7$?",
        "expression": "$8 \\cdot 7 = 56$",
        "explanation": "Obliczamy iloczyn"
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Można utworzyć $56$ różnych funkcji kwadratowych",
        "explanation": "Każda para $(a, b)$ z 8 dostępnych cyfr daje inną funkcję postaci $f(x) = ax^2 + bx + 4$"
      }
    ],
    "solutions": [
      "$56$"
    ],
    "parameters": {
      "coefficients": "naturalne jednocyfrowe",
      "condition": "$c = 4$",
      "constraint": "współczynniki niepowtarzające się"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:10:08.048Z"
  },
  {
    "id": "combinatorics_cinema_seats",
    "topic": "Kombinatoryka - permutacje i rozmieszczenia",
    "difficulty": 4,
    "statement": "Tomek z dwójką swoich przyjaciół wybrali się do kina, gdzie w jednym rzędzie oprócz nich może jeszcze usiąść $n$ osób. Liczba wszystkich możliwości przydzielenia miejsc widzom w tym rzędzie w sposób losowy (przy założeniu, że wszystkie miejsca w rzędzie są zajęte) jest $35$ razy większa od liczby wszystkich możliwości przydzielenia miejsc widzom w tym rzędzie, w których Tomek i jego dwójka przyjaciół siedzą obok siebie (w dowolnej kolejności). Wyznacz liczbę miejsc w tym rzędzie.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile osób w sumie siedzi w rzędzie?",
        "expression": "Tomek + $2$ przyjaciół + $n$ innych osób = $n + 3$ osoby",
        "explanation": "Łączna liczba osób w rzędzie to $n + 3$"
      },
      {
        "step": 2,
        "hint": "Jak obliczyć liczbę wszystkich możliwości rozmieszczenia osób w rzędzie?",
        "expression": "Liczba wszystkich możliwości = $(n+3)!$",
        "explanation": "Permutacje $n+3$ różnych osób na $n+3$ miejscach",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do obliczenia wszystkich możliwości rozmieszczenia $n+3$ osób?",
          "options": [
            {
              "id": "A",
              "text": "Permutacje: $(n+3)!$",
              "feedback": "Doskonale! To permutacje bez powtórzeń - każda osoba na innym miejscu.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Kombinacje: $\\binom{n+3}{3}$",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu kolejność miejsc ma znaczenie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wariacje: $\\frac{(n+3)!}{n!}$",
              "feedback": "To upraszcza się do $(n+3)(n+2)(n+1)$, ale pełna permutacja jest prostsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wszystkie osoby są różne i kolejność ma znaczenie, więc używamy permutacji."
        }
      },
      {
        "step": 3,
        "hint": "Jak potraktować Tomka i jego przyjaciół gdy mają siedzieć obok siebie?",
        "expression": "Traktujemy Tomka i $2$ przyjaciół jako jeden 'blok'",
        "explanation": "Mamy teraz: $1$ blok + $n$ innych osób = $n+1$ obiektów do rozmieszczenia",
        "why": "To kluczowa technika w kombinatoryce - grupowanie obiektów które muszą być razem.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę rozmieszczeń gdy $3$ osoby muszą siedzieć obok siebie?",
          "options": [
            {
              "id": "A",
              "text": "Traktować ich jako jedną 'super-osobę', potem rozpatrzyć kolejność wewnętrzną",
              "feedback": "Świetnie! To klasyczna metoda - najpierw rozmieszczamy grupy, potem osoby w grupie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać 3 sąsiednie miejsca z $n+3$, potem rozmieścić pozostałe osoby",
              "feedback": "Możliwe, ale bardziej skomplikowane - metoda 'super-osoby' jest prostsza.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć $(n+3)!$ i podzielić przez $3$",
              "feedback": "Nie - to nie uwzględnia warunku siedzenia obok siebie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Traktujemy $3$ przyjaciół jako jeden 'blok', co upraszcza problem."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest sposobów rozmieszczenia bloku i pozostałych osób?",
        "expression": "Liczba permutacji $n+1$ obiektów = $\\frac{(n+1)!}{1!}$",
        "explanation": "Rozmieszczamy blok i $n$ innych osób"
      },
      {
        "step": 5,
        "hint": "W ilu sposób można ustawić Tomka i przyjaciół wewnątrz bloku?",
        "expression": "Liczba permutacji $3$ osób w bloku = $3!$",
        "explanation": "Tomek i $2$ przyjaciół mogą siedzieć w różnej kolejności"
      },
      {
        "step": 6,
        "hint": "Jaka jest całkowita liczba możliwości gdy siedzą obok siebie?",
        "expression": "Liczba możliwości z warunkiem = $(n+1)! \\cdot 3!$",
        "explanation": "Mnożymy liczbę rozmieszczeń bloków przez liczbę kolejności wewnątrz bloku"
      },
      {
        "step": 7,
        "hint": "Jak zapisać warunek że jedna liczba jest $35$ razy większa od drugiej?",
        "expression": "$(n+3)! = 35 \\cdot (n+1)! \\cdot 3!$",
        "explanation": "Zapisujemy równanie zgodnie z warunkiem zadania"
      },
      {
        "step": 8,
        "hint": "Jak uprościć wyrażenie $(n+3)!$ przez $(n+1)!$?",
        "expression": "$\\frac{(n+3)!}{(n+1)!} = (n+3)(n+2)$",
        "explanation": "Skracamy silnie: $(n+3)! = (n+3)(n+2)(n+1)!$"
      },
      {
        "step": 9,
        "hint": "Ile wynosi $3!$?",
        "expression": "$3! = 6$",
        "explanation": "Obliczamy silnię"
      },
      {
        "step": 10,
        "hint": "Jak wygląda równanie po uproszczeniu?",
        "expression": "$(n+3)(n+2) = 35 \\cdot 6$",
        "explanation": "Upraszczamy równanie dzieląc obie strony przez $(n+1)!$"
      },
      {
        "step": 11,
        "hint": "Ile wynosi prawa strona równania?",
        "expression": "$(n+3)(n+2) = 210$",
        "explanation": "Obliczamy $35 \\cdot 6 = 210$"
      },
      {
        "step": 12,
        "hint": "Jak rozwinąć lewą stronę równania?",
        "expression": "$n^2 + 5n + 6 = 210$",
        "explanation": "Mnożymy $(n+3)(n+2) = n^2 + 5n + 6$"
      },
      {
        "step": 13,
        "hint": "Jak przekształcić równanie do postaci standardowej?",
        "expression": "$n^2 + 5n - 204 = 0$",
        "explanation": "Przenosimy $210$ na lewą stronę"
      },
      {
        "step": 14,
        "hint": "Którą metodę wybierzesz do rozwiązania tego równania kwadratowego?",
        "expression": "$\\Delta = 5^2 - 4 \\cdot 1 \\cdot (-204) = 25 + 816 = 841$",
        "explanation": "Obliczamy wyróżnik",
        "interactive_choice": {
          "prompt": "Jak rozwiązać równanie $n^2 + 5n - 204 = 0$?",
          "options": [
            {
              "id": "A",
              "text": "Wzór z deltą",
              "feedback": "Dobry wybór - dla dużych współczynników to najszybsza metoda.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Rozkład na czynniki",
              "feedback": "Trudne - współczynnik $-204$ ma wiele dzielników, ciężko zgadnąć.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dopełnienie do kwadratu",
              "feedback": "Możliwe, ale bardziej pracochłonne niż $\\delta$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla dużych współczynników wzór z deltą jest najbardziej efektywny."
        }
      },
      {
        "step": 15,
        "hint": "Ile wynosi pierwiastek z delty?",
        "expression": "$\\sqrt{\\Delta} = \\sqrt{841} = 29$",
        "explanation": "Obliczamy pierwiastek kwadratowy"
      },
      {
        "step": 16,
        "hint": "Jakie są rozwiązania równania kwadratowego?",
        "expression": "$n_1 = \\frac{-5 + 29}{2} = 12$ oraz $n_2 = \\frac{-5 - 29}{2} = -17$",
        "explanation": "Stosujemy wzory na pierwiastki"
      },
      {
        "step": 17,
        "hint": "Które rozwiązanie ma sens w kontekście zadania?",
        "expression": "$n = 12$",
        "explanation": "Liczba osób musi być dodatnia, więc odrzucamy $n = -17$",
        "why": "W zadaniach kombinatorycznych zawsze sprawdzamy czy rozwiązanie ma sens praktyczny."
      },
      {
        "step": 18,
        "hint": "Ile miejsc jest w całym rzędzie?",
        "expression": "Liczba miejsc = $n + 3 = 12 + 3 = 15$",
        "explanation": "Dodajemy miejsca dla Tomka i jego przyjaciół"
      }
    ],
    "solutions": [
      "$15$"
    ],
    "parameters": {
      "n": "$12$",
      "total_seats": "$15$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 18,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T07:11:11.438Z"
  },
  {
    "id": "sum_five_digit_permutations",
    "topic": "Kombinatoryka i sumy permutacji",
    "difficulty": 4,
    "statement": "Rozważamy wszystkie liczby naturalne pięciocyfrowe zapisane przy użyciu cyfr $1, 3, 5, 7, 9$, bez powtarzania jakiejkolwiek cyfry. Oblicz sumę wszystkich takich liczb.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych liczb pięciocyfrowych możemy utworzyć z cyfr $1, 3, 5, 7, 9$ bez powtórzeń?",
        "expression": "$5! = 5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1 = 120$",
        "explanation": "Mamy $5$ cyfr do rozmieszczenia na $5$ pozycjach - to permutacja bez powtórzeń",
        "why": "Każda cyfra może wystąpić dokładnie raz, więc liczba wszystkich takich liczb to $5! = 120$"
      },
      {
        "step": 2,
        "hint": "Jak podejść do obliczenia sumy wszystkich tych $120$ liczb?",
        "expression": "Wykorzystamy symetrię: każda cyfra pojawia się równie często na każdej pozycji",
        "explanation": "Zamiast sumować $120$ liczb, policzymy wkład każdej pozycji do sumy",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do obliczenia sumy wszystkich permutacji?",
          "options": [
            {
              "id": "A",
              "text": "Wypisać wszystkie $120$ liczb i je zsumować",
              "feedback": "Możliwe, ale bardzo pracochłonne i podatne na błędy. Jest znacznie lepszy sposób!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Obliczyć ile razy każda cyfra występuje na każdej pozycji",
              "feedback": "Świetnie! To kluczowa obserwacja - wykorzystamy symetrię permutacji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć średnią arytmetyczną i pomnożyć przez $120$",
              "feedback": "Pomysłowe, ale trudno obliczyć średnią bez znajomości sumy. Metoda B jest lepsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzięki symetrii permutacji każda cyfra występuje równie często na każdej pozycji. To znacznie upraszcza obliczenia."
        }
      },
      {
        "step": 3,
        "hint": "Ile razy każda z cyfr $1$, $3$, $5$, $7$, $9$ występuje na konkretnej pozycji?",
        "expression": "Każda cyfra występuje na danej pozycji $\\frac{120}{5} = 24$ razy",
        "explanation": "Ze 120 permutacji, każda z $5$ cyfr zajmuje daną pozycję równie często",
        "why": "To wynika z symetrii: jeśli ustalimy jedną cyfrę na pozycji, pozostałe $4$ cyfry możemy ułożyć na $4! = 24$ sposoby"
      },
      {
        "step": 4,
        "hint": "Jaki jest wkład wszystkich cyfr na pozycji jedności do sumy całkowitej?",
        "expression": "$24 \\cdot (1 + 3 + 5 + 7 + 9) \\cdot 1 = 24 \\cdot 25 \\cdot 1 = 600$",
        "explanation": "Każda cyfra występuje $24$ razy na pozycji jedności, mnożymy przez wartość pozycyjną $1$"
      },
      {
        "step": 5,
        "hint": "Jaki jest wkład wszystkich cyfr na pozycji dziesiątek?",
        "expression": "$24 \\cdot (1 + 3 + 5 + 7 + 9) \\cdot 10 = 24 \\cdot 25 \\cdot 10 = 6000$",
        "explanation": "Każda cyfra występuje $24$ razy na pozycji dziesiątek, mnożymy przez wartość pozycyjną $10$"
      },
      {
        "step": 6,
        "hint": "Czy widzisz wzór w wkładach kolejnych pozycji?",
        "expression": "Setki: $24 \\cdot 25 \\cdot 100 = 60000$\nTysiące: $24 \\cdot 25 \\cdot 1000 = 600000$\nDziesiątki tysięcy: $24 \\cdot 25 \\cdot 10000 = 6000000$",
        "explanation": "Obliczamy wkład dla pozycji setek, tysięcy i dziesiątek tysięcy",
        "interactive_choice": {
          "prompt": "Jak obliczyć wkłady pozostałych pozycji (setek, tysięcy, dziesiątek tysięcy)?",
          "options": [
            {
              "id": "A",
              "text": "Każda następna pozycja daje wkład $10$ razy większy",
              "feedback": "Dokładnie! Wartość pozycyjna rośnie 10-krotnie: $1$, $10$, $100$, $1000$, $10000$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Trzeba osobno policzyć dla każdej pozycji",
              "feedback": "Można, ale to niepotrzebna praca - wykorzystaj wzór z poprzednich kroków!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wkład zależy od tego, które cyfry są większe",
              "feedback": "Nie - dzięki symetrii wszystkie pozycje mają tę samą strukturę, różni się tylko wartość pozycyjna",
              "is_correct": false
            }
          ],
          "explanation_after": "Wkład każdej pozycji to $24 \\cdot 25 \\cdot wartość pozycyjna$. Wartości pozycyjne to kolejne potęgi $10$."
        }
      },
      {
        "step": 7,
        "hint": "Jak zsumować wkłady wszystkich pięciu pozycji?",
        "expression": "$600 + 6000 + 60000 + 600000 + 6000000$",
        "explanation": "Sumujemy wkłady od pozycji jedności do dziesiątek tysięcy"
      },
      {
        "step": 8,
        "hint": "Czy możesz wyłączyć wspólny czynnik przed nawias?",
        "expression": "$600(1 + 10 + 100 + 1000 + 10000) = 600 \\cdot 11111$",
        "explanation": "Wyłączamy wspólny czynnik $600$ i obliczamy sumę w nawiasie",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć sumę $600 + 6000 + 60000 + 600000 + 6000000$?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby bezpośrednio",
              "feedback": "Zadziała, ale można prościej - zauważ wspólny czynnik $600$!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wyłączyć $600$ przed nawias: $600(1 + 10 + 100 + 1000 + 10000)$",
              "feedback": "Świetnie! To uprości obliczenia i pokaże strukturę wyniku.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na sumę ciągu geometrycznego",
              "feedback": "Doskonały pomysł! Suma $1 + 10 + 100 + 1000 + 10000$ to ciąg geometryczny.",
              "is_correct": true
            }
          ],
          "explanation_after": "Wszystkie trzy metody są poprawne. Wyłączenie $600$ i rozpoznanie ciągu geometrycznego to najbardziej eleganckie podejście."
        }
      },
      {
        "step": 9,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "$600 \\cdot 11111 = 6666600$",
        "explanation": "Mnożymy $600$ przez $11111$ i otrzymujemy sumę wszystkich liczb"
      }
    ],
    "solutions": [
      "$6666600$"
    ],
    "parameters": {
      "cyfry": "$1, 3, 5, 7, 9$",
      "liczba_permutacji": "$120$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-10-03T07:14:00.271Z"
  },
  {
    "id": "combinatorics_seven_digit_numbers",
    "topic": "Kombinatoryka - rozmieszczenia cyfr",
    "difficulty": 4,
    "statement": "Oblicz, ile jest wszystkich siedmiocyfrowych liczb naturalnych, w których zapisie dziesiętnym występują dokładnie $3$ cyfry $1$ i dokładnie $2$ cyfry $2$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr mamy do rozmieszczenia w siedmiocyfrowej liczbie?",
        "expression": "Liczba siedmiocyfrowa ma $7$ pozycji: _ _ _ _ _ _ _",
        "explanation": "Musimy wypełnić $7$ pozycji cyframi, przy czym pierwsza cyfra nie może być zerem"
      },
      {
        "step": 2,
        "hint": "Ile pozycji zajmą cyfry $1$ i $2$?",
        "expression": "3 pozycje dla cyfr $1$ oraz 2 pozycje dla cyfr $2$, razem: $3 + 2 = 5$ pozycji",
        "explanation": "Cyfry $1$ i $2$ zajmują łącznie $5$ z $7$ pozycji"
      },
      {
        "step": 3,
        "hint": "Ile pozycji pozostaje dla innych cyfr?",
        "expression": "$7 - 5 = 2$ pozycje pozostają wolne",
        "explanation": "Dwie pozostałe pozycje muszą być wypełnione cyframi różnymi od $1$ i $2$"
      },
      {
        "step": 4,
        "hint": "Jakie cyfry mogą zajmować pozostałe 2 pozycje?",
        "expression": "Pozostałe $2$ pozycje: cyfry z zbioru $\\{0, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Każda z dwóch wolnych pozycji może być wypełniona jedną z $8$ cyfr",
        "interactive_choice": {
          "prompt": "Które cyfry mogą wystąpić na pozostałych dwóch pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry $0$, $3$, $4$, $5$, $6$, $7$, $8$, $9$ ($8$ możliwości)",
              "feedback": "Świetnie! To wszystkie cyfry różne od $1$ i $2$. Każda pozycja ma $8$ możliwości.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry $3$, $4$, $5$, $6$, $7$, $8$, $9$ ($7$ możliwości, bez zera)",
              "feedback": "Nie - zero może wystąpić na pozostałych pozycjach, jeśli nie jest na pierwszej pozycji liczby.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Dowolne cyfry $0$-$9$ ($10$ możliwości)",
              "feedback": "Nie - cyfry $1$ i $2$ już są użyte w określonej liczbie, nie mogą się powtarzać.",
              "is_correct": false
            }
          ],
          "explanation_after": "Pozostałe pozycje mogą zawierać cyfry $0$, $3$, $4$, $5$, $6$, $7$, $8$, $9$ - czyli $8$ różnych cyfr."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów możemy wypełnić te $2$ pozostałe pozycje?",
        "expression": "$8 \\times 8 = 64$ sposoby",
        "explanation": "Cyfry mogą się powtarzać, więc dla każdej pozycji mamy $8$ możliwości",
        "why": "Cyfry na pozostałych pozycjach mogą być takie same lub różne - każda pozycja niezależnie ma $8$ wyborów."
      },
      {
        "step": 6,
        "hint": "Jak podejść do rozmieszczenia cyfr $1$ i $2$ na $7$ pozycjach?",
        "expression": "Strategia: wybieramy $3$ pozycje z $7$ dla cyfr $1$, potem $2$ z pozostałych $4$ dla cyfr $2$",
        "explanation": "Rozbijamy problem na etapy wyboru pozycji",
        "interactive_choice": {
          "prompt": "Jaką metodą obliczyć liczbę rozmieszczeń cyfr $1$, $1$, $1$, $2$, $2$ oraz dwóch innych cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pozycje dla cyfr $1$, potem dla cyfr $2$, potem dla pozostałych",
              "feedback": "Doskonale! To metoda krok po kroku: wybieramy pozycje dla każdej grupy cyfr.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć permutacji z powtórzeniami: $\\frac{7!}{3! \\cdot 2! \\cdot 2!}$",
              "feedback": "Uwaga! To nie uwzględnia ograniczenia, że pierwsza cyfra nie może być zerem.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć wszystkie $7!$ permutacji i odjąć nieprawidłowe",
              "feedback": "Zbyt skomplikowane - lepiej od razu wybrać pozycje dla poszczególnych cyfr.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybieramy kolejno pozycje dla cyfr $1$, potem dla cyfr $2$, a na końcu wypełniamy pozostałe pozycje."
        }
      },
      {
        "step": 7,
        "hint": "Na ile sposobów możemy wybrać $3$ pozycje z $7$ dla cyfr $1$?",
        "expression": "$\\binom{7}{3} = \\frac{7!}{3! \\cdot 4!} = \\frac{7 \\cdot 6 \\cdot 5}{3 \\cdot 2 \\cdot 1} = 35$ sposobów",
        "explanation": "Wybieramy $3$ pozycje z $7$ dostępnych dla cyfr $1$"
      },
      {
        "step": 8,
        "hint": "Po wybraniu pozycji dla cyfr $1$, ile pozycji pozostaje dla cyfr $2$?",
        "expression": "Pozostaje $7 - 3 = 4$ pozycje, z których wybieramy $2$",
        "explanation": "Po umieszczeniu trzech jedynek, zostają $4$ wolne pozycje"
      },
      {
        "step": 9,
        "hint": "Na ile sposobów możemy wybrać $2$ pozycje z $4$ dla cyfr $2$?",
        "expression": "$\\binom{4}{2} = \\frac{4!}{2! \\cdot 2!} = \\frac{4 \\cdot 3}{2 \\cdot 1} = 6$ sposobów",
        "explanation": "Wybieramy $2$ pozycje z $4$ pozostałych dla cyfr $2$"
      },
      {
        "step": 10,
        "hint": "Ile mamy łącznie rozmieszczeń cyfr $1$, $1$, $1$, $2$, $2$ oraz dwóch innych cyfr?",
        "expression": "$35 \\times 6 \\times 64 = 13440$ rozmieszczeń",
        "explanation": "Mnożymy liczbę sposobów wyboru pozycji dla $1$, dla $2$, i wypełnienia pozostałych pozycji",
        "why": "Zasada mnożenia: niezależne wybory mnożymy. Mamy $35$ sposobów na pozycje dla $1$, dla każdego $6$ sposobów na pozycje dla $2$, i dla każdego $64$ sposoby na pozostałe cyfry."
      },
      {
        "step": 11,
        "hint": "Czy wszystkie te liczby są siedmiocyfrowe?",
        "expression": "Musimy odjąć liczby zaczynające się od $0$",
        "explanation": "Liczba siedmiocyfrowa musi mieć pierwszą cyfrę różną od zera",
        "interactive_choice": {
          "prompt": "Czy musimy odjąć przypadki, gdy pierwsza cyfra to $0$?",
          "options": [
            {
              "id": "A",
              "text": "Tak, musimy odjąć przypadki z zerem na pierwszej pozycji",
              "feedback": "Dokładnie! Liczba siedmiocyfrowa nie może zaczynać się od zera.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, zero nie może być na pierwszej pozycji w naszym rozwiązaniu",
              "feedback": "Nieprawda - w kroku 10 policzyliśmy wszystkie rozmieszczenia, także te z zerem na początku.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie ma znaczenia, bo cyfry $1$ i $2$ zajmują większość pozycji",
              "feedback": "Ma znaczenie! Zero może być na pierwszej pozycji jako jedna z dwóch 'pozostałych' cyfr.",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy odjąć przypadki, gdy pierwsza pozycja zawiera cyfrę $0$, bo wtedy liczba nie jest siedmiocyfrowa."
        }
      },
      {
        "step": 12,
        "hint": "Ile jest liczb z zerem na pierwszej pozycji?",
        "expression": "Pierwsza pozycja: $0$, pozostałe 6 pozycji: trzy $1$, dwie $2$, jedna cyfra z $\\{3,4,5,6,7,8,9\\}$",
        "explanation": "Jeśli pierwsza pozycja to $0$, musimy rozmieścić cyfry na pozostałych $6$ pozycjach"
      },
      {
        "step": 13,
        "hint": "Na ile sposobów rozmieścić trzy $1$ na $6$ pozostałych pozycjach?",
        "expression": "$\\binom{6}{3} = \\frac{6!}{3! \\cdot 3!} = \\frac{6 \\cdot 5 \\cdot 4}{3 \\cdot 2 \\cdot 1} = 20$ sposobów",
        "explanation": "Wybieramy $3$ pozycje z $6$ dla cyfr $1$"
      },
      {
        "step": 14,
        "hint": "Na ile sposobów rozmieścić dwie $2$ na pozostałych $3$ pozycjach?",
        "expression": "$\\binom{3}{2} = \\frac{3!}{2! \\cdot 1!} = 3$ sposoby",
        "explanation": "Wybieramy $2$ pozycje z $3$ pozostałych dla cyfr $2$"
      },
      {
        "step": 15,
        "hint": "Ile możliwości dla ostatniej pozostałej pozycji?",
        "expression": "Ostatnia pozycja: jedna z $7$ cyfr $\\{3, 4, 5, 6, 7, 8, 9\\}$, czyli $7$ możliwości",
        "explanation": "Nie może być $0$ (już użyte), $1$ (już trzy razy), $2$ (już dwa razy)"
      },
      {
        "step": 16,
        "hint": "Ile jest liczb zaczynających się od zera?",
        "expression": "$20 \\times 3 \\times 7 = 420$ liczb z zerem na początku",
        "explanation": "Mnożymy liczbę sposobów rozmieszczenia cyfr gdy pierwsza pozycja to $0$"
      },
      {
        "step": 17,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "$13440 - 420 = 13020$",
        "explanation": "Od wszystkich rozmieszczeń odejmujemy te z $0$ na pierwszej pozycji"
      }
    ],
    "solutions": [
      "$13020$"
    ],
    "parameters": {
      "digits": "siedmiocyfrowe liczby naturalne",
      "constraints": "dokładnie trzy cyfry $1$ i dokładnie dwie cyfry $2$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 17,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-10-03T07:14:55.988Z"
  },
  {
    "id": "combinatorics_queue_constraint",
    "topic": "Kombinatoryka - permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "Wśród $n$ osób są Ania i jej dwaj znajomi. Wszystkie te $n$ osób ustawiamy w kolejkę jedna za drugą. Liczba wszystkich takich ustawień jest $12$ razy większa od liczby wszystkich takich ustawień tych $n$ osób w kolejkę, w których Ania i jej dwaj znajomi zajmują trzy kolejne miejsca (w dowolnej kolejności). Oblicz $n$.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile jest wszystkich możliwych ustawień $n$ osób w kolejce?",
        "expression": "Liczba wszystkich ustawień = $n!$",
        "explanation": "Permutacje bez ograniczeń - każda osoba może być na dowolnym miejscu"
      },
      {
        "step": 2,
        "hint": "Jak podejść do liczenia ustawień z ograniczeniem, że trzy osoby muszą stać obok siebie?",
        "expression": "Traktujemy Anię i dwóch znajomych jako jeden blok",
        "explanation": "Zamiast $n$ osób mamy teraz $((n-3+1) = (n-2))$ obiektów do ustawienia",
        "why": "To kluczowa technika w kombinatoryce: gdy elementy muszą być razem, traktujemy je jako jeden obiekt.",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć ustawienia, w których Ania i dwaj znajomi stoją obok siebie?",
          "options": [
            {
              "id": "A",
              "text": "Traktować te $3$ osoby jako jeden blok i permutować z pozostałymi",
              "feedback": "Doskonale! To klasyczna metoda - blok + permutacje wewnątrz bloku.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać 3 kolejne miejsca z $n$ i ustawić tam te osoby",
              "feedback": "To też prowadzi do rozwiązania, ale metoda bloku jest bardziej systematyczna.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć $n!$ i odjąć przypadki gdy nie stoją obok",
              "feedback": "Bardzo skomplikowane - łatwiej liczyć bezpośrednio przypadki korzystne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda bloku: traktujemy $3$ osoby jako jedną jednostkę, permutujemy z resztą, potem permutujemy wewnątrz bloku."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest sposobów ustawienia $(n-2)$ obiektów (blok + pozostałe osoby)?",
        "expression": "Liczba ustawień bloków = $(n-2)!$",
        "explanation": "Permutujemy $(n-2)$ obiektów: jeden blok i $n-3$ pozostałych osób"
      },
      {
        "step": 4,
        "hint": "Czy kolejność osób wewnątrz bloku ma znaczenie?",
        "expression": "Wewnątrz bloku: Ania i dwaj znajomi mogą się ustawić na $3!$ sposobów",
        "explanation": "Trzy osoby w bloku można permutować między sobą"
      },
      {
        "step": 5,
        "hint": "Jaka jest całkowita liczba ustawień z ograniczeniem?",
        "expression": "Liczba ustawień z ograniczeniem = $(n-2)! \\cdot 3!$",
        "explanation": "Mnożymy liczbę ustawień bloków przez liczbę permutacji wewnątrz bloku"
      },
      {
        "step": 6,
        "hint": "Jak zapisać warunek z treści zadania matematycznie?",
        "expression": "$n! = 12 \\cdot (n-2)! \\cdot 3!$",
        "explanation": "Zapisujemy warunek z treści zadania jako $równanie$",
        "interactive_choice": {
          "prompt": "Które równanie poprawnie opisuje warunek 'liczba wszystkich ustawień jest $12$ razy większa'?",
          "options": [
            {
              "id": "A",
              "text": "$n! = 12 \\cdot (n-2)! \\cdot 3!$",
              "feedback": "Dokładnie! Wszystkie ustawienia = $12 \\times$ ustawienia z ograniczeniem.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$(n-2)! \\cdot 3! = 12 \\cdot n!$",
              "feedback": "Nie - to by znaczyło, że ustawień z ograniczeniem jest więcej, co nie ma sensu.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$n! - (n-2)! \\cdot 3! = 12$",
              "feedback": "Nie - warunek mówi o stosunku, nie o różnicy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek 'A jest 12 razy większe od B' zapisujemy jako $A = 12 \\cdot B$."
        }
      },
      {
        "step": 7,
        "hint": "Ile wynosi $3!$?",
        "expression": "$3! = 6$",
        "explanation": "Obliczamy silnię"
      },
      {
        "step": 8,
        "hint": "Jak uprościć równanie $n! = 12 \\cdot (n-2)! \\cdot 6$?",
        "expression": "$n! = 72 \\cdot (n-2)!$",
        "explanation": "Mnożymy $12 \\cdot 6 = 72$"
      },
      {
        "step": 9,
        "hint": "Jak rozwinąć $n!$ przez $(n-2)!$?",
        "expression": "$n \\cdot (n-1) \\cdot (n-2)! = 72 \\cdot (n-2)!$",
        "explanation": "Rozwijamy $n! = n \\cdot (n-1) \\cdot (n-2) \\cdot ... \\cdot 1$",
        "why": "To kluczowa technika: rozwijamy silnię tylko do momentu gdy możemy skrócić wspólny czynnik.",
        "interactive_choice": {
          "prompt": "Jak najlepiej przekształcić $n!$ aby uprościć równanie?",
          "options": [
            {
              "id": "A",
              "text": "$n! = n \\cdot (n-1) \\cdot (n-2)!$",
              "feedback": "Świetnie! To pozwoli skrócić $(n-2)!$ z obu stron.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Podstawić konkretne wartości $n$ i sprawdzić",
              "feedback": "Możliwe, ale algebraiczne rozwiązanie jest bardziej eleganckie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Podzielić obie strony przez $n!$",
              "feedback": "To skomplikuje równanie - lepiej rozwinąć $n!$ przez $(n-2)!$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozwijamy silnię do momentu gdy pojawi się $(n-2)!$, co pozwoli uprościć równanie."
        }
      },
      {
        "step": 10,
        "hint": "Co możesz skrócić w równaniu?",
        "expression": "$n \\cdot (n-1) = 72$",
        "explanation": "Dzielimy obie strony przez $(n-2)!$ (zakładając $n \\geq 2$)"
      },
      {
        "step": 11,
        "hint": "Jak rozwiązać równanie $n(n-1) = 72$?",
        "expression": "$n^2 - n - 72 = 0$",
        "explanation": "Rozwijamy i przenosimy wszystko na lewą stronę"
      },
      {
        "step": 12,
        "hint": "Jakie liczby dają sumę $1$ i iloczyn $-72$?",
        "expression": "$9 \\cdot (-8) = -72$ oraz $9 + (-8) = 1$",
        "explanation": "Szukamy rozkładu na czynniki"
      },
      {
        "step": 13,
        "hint": "Jak zapisać równanie w postaci iloczynowej?",
        "expression": "$(n - 9)(n + 8) = 0$",
        "explanation": "Rozkład na czynniki równania kwadratowego"
      },
      {
        "step": 14,
        "hint": "Jakie są rozwiązania równania?",
        "expression": "$n = 9$ lub $n = -8$",
        "explanation": "Rozwiązujemy równanie iloczynowe"
      },
      {
        "step": 15,
        "hint": "Które rozwiązanie ma sens w kontekście zadania?",
        "expression": "$n = 9$",
        "explanation": "Liczba osób musi być dodatnia, więc $n = -8$ odrzucamy",
        "why": "W zadaniach kombinatorycznych zawsze sprawdzamy czy rozwiązanie ma sens praktyczny - liczba osób nie może być ujemna."
      }
    ],
    "solutions": [
      "$n = 9$"
    ],
    "parameters": {
      "constraint": "Ania i dwaj znajomi stoją obok siebie"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 15,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-10-03T07:15:43.206Z"
  },
  {
    "id": "combinatorics_digits_odd_even",
    "topic": "Kombinatoryka - permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "Rozważamy wszystkie liczby naturalne, w których zapisie dziesiętnym nie powtarza się jakakolwiek cyfra oraz dokładnie $3$ cyfry są nieparzyste i dokładnie $2$ cyfry są parzyste. Oblicz, ile jest wszystkich takich liczb.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr ma taka liczba?",
        "expression": "Liczba ma dokładnie $3 + 2 = 5$ cyfr",
        "explanation": "Trzy cyfry nieparzyste plus dwie parzyste dają liczbę pięciocyfrową"
      },
      {
        "step": 2,
        "hint": "Jakie cyfry nieparzyste i parzyste są dostępne?",
        "expression": "Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$, Cyfry parzyste: $\\{0, 2, 4, 6, 8\\}$",
        "explanation": "Identyfikujemy zbiory dostępnych cyfr",
        "interactive_choice": {
          "prompt": "Które cyfry możemy użyć w naszej liczbie?",
          "options": [
            {
              "id": "A",
              "text": "Nieparzyste: $\\{1, 3, 5, 7, 9\\}$, Parzyste: $\\{0, 2, 4, 6, 8\\}$",
              "feedback": "Dokładnie! Mamy po $5$ cyfr każdego typu do wyboru.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nieparzyste: $\\{1, 3, 5, 7, 9\\}$, Parzyste: $\\{2, 4, 6, 8\\}$ (bez zera)",
              "feedback": "Nie - zero też jest cyfrą parzystą i możemy je użyć (ale nie na początku).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie cyfry $\\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$ bez podziału",
              "feedback": "Musimy rozróżnić parzyste i nieparzyste - to kluczowe dla zadania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy $5$ cyfr nieparzystych i $5$ parzystych. Cyfry się nie powtarzają, więc wybieramy $3$ z $5$ nieparzystych i $2$ z $5$ parzystych."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do zliczania takich liczb?",
        "expression": "Rozpatrzmy dwa przypadki: (I) zero nie jest wybrane, (II) zero jest wybrane",
        "explanation": "Dzielimy problem ze względu na obecność zera",
        "why": "Zero nie może być pierwszą cyfrą liczby, więc musimy je traktować specjalnie. Podział na przypadki upraszcza zliczanie.",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do zliczenia wszystkich możliwych liczb?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać cyfry, potem je ustawić",
              "feedback": "Dobra strategia, ale trzeba uważać na zero na pierwszej pozycji!",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Rozpatrzyć przypadki: zero na początku vs zero nie na początku",
              "feedback": "Świetnie! To najczystsze podejście - rozdzielamy problematyczne przypadki.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie permutacje i odjąć te z $0$ na początku",
              "feedback": "Możliwe, ale skomplikowane - lepiej od razu rozpatrzyć przypadki.",
              "is_correct": true
            }
          ],
          "explanation_after": "Najlepiej rozpatrzyć dwa przypadki: gdy zero jest wśród wybranych cyfr parzystych i gdy go nie ma."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest możliwości w przypadku $I$ (bez zera)?",
        "expression": "Przypadek I: wybieramy $3$ z $5$ cyfr nieparzystych i $2$ z $4$ cyfr parzystych (bez zera)",
        "explanation": "Cyfry parzyste do wyboru: $\\{2, 4, 6, 8\\}$"
      },
      {
        "step": 5,
        "hint": "Ile jest sposobów wyboru cyfr w przypadku $I$?",
        "expression": "$\\binom{5}{3} \\cdot \\binom{4}{2} = 10 \\cdot 6 = 60$",
        "explanation": "Kombinacje wyboru $3$ nieparzystych i $2$ parzystych"
      },
      {
        "step": 6,
        "hint": "Ile jest permutacji $5$ wybranych cyfr?",
        "expression": "$5! = 120$",
        "explanation": "Każdy zestaw $5$ cyfr można ustawić na $120$ sposobów"
      },
      {
        "step": 7,
        "hint": "Ile liczb daje przypadek I?",
        "expression": "$60 \\cdot 120 = 7200$",
        "explanation": "Mnożymy liczbę zestawów cyfr przez liczbę ich permutacji"
      },
      {
        "step": 8,
        "hint": "Ile jest możliwości w przypadku II (z zerem)?",
        "expression": "Przypadek II: wybieramy $3$ z $5$ cyfr nieparzystych, zero i $1$ z $4$ pozostałych cyfr parzystych",
        "explanation": "Zero jest już wybrane, więc wybieramy tylko 1 cyfrę z $\\{2, 4, 6, 8\\}$"
      },
      {
        "step": 9,
        "hint": "Ile jest sposobów wyboru cyfr w przypadku $II$?",
        "expression": "$\\binom{5}{3} \\cdot \\binom{4}{1} = 10 \\cdot 4 = 40$",
        "explanation": "Kombinacje wyboru $3$ nieparzystych i $1$ parzystej (oprócz zera)"
      },
      {
        "step": 10,
        "hint": "Czy wszystkie permutacje $5$ cyfr (z zerem) są dozwolone?",
        "expression": "$5! - 4! = 120 - 24 = 96$",
        "explanation": "Wszystkie permutacje minus te z zerem na początku",
        "why": "Liczba naturalna nie może zaczynać się od zera. Odejmujemy $4!$ permutacji pozostałych $4$ cyfr (gdy $0$ jest na początku).",
        "interactive_choice": {
          "prompt": "Jak policzyć poprawne permutacje gdy zero jest wśród cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie $5!$ permutacji są dobre",
              "feedback": "Nie! Zero nie może być na pierwszej pozycji - to nie byłaby liczba pięciocyfrowa.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Policzyć $5!$ i odjąć permutacje z zerem na początku",
              "feedback": "Dokładnie! To daje $5! - 4! = 120 - 24 = 96$ dobrych permutacji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wybrać pierwszą cyfrę ($4$ możliwości), resztę dowolnie",
              "feedback": "Świetnie! To daje $4 \\cdot 4! = 4 \\cdot 24 = 96$ permutacji.",
              "is_correct": true
            }
          ],
          "explanation_after": "Zero nie może być pierwszą cyfrą. Mamy $5! - 4! = 96$ lub $4 \\cdot 4! = 96$ dobrych permutacji."
        }
      },
      {
        "step": 11,
        "hint": "Ile liczb daje przypadek II?",
        "expression": "$40 \\cdot 96 = 3840$",
        "explanation": "Mnożymy liczbę zestawów cyfr przez liczbę poprawnych permutacji"
      },
      {
        "step": 12,
        "hint": "Jaka jest całkowita liczba takich liczb naturalnych?",
        "expression": "$7200 + 3840 = 11040$",
        "explanation": "Sumujemy wyniki z obu przypadków"
      }
    ],
    "solutions": [
      "$11040$"
    ],
    "parameters": {
      "constraints": "5 cyfr, bez powtórzeń, $3$ nieparzyste, $2$ parzyste"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 6
      }
    },
    "timestamp": "2025-10-03T07:16:22.088Z"
  }
]