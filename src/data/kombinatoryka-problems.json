[
  {
    "id": "elevator_combinatorics_any_floor",
    "topic": "Kombinatoryka - rozmieszczenia z powtórzeniami",
    "difficulty": 3,
    "statement": "Na parterze wieżowca mającego osiem pięter do windy wsiada pięć osób. Na ile sposobów te osoby mogą wysiąść na piętrach, jeśli każda z tych osób wybiera piętro dowolnie? Pomijamy kolejność wysiadania z windy na poszczególnych piętrach.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile pięter ma do wyboru każda osoba?",
        "expression": "Każda z 5 osób może wysiąść na jednym z 8 pięter",
        "explanation": "Wieżowiec ma 8 pięter, więc każda osoba ma 8 możliwości wyboru"
      },
      {
        "step": 2,
        "hint": "Czy wybory poszczególnych osób wpływają na siebie nawzajem?",
        "expression": "Wybory są niezależne - każda osoba ma 8 opcji",
        "explanation": "Nie ma ograniczeń - kilka osób może wysiąść na tym samym piętrze",
        "interactive_choice": {
          "prompt": "Jak interpretować fakt, że każda osoba wybiera piętro dowolnie?",
          "options": [
            {
              "id": "A",
              "text": "Każda osoba może wybrać dowolne piętro, niezależnie od innych",
              "feedback": "Dokładnie! To oznacza, że kilka osób może wysiąść na tym samym piętrze.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Każda osoba musi wybrać inne piętro",
              "feedback": "Nie - zadanie nie mówi o ograniczeniach, więc osoby mogą wysiadać na tym samym piętrze.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Osoby wybierają piętra w określonej kolejności",
              "feedback": "Nie - zadanie mówi, że pomijamy kolejność wysiadania.",
              "is_correct": false
            }
          ],
          "explanation_after": "To problem rozmieszczenia z powtórzeniami - każda osoba ma pełną swobodę wyboru."
        }
      },
      {
        "step": 3,
        "hint": "Jaki typ problemu kombinatorycznego to jest?",
        "expression": "Wariacje z powtórzeniami: $8^5$",
        "explanation": "Wzór na wariacje z powtórzeniami k-elementowe ze zbioru n-elementowego",
        "why": "Każda z 5 osób (pozycji) może wybrać jedno z 8 pięter (elementów), z możliwością powtórzeń.",
        "interactive_choice": {
          "prompt": "Którą metodę kombinatoryczną zastosować do tego problemu?",
          "options": [
            {
              "id": "A",
              "text": "Wariacje z powtórzeniami",
              "feedback": "Świetnie! Mamy 5 osób (pozycji) i 8 pięter (elementów) z możliwością powtórzeń.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wariacje bez powtórzeń",
              "feedback": "Nie - osoby mogą wysiadać na tym samym piętrze, więc są powtórzenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje",
              "feedback": "Nie - liczy się która osoba na którym piętrze wysiada, więc kolejność ma znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "To wariacje z powtórzeniami: $n^k$ gdzie $n$ to liczba elementów, $k$ to liczba pozycji."
        }
      },
      {
        "step": 4,
        "hint": "Jak zastosować regułę iloczynu do tego problemu?",
        "expression": "Osoba 1: 8 możliwości, Osoba 2: 8 możliwości, ..., Osoba 5: 8 możliwości",
        "explanation": "Każda osoba ma niezależnie 8 wyborów"
      },
      {
        "step": 5,
        "hint": "Ile wynosi iloczyn $8 \\times 8 \\times 8 \\times 8 \\times 8$?",
        "expression": "$8^5 = 8 \\times 8 \\times 8 \\times 8 \\times 8$",
        "explanation": "Obliczamy potęgę piątą liczby 8",
        "interactive_choice": {
          "prompt": "Jak najłatwiej obliczyć $8^5$?",
          "options": [
            {
              "id": "A",
              "text": "Obliczyć krok po kroku: $8^2 = 64$, $8^3 = 512$, itd.",
              "feedback": "Dobra metoda - systematyczne podejście daje pewność wyniku.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru $(2^3)^5 = 2^{15}$",
              "feedback": "Sprytnie! $8 = 2^3$, więc $8^5 = 2^{15} = 32768$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Pomnożyć $8 \\times 5 = 40$",
              "feedback": "Nie - to nie jest mnożenie, tylko potęgowanie $8^5$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia A i B są poprawne. Wybierz metodę, która jest dla Ciebie jaśniejsza."
        }
      },
      {
        "step": 6,
        "hint": "Jaki jest wynik obliczeń?",
        "expression": "$8^2 = 64$, $8^3 = 512$, $8^4 = 4096$, $8^5 = 32768$",
        "explanation": "Obliczamy kolejne potęgi liczby 8"
      },
      {
        "step": 7,
        "hint": "Ile jest wszystkich możliwych sposobów wysiadania?",
        "expression": "Liczba sposobów = $32768$",
        "explanation": "Otrzymujemy ostateczną odpowiedź"
      }
    ],
    "solutions": [
      "$32768$ sposobów"
    ],
    "parameters": {
      "people": 5,
      "floors": 8,
      "method": "Wariacje z powtórzeniami"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-13T19:19:54.074Z"
  },
  {
    "id": "elevator_combinatorics_specific_floors",
    "topic": "Kombinatoryka - rozmieszczenia z powtórzeniami",
    "difficulty": 3,
    "statement": "Na parterze wieżowca mającego osiem pięter do windy wsiada pięć osób. Na ile sposobów te osoby mogą wysiąść na piętrach, jeśli każda z tych osób wysiada na czwartym, piątym lub szóstym piętrze? Pomijamy kolejność wysiadania z windy na poszczególnych piętrach.",
    "steps": [
      {
        "step": 1,
        "hint": "Co dokładnie musimy policzyć w tym zadaniu?",
        "expression": "Każda z 5 osób może wysiąść na jednym z 3 pięter (4., 5. lub 6.)",
        "explanation": "Analizujemy sytuację - mamy 5 osób i 3 możliwe piętra do wyboru"
      },
      {
        "step": 2,
        "hint": "Czy kolejność osób ma znaczenie w tym problemie?",
        "expression": "Problem: przypisać każdej z 5 osób jedno z 3 pięter",
        "explanation": "Każda osoba ma 3 możliwości wyboru piętra",
        "interactive_choice": {
          "prompt": "Jak interpretować sformułowanie 'pomijamy kolejność wysiadania z windy'?",
          "options": [
            {
              "id": "A",
              "text": "Osoby są rozróżnialne, ale kolejność wysiadania nie ma znaczenia",
              "feedback": "Dokładnie! Liczy się tylko na którym piętrze wysiada każda konkretna osoba.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Osoby są nierozróżnialne - liczy się tylko liczba osób na każdym piętrze",
              "feedback": "Nie - gdyby tak było, zadanie brzmiałoby inaczej. Osoby są różne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kolejność pięter nie ma znaczenia",
              "feedback": "Nie - piętra są konkretne (4., 5., 6.). Chodzi o kolejność wysiadania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Osoby są rozróżnialne, ale nie interesuje nas w jakiej kolejności wysiadają na danym piętrze."
        }
      },
      {
        "step": 3,
        "hint": "Jaką metodę kombinatoryczną zastosować?",
        "expression": "Stosujemy wzór na wariacje z powtórzeniami: $n^k$",
        "explanation": "Mamy $n = 3$ piętra i $k = 5$ osób do rozmieszczenia",
        "why": "Wariacje z powtórzeniami to sytuacje gdzie każdy obiekt może trafić do dowolnej grupy, niezależnie od innych.",
        "interactive_choice": {
          "prompt": "Który wzór kombinatoryczny pasuje do tego problemu?",
          "options": [
            {
              "id": "A",
              "text": "Wariacje z powtórzeniami $V_n^k = n^k$",
              "feedback": "Świetnie! Każda osoba może wybrać dowolne piętro - to właśnie $3^5$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wariacje bez powtórzeń $V_n^k = \\frac{n!}{(n-k)!}$",
              "feedback": "Nie - więcej osób (5) niż pięter (3), więc muszą być powtórzenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje $C_n^k = \\binom{n}{k}$",
              "feedback": "Nie - kombinacje nie uwzględniają który konkretnie obiekt gdzie trafia.",
              "is_correct": false
            }
          ],
          "explanation_after": "To klasyczne rozmieszczenie z powtórzeniami - każda osoba niezależnie wybiera piętro."
        }
      },
      {
        "step": 4,
        "hint": "Ile możliwości ma pierwsza osoba?",
        "expression": "Pierwsza osoba: 3 możliwości (piętro 4, 5 lub 6)",
        "explanation": "Każda osoba może wybrać dowolne z trzech pięter"
      },
      {
        "step": 5,
        "hint": "Czy wybór pierwszej osoby wpływa na możliwości pozostałych?",
        "expression": "Druga osoba: również 3 możliwości (niezależnie od pierwszej)",
        "explanation": "Powtórzenia są dozwolone - na jednym piętrze może wysiąść więcej osób"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć całkowitą liczbę sposobów?",
        "expression": "$3^5 = 3 \\times 3 \\times 3 \\times 3 \\times 3$",
        "explanation": "Każda z 5 osób ma 3 niezależne możliwości",
        "interactive_choice": {
          "prompt": "Jak połączyć wybory wszystkich pięciu osób?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $3 + 3 + 3 + 3 + 3 = 15$",
              "feedback": "Nie - dodawanie to alternatywa. Tu każda osoba ORAZ następna wybiera.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $3 \\times 3 \\times 3 \\times 3 \\times 3 = 3^5$",
              "feedback": "Dokładnie! Zasada mnożenia - każdy wybór jest niezależny.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje",
              "feedback": "Nie - permutacje to przestawianie obiektów, a tu przypisujemy miejsca.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: jeśli mamy sekwencję niezależnych wyborów, mnożymy liczby możliwości."
        }
      },
      {
        "step": 7,
        "hint": "Ile wynosi $3^5$?",
        "expression": "$3^5 = 243$",
        "explanation": "Obliczamy potęgę: $3^5 = 243$"
      }
    ],
    "solutions": [
      "243"
    ],
    "parameters": {
      "people": 5,
      "floors": 3,
      "method": "wariacje z powtórzeniami"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:20:23.896Z"
  },
  {
    "id": "elevator_permutations",
    "topic": "Wariacje bez powtórzeń",
    "difficulty": 3,
    "statement": "Na parterze wieżowca mającego osiem pięter do windy wsiada pięć osób. Na ile sposobów te osoby mogą wysiąść na piętrach, jeśli żadne dwie osoby nie wysiadają na tym samym piętrze? Pomijamy kolejność wysiadania z windy na poszczególnych piętrach.",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek, że żadne dwie osoby nie wysiadają na tym samym piętrze?",
        "expression": "Każda z 5 osób musi wysiąść na innym piętrze spośród 8 dostępnych pięter",
        "explanation": "To oznacza, że wybieramy 5 różnych pięter z 8 możliwych i przypisujemy je osobom"
      },
      {
        "step": 2,
        "hint": "Czy kolejność przypisania osób do pięter ma znaczenie?",
        "expression": "To zadanie na wariacje bez powtórzeń: $V_8^5$",
        "explanation": "Wybieramy 5 pięter z 8 i przypisujemy je konkretnym osobom",
        "interactive_choice": {
          "prompt": "Jak interpretować frazę 'pomijamy kolejność wysiadania z windy'?",
          "options": [
            {
              "id": "A",
              "text": "Kolejność nie ma znaczenia - to kombinacje",
              "feedback": "Nie! Osoby są różne, więc przypisanie osoby A na 3. piętro to co innego niż osoby B na 3. piętro",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Kolejność ma znaczenie - to wariacje",
              "feedback": "Dokładnie! Różne osoby na różnych piętrach to różne sposoby",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To zadanie na rozmieszczenia z powtórzeniami",
              "feedback": "Nie - warunek mówi, że żadne dwie osoby nie wysiadają na tym samym piętrze",
              "is_correct": false
            }
          ],
          "explanation_after": "Fraza o kolejności odnosi się do tego, że nie liczymy kto pierwszy wysiada na danym piętrze, ale osoby są różne."
        }
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę wariacji bez powtórzeń?",
        "expression": "$V_8^5 = \\frac{8!}{3!}$",
        "explanation": "Stosujemy wzór na wariacje bez powtórzeń",
        "why": "Wariacje bez powtórzeń to wybór k elementów z n, gdzie kolejność ma znaczenie i nie ma powtórzeń.",
        "interactive_choice": {
          "prompt": "Którym wzorem obliczymy $V_8^5$?",
          "options": [
            {
              "id": "A",
              "text": "$V_8^5 = \\frac{8!}{5!}$",
              "feedback": "Nie, to byłoby $\\frac{8!}{(8-5)!} = \\frac{8!}{3!}$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$V_8^5 = \\frac{8!}{(8-5)!} = \\frac{8!}{3!}$",
              "feedback": "Świetnie! To jest poprawny wzór na wariacje bez powtórzeń",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$V_8^5 = 8 \\cdot 5$",
              "feedback": "To zbyt proste - nie uwzględnia wszystkich możliwości wyboru",
              "is_correct": false
            }
          ],
          "explanation_after": "Wzór $V_n^k = \\frac{n!}{(n-k)!}$ daje liczbę sposobów wyboru k elementów z n, gdzie kolejność ma znaczenie."
        }
      },
      {
        "step": 4,
        "hint": "Jak można też myśleć o tym problemie krok po kroku?",
        "expression": "Pierwsza osoba: 8 wyborów, druga: 7 wyborów, trzecia: 6 wyborów, czwarta: 5 wyborów, piąta: 4 wybory",
        "explanation": "Każda kolejna osoba ma o jeden wybór mniej, bo poprzednie piętra są zajęte"
      },
      {
        "step": 5,
        "hint": "Jaki będzie wynik mnożenia $8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4$?",
        "expression": "$8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 = \\frac{8!}{3!}$",
        "explanation": "Oba sposoby myślenia prowadzą do tego samego wyniku",
        "interactive_choice": {
          "prompt": "Czy $8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4$ to to samo co $\\frac{8!}{3!}$?",
          "options": [
            {
              "id": "A",
              "text": "Nie, to różne wyrażenia",
              "feedback": "Sprawdź ponownie - rozłóż $\\frac{8!}{3!}$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tak, to identyczne wyrażenia",
              "feedback": "Dokładnie! $\\frac{8!}{3!} = \\frac{8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3!}{3!} = 8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Pierwsze jest większe od drugiego",
              "feedback": "To są identyczne wyrażenia, więc mają tę samą wartość",
              "is_correct": false
            }
          ],
          "explanation_after": "Oba podejścia dają ten sam wynik - to dwie metody obliczania wariacji."
        }
      },
      {
        "step": 6,
        "hint": "Oblicz wartość liczbową tego wyrażenia",
        "expression": "$8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 = 6720$",
        "explanation": "Wykonujemy mnożenie: $8 \\cdot 7 = 56$, $56 \\cdot 6 = 336$, $336 \\cdot 5 = 1680$, $1680 \\cdot 4 = 6720$"
      }
    ],
    "solutions": [
      "6720"
    ],
    "parameters": {
      "method": "Wariacje bez powtórzeń $V_8^5$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:20:54.868Z"
  },
  {
    "id": "elevator_combinatorics_at_least_one",
    "topic": "Kombinatoryka - zasada włączeń i wyłączeń",
    "difficulty": 4,
    "statement": "Na parterze wieżowca mającego osiem pięter do windy wsiada pięć osób. Na ile sposobów te osoby mogą wysiąść na piętrach, jeśli co najmniej jedna osoba wysiada na siódmym piętrze? Pomijamy kolejność wysiadania z windy na poszczególnych piętrach.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile pięter jest dostępnych dla wysiadania?",
        "expression": "Piętro 1, 2, 3, 4, 5, 6, 7, 8 - razem 8 pięter",
        "explanation": "Każda z 5 osób może wysiąść na dowolnym z 8 pięter"
      },
      {
        "step": 2,
        "hint": "Jak podejść do problemu z warunkiem 'co najmniej jedna osoba na 7. piętrze'?",
        "expression": "Liczba sposobów = (wszystkie sposoby) - (sposoby bez nikogo na 7. piętrze)",
        "explanation": "Stosujemy zasadę dopełnienia",
        "why": "Dla warunków 'co najmniej' zasada dopełnienia jest zwykle najefektywniejsza",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować dla warunku 'co najmniej jedna osoba na 7. piętrze'?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio liczyć przypadki z osobami na 7. piętrze",
              "feedback": "Możliwe, ale bardzo skomplikowane - trzeba rozpatrywać 1, 2, 3, 4 lub 5 osób na 7. piętrze",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Zasada dopełnienia: wszystkie sposoby minus sposoby bez nikogo na 7. piętrze",
              "feedback": "Doskonały wybór! To znacznie prostsze - jeden przypadek do odjęcia",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzór na rozmieszczenia z powtórzeniami",
              "feedback": "To część rozwiązania, ale nie uwzględnia warunku o 7. piętrze",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: P(co najmniej 1) = P(wszystkie) - P(żadna)"
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów 5 osób może wysiąść na 8 piętrach bez ograniczeń?",
        "expression": "Każda osoba ma 8 wyborów, więc $8^5$ sposobów",
        "explanation": "Każda z 5 osób niezależnie wybiera jedno z 8 pięter"
      },
      {
        "step": 4,
        "hint": "Ile wynosi $8^5$?",
        "expression": "$8^5 = 32768$",
        "explanation": "Obliczamy całkowitą liczbę sposobów"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów 5 osób może wysiąść, jeśli NIKT nie wysiada na 7. piętrze?",
        "expression": "Każda osoba ma 7 wyborów, więc $7^5$ sposobów",
        "explanation": "5 osób, każda wybiera z 7 dostępnych pięter (bez 7. piętra)",
        "interactive_choice": {
          "prompt": "Ile pięter jest dostępnych, gdy wykluczamy 7. piętro?",
          "options": [
            {
              "id": "A",
              "text": "7 pięter (wszystkie oprócz 7.)",
              "feedback": "Dokładnie! Zostają piętra 1, 2, 3, 4, 5, 6, 8",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "6 pięter (1-6)",
              "feedback": "Nie - zapominasz o 8. piętrze, które nadal jest dostępne",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "8 pięter (bez zmian)",
              "feedback": "Nie - wykluczamy 7. piętro, więc zostaje mniej opcji",
              "is_correct": false
            }
          ],
          "explanation_after": "Wykluczając 7. piętro, zostaje 7 dostępnych pięter dla każdej osoby"
        }
      },
      {
        "step": 6,
        "hint": "Ile wynosi $7^5$?",
        "expression": "$7^5 = 16807$",
        "explanation": "Obliczamy liczbę sposobów bez nikogo na 7. piętrze"
      },
      {
        "step": 7,
        "hint": "Jaka jest różnica między wszystkimi sposobami a sposobami bez nikogo na 7. piętrze?",
        "expression": "$8^5 - 7^5 = 32768 - 16807 = 15961$",
        "explanation": "Stosujemy zasadę dopełnienia",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów z co najmniej jedną osobą na 7. piętrze?",
          "options": [
            {
              "id": "A",
              "text": "$8^5 + 7^5$",
              "feedback": "Nie - to by dodawało przypadki, a nie odejmowało niepożądane",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$8^5 - 7^5$",
              "feedback": "Perfekcyjnie! Wszystkie sposoby minus te bez nikogo na 7. piętrze",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$7^5 - 8^5$",
              "feedback": "Nie - to dałoby liczbę ujemną, co nie ma sensu",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: odejmujemy przypadki niepożądane od wszystkich możliwych"
        }
      }
    ],
    "solutions": [
      "15961"
    ],
    "parameters": {
      "floors": 8,
      "people": 5,
      "condition": "co najmniej jedna osoba na 7. piętrze"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:21:20.358Z"
  },
  {
    "id": "permutations_four_students",
    "topic": "Permutacje",
    "difficulty": 2,
    "statement": "Każdemu spośród czterech uczniów przyporządkowujemy ocenę roczną z matematyki. Ile jest możliwych wyników tego przyporządkowania, jeżeli każdy z uczniów będzie miał inną ocenę?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych ocen może otrzymać uczeń z matematyki?",
        "expression": "Oceny: 1, 2, 3, 4, 5, 6 (sześć różnych ocen)",
        "explanation": "W polskim systemie oceniania mamy sześć stopni"
      },
      {
        "step": 2,
        "hint": "Jaki typ problemu kombinatorycznego to jest?",
        "expression": "Szukamy liczby wariacji bez powtórzeń: $V_6^4$",
        "explanation": "Wybieramy 4 różne oceny z 6 możliwych i przypisujemy je 4 uczniom",
        "interactive_choice": {
          "prompt": "Jak podejść do tego problemu przyporządkowania ocen?",
          "options": [
            {
              "id": "A",
              "text": "To problem kombinacji - wybieramy 4 oceny z 6",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu każdy uczeń ma konkretną ocenę",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To problem wariacji - wybieramy i ustawiamy 4 oceny z 6",
              "feedback": "Dokładnie! Wybieramy 4 różne oceny z 6 i przypisujemy je konkretnym uczniom",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To problem permutacji wszystkich 6 ocen",
              "feedback": "Nie - używamy tylko 4 oceny, nie wszystkie 6",
              "is_correct": false
            }
          ],
          "explanation_after": "To wariacje bez powtórzeń: $V_6^4$ - wybieramy 4 różne oceny z 6 dostępnych i przypisujemy je uczniom."
        }
      },
      {
        "step": 3,
        "hint": "Jak obliczyć liczbę wariacji $V_6^4$?",
        "expression": "$V_6^4 = \\frac{6!}{2!} = 6 \\cdot 5 \\cdot 4 \\cdot 3$",
        "explanation": "Używamy wzoru na wariacje bez powtórzeń",
        "why": "Wariacje bez powtórzeń to wybór k elementów z n, gdzie kolejność ma znaczenie i elementy się nie powtarzają.",
        "interactive_choice": {
          "prompt": "Którym wzorem obliczyć $V_6^4$?",
          "options": [
            {
              "id": "A",
              "text": "$V_6^4 = \\frac{6!}{4!}$",
              "feedback": "Nie - to byłoby $\\frac{6!}{(6-4)!} = \\frac{6!}{2!}$",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$V_6^4 = \\frac{6!}{(6-4)!} = \\frac{6!}{2!}$",
              "feedback": "Świetnie! To jest poprawny wzór na wariacje bez powtórzeń",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$V_6^4 = 6 \\cdot 5 \\cdot 4 \\cdot 3$",
              "feedback": "Tak! To jest równoważny sposób - mnożymy kolejne malejące liczby",
              "is_correct": true
            }
          ],
          "explanation_after": "Oba wzory są poprawne: $V_n^k = \\frac{n!}{(n-k)!}$ lub bezpośrednio $n \\cdot (n-1) \\cdot ... \\cdot (n-k+1)$"
        }
      },
      {
        "step": 4,
        "hint": "Dlaczego mnożymy właśnie te liczby: 6, 5, 4, 3?",
        "expression": "Pierwszy uczeń: 6 możliwości, drugi: 5, trzeci: 4, czwarty: 3",
        "explanation": "Każdy kolejny uczeń ma o jedną ocenę mniej do wyboru"
      },
      {
        "step": 5,
        "hint": "Jaki jest wynik mnożenia $6 \\cdot 5 \\cdot 4 \\cdot 3$?",
        "expression": "$6 \\cdot 5 \\cdot 4 \\cdot 3 = 360$",
        "explanation": "Obliczamy iloczyn kolejnych liczb",
        "interactive_choice": {
          "prompt": "Jak najłatwiej obliczyć $6 \\cdot 5 \\cdot 4 \\cdot 3$?",
          "options": [
            {
              "id": "A",
              "text": "Mnożyć po kolei: $6 \\cdot 5 = 30$, potem $30 \\cdot 4 = 120$, na koniec $120 \\cdot 3 = 360$",
              "feedback": "Dobra metoda - systematyczne mnożenie krok po kroku",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pogrupować: $(6 \\cdot 4) \\cdot (5 \\cdot 3) = 24 \\cdot 15 = 360$",
              "feedback": "Sprytnie! Grupowanie może ułatwić obliczenia",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć kalkulatora od razu",
              "feedback": "Można, ale warto umieć liczyć takie proste mnożenia w pamięci",
              "is_correct": true
            }
          ],
          "explanation_after": "Wszystkie metody dają ten sam wynik. Ważne to zrozumienie skąd się bierze to mnożenie."
        }
      },
      {
        "step": 6,
        "hint": "Ile jest możliwych przyporządkowań ocen uczniom?",
        "expression": "Liczba możliwych przyporządkowań = 360",
        "explanation": "Każdy z 360 sposobów daje inne przyporządkowanie ocen uczniom"
      }
    ],
    "solutions": [
      "360"
    ],
    "parameters": {
      "students": 4,
      "grades": 6,
      "condition": "każdy uczeń ma inną ocenę"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 6
      }
    },
    "timestamp": "2025-09-13T19:21:56.668Z"
  },
  {
    "id": "assignment_counting",
    "topic": "Reguła iloczynu w kombinatoryce",
    "difficulty": 2,
    "statement": "Każdemu spośród czterech uczniów przyporządkowujemy ocenę roczną z matematyki. Ile jest możliwych wyników tego przyporządkowania, jeżeli każdy z uczniów może uzyskać dowolną ocenę?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile różnych ocen może otrzymać jeden uczeń?",
        "expression": "Oceny: 1, 2, 3, 4, 5, 6 - razem 6 możliwości",
        "explanation": "Każdy uczeń może otrzymać jedną z sześciu ocen"
      },
      {
        "step": 2,
        "hint": "Czy wybór oceny dla jednego ucznia wpływa na wybór oceny dla pozostałych?",
        "expression": "Wybory są niezależne - stosujemy regułę iloczynu",
        "explanation": "Ocena każdego ucznia nie ogranicza ocen pozostałych",
        "interactive_choice": {
          "prompt": "Jak oceny uczniów wpływają na siebie nawzajem?",
          "options": [
            {
              "id": "A",
              "text": "Każdy uczeń może dostać dowolną ocenę niezależnie od innych",
              "feedback": "Dokładnie! To oznacza, że wybory są niezależne - możemy użyć reguły iloczynu.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Każda ocena może być przydzielona tylko jednemu uczniowi",
              "feedback": "Nie - w zadaniu nie ma takiego ograniczenia. Wszyscy mogą dostać tę samą ocenę.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Musi być co najmniej jedna ocena z każdego rodzaju",
              "feedback": "Nie - zadanie nie wymaga różnorodności ocen. Każdy wybór jest niezależny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Skoro wybory są niezależne, stosujemy regułę iloczynu: mnożymy liczbę możliwości dla każdego ucznia."
        }
      },
      {
        "step": 3,
        "hint": "Jaką metodę kombinatoryczną zastosować dla niezależnych wyborów?",
        "expression": "Liczba sposobów = $6 \\times 6 \\times 6 \\times 6$",
        "explanation": "Mnożymy liczbę możliwości dla każdego z czterech uczniów",
        "why": "Reguła iloczynu: gdy wykonujemy sekwencję niezależnych wyborów, mnożymy liczbę możliwości na każdym etapie.",
        "interactive_choice": {
          "prompt": "Którą regułę kombinatoryczną użyć do policzenia wszystkich możliwości?",
          "options": [
            {
              "id": "A",
              "text": "Regułę sumy (dodawanie)",
              "feedback": "Nie - reguła sumy dotyczy sytuacji 'albo-albo', a tu mamy sekwencję wyborów.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Regułę iloczynu (mnożenie)",
              "feedback": "Świetnie! Dla sekwencji niezależnych wyborów mnożymy liczbę możliwości.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzór na permutacje",
              "feedback": "Nie - permutacje dotyczą układania obiektów w kolejności, a tu przypisujemy oceny.",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: jeśli mamy k niezależnych wyborów z $n_1, n_2, ..., n_k$ możliwości, to razem jest $n_1 \\times n_2 \\times ... \\times n_k$ sposobów."
        }
      },
      {
        "step": 4,
        "hint": "Jak obliczyć $6^4$?",
        "expression": "$6^4 = 6 \\times 6 \\times 6 \\times 6 = 1296$",
        "explanation": "Obliczamy potęgę czwartą liczby 6"
      },
      {
        "step": 5,
        "hint": "Czy możemy sprawdzić wynik dla prostszego przypadku?",
        "expression": "Odpowiedź: 1296 możliwych wyników przyporządkowania",
        "explanation": "Każdy z 4 uczniów może otrzymać jedną z 6 ocen niezależnie",
        "interactive_choice": {
          "prompt": "Jak sprawdzić poprawność wyniku?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić dla 2 uczniów: $6^2 = 36$ sposobów",
              "feedback": "Dobra idea! Dla 2 uczniów rzeczywiście jest 36 par (ocena1, ocena2).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Sprawdzić czy $1296 = 6 \\times 216$",
              "feedback": "To tylko sprawdza arytmetykę, ale nie logikę rozwiązania.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Porównać z liczbą permutacji 4 uczniów",
              "feedback": "Nie - permutacje to inny typ problemu (układanie w kolejności).",
              "is_correct": false
            }
          ],
          "explanation_after": "Sprawdzenie na prostszym przypadku potwierdza metodę. Dla n uczniów odpowiedź to $6^n$."
        }
      }
    ],
    "solutions": [
      "1296"
    ],
    "parameters": {
      "students": 4,
      "grades": 6
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:22:24.118Z"
  },
  {
    "id": "two_digit_even_complement",
    "topic": "Kombinatoryka - zasada dopełnienia",
    "difficulty": 3,
    "statement": "Ile jest liczb dwucyfrowych, w których co najmniej jedna cyfra jest parzysta?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle jest liczb dwucyfrowych?",
        "expression": "Liczby dwucyfrowe: od 10 do 99, czyli $99 - 10 + 1 = 90$ liczb",
        "explanation": "Ustalamy zakres wszystkich możliwych liczb dwucyfrowych"
      },
      {
        "step": 2,
        "hint": "Którą metodę wybierzesz do rozwiązania tego problemu?",
        "expression": "Szukane = Wszystkie - (Tylko nieparzyste cyfry)",
        "explanation": "Używamy zasady dopełnienia",
        "why": "\"Co najmniej jedna\" sugeruje użycie dopełnienia - łatwiej policzyć przypadek przeciwny.",
        "interactive_choice": {
          "prompt": "Jak najefektywniej policzyć liczby z co najmniej jedną cyfrą parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio - policzyć wszystkie przypadki z parzystą cyfrą",
              "feedback": "Możliwe, ale trzeba rozpatrzyć wiele przypadków (parzysta pierwsza, parzysta druga, obie parzyste)",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Zasada dopełnienia - od wszystkich odjąć te z samymi nieparzystymi",
              "feedback": "Świetnie! To znacznie prostsze - tylko jeden przypadek do policzenia",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zasada mnożenia - osobno pierwsza i druga cyfra",
              "feedback": "To prowadzi do skomplikowanych obliczeń z nakładaniem się przypadków",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: jeśli trudno policzyć wprost, policz przeciwność i odejmij od całości."
        }
      },
      {
        "step": 3,
        "hint": "Jakie cyfry są nieparzyste?",
        "expression": "Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$ - jest ich 5",
        "explanation": "Identyfikujemy cyfry nieparzyste"
      },
      {
        "step": 4,
        "hint": "Ile jest liczb dwucyfrowych złożonych tylko z cyfr nieparzystych?",
        "expression": "Pierwsza cyfra: 5 wybory $\\{1,3,5,7,9\\}$, druga cyfra: 5 wyborów $\\{1,3,5,7,9\\}$",
        "explanation": "Każda pozycja ma 5 możliwości cyfr nieparzystych",
        "interactive_choice": {
          "prompt": "Jak policzyć liczby dwucyfrowe z samymi nieparzystymi cyframi?",
          "options": [
            {
              "id": "A",
              "text": "Pierwsza cyfra: 5 możliwości, druga cyfra: 5 możliwości",
              "feedback": "Dokładnie! Zasada mnożenia: $5 \\times 5 = 25$ liczb",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pierwsza cyfra: 4 możliwości (bez 0), druga: 5 możliwości",
              "feedback": "Nie - cyfra 0 jest parzysta, więc i tak jej nie używamy",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wypisać wszystkie: 11, 13, 15, 17, 19, 31, 33...",
              "feedback": "Możliwe, ale niepraktyczne - zasada mnożenia jest szybsza",
              "is_correct": false
            }
          ],
          "explanation_after": "W liczbach dwucyfrowych pierwsza cyfra nie może być 0, ale 0 jest parzyste, więc to nas nie ogranicza."
        }
      },
      {
        "step": 5,
        "hint": "Ile wynosi iloczyn możliwości?",
        "expression": "$5 \\times 5 = 25$ liczb z samymi nieparzystymi cyframi",
        "explanation": "Stosujemy zasadę mnożenia"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć końcowy wynik używając zasady dopełnienia?",
        "expression": "$90 - 25 = 65$",
        "explanation": "Odejmujemy liczby z samymi nieparzystymi cyframi od wszystkich dwucyfrowych",
        "interactive_choice": {
          "prompt": "Jaki jest ostateczny wynik?",
          "options": [
            {
              "id": "A",
              "text": "$90 - 25 = 65$ liczb",
              "feedback": "Perfekcyjnie! Od wszystkich dwucyfrowych odejmujemy te z samymi nieparzystymi",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$90 + 25 = 115$ liczb",
              "feedback": "Nie - dodawanie nie ma sensu w zasadzie dopełnienia",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$25$ liczb",
              "feedback": "To liczba z samymi nieparzystymi, a szukamy z co najmniej jedną parzystą",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: od zbioru wszystkich odejmujemy zbiór przeciwny do szukanego."
        }
      }
    ],
    "solutions": [
      "65"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:22:51.191Z"
  },
  {
    "id": "two_digit_odd_complement",
    "topic": "Kombinatoryka - zasada dopełnienia",
    "difficulty": 3,
    "statement": "Ile jest liczb dwucyfrowych, w których co najmniej jedna cyfra jest nieparzysta?",
    "steps": [
      {
        "step": 1,
        "hint": "Ile w ogóle jest liczb dwucyfrowych?",
        "expression": "Liczby dwucyfrowe: od $10$ do $99$, czyli $99 - 10 + 1 = 90$ liczb",
        "explanation": "Ustalamy zakres wszystkich liczb dwucyfrowych"
      },
      {
        "step": 2,
        "hint": "Którą metodę wybierzesz do rozwiązania tego problemu?",
        "expression": "Użyjemy zasady dopełnienia: wszystkie - tylko parzyste cyfry",
        "explanation": "Policzmy liczby gdzie obie cyfry są parzyste, a potem odejmiemy od 90",
        "why": "Zasada dopełnienia: jeśli trudno policzyć zdarzenie A, to liczymy |U| - |A'|, gdzie A' to przeciwność A.",
        "interactive_choice": {
          "prompt": "Jak najefektywniej policzyć liczby z co najmniej jedną cyfrą nieparzystą?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio - liczyć wszystkie przypadki z nieparzystymi cyframi",
              "feedback": "Możliwe, ale bardzo pracochłonne - trzeba rozpatrzyć wiele przypadków",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Zasada dopełnienia - odjąć liczby z samymi parzystymi cyframi",
              "feedback": "Świetnie! To znacznie prostsze - jeden przypadek do policzenia",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Zasada włączeń i wyłączeń",
              "feedback": "Niepotrzebnie skomplikowane dla tego problemu",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: łatwiej policzyć przeciwność i odjąć od całości."
        }
      },
      {
        "step": 3,
        "hint": "Które cyfry są parzyste?",
        "expression": "Cyfry parzyste: $0, 2, 4, 6, 8$ - razem $5$ cyfr",
        "explanation": "Identyfikujemy cyfry parzyste"
      },
      {
        "step": 4,
        "hint": "Czy cyfra dziesiątek może być zerem w liczbie dwucyfrowej?",
        "expression": "Cyfra dziesiątek: $4$ możliwości $(2, 4, 6, 8)$",
        "explanation": "Cyfra dziesiątek może być dowolną parzystą oprócz zera",
        "interactive_choice": {
          "prompt": "Jakie cyfry może mieć cyfra dziesiątek w liczbie dwucyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie parzyste: 0, 2, 4, 6, 8",
              "feedback": "Nie! Zero na początku nie tworzy liczby dwucyfrowej",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Parzyste bez zera: 2, 4, 6, 8",
              "feedback": "Dokładnie! Cyfra dziesiątek nie może być zerem",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko 2, 4, 6",
              "feedback": "Dlaczego pomijasz 8? Wszystkie parzyste oprócz 0 są dozwolone",
              "is_correct": false
            }
          ],
          "explanation_after": "W liczbie dwucyfrowej cyfra dziesiątek musi być różna od zera."
        }
      },
      {
        "step": 5,
        "hint": "Ile możliwości ma cyfra jedności?",
        "expression": "Cyfra jedności: $5$ możliwości $(0, 2, 4, 6, 8)$",
        "explanation": "Cyfra jedności może być dowolną cyfrą parzystą, włącznie z zerem"
      },
      {
        "step": 6,
        "hint": "Ile jest liczb dwucyfrowych z samymi parzystymi cyframi?",
        "expression": "$4 \\times 5 = 20$ liczb",
        "explanation": "Zasada mnożenia: 4 wybory dla dziesiątek × 5 wyborów dla jedności"
      },
      {
        "step": 7,
        "hint": "Jak obliczyć liczby z co najmniej jedną cyfrą nieparzystą?",
        "expression": "$90 - 20 = 70$",
        "explanation": "Odejmujemy liczby z samymi parzystymi cyframi od wszystkich liczb dwucyfrowych",
        "interactive_choice": {
          "prompt": "Jaki jest końcowy wzór na liczby z co najmniej jedną cyfrą nieparzystą?",
          "options": [
            {
              "id": "A",
              "text": "$90 + 20 = 110$",
              "feedback": "Nie - dodajesz zamiast odejmować!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$90 - 20 = 70$",
              "feedback": "Perfekcyjnie! Wszystkie minus te z samymi parzystymi",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$20 - 90 = -70$",
              "feedback": "Kolejność jest odwrotna - od większej odejmujemy mniejszą",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: |A| = |U| - |A'|, gdzie A' to liczby z samymi parzystymi cyframi."
        }
      }
    ],
    "solutions": [
      "$70$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:23:16.446Z"
  },
  {
    "id": "ordered_pairs_logic_range",
    "topic": "Kombinatoryka i logika",
    "difficulty": 3,
    "statement": "Dany jest zbiór $X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$. Ile jest par uporządkowanych $(a, b)$ takich, że liczby $a, b$ należą do zbioru $X$ oraz liczba $a$ jest mniejsza od 3 lub liczba $b$ jest większa od 7?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak zapisać warunek zadania w języku matematycznym?",
        "expression": "Szukamy par $(a, b)$ gdzie $a, b \\in X$ oraz $a < 3$ lub $b > 7$",
        "explanation": "Przepisujemy warunek używając symboli matematycznych"
      },
      {
        "step": 2,
        "hint": "Jakie elementy zbioru $X$ spełniają warunek $a < 3$?",
        "expression": "Dla $a < 3$: $a \\in \\{1, 2\\}$",
        "explanation": "Ze zbioru $X$ tylko liczby 1 i 2 są mniejsze od 3"
      },
      {
        "step": 3,
        "hint": "Jakie elementy zbioru $X$ spełniają warunek $b > 7$?",
        "expression": "Dla $b > 7$: $b \\in \\{8, 9, 10\\}$",
        "explanation": "Ze zbioru $X$ liczby 8, 9 i 10 są większe od 7"
      },
      {
        "step": 4,
        "hint": "Którą metodę wybierzesz do policzenia par spełniających warunek \"lub\"?",
        "expression": "Użyjemy wzoru $|A \\cup B| = |A| + |B| - |A \\cap B|$",
        "explanation": "Definiujemy $A$ = pary z $a < 3$, $B$ = pary z $b > 7$",
        "why": "Zasada włączeń i wyłączeń pozwala uniknąć podwójnego liczenia par spełniających oba warunki.",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć pary spełniające warunek $a < 3$ lub $b > 7$?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie pary bezpośrednio",
              "feedback": "Możliwe, ale pracochłonne - łatwo się pomylić przy 100 parach",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć wzoru: $|A \\cup B| = |A| + |B| - |A \\cap B|$",
              "feedback": "Świetnie! To zasada włączeń i wyłączeń - najefektywniejsza metoda",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Policzyć pary NIE spełniające warunek i odjąć od wszystkich",
              "feedback": "Dobra idea! Dopełnienie może być prostsze do policzenia",
              "is_correct": true
            }
          ],
          "explanation_after": "Dla warunków \"lub\" najlepiej użyć zasady włączeń-wyłączeń lub dopełnienia."
        }
      },
      {
        "step": 5,
        "hint": "Ile jest par $(a, b)$ gdzie $a < 3$?",
        "expression": "$|A| = 2 \\times 10 = 20$",
        "explanation": "Dla $a \\in \\{1, 2\\}$ (2 wybory) i $b \\in X$ (10 wyborów)"
      },
      {
        "step": 6,
        "hint": "Ile jest par $(a, b)$ gdzie $b > 7$?",
        "expression": "$|B| = 10 \\times 3 = 30$",
        "explanation": "Dla $a \\in X$ (10 wyborów) i $b \\in \\{8, 9, 10\\}$ (3 wybory)"
      },
      {
        "step": 7,
        "hint": "Które pary spełniają jednocześnie oba warunki $a < 3$ i $b > 7$?",
        "expression": "$|A \\cap B| = 2 \\times 3 = 6$",
        "explanation": "Pary: $(1,8), (1,9), (1,10), (2,8), (2,9), (2,10)$",
        "interactive_choice": {
          "prompt": "Ile par $(a, b)$ spełnia warunki $a < 3$ ORAZ $b > 7$?",
          "options": [
            {
              "id": "A",
              "text": "$2 \\times 3 = 6$ par",
              "feedback": "Dokładnie! $a \\in \\{1, 2\\}$ i $b \\in \\{8, 9, 10\\}$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$2 + 3 = 5$ par",
              "feedback": "Nie - to nie jest suma, lecz iloczyn liczby możliwości",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "0 par - warunki się wykluczają",
              "feedback": "Nie - warunki dotyczą różnych zmiennych, mogą zachodzić jednocześnie",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunki na różne zmienne mogą zachodzić jednocześnie. Liczymy wszystkie kombinacje."
        }
      },
      {
        "step": 8,
        "hint": "Jak zastosować wzór na sumę zbiorów?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B| = 20 + 30 - 6 = 44$",
        "explanation": "Dodajemy liczby par z każdego zbioru i odejmujemy przecięcie"
      },
      {
        "step": 9,
        "hint": "Czy możemy sprawdzić wynik metodą dopełnienia?",
        "expression": "Sprawdzenie: $100 - 56 = 44$ ✓",
        "explanation": "Potwierdzamy wynik metodą dopełnienia",
        "interactive_choice": {
          "prompt": "Sprawdźmy: ile par NIE spełnia warunków (czyli $a \\geq 3$ i $b \\leq 7$)?",
          "options": [
            {
              "id": "A",
              "text": "$8 \\times 7 = 56$ par",
              "feedback": "Dokładnie! $a \\in \\{3,4,5,6,7,8,9,10\\}$ i $b \\in \\{1,2,3,4,5,6,7\\}$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$7 \\times 8 = 56$ par",
              "feedback": "Wynik dobry, ale pomyliłeś kolejność - to przypadek!",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$10 \\times 10 - 44 = 56$ par",
              "feedback": "Tak! Wszystkie pary minus te spełniające warunek",
              "is_correct": true
            }
          ],
          "explanation_after": "Wszystkie metody dają 56. Sprawdzenie: $100 - 56 = 44$ ✓"
        }
      }
    ],
    "solutions": [
      "44"
    ],
    "parameters": {
      "set": "$X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$",
      "condition": "$a < 3$ lub $b > 7$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 6
      }
    },
    "timestamp": "2025-09-13T19:23:48.235Z"
  },
  {
    "id": "ordered_pairs_greater_than",
    "topic": "Kombinatoryka - zliczanie par uporządkowanych",
    "difficulty": 3,
    "statement": "Dany jest zbiór $X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$. Ile jest par uporządkowanych $(a, b)$ takich, że liczby $a, b$ należą do zbioru $X$ oraz liczba $a$ jest większa od $b$ lub liczba $b$ jest większa od liczby $9$?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak można zapisać warunek zadania w języku matematycznym?",
        "expression": "Szukamy par $(a, b)$ gdzie $a, b \\in X$ oraz $a > b$ lub $b > 9$",
        "explanation": "Przepisujemy warunki zadania używając symboli matematycznych"
      },
      {
        "step": 2,
        "hint": "Jakie wartości może przyjmować $b$ w warunku $b > 9$?",
        "expression": "Warunek $b > 9$ oznacza $b = 10$",
        "explanation": "W zbiorze $X$ tylko element $10$ spełnia warunek $b > 9$",
        "interactive_choice": {
          "prompt": "Które elementy zbioru $X$ spełniają warunek $b > 9$?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $b = 10$",
              "feedback": "Dokładnie! W zbiorze $X$ tylko liczba $10$ jest większa od $9$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$b \\in \\{9, 10\\}$",
              "feedback": "Nie - liczba $9$ nie jest większa od $9$, tylko równa",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Żadne - wszystkie są mniejsze lub równe $9$",
              "feedback": "Nieprawda - liczba $10$ należy do zbioru $X$ i jest większa od $9$",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek $b > 9$ oznacza, że $b$ musi być większe niż $9$, więc tylko $b = 10$."
        }
      },
      {
        "step": 3,
        "hint": "Jak można rozbić problem na przypadki?",
        "expression": "Przypadek 1: $a > b$, Przypadek 2: $b > 9$, Przypadek 3: $a > b$ i $b > 9$",
        "explanation": "Dzielimy na przypadki używając zasady włączeń i wyłączeń",
        "why": "Warunek \"lub\" w kombinatoryce często wymaga ostrożnego zliczania, żeby nie liczyć elementów dwukrotnie.",
        "interactive_choice": {
          "prompt": "Jak najlepiej podzielić zliczanie par ze względu na warunek \"$a > b$ lub $b > 9$\"?",
          "options": [
            {
              "id": "A",
              "text": "Przypadek 1: $a > b$, Przypadek 2: $b > 9$, potem odjąć część wspólną",
              "feedback": "Świetnie! To zasada włączeń i wyłączeń - unikniemy podwójnego liczenia",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Rozpatrzyć każdą parę $(a,b)$ osobno",
              "feedback": "Możliwe, ale bardzo pracochłonne - jest $100$ par do sprawdzenia",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Przypadek 1: $b = 10$, Przypadek 2: $b \\neq 10$",
              "feedback": "To też działa, ale mniej systematyczne niż podział według warunków",
              "is_correct": false
            }
          ],
          "explanation_after": "Używamy zasady: $|A \\cup B| = |A| + |B| - |A \\cap B|$ gdzie $A$ to pary z $a > b$, $B$ to pary z $b > 9$."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest par $(a, b)$ takich, że $a > b$?",
        "expression": "Dla każdego $b$ mamy $10 - b$ możliwości na $a$",
        "explanation": "Jeśli $b = 1$, to $a \\in \\{2,3,...,10\\}$ (9 możliwości), jeśli $b = 2$, to $a \\in \\{3,4,...,10\\}$ (8 możliwości), itd."
      },
      {
        "step": 5,
        "hint": "Jak obliczyć sumę $9 + 8 + 7 + ... + 1$?",
        "expression": "$\\sum_{b=1}^{9}(10-b) = 9 + 8 + 7 + ... + 1 = \\frac{9 \\cdot 10}{2} = 45$",
        "explanation": "Używamy wzoru na sumę kolejnych liczb naturalnych"
      },
      {
        "step": 6,
        "hint": "Ile jest par $(a, b)$ takich, że $b > 9$?",
        "expression": "Dla $b = 10$ mamy $a \\in \\{1, 2, 3, ..., 10\\}$, więc $10$ par",
        "explanation": "Gdy $b = 10$, $a$ może być dowolnym elementem zbioru $X$"
      },
      {
        "step": 7,
        "hint": "Ile jest par spełniających oba warunki: $a > b$ i $b > 9$?",
        "expression": "Dla $b = 10$ i $a > b$ nie ma rozwiązań, bo $10$ to największy element w $X$",
        "explanation": "Część wspólna jest pusta - nie ma elementów większych od $10$ w zbiorze $X$"
      },
      {
        "step": 8,
        "hint": "Jak zastosować zasadę włączeń i wyłączeń?",
        "expression": "$|A \\cup B| = 45 + 10 - 0 = 55$",
        "explanation": "Stosujemy zasadę włączeń i wyłączeń",
        "interactive_choice": {
          "prompt": "Jaki jest końcowy wynik według wzoru $|A \\cup B| = |A| + |B| - |A \\cap B|$?",
          "options": [
            {
              "id": "A",
              "text": "$45 + 10 - 0 = 55$",
              "feedback": "Dokładnie! Dodajemy przypadki i odejmujemy część wspólną",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$45 + 10 = 55$ (bez odejmowania)",
              "feedback": "Prawie dobrze, ale zawsze trzeba sprawdzić część wspólną, nawet jeśli jest pusta",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$45 \\cdot 10 = 450$",
              "feedback": "Nie - to nie jest iloczyn, tylko suma przypadków",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń i wyłączeń: sumujemy przypadki, ale odejmujemy to co policzyliśmy dwukrotnie."
        }
      }
    ],
    "solutions": [
      "$55$"
    ],
    "parameters": {
      "set": "$X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:24:29.301Z"
  },
  {
    "id": "ordered_pairs_divisible",
    "topic": "Kombinatoryka - zliczanie par uporządkowanych",
    "difficulty": 3,
    "statement": "Dany jest zbiór $X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$. Ile jest par uporządkowanych $(a, b)$ takich, że liczby $a, b$ należą do zbioru $X$ oraz liczba $a$ jest nie mniejsza niż 4 i jednocześnie liczba $b$ jest podzielna przez 3 lub przez 5?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki muszą spełniać liczby $a$ i $b$?",
        "expression": "Warunki: $a \\geq 4$, $a \\in X$ oraz $b$ podzielne przez 3 lub 5, $b \\in X$",
        "explanation": "Identyfikujemy wszystkie ograniczenia dla obu składowych pary"
      },
      {
        "step": 2,
        "hint": "Które elementy zbioru $X$ spełniają warunek $a \\geq 4$?",
        "expression": "Zbiór możliwych wartości $a$: $\\{4, 5, 6, 7, 8, 9, 10\\}$",
        "explanation": "Z dziesięciu elementów zbioru $X$ siedem spełnia warunek $a \\geq 4$"
      },
      {
        "step": 3,
        "hint": "Jak najlepiej znaleźć elementy podzielne przez 3 lub przez 5?",
        "expression": "Szukamy elementów $X$ podzielnych przez 3: $\\{3, 6, 9\\}$",
        "explanation": "Elementy podzielne przez 3 w zbiorze $X$",
        "interactive_choice": {
          "prompt": "Którą metodą znajdziesz elementy zbioru $X$ podzielne przez 3 lub przez 5?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić każdy element osobno",
              "feedback": "Możliwe, ale dla większych zbiorów nieefektywne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć zasady włączeń i wyłączeń",
              "feedback": "Świetnie! To systematyczna metoda: |A ∪ B| = |A| + |B| - |A ∩ B|",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Znaleźć wspólny dzielnik 3 i 5",
              "feedback": "To pomoże znaleźć przecięcie, ale nie rozwiąże całego problemu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń i wyłączeń jest najlepsza dla 'lub', ale tu można też sprawdzić bezpośrednio."
        }
      },
      {
        "step": 4,
        "hint": "Które elementy zbioru $X$ są podzielne przez 5?",
        "expression": "Elementy podzielne przez 5: $\\{5, 10\\}$",
        "explanation": "W zbiorze $\\{1, 2, ..., 10\\}$ tylko 5 i 10 dzielą się przez 5"
      },
      {
        "step": 5,
        "hint": "Czy istnieją elementy podzielne jednocześnie przez 3 i przez 5?",
        "expression": "Przecięcie zbiorów: $\\{3, 6, 9\\} \\cap \\{5, 10\\} = \\emptyset$",
        "explanation": "Brak elementów podzielnych jednocześnie przez 3 i przez 5",
        "interactive_choice": {
          "prompt": "Które elementy zbioru $X$ są podzielne zarówno przez 3, jak i przez 5?",
          "options": [
            {
              "id": "A",
              "text": "Żaden element",
              "feedback": "Nieprawda - sprawdź liczby podzielne przez 15 = 3 × 5",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko element 15",
              "feedback": "15 nie należy do zbioru X = {1,2,...,10}",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Żaden, bo 15 > 10",
              "feedback": "Dokładnie! Najmniejsza liczba podzielna przez 3 i 5 to 15, ale 15 ∉ X",
              "is_correct": true
            }
          ],
          "explanation_after": "Liczba musi być podzielna przez NWW(3,5) = 15, ale 15 > 10."
        }
      },
      {
        "step": 6,
        "hint": "Ile elementów jest podzielnych przez 3 lub przez 5?",
        "expression": "Elementy podzielne przez 3 lub 5: $\\{3, 5, 6, 9, 10\\}$",
        "explanation": "Suma zbiorów rozłącznych: $|\\{3, 6, 9\\} \\cup \\{5, 10\\}| = 3 + 2 = 5$",
        "why": "Gdy zbiory są rozłączne, liczba elementów sumy to suma liczb elementów."
      },
      {
        "step": 7,
        "hint": "Jak obliczyć liczbę par uporządkowanych $(a, b)$?",
        "expression": "Liczba par: $|\\{4, 5, 6, 7, 8, 9, 10\\}| \\times |\\{3, 5, 6, 9, 10\\}| = 7 \\times 5 = 35$",
        "explanation": "Każde z 7 możliwych $a$ można sparować z każdym z 5 możliwych $b$",
        "interactive_choice": {
          "prompt": "Ile par uporządkowanych $(a, b)$ można utworzyć?",
          "options": [
            {
              "id": "A",
              "text": "7 + 5 = 12 par",
              "feedback": "Nie - to nie jest suma, lecz iloczyn kartezjański!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "7 × 5 = 35 par",
              "feedback": "Świetnie! Każde z 7 możliwych a można sparować z każdym z 5 możliwych b",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Trzeba sprawdzić każdą parę osobno",
              "feedback": "Niepotrzebne - warunki dla a i b są niezależne",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada iloczynu: gdy wybory są niezależne, mnożymy liczby możliwości."
        }
      }
    ],
    "solutions": [
      "35"
    ],
    "parameters": {
      "set_X": "\\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}",
      "condition_a": "$a \\geq 4$",
      "condition_b": "$b$ podzielne przez 3 lub przez 5"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-13T19:24:58.347Z"
  },
  {
    "id": "ordered_pairs_logic_prime",
    "topic": "Kombinatoryka i logika",
    "difficulty": 3,
    "statement": "Dany jest zbiór $X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$. Ile jest par uporządkowanych $(a, b)$ takich, że liczby $a, b$ należą do zbioru $X$ oraz liczba $a$ jest liczbą pierwszą lub liczba $b$ jest nie większa niż 6?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie liczby pierwsze znajdują się w zbiorze X?",
        "expression": "Liczby pierwsze w $X$: $\\{2, 3, 5, 7\\}$",
        "explanation": "Sprawdzamy każdą liczbę od 1 do 10 pod kątem pierwszości"
      },
      {
        "step": 2,
        "hint": "Które liczby ze zbioru X są nie większe niż 6?",
        "expression": "Liczby $\\leq 6$ w $X$: $\\{1, 2, 3, 4, 5, 6\\}$",
        "explanation": "Wypisujemy wszystkie elementy zbioru X spełniające warunek $b \\leq 6$"
      },
      {
        "step": 3,
        "hint": "Jak najlepiej podejść do zliczania par z warunkiem 'lub'?",
        "expression": "Oznaczmy: $A$ = pary gdzie $a$ pierwsza, $B$ = pary gdzie $b \\leq 6$",
        "explanation": "Definiujemy zbiory odpowiadające każdemu warunkowi",
        "why": "Zasada włączeń-wyłączeń pozwala poprawnie zliczyć elementy sumy zbiorów, eliminując podwójne liczenie.",
        "interactive_choice": {
          "prompt": "Jak zliczyć pary $(a,b)$ gdzie '$a$ pierwsza LUB $b \\leq 6$'?",
          "options": [
            {
              "id": "A",
              "text": "Zliczyć wszystkie możliwe pary i sprawdzić każdą",
              "feedback": "Możliwe, ale pracochłonne - jest 100 par do sprawdzenia",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć wzoru: |A ∪ B| = |A| + |B| - |A ∩ B|",
              "feedback": "Świetnie! To zasada włączeń-wyłączeń dla sumy zbiorów",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Osobno zliczyć każdy warunek i dodać",
              "feedback": "Nie - tak zliczysz niektóre pary dwukrotnie!",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla warunku 'LUB' używamy zasady włączeń-wyłączeń, żeby uniknąć podwójnego liczenia."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest par gdzie a jest liczbą pierwszą?",
        "expression": "$|A| = 4 \\times 10 = 40$",
        "explanation": "4 wybory dla $a$ (liczby pierwsze) × 10 wyborów dla $b$ (dowolne z X)"
      },
      {
        "step": 5,
        "hint": "Ile jest par gdzie b ≤ 6?",
        "expression": "$|B| = 10 \\times 6 = 60$",
        "explanation": "10 wyborów dla $a$ (dowolne z X) × 6 wyborów dla $b$ (liczby ≤ 6)"
      },
      {
        "step": 6,
        "hint": "Które pary spełniają oba warunki jednocześnie?",
        "expression": "$|A \\cap B| = 4 \\times 6 = 24$",
        "explanation": "4 wybory dla $a$ (liczby pierwsze) × 6 wyborów dla $b$ (liczby ≤ 6)",
        "interactive_choice": {
          "prompt": "Jakie pary należą do przecięcia $A \\cap B$?",
          "options": [
            {
              "id": "A",
              "text": "Pary gdzie $a$ pierwsza I $b \\leq 6$",
              "feedback": "Dokładnie! To pary spełniające oba warunki równocześnie",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pary gdzie $a$ pierwsza I $a \\leq 6$",
              "feedback": "Nie - przecięcie dotyczy obu warunków: na $a$ i na $b$",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko pary gdzie $a = b$ i oba warunki",
              "feedback": "Nie - $a$ i $b$ mogą być różne, ważne że oba warunki zachodzą",
              "is_correct": false
            }
          ],
          "explanation_after": "Przecięcie to pary gdzie JEDNOCZEŚNIE $a$ jest pierwsza ORAZ $b \\leq 6$."
        }
      },
      {
        "step": 7,
        "hint": "Jak zastosować wzór na sumę zbiorów?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B| = 40 + 60 - 24 = 76$",
        "explanation": "Stosujemy zasadę włączeń-wyłączeń"
      },
      {
        "step": 8,
        "hint": "Czy możemy sprawdzić wynik inną metodą?",
        "expression": "Sprawdzenie: pary gdzie $a$ złożona I $b > 6$",
        "explanation": "Liczby złożone w X: {1, 4, 6, 8, 9, 10}, liczby > 6: {7, 8, 9, 10}",
        "interactive_choice": {
          "prompt": "Jak sprawdzić poprawność wyniku 76?",
          "options": [
            {
              "id": "A",
              "text": "Zliczyć pary gdzie warunek NIE zachodzi",
              "feedback": "Świetny pomysł! Dopełnienie: pary gdzie $a$ złożona I $b > 6$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wypisać wszystkie 76 par",
              "feedback": "Możliwe, ale bardzo pracochłonne - lepiej użyć dopełnienia",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Sprawdzić czy 40 + 60 - 24 = 76",
              "feedback": "To tylko sprawdza arytmetykę, nie logikę rozwiązania",
              "is_correct": false
            }
          ],
          "explanation_after": "Sprawdzenie przez dopełnienie: ile par NIE spełnia warunków?"
        }
      },
      {
        "step": 9,
        "hint": "Ile jest par w dopełnieniu?",
        "expression": "Pary gdzie $a \\in \\{1, 4, 6, 8, 9, 10\\}$ i $b \\in \\{7, 8, 9, 10\\}$: $6 \\times 4 = 24$",
        "explanation": "6 wyborów dla a (liczby złożone) × 4 wybory dla b (liczby > 6)"
      },
      {
        "step": 10,
        "hint": "Czy sprawdzenie potwierdza nasz wynik?",
        "expression": "Wszystkich par: $10 \\times 10 = 100$. Szukanych: $100 - 24 = 76$ ✓",
        "explanation": "Sprawdzenie przez dopełnienie potwierdza wynik"
      }
    ],
    "solutions": [
      "76"
    ],
    "parameters": {
      "set": "$X = \\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:25:34.252Z"
  },
  {
    "id": "three_digit_numbers_divisible_by_3",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 3,
    "statement": "Z cyfr ze zbioru $X = \\{0, 1, 2, 3\\}$ tworzymy wszystkie liczby trzycyfrowe, przy czym cyfry w liczbie nie mogą się powtarzać. Narysuj drzewo, w którym gałęzie przedstawiają utworzone liczby trzycyfrowe. Ile jest wśród nich liczb podzielnych przez 3?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie ograniczenia mamy przy tworzeniu liczb trzycyfrowych?",
        "expression": "Liczba trzycyfrowa: pierwsza cyfra $\\neq 0$, wszystkie cyfry różne",
        "explanation": "Pierwsza cyfra może być tylko z $\\{1, 2, 3\\}$, pozostałe z $\\{0, 1, 2, 3\\}$ bez powtórzeń"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu?",
        "expression": "Budujemy drzewo: poziom 1 - setki, poziom 2 - dziesiątki, poziom 3 - jedności",
        "explanation": "Drzewo będzie miało 3 poziomy odpowiadające pozycjom cyfr",
        "interactive_choice": {
          "prompt": "Którą metodą najefektywniej znajdziemy wszystkie liczby trzycyfrowe?",
          "options": [
            {
              "id": "A",
              "text": "Narysować drzewo wszystkich możliwości",
              "feedback": "Świetnie! Drzewo pozwoli systematycznie znaleźć wszystkie liczby i sprawdzić podzielność.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na wariacje bez powtórzeń",
              "feedback": "Wzór da liczbę możliwości, ale nie pokaże konkretnych liczb do sprawdzenia podzielności.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wypisać wszystkie kombinacje na chybił trafił",
              "feedback": "Ryzykowne - łatwo coś przegapić lub policzyć dwukrotnie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Drzewo gwarantuje systematyczne znalezienie wszystkich liczb bez pomyłek."
        }
      },
      {
        "step": 3,
        "hint": "Jakie cyfry mogą być na pierwszej pozycji (setki)?",
        "expression": "Setki: $1, 2, 3$ (cyfra $0$ nie może być pierwsza)",
        "explanation": "Tworzymy 3 główne gałęzie drzewa"
      },
      {
        "step": 4,
        "hint": "Ile cyfr zostaje do wyboru na drugiej pozycji dla każdej gałęzi?",
        "expression": "Dla każdej cyfry setek zostają 3 cyfry na dziesiątki (z 4 cyfr usuwamy użytą)",
        "explanation": "Na każdej gałęzi rozgałęziamy się na 3 kolejne możliwości"
      },
      {
        "step": 5,
        "hint": "Ile cyfr zostaje na pozycji jedności?",
        "expression": "Na jedności zostają 2 cyfry (z 4 usuwamy 2 już użyte)",
        "explanation": "Każda gałąź dziesiątek rozgałęzia się na 2 końcowe liczby"
      },
      {
        "step": 6,
        "hint": "Ile w sumie otrzymamy liczb trzycyfrowych?",
        "expression": "Łącznie: $3 \\times 3 \\times 2 = 18$ liczb trzycyfrowych",
        "explanation": "Każda ścieżka w drzewie daje jedną liczbę trzycyfrową"
      },
      {
        "step": 7,
        "hint": "Jakie konkretnie liczby otrzymujemy z drzewa?",
        "expression": "Wszystkie liczby: $102, 103, 120, 123, 130, 132, 201, 203, 210, 213, 230, 231, 301, 302, 310, 312, 320, 321$",
        "explanation": "Systematycznie przechodzimy wszystkie ścieżki drzewa"
      },
      {
        "step": 8,
        "hint": "Jak sprawdzić czy liczba jest podzielna przez 3?",
        "expression": "Sprawdzamy sumy cyfr dla każdej liczby",
        "explanation": "Używamy kryterium podzielności przez 3",
        "why": "Kryterium podzielności przez 3: liczba jest podzielna przez 3 ⟺ suma jej cyfr jest podzielna przez 3",
        "interactive_choice": {
          "prompt": "Którą metodą najszybciej sprawdzisz podzielność przez 3?",
          "options": [
            {
              "id": "A",
              "text": "Dzielić każdą liczbę przez 3 i sprawdzać resztę",
              "feedback": "Możliwe, ale czasochłonne dla 18 liczb.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Sprawdzić czy suma cyfr jest podzielna przez 3",
              "feedback": "Doskonale! To najszybsza metoda - wystarczy dodać cyfry.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Sprawdzić ostatnią cyfrę",
              "feedback": "To działa dla podzielności przez 2 lub 5, nie przez 3.",
              "is_correct": false
            }
          ],
          "explanation_after": "Liczba jest podzielna przez 3 wtedy i tylko wtedy, gdy suma jej cyfr jest podzielna przez 3."
        }
      },
      {
        "step": 9,
        "hint": "Które sumy cyfr są podzielne przez 3?",
        "expression": "Podzielne przez 3: sumy cyfr równe 3 lub 6",
        "explanation": "Identyfikujemy które sumy cyfr dają podzielność przez 3",
        "interactive_choice": {
          "prompt": "Jakie sumy cyfr z naszych liczb będą podzielne przez 3?",
          "options": [
            {
              "id": "A",
              "text": "Sumy równe 3 i 6",
              "feedback": "Dokładnie! Z cyfr $\\{0,1,2,3\\}$ możemy otrzymać sumy 3, 4, 5, 6. Podzielne przez 3 to: 3 i 6.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Sumy równe 6 i 9",
              "feedback": "Suma 9 nie jest możliwa - maksymalna suma to $1+2+3=6$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko suma równa 6",
              "feedback": "Nie tylko - suma 3 też jest podzielna przez 3!",
              "is_correct": false
            }
          ],
          "explanation_after": "Z cyfr $\\{0,1,2,3\\}$ możliwe sumy to: 3, 4, 5, 6. Podzielne przez 3: sumy 3 i 6."
        }
      },
      {
        "step": 10,
        "hint": "Które kombinacje cyfr dają sumę 3?",
        "expression": "Suma = 3: cyfry $\\{0, 1, 2\\}$ → liczby: $102, 120, 201, 210$",
        "explanation": "Znajdujemy wszystkie liczby z cyframi o sumie 3"
      },
      {
        "step": 11,
        "hint": "Które kombinacje cyfr dają sumę 6?",
        "expression": "Suma = 6: cyfry $\\{0, 1, 3\\}$ → liczby: $103, 130, 301, 310$; cyfry $\\{1, 2, 3\\}$ → liczby: $123, 132, 213, 231, 312, 321$",
        "explanation": "Znajdujemy wszystkie liczby z cyframi o sumie 6"
      },
      {
        "step": 12,
        "hint": "Ile łącznie liczb jest podzielnych przez 3?",
        "expression": "Podzielne przez 3: $4 + 4 + 6 = 14$ liczb",
        "explanation": "Sumujemy liczby z sumą cyfr równą 3 i 6"
      }
    ],
    "solutions": [
      "Wszystkich liczb trzycyfrowych: 18",
      "Liczb podzielnych przez 3: 14",
      "To są: $102, 103, 120, 123, 130, 132, 201, 210, 213, 231, 301, 310, 312, 321$"
    ],
    "parameters": {
      "cyfry": "$X = \\{0, 1, 2, 3\\}$",
      "warunek": "cyfry się nie powtarzają"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:26:12.903Z"
  },
  {
    "id": "three_digit_permutations",
    "topic": "Permutacje bez powtórzeń",
    "difficulty": 3,
    "statement": "Oblicz, ile jest liczb trzycyfrowych, zbudowanych z cyfr należących do zbioru {1, 2, 3, 4, 5, 6, 7, 8, 9}, jeśli cyfry w liczbie nie mogą się powtarzać.",
    "steps": [
      {
        "step": 1,
        "hint": "Ile cyfr mamy do dyspozycji?",
        "expression": "Zbiór cyfr: {1, 2, 3, 4, 5, 6, 7, 8, 9}, czyli $n = 9$ cyfr",
        "explanation": "Mamy 9 różnych cyfr do wyboru"
      },
      {
        "step": 2,
        "hint": "Ile pozycji musimy zapełnić w liczbie trzycyfrowej?",
        "expression": "Liczba trzycyfrowa ma 3 pozycje: setki, dziesiątki, jedności",
        "explanation": "Musimy wybrać 3 cyfry z 9 dostępnych"
      },
      {
        "step": 3,
        "hint": "Jaką metodę kombinatoryczną zastosować do tego problemu?",
        "expression": "Stosujemy permutacje bez powtórzeń: $P_9^3$",
        "explanation": "Wybieramy 3 cyfry z 9 dostępnych, gdzie kolejność ma znaczenie",
        "why": "Używamy permutacji, bo pozycja cyfry (setki, dziesiątki, jedności) wpływa na wartość liczby. Bez powtórzeń, bo cyfry nie mogą się powtarzać.",
        "interactive_choice": {
          "prompt": "Jak podejść do problemu wyboru 3 cyfr z 9 bez powtórzeń na konkretne pozycje?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru na kombinacje $C_9^3$",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu pozycje mają znaczenie!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć wzoru na permutacje $P_9^3$",
              "feedback": "Świetnie! Kolejność ma znaczenie - inna cyfra na setki to inna liczba.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie możliwości $9^3$",
              "feedback": "Nie - to by uwzględniało powtórzenia cyfr, a zadanie tego zabrania.",
              "is_correct": false
            }
          ],
          "explanation_after": "To permutacje bez powtórzeń - wybieramy 3 cyfry z 9 i kolejność ma znaczenie."
        }
      },
      {
        "step": 4,
        "hint": "Jak obliczyć $P_9^3$ używając wzoru?",
        "expression": "$P_9^3 = \\frac{9!}{(9-3)!} = \\frac{9!}{6!}$",
        "explanation": "Wzór na permutacje k-elementowe z n elementów"
      },
      {
        "step": 5,
        "hint": "Jak uprościć wyrażenie $\\frac{9!}{6!}$?",
        "expression": "$P_9^3 = 9 \\cdot 8 \\cdot 7$",
        "explanation": "Po skróceniu zostają tylko 3 największe czynniki z 9!",
        "interactive_choice": {
          "prompt": "Jak najłatwiej obliczyć $\\frac{9!}{6!}$?",
          "options": [
            {
              "id": "A",
              "text": "Obliczyć $9! = 362880$ i $6! = 720$, potem dzielić",
              "feedback": "Możliwe, ale niepotrzebnie skomplikowane - można prościej!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Skrócić: $\\frac{9!}{6!} = 9 \\cdot 8 \\cdot 7$",
              "feedback": "Doskonale! To najszybszy sposób - zostają tylko 3 największe czynniki.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć kalkulatora do silni",
              "feedback": "Można, ale lepiej zrozumieć skracanie - to podstawowa umiejętność.",
              "is_correct": false
            }
          ],
          "explanation_after": "Skracanie silni: $\\frac{9!}{6!} = \\frac{9 \\cdot 8 \\cdot 7 \\cdot 6!}{6!} = 9 \\cdot 8 \\cdot 7$"
        }
      },
      {
        "step": 6,
        "hint": "Jak można interpretować wynik $9 \\cdot 8 \\cdot 7$ w kontekście zadania?",
        "expression": "Na pozycję setek: 9 wyborów, dziesiątek: 8 wyborów, jedności: 7 wyborów",
        "explanation": "Każda kolejna pozycja ma o jeden wybór mniej",
        "why": "To logiczne: po wyborze cyfry na setki zostaje 8 cyfr na dziesiątki, po wyborze na dziesiątki zostaje 7 na jedności."
      },
      {
        "step": 7,
        "hint": "Jaki jest końcowy wynik obliczeń?",
        "expression": "$9 \\cdot 8 \\cdot 7 = 504$",
        "explanation": "Obliczamy iloczyn"
      },
      {
        "step": 8,
        "hint": "Czy możemy sprawdzić poprawność wyniku inną metodą?",
        "expression": "Odpowiedź: 504 liczby trzycyfrowe",
        "explanation": "Istnieje 504 różne liczby trzycyfrowe z podanych cyfr bez powtórzeń",
        "interactive_choice": {
          "prompt": "Jak można zweryfikować wynik 504?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić czy $504 = P_9^3$ w kalkulatorze",
              "feedback": "Dobra weryfikacja - potwierdza obliczenia.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie liczby ręcznie",
              "feedback": "Niemożliwe - 504 liczby to za dużo do ręcznego liczenia!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Sprawdzić logikę: czy $9 \\cdot 8 \\cdot 7$ ma sens?",
              "feedback": "Świetnie! Logiczne myślenie: 9 na pierwszą pozycję, 8 na drugą, 7 na trzecią.",
              "is_correct": true
            }
          ],
          "explanation_after": "Wynik ma sens logiczny i można go zweryfikować wzorem lub kalkulatorem."
        }
      }
    ],
    "solutions": [
      "504"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-13T19:26:45.032Z"
  },
  {
    "id": "colorful_flyers_combinatorics",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 2,
    "statement": "Pewna firma chce produkować ulotki, których każda ze stron ma mieć dwukolorowe tło: górna połowa danej strony ma mieć inny kolor, niż dolna połowa. Ile jest wzorów takich ulotek, jeśli firma ma do dyspozycji siedem kolorów?",
    "steps": [
      {
        "step": 1,
        "hint": "Co dokładnie musimy ustalić dla każdej strony ulotki?",
        "expression": "Każda strona ma górną połowę i dolną połowę w różnych kolorach",
        "explanation": "Analizujemy strukturę problemu - każda strona wymaga wyboru dwóch różnych kolorów"
      },
      {
        "step": 2,
        "hint": "Ile stron ma ulotka i czy każda strona może mieć inny wzór?",
        "expression": "Ulotka = strona przednia + strona tylna",
        "explanation": "Każda ulotka składa się z dwóch stron, każda z dwukolorowym wzorem",
        "interactive_choice": {
          "prompt": "Jak interpretować 'wzory ulotek' w kontekście tego zadania?",
          "options": [
            {
              "id": "A",
              "text": "Ulotka ma jedną stronę z dwoma kolorami",
              "feedback": "Nie - ulotka ma zwykle dwie strony (przód i tył)",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Ulotka ma dwie strony, każda z dwoma kolorami",
              "feedback": "Dokładnie! Każda strona ma górną i dolną połowę w różnych kolorach",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczy się tylko jedna strona ulotki",
              "feedback": "Nieprawda - 'wzór ulotki' obejmuje całą ulotkę, czyli obie strony",
              "is_correct": false
            }
          ],
          "explanation_after": "Ulotka ma dwie strony: przód i tył. Każda strona ma górną i dolną połowę w różnych kolorach."
        }
      },
      {
        "step": 3,
        "hint": "Ile sposobów jest na wybranie kolorów dla jednej strony?",
        "expression": "Dla jednej strony: górna połowa - 7 kolorów, dolna połowa - 6 kolorów (różnych od górnej)",
        "explanation": "Na górną połowę mamy 7 wyborów, na dolną - 6 pozostałych kolorów",
        "why": "Kolory muszą być różne, więc po wyborze pierwszego koloru zostaje 6 opcji na drugi"
      },
      {
        "step": 4,
        "hint": "Ile wzorów może mieć jedna strona ulotki?",
        "expression": "$7 \\times 6 = 42$ wzory dla jednej strony",
        "explanation": "Stosujemy zasadę mnożenia: 7 możliwości dla górnej × 6 dla dolnej"
      },
      {
        "step": 5,
        "hint": "Czy wybór wzoru dla strony przedniej wpływa na wybór wzoru dla strony tylnej?",
        "expression": "Strona przednia: 42 wzory, strona tylna: 42 wzory (niezależnie)",
        "explanation": "Każda strona może mieć dowolny z 42 wzorów, wybory są niezależne",
        "interactive_choice": {
          "prompt": "Jak traktować wybór wzorów dla obu stron ulotki?",
          "options": [
            {
              "id": "A",
              "text": "Strony muszą mieć różne wzory",
              "feedback": "Nie - zadanie nie mówi o ograniczeniach między stronami",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Każda strona wybierana niezależnie",
              "feedback": "Tak! Każda strona może mieć dowolny z 42 możliwych wzorów",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Strony muszą używać tych samych kolorów",
              "feedback": "Nie - zadanie nie nakłada takich ograniczeń",
              "is_correct": false
            }
          ],
          "explanation_after": "Brak ograniczeń między stronami oznacza niezależny wybór wzoru dla każdej strony."
        }
      },
      {
        "step": 6,
        "hint": "Ile różnych wzorów ulotek można utworzyć?",
        "expression": "$42 \\times 42 = 1764$ różnych wzorów ulotek",
        "explanation": "Ponownie zasada mnożenia: 42 wzory przedniej strony × 42 wzory tylnej strony"
      }
    ],
    "solutions": [
      "$1764$ różnych wzorów ulotek"
    ],
    "parameters": {
      "colors_available": 7,
      "sides_per_flyer": 2,
      "colors_per_side": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-13T19:27:06.549Z"
  },
  {
    "id": "three_digit_numbers_under_444",
    "topic": "Kombinatoryka - liczby o różnych cyfrach",
    "difficulty": 4,
    "statement": "Ile jest liczb trzycyfrowych o różnych cyfrach, utworzonych z cyfr należących do zbioru {1, 2, 3, 4, 5, 6, 7} i jednocześnie mniejszych od 444?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać szukana liczba trzycyfrowa?",
        "expression": "Liczba $abc$ gdzie: $a, b, c \\in \\{1, 2, 3, 4, 5, 6, 7\\}$, $a \\neq b \\neq c \\neq a$, $abc < 444$",
        "explanation": "Określamy wszystkie ograniczenia zadania"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu z warunkiem $abc < 444$?",
        "expression": "Rozpatrujemy przypadki: $a = 1$, $a = 2$, $a = 3$, $a = 4$",
        "explanation": "Dzielimy na przypadki według pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do zliczania liczb mniejszych od 444?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć przypadki według pierwszej cyfry",
              "feedback": "Świetny wybór! Podział na $a = 1, 2, 3, 4$ pozwoli kontrolować warunek $< 444$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie, potem odjąć te $\\geq 444$",
              "feedback": "Możliwe, ale bardziej skomplikowane - łatwiej od razu rozpatrzyć przypadki",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na wariacje bez powtórzeń",
              "feedback": "Wzór nie uwzględni warunku $< 444$ - potrzebny podział na przypadki",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział według pierwszej cyfry pozwala łatwo kontrolować warunek górny."
        }
      },
      {
        "step": 3,
        "hint": "Ile liczb możemy utworzyć gdy pierwsza cyfra to 1?",
        "expression": "Dla $a = 1$: wszystkie liczby $1bc$ są $< 444$",
        "explanation": "Gdy $a = 1$, warunek $< 444$ jest automatycznie spełniony",
        "why": "Największa możliwa liczba to 176, więc wszystkie są mniejsze od 444"
      },
      {
        "step": 4,
        "hint": "Na ile sposobów wybierzemy cyfry $b$ i $c$ gdy $a = 1$?",
        "expression": "$b$ - 6 wyborów z $\\{2,3,4,5,6,7\\}$, $c$ - 5 wyborów (różne od $a$ i $b$)",
        "explanation": "Dla $a = 1$: $6 \\times 5 = 30$ liczb"
      },
      {
        "step": 5,
        "hint": "Ile liczb gdy pierwsza cyfra to 2 lub 3?",
        "expression": "Dla $a = 2$ lub $a = 3$: wszystkie liczby są $< 444$",
        "explanation": "Analogicznie jak dla $a = 1$, każdy przypadek daje $6 \\times 5 = 30$ liczb"
      },
      {
        "step": 6,
        "hint": "Co się dzieje gdy pierwsza cyfra to 4?",
        "expression": "Dla $a = 4$: rozpatrujemy $b \\in \\{1,2,3\\}$ (wtedy $4bc < 444$)",
        "explanation": "Gdy $a = 4$ i $b \\leq 3$, liczba jest na pewno mniejsza od 444",
        "interactive_choice": {
          "prompt": "Jak traktować przypadek $a = 4$ z warunkiem $4bc < 444$?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie liczby $4bc$ są mniejsze od 444",
              "feedback": "Nie! Liczba 456 > 444, więc trzeba rozpatrzyć drugą cyfrę",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozpatrzyć przypadki $b = 1, 2, 3$ oraz $b \\geq 5$",
              "feedback": "Dokładnie! Gdy $b \\leq 3$, mamy $4bc < 444$. Gdy $b \\geq 5$, może być $\\geq 444$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Żadna liczba $4bc$ nie jest mniejsza od 444",
              "feedback": "Nieprawda - liczby jak 412, 431 są mniejsze od 444",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla $a = 4$ musimy sprawdzić drugą cyfrę, bo 444 to granica."
        }
      },
      {
        "step": 7,
        "hint": "Ile liczb gdy $a = 4$ i $b \\in \\{1,2,3\\}$?",
        "expression": "Dla każdego $b \\in \\{1,2,3\\}$: cyfra $c$ ma 5 wyborów (różna od 4 i od $b$)",
        "explanation": "Przypadek $a = 4$: $3 \\times 5 = 15$ liczb"
      },
      {
        "step": 8,
        "hint": "Czy trzeba sprawdzić przypadek $a = 4, b = 4$?",
        "expression": "Przypadek $a = 4, b = 4$ nie istnieje (cyfry różne)",
        "explanation": "Warunek różnych cyfr eliminuje ten przypadek",
        "interactive_choice": {
          "prompt": "Co z liczbami postaci $44c$?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić które $44c < 444$",
              "feedback": "Nie ma takiej możliwości - cyfry mają być różne!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pominąć - cyfry mają być różne",
              "feedback": "Zgadza się! Warunek różnych cyfr wyklucza $a = b$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko $441, 442, 443$ są mniejsze od 444",
              "feedback": "Błąd - cyfry muszą być różne, więc $a \\neq b$",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunek różnych cyfr automatycznie wyklucza liczby typu $44c$."
        }
      },
      {
        "step": 9,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "Suma: $30 + 30 + 30 + 15 = 105$",
        "explanation": "Dodajemy wszystkie przypadki: $a=1$, $a=2$, $a=3$, $a=4$"
      }
    ],
    "solutions": [
      "105"
    ],
    "parameters": {
      "digits_set": "{1, 2, 3, 4, 5, 6, 7}",
      "condition": "różne cyfry i < 444"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:27:38.916Z"
  },
  {
    "id": "three_digit_numbers_under_780",
    "topic": "Kombinatoryka - liczby trzycyfrowe z warunkami",
    "difficulty": 4,
    "statement": "Ile jest liczb trzycyfrowych o różnych cyfrach, utworzonych z cyfr należących do zbioru {1, 2, 3, 4, 5, 6, 7, 8, 9} i jednocześnie mniejszych od 780?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać szukana liczba trzycyfrowa?",
        "expression": "Liczba $abc$ gdzie: $a, b, c \\in \\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$, $a \\neq b \\neq c \\neq a$, $abc < 780$",
        "explanation": "Identyfikujemy wszystkie ograniczenia zadania"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu z warunkiem $abc < 780$?",
        "expression": "Rozpatrujemy przypadki: $a \\in \\{1, 2, 3, 4, 5, 6, 7\\}$",
        "explanation": "Pierwsza cyfra może być 1, 2, 3, 4, 5, 6 lub 7 (bo 8__ i 9__ ≥ 780)",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do rozwiązania tego zadania?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie liczby o różnych cyfrach, potem odjąć te ≥ 780",
              "feedback": "Możliwe, ale pracochłonne - trzeba będzie liczyć dużo przypadków do odjęcia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Rozpatrzyć przypadki według pierwszej cyfry: a = 1,2,3,4,5,6,7",
              "feedback": "Świetnie! To pozwoli kontrolować warunek < 780 od początku.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na wariacje bez powtórzeń dla wszystkich cyfr",
              "feedback": "Nie uwzględnia warunku < 780 - potrzebujemy bardziej szczegółowego podejścia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Rozpatrywanie przypadków według pierwszej cyfry pozwala łatwo kontrolować warunek < 780."
        }
      },
      {
        "step": 3,
        "hint": "Ile możliwości mamy gdy pierwsza cyfra $a \\in \\{1, 2, 3, 4, 5, 6\\}$?",
        "expression": "Dla $a \\in \\{1, 2, 3, 4, 5, 6\\}$: druga cyfra $b$ ma 8 wyborów, trzecia cyfra $c$ ma 7 wyborów",
        "explanation": "Gdy a jest ustalone, b może być dowolną z pozostałych 8 cyfr, c z pozostałych 7",
        "why": "To standardowe liczenie wariacji: z 9 cyfr wybieramy 3 różne w określonej kolejności, ale z ograniczeniem na pierwszą cyfrę."
      },
      {
        "step": 4,
        "hint": "Ile liczb otrzymamy dla przypadku $a \\in \\{1, 2, 3, 4, 5, 6\\}$?",
        "expression": "$6 \\times 8 \\times 7 = 336$",
        "explanation": "6 wyborów dla pierwszej cyfry, 8 dla drugiej, 7 dla trzeciej"
      },
      {
        "step": 5,
        "hint": "Co się dzieje gdy pierwsza cyfra $a = 7$?",
        "expression": "Dla $a = 7$: $b \\in \\{1, 2, 3, 4, 5, 6\\}$ (bo $7bc < 780$ oznacza $bc < 80$)",
        "explanation": "Druga cyfra nie może być 7 (bo a = 7) ani 8,9 (bo wtedy 7bc ≥ 780)",
        "interactive_choice": {
          "prompt": "Jakie dodatkowe ograniczenia mamy gdy $a = 7$?",
          "options": [
            {
              "id": "A",
              "text": "Żadnych - druga cyfra może być dowolna z pozostałych 8",
              "feedback": "Nie! Musimy sprawdzić warunek 7bc < 780, więc bc < 80.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Druga cyfra b musi być < 8, bo potrzebujemy 7bc < 780",
              "feedback": "Dokładnie! Gdy a = 7, to bc < 80, więc b ∈ {1,2,3,4,5,6} (pomijamy 7 bo a = 7).",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Musimy rozpatrzyć każdą możliwą drugą cyfrę osobno",
              "feedback": "Częściowo tak, ale można to uprościć - wystarczy b < 8 i b ≠ 7.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy a = 7, warunek < 780 oznacza bc < 80, więc b ∈ {1,2,3,4,5,6}."
        }
      },
      {
        "step": 6,
        "hint": "Czy dla $a = 7$ i $b \\in \\{1, 2, 3, 4, 5, 6\\}$ trzecia cyfra ma ograniczenia?",
        "expression": "Dla każdego $b \\in \\{1, 2, 3, 4, 5, 6\\}$: cyfra $c$ ma 7 wyborów",
        "explanation": "Z 9 cyfr wykluczamy a = 7 i wybrane b, zostaje 7 możliwości dla c",
        "interactive_choice": {
          "prompt": "Jakie ograniczenia ma trzecia cyfra c gdy a = 7 i b ∈ {1,2,3,4,5,6}?",
          "options": [
            {
              "id": "A",
              "text": "Tylko c ≠ a i c ≠ b (warunek różnych cyfr)",
              "feedback": "Tak! Gdy b ≤ 6, automatycznie 7bc < 780, więc tylko różność cyfr ma znaczenie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dodatkowo c < 10-b żeby 7bc < 780",
              "feedback": "Nie - gdy b ≤ 6, to nawet 7b9 < 780, więc nie ma dodatkowych ograniczeń.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Musimy sprawdzać każdy przypadek 7bc osobno",
              "feedback": "Niepotrzebne - gdy b ≤ 6, warunek < 780 jest automatycznie spełniony.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy a = 7 i b ≤ 6, największa możliwa liczba to 769 < 780, więc tylko różność cyfr ma znaczenie."
        }
      },
      {
        "step": 7,
        "hint": "Ile liczb otrzymamy dla przypadku $a = 7$?",
        "expression": "$1 \\times 6 \\times 7 = 42$",
        "explanation": "1 wybór dla a = 7, 6 wyborów dla b, 7 wyborów dla c"
      },
      {
        "step": 8,
        "hint": "Jaka jest całkowita liczba szukanych liczb trzycyfrowych?",
        "expression": "$336 + 42 = 378$",
        "explanation": "Sumujemy przypadki: a ∈ {1,2,3,4,5,6} daje 336 liczb, a = 7 daje 42 liczby"
      }
    ],
    "solutions": [
      "378"
    ],
    "parameters": {
      "digits_set": "{1, 2, 3, 4, 5, 6, 7, 8, 9}",
      "condition": "różne cyfry i < 780"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:28:23.468Z"
  },
  {
    "id": "three_digit_divisible_25",
    "topic": "Kombinatoryka - liczby trzycyfrowe",
    "difficulty": 4,
    "statement": "Ile jest liczb trzycyfrowych o różnych cyfrach, podzielnych przez 25?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry może mieć na końcu liczba podzielna przez 25?",
        "expression": "Liczba jest podzielna przez 25, gdy kończy się na: 00, 25, 50 lub 75",
        "explanation": "Sprawdzamy warunki podzielności przez 25",
        "why": "Liczba jest podzielna przez 25 wtedy i tylko wtedy, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez 25."
      },
      {
        "step": 2,
        "hint": "Które z tych zakończeń mają różne cyfry?",
        "expression": "Możliwe zakończenia: 25, 50, 75",
        "explanation": "Pozostają trzy przypadki do rozpatrzenia",
        "interactive_choice": {
          "prompt": "Które zakończenia spełniają warunek różnych cyfr w liczbie trzycyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Tylko 25 i 75",
              "feedback": "Nie tylko! Sprawdź też zakończenie 50 - cyfry 5 i 0 są różne.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "25, 50 i 75",
              "feedback": "Dokładnie! Zakończenie 00 odpada, bo ma powtarzające się cyfry.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wszystkie: 00, 25, 50, 75",
              "feedback": "Nie - zakończenie 00 ma dwie identyczne cyfry, więc nie spełnia warunków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Musimy odrzucić zakończenie 00, bo zawiera powtarzające się cyfry."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do liczenia w każdym przypadku?",
        "expression": "Rozpatrujemy każde zakończenie osobno i liczymy możliwe pierwsze cyfry",
        "explanation": "Dla każdego zakończenia sprawdzimy ile jest możliwości na pierwszą cyfrę",
        "interactive_choice": {
          "prompt": "Jaka jest najlepsza strategia liczenia liczb trzycyfrowych abc o różnych cyfrach?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw ustalić pierwszą cyfrę a, potem bc",
              "feedback": "Możliwe, ale skomplikowane - trzeba uważać na ograniczenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Najpierw ustalić zakończenie bc, potem pierwszą cyfrę a",
              "feedback": "Świetnie! Zakończenie jest już ustalone, więc łatwiej liczyć opcje dla a.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczyć wszystkie permutacje i odejmować nieprawidłowe",
              "feedback": "Bardzo skomplikowane - lepiej liczyć bezpośrednio przypadki.",
              "is_correct": false
            }
          ],
          "explanation_after": "Ustalenie zakończenia najpierw upraszcza problem - wiemy już dwie cyfry."
        }
      },
      {
        "step": 4,
        "hint": "Ile liczb kończy się na 25?",
        "expression": "Zakończenie 25: pierwsza cyfra może być dowolna z {1,3,4,6,7,8,9}",
        "explanation": "Pierwsza cyfra nie może być 0 (nie byłaby trzycyfrowa), 2 ani 5 (powtórzyłyby się cyfry)"
      },
      {
        "step": 5,
        "hint": "Ile to daje możliwości dla zakończenia 25?",
        "expression": "Liczby kończące się na 25: 7 możliwości",
        "explanation": "Cyfry {1,3,4,6,7,8,9} dają 7 różnych liczb trzycyfrowych"
      },
      {
        "step": 6,
        "hint": "Ile liczb kończy się na 50?",
        "expression": "Zakończenie 50: pierwsza cyfra może być dowolna z {1,2,3,4,6,7,8,9}",
        "explanation": "Pierwsza cyfra nie może być 0 (nie byłaby trzycyfrowa) ani 5 (powtórzyłaby się cyfra)"
      },
      {
        "step": 7,
        "hint": "Ile to daje możliwości dla zakończenia 50?",
        "expression": "Liczby kończące się na 50: 8 możliwości",
        "explanation": "Cyfry {1,2,3,4,6,7,8,9} dają 8 różnych liczb trzycyfrowych"
      },
      {
        "step": 8,
        "hint": "Ile liczb kończy się na 75?",
        "expression": "Zakończenie 75: pierwsza cyfra może być dowolna z {1,2,3,4,6,8,9}",
        "explanation": "Pierwsza cyfra nie może być 0, 7 ani 5 (powtórzyłyby się cyfry)"
      },
      {
        "step": 9,
        "hint": "Ile to daje możliwości dla zakończenia 75?",
        "expression": "Liczby kończące się na 75: 7 możliwości",
        "explanation": "Cyfry {1,2,3,4,6,8,9} dają 7 różnych liczb trzycyfrowych"
      },
      {
        "step": 10,
        "hint": "Jaka jest suma wszystkich przypadków?",
        "expression": "$7 + 8 + 7 = 22$",
        "explanation": "Sumujemy liczbę możliwości z każdego przypadku",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę szukanych liczb trzycyfrowych?",
          "options": [
            {
              "id": "A",
              "text": "Pomnożyć: $7 \\times 8 \\times 7$",
              "feedback": "Nie - to byłoby gdyby przypadki się nakładały. Tu dodajemy rozłączne zbiory.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodać: $7 + 8 + 7$",
              "feedback": "Dokładnie! Przypadki są rozłączne - każda liczba kończy się tylko jednym sposobem.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wybrać największą wartość: $\\max(7,8,7) = 8$",
              "feedback": "Nie - chcemy wszystkie liczby spełniające warunki, nie tylko z jednego przypadku.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne - żadna liczba nie może kończyć się na 25 i jednocześnie na 50."
        }
      }
    ],
    "solutions": [
      "22"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:29:12.520Z"
  },
  {
    "id": "three_digit_divisible_by_4",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 4,
    "statement": "Ile jest liczb trzycyfrowych o różnych cyfrach, podzielnych przez 4?",
    "steps": [
      {
        "step": 1,
        "hint": "Jaka jest cecha podzielności przez 4?",
        "expression": "Liczba jest podzielna przez 4, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez 4",
        "explanation": "Używamy cechy podzielności przez 4",
        "why": "To kluczowa obserwacja - nie musimy sprawdzać całej liczby, tylko dwie ostatnie cyfry."
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Strategia: znajdź dwucyfrowe końcówki podzielne przez 4, potem dobierz pierwszą cyfrę",
        "explanation": "Dzielimy problem na etapy zgodnie z cechą podzielności",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do zliczania liczb trzycyfrowych o różnych cyfrach podzielnych przez 4?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybieram pierwszą cyfrę, potem drugą, na końcu trzecią",
              "feedback": "Możliwe, ale trudne - warunek podzielności przez 4 dotyczy dwóch ostatnich cyfr razem.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Najpierw znajduję wszystkie dwucyfrowe końcówki podzielne przez 4, potem dobieram pierwszą cyfrę",
              "feedback": "Świetnie! To wykorzystuje cechę podzielności i ułatwia zliczanie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Sprawdzam wszystkie liczby trzycyfrowe i liczę te podzielne przez 4",
              "feedback": "Zbyt pracochłonne - jest 900 liczb trzycyfrowych do sprawdzenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najefektywniej jest zacząć od końcówek podzielnych przez 4, bo to ogranicza możliwości."
        }
      },
      {
        "step": 3,
        "hint": "Jakie są wszystkie liczby dwucyfrowe podzielne przez 4?",
        "expression": "12, 16, 20, 24, 28, 32, 36, 40, 44, 48, 52, 56, 60, 64, 68, 72, 76, 80, 84, 88, 92, 96",
        "explanation": "Wypisujemy wszystkie dwucyfrowe wielokrotności liczby 4"
      },
      {
        "step": 4,
        "hint": "Które z tych końcówek mają różne cyfry?",
        "expression": "Końcówki z różnymi cyframi: 12, 16, 20, 24, 28, 32, 36, 40, 48, 52, 56, 60, 64, 68, 72, 76, 80, 84, 92, 96",
        "explanation": "Wykluczamy 44 i 88, zostaje 20 końcówek",
        "interactive_choice": {
          "prompt": "Jak sprawdzić, które końcówki mają różne cyfry?",
          "options": [
            {
              "id": "A",
              "text": "Wykluczyć te z powtarzającymi się cyframi: 44, 88",
              "feedback": "Dokładnie! Zostają końcówki z różnymi cyframi.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Sprawdzić każdą końcówkę osobno czy cyfry się różnią",
              "feedback": "Można, ale łatwiej zauważyć które mają identyczne cyfry.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wszystkie mają różne cyfry",
              "feedback": "Nie - 44 i 88 mają identyczne cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Z 22 końcówek wykluczamy 44 i 88, zostaje 20 końcówek z różnymi cyframi."
        }
      },
      {
        "step": 5,
        "hint": "Jak podzielić końcówki ze względu na pierwszą cyfrę?",
        "expression": "Końcówki zaczynające się od 0: 08 (nie ma takiej dwucyfrowej)",
        "explanation": "Nie ma dwucyfrowych liczb zaczynających się od 0"
      },
      {
        "step": 6,
        "hint": "Ile mamy końcówek dla każdej cyfry dziesiątek?",
        "expression": "Cyfra 1: 12, 16 (2 końcówki)\nCyfra 2: 20, 24, 28 (3 końcówki)\nCyfra 3: 32, 36 (2 końcówki)\nCyfra 4: 40, 48 (2 końcówki)\nCyfra 5: 52, 56 (2 końcówki)\nCyfra 6: 60, 64, 68 (3 końcówki)\nCyfra 7: 72, 76 (2 końcówki)\nCyfra 8: 80, 84 (2 końcówki)\nCyfra 9: 92, 96 (2 końcówki)",
        "explanation": "Grupujemy końcówki według cyfry dziesiątek"
      },
      {
        "step": 7,
        "hint": "Ile pierwszych cyfr możemy wybrać dla każdej końcówki?",
        "expression": "Dla każdej końcówki: 10 - 1 (zero) - 2 (cyfry z końcówki) = 7 możliwości pierwszej cyfry",
        "explanation": "Każda końcówka daje 7 możliwości wyboru pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Dla końcówki np. 24, ile mamy możliwości wyboru pierwszej cyfry?",
          "options": [
            {
              "id": "A",
              "text": "9 możliwości (1,3,5,6,7,8,9 - wykluczamy 0,2,4)",
              "feedback": "Prawidłowo! Wykluczamy 0 (nie może być pierwszą cyfrą) oraz 2,4 (już użyte).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "8 możliwości (wykluczamy tylko 2,4)",
              "feedback": "Nie - pamiętaj, że 0 nie może być pierwszą cyfrą liczby trzycyfrowej.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "7 możliwości (1,3,5,6,7,8,9)",
              "feedback": "Prawie dobrze, ale to jest 7 cyfr, więc 7 możliwości.",
              "is_correct": true
            }
          ],
          "explanation_after": "Dla każdej końcówki wykluczamy 0 (nie może być pierwszą cyfrą) oraz cyfry już użyte w końcówce."
        }
      },
      {
        "step": 8,
        "hint": "Jaka jest końcowa liczba trzycyfrowych liczb?",
        "expression": "Liczba liczb = 20 końcówek × 7 pierwszych cyfr = 140",
        "explanation": "Mnożymy liczbę odpowiednich końcówek przez liczbę możliwości pierwszej cyfry"
      }
    ],
    "solutions": [
      "140"
    ],
    "parameters": {
      "constraints": "liczby trzycyfrowe, różne cyfry, podzielne przez 4"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 5
      }
    },
    "timestamp": "2025-09-13T19:30:07.955Z"
  },
  {
    "id": "four_digit_divisible_25",
    "topic": "Kombinatoryka - liczby podzielne przez 25",
    "difficulty": 4,
    "statement": "Ile jest liczb czterocyfrowych o różnych cyfrach i jednocześnie podzielnych przez 25?",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy liczba jest podzielna przez 25?",
        "expression": "Liczba jest podzielna przez 25, gdy kończy się na 00, 25, 50 lub 75",
        "explanation": "Sprawdzamy warunki podzielności przez 25",
        "why": "To kluczowa obserwacja - ostatnie dwie cyfry determinują podzielność przez 25"
      },
      {
        "step": 2,
        "hint": "Które zakończenia są możliwe dla liczb o różnych cyfrach?",
        "expression": "Możliwe zakończenia: 25 i 75",
        "explanation": "Eliminujemy 00 i 50 ze względu na powtarzające się cyfry",
        "interactive_choice": {
          "prompt": "Które zakończenia można użyć w liczbie czterocyfrowej o różnych cyfrach?",
          "options": [
            {
              "id": "A",
              "text": "Tylko 25 i 75 (bo 00 i 50 mają powtarzające się cyfry)",
              "feedback": "Świetnie! W 00 i 50 cyfra 0 się powtarza, więc nie spełniają warunku różnych cyfr.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie: 00, 25, 50, 75",
              "feedback": "Nie - w 00 i 50 cyfra 0 powtarza się, co łamie warunek różnych cyfr.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko 25 (bo w pozostałych jest cyfra 0)",
              "feedback": "Nie do końca - 75 też jest możliwe, cyfra 0 nie występuje w 75.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla różnych cyfr możliwe są tylko zakończenia 25 i 75."
        }
      },
      {
        "step": 3,
        "hint": "Ile liczb kończy się na 25?",
        "expression": "Liczby postaci $\\overline{ab25}$ gdzie $a \\neq b \\neq 2 \\neq 5$ i $a \\neq 0$",
        "explanation": "Szukamy liczb czterocyfrowych kończących się na 25 z różnymi cyframi"
      },
      {
        "step": 4,
        "hint": "Ile możliwości mamy na pierwszą cyfrę a?",
        "expression": "Pierwsza cyfra $a$: 7 możliwości",
        "explanation": "Cyfry 1,3,4,6,7,8,9 (bez 0,2,5)",
        "interactive_choice": {
          "prompt": "Ile cyfr możemy wybrać na pierwszą pozycję w liczbie $\\overline{ab25}$?",
          "options": [
            {
              "id": "A",
              "text": "7 cyfr (1,3,4,6,7,8,9 - bez 0,2,5)",
              "feedback": "Dokładnie! Pierwsza cyfra nie może być 0 (nie byłaby czterocyfrowa) ani 2,5 (już użyte).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "8 cyfr (0,1,3,4,6,7,8,9 - bez 2,5)",
              "feedback": "Nie - cyfra 0 na pierwszej pozycji dałaby liczbę trzycyfrową.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "9 cyfr (wszystkie oprócz jednej już użytej)",
              "feedback": "Nie - musimy wykluczyć 0 (pierwsza pozycja) oraz 2 i 5 (już użyte).",
              "is_correct": false
            }
          ],
          "explanation_after": "Pierwsza cyfra: 7 możliwości (1,3,4,6,7,8,9)."
        }
      },
      {
        "step": 5,
        "hint": "Ile możliwości na drugą cyfrę b?",
        "expression": "Druga cyfra $b$: 7 możliwości",
        "explanation": "Pozostałe cyfry po wybraniu a, wykluczając 2 i 5 (włącznie z 0)",
        "why": "Po wybraniu pierwszej cyfry zostaje 9 cyfr, ale musimy wykluczyć 2 i 5, więc 7 możliwości"
      },
      {
        "step": 6,
        "hint": "Ile liczb kończy się na 25?",
        "expression": "Liczby kończące się na 25: $7 \\times 7 = 49$",
        "explanation": "Mnożymy liczbę możliwości dla każdej pozycji"
      },
      {
        "step": 7,
        "hint": "Ile liczb kończy się na 75?",
        "expression": "Liczby postaci $\\overline{ab75}$ gdzie $a \\neq b \\neq 7 \\neq 5$ i $a \\neq 0$",
        "explanation": "Analogicznie dla zakończenia 75"
      },
      {
        "step": 8,
        "hint": "Czy obliczenia dla 75 będą takie same jak dla 25?",
        "expression": "Liczby kończące się na 75: $7 \\times 7 = 49$",
        "explanation": "Identyczne obliczenie jak dla zakończenia 25",
        "interactive_choice": {
          "prompt": "Ile cyfr możemy wybrać na pozycje w liczbie $\\overline{ab75}$?",
          "options": [
            {
              "id": "A",
              "text": "Tak samo: 7 na pierwszą, 7 na drugą pozycję",
              "feedback": "Dokładnie! Wykluczamy 7,5 zamiast 2,5, ale liczba możliwości jest taka sama.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Inaczej, bo cyfra 7 jest inna niż 2",
              "feedback": "Nie - choć cyfry są inne, liczba dostępnych opcji pozostaje taka sama.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Więcej, bo 7 > 2",
              "feedback": "Nie - wartość cyfry nie wpływa na liczbę kombinacji, liczy się tylko ich dostępność.",
              "is_correct": false
            }
          ],
          "explanation_after": "Struktura jest identyczna - wykluczamy 2 cyfry z końca i 0 z początku."
        }
      },
      {
        "step": 9,
        "hint": "Jaka jest całkowita liczba szukanych liczb?",
        "expression": "Razem: $49 + 49 = 98$",
        "explanation": "Sumujemy liczby kończące się na 25 i na 75"
      }
    ],
    "solutions": [
      "98"
    ],
    "parameters": {
      "constraints": "liczby czterocyfrowe, różne cyfry, podzielne przez 25"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:30:47.382Z"
  },
  {
    "id": "four_digit_numbers_combinatorics",
    "topic": "Kombinatoryka - liczby o różnych cyfrach",
    "difficulty": 4,
    "statement": "Ile jest liczb czterocyfrowych o różnych cyfrach i jednocześnie większych od 5238?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać szukana liczba czterocyfrowa?",
        "expression": "Liczba $\\overline{abcd}$ gdzie $a \\neq b \\neq c \\neq d$ i $\\overline{abcd} > 5238$",
        "explanation": "Definiujemy warunki: różne cyfry i większa od 5238"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podzielić problem ze względu na pierwszą cyfrę?",
        "expression": "Przypadek I: $a = 5$, Przypadek II: $a \\in \\{6, 7, 8, 9\\}$",
        "explanation": "Dzielimy na dwa główne przypadki",
        "interactive_choice": {
          "prompt": "Jak podzielić liczby większe od 5238 ze względu na pierwszą cyfrę?",
          "options": [
            {
              "id": "A",
              "text": "Przypadki: $a = 5$ oraz $a \\geq 6$",
              "feedback": "Świetnie! Dla $a = 5$ musimy sprawdzać dalsze cyfry, dla $a \\geq 6$ wszystkie są większe.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Przypadki: $a < 5$, $a = 5$, $a > 5$",
              "feedback": "Niepotrzebnie komplikujesz - liczby z $a < 5$ nie mogą być większe od 5238.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Liczyć wszystkie i odjąć te mniejsze od 5238",
              "feedback": "Możliwe, ale bardzo pracochłonne - lepiej podzielić na przypadki.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział na $a = 5$ i $a \\geq 6$ jest optymalny - różne strategie liczenia."
        }
      },
      {
        "step": 3,
        "hint": "Dla przypadku $a = 5$, jakie warunki musi spełniać reszta liczby?",
        "expression": "Dla $a = 5$: liczba $\\overline{5bcd} > 5238$",
        "explanation": "Analizujemy kiedy liczba zaczynająca się od 5 jest większa od 5238",
        "why": "Musimy porównać cyfra po cyfrze: jeśli $b > 2$, to automatycznie większa. Jeśli $b = 2$, sprawdzamy dalej."
      },
      {
        "step": 4,
        "hint": "Jak podzielić przypadek $a = 5$ ze względu na drugą cyfrę?",
        "expression": "Przypadek I.1: $b \\in \\{3, 4, 6, 7, 8, 9\\}$, Przypadek I.2: $b = 2$",
        "explanation": "Dzielimy przypadek $a = 5$ na dwa podprzypadki",
        "interactive_choice": {
          "prompt": "Jak podzielić liczby postaci $\\overline{5bcd}$ większe od 5238?",
          "options": [
            {
              "id": "A",
              "text": "Przypadki: $b \\in \\{3, 4, 6, 7, 8, 9\\}$ oraz $b = 2$ z dodatkowymi warunkami",
              "feedback": "Doskonale! Dla $b > 2$ (i $b \\neq 5$) liczba jest automatycznie większa.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Przypadki: $b = 0, 1$ oraz $b \\geq 2$",
              "feedback": "Nie - dla $b = 0, 1$ liczba $\\overline{5bcd}$ będzie mniejsza od 5238.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko przypadek $b = 2$ z warunkami na $c, d$",
              "feedback": "Za wąsko - pomijasz przypadki gdzie $b > 2$, które są prostsze.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla $b > 2$ (i $b \\neq 5$) mamy automatycznie $\\overline{5bcd} > 5238$. Tylko $b = 2$ wymaga dalszej analizy."
        }
      },
      {
        "step": 5,
        "hint": "Ile liczb w przypadku I.1: $a = 5$, $b \\in \\{3, 4, 6, 7, 8, 9\\}$?",
        "expression": "$6 \\times 8 \\times 7 = 336$",
        "explanation": "6 wyborów na $b$, 8 na $c$ (bez 5 i $b$), 7 na $d$ (bez 5, $b$, $c$)"
      },
      {
        "step": 6,
        "hint": "Dla przypadku I.2: $a = 5, b = 2$, kiedy $\\overline{52cd} > 5238$?",
        "expression": "Potrzebujemy $\\overline{cd} > 38$, czyli $c \\geq 4$ (bo $c \\neq 2, 5$)",
        "explanation": "Porównujemy $\\overline{52cd}$ z $5238$: trzecia cyfra musi być co najmniej 4"
      },
      {
        "step": 7,
        "hint": "Ile liczb w przypadku I.2 z podziałem na wartości $c$?",
        "expression": "Dla $c = 4$: 1 wybór ($d = 9$), dla $c \\in \\{6, 7, 8, 9\\}$: $4 \\times 6 = 24$",
        "explanation": "Przypadek $c = 4$: 1 liczba, przypadek $c > 4$: 24 liczby",
        "interactive_choice": {
          "prompt": "Jak policzyć liczby $\\overline{52cd}$ gdzie $c \\geq 4$ i $c \\notin \\{2, 5\\}$?",
          "options": [
            {
              "id": "A",
              "text": "Przypadki: $c = 4$ (wtedy $d > 8$) oraz $c \\in \\{6, 7, 8, 9\\}$ (dowolne $d$)",
              "feedback": "Świetnie! Dla $c = 4$ potrzebujemy $d = 9$, dla $c > 4$ dowolne $d \\neq 2, 5, c$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie $c \\in \\{4, 6, 7, 8, 9\\}$ z dowolnymi $d$",
              "feedback": "Nie - dla $c = 4$ musimy mieć $d > 8$, więc tylko $d = 9$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko $c \\in \\{6, 7, 8, 9\\}$ bo dla $c = 4$ nie ma rozwiązań",
              "feedback": "Błąd - dla $c = 4$ mamy rozwiązanie $d = 9$ (bo $5249 > 5238$).",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla $c = 4$: tylko $d = 9$ daje $5249 > 5238$. Dla $c > 4$: wszystkie dozwolone $d$."
        }
      },
      {
        "step": 8,
        "hint": "Ile łącznie liczb w przypadku I ($a = 5$)?",
        "expression": "Przypadek I: $336 + 1 + 24 = 361$",
        "explanation": "Sumujemy wszystkie podprzypadki dla $a = 5$"
      },
      {
        "step": 9,
        "hint": "Ile liczb w przypadku II: $a \\in \\{6, 7, 8, 9\\}$?",
        "expression": "$4 \\times 9 \\times 8 \\times 7 = 2016$",
        "explanation": "4 wybory na $a$, 9 na $b$ (bez $a$), 8 na $c$ (bez $a, b$), 7 na $d$ (bez $a, b, c$)",
        "why": "Wszystkie liczby z $a \\geq 6$ są automatycznie większe od 5238, więc liczymy wszystkie kombinacje z różnymi cyframi."
      },
      {
        "step": 10,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "$361 + 2016 = 2377$",
        "explanation": "Sumujemy oba główne przypadki"
      }
    ],
    "solutions": [
      "2377"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:31:28.135Z"
  },
  {
    "id": "five_digit_divisible_by_4",
    "topic": "Kombinatoryka z warunkami",
    "difficulty": 4,
    "statement": "Ile jest liczb pięciocyfrowych o różnych cyfrach i jednocześnie podzielnych przez 4?",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki warunek musi spełniać liczba, aby była podzielna przez 4?",
        "expression": "Liczba jest podzielna przez 4, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez 4",
        "explanation": "Używamy cechy podzielności przez 4",
        "why": "To kluczowa cecha - nie musimy sprawdzać całej liczby, tylko dwie ostatnie cyfry"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Strategia: najpierw dwie ostatnie cyfry, potem pozostałe trzy",
        "explanation": "Dzielimy problem na etapy",
        "interactive_choice": {
          "prompt": "Którą strategię wybierzesz do zliczania liczb pięciocyfrowych podzielnych przez 4?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybieram wszystkie 5 cyfr, potem sprawdzam podzielność",
              "feedback": "Skomplikowane - trudno będzie sprawdzić warunek podzielności dla każdego zestawu",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Najpierw ustalam dwie ostatnie cyfry (podzielność), potem resztę",
              "feedback": "Świetnie! To pozwoli kontrolować warunek podzielności od początku",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Liczę wszystkie liczby pięciocyfrowe, potem dzielę przez 4",
              "feedback": "Nie - to nie uwzględnia warunku różnych cyfr ani dokładnej podzielności",
              "is_correct": false
            }
          ],
          "explanation_after": "Ustalenie końcówki na początku pozwala kontrolować podzielność przez 4"
        }
      },
      {
        "step": 3,
        "hint": "Które dwucyfrowe liczby o różnych cyfrach są podzielne przez 4?",
        "expression": "Sprawdzamy systematycznie: 04, 08, 12, 16, 20, 24, 28, 32, 36, 40, 48, 52, 56, 60, 64, 68, 72, 76, 80, 84, 92, 96",
        "explanation": "Wypisujemy wszystkie dwucyfrowe liczby podzielne przez 4 z różnymi cyframi"
      },
      {
        "step": 4,
        "hint": "Ile jest takich par cyfr?",
        "expression": "Liczba par: 22",
        "explanation": "Zliczamy pary z poprzedniego kroku"
      },
      {
        "step": 5,
        "hint": "Jak podzielić te pary ze względu na obecność cyfry 0?",
        "expression": "Pary z zerem: 04, 08, 20, 40, 60, 80 (6 par)\nPary bez zera: pozostałe 16 par",
        "explanation": "Rozdzielamy ze względu na ograniczenia dla pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Dlaczego warto rozdzielić pary zawierające 0 od pozostałych?",
          "options": [
            {
              "id": "A",
              "text": "Bo cyfra 0 nie może stać na pierwszej pozycji liczby pięciocyfrowej",
              "feedback": "Dokładnie! To ogranicza wybór pierwszej cyfry w różny sposób",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bo cyfra 0 ma specjalne właściwości przy dzieleniu przez 4",
              "feedback": "Nie - chodzi o pozycję w liczbie, nie o dzielenie",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Bo pary z 0 są trudniejsze do policzenia",
              "feedback": "Nie o trudność chodzi, ale o różne ograniczenia dla pierwszej cyfry",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfra 0 nie może być pierwszą cyfrą, więc przypadki z 0 wymagają osobnego traktowania"
        }
      },
      {
        "step": 6,
        "hint": "Ile sposobów jest na uzupełnienie liczby, gdy końcówka nie zawiera 0?",
        "expression": "Dla par bez zera: mamy 8 cyfr do wyboru na 3 pozycje (10 - 2 użyte)\nPierwsza pozycja: 8 wyborów\nDruga pozycja: 7 wyborów\nTrzecia pozycja: 6 wyborów",
        "explanation": "Dla każdej z 16 par bez zera uzupełniamy pozostałe 3 pozycje"
      },
      {
        "step": 7,
        "hint": "Ile sposobów dla par zawierających 0?",
        "expression": "Dla par z zerem: mamy 8 cyfr do wyboru (10 - 2 użyte)\nPierwsza pozycja: 8 wyborów (0 nie może być pierwszy)\nDruga pozycja: 7 wyborów\nTrzecia pozycja: 6 wyborów",
        "explanation": "Dla każdej z 6 par z zerem uzupełniamy 3 pozycje, ale 0 nie może być pierwszy"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć końcowy wynik?",
        "expression": "$16 \\times 8 \\times 7 \\times 6 + 6 \\times 8 \\times 7 \\times 6 = (16 + 6) \\times 8 \\times 7 \\times 6$",
        "explanation": "Sumujemy wyniki z obu przypadków",
        "interactive_choice": {
          "prompt": "Jak połączyć wyniki dla obu typów par?",
          "options": [
            {
              "id": "A",
              "text": "$(16 + 6) \\times 8 \\times 7 \\times 6$",
              "feedback": "Nie - oba przypadki dają taki sam wzór, ale to przypadek!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$16 \\times 8 \\times 7 \\times 6 + 6 \\times 8 \\times 7 \\times 6$",
              "feedback": "Dokładnie! Dodajemy wyniki z obu rozłącznych przypadków",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$22 \\times 8 \\times 7 \\times 6 - poprawki$",
              "feedback": "Skomplikowane - lepiej liczyć przypadki osobno",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki są rozłączne, więc dodajemy ich wyniki"
        }
      },
      {
        "step": 9,
        "hint": "Jaki jest końcowy wynik obliczeń?",
        "expression": "$22 \\times 8 \\times 7 \\times 6 = 22 \\times 336 = 7392$",
        "explanation": "Obliczamy końcowy wynik"
      }
    ],
    "solutions": [
      "7392"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:32:05.775Z"
  },
  {
    "id": "five_digit_numbers_combinatorics",
    "topic": "Kombinatoryka - liczby o różnych cyfrach",
    "difficulty": 4,
    "statement": "Ile jest liczb pięciocyfrowych o różnych cyfrach i jednocześnie większych od 60000?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek 'większa od 60000' dla pierwszej cyfry?",
        "expression": "Pierwsza cyfra musi być z zbioru $\\{6, 7, 8, 9\\}$",
        "explanation": "Liczba pięciocyfrowa większa od 60000 musi zaczynać się od 6, 7, 8 lub 9"
      },
      {
        "step": 2,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Rozpatrujemy przypadki: pierwsza cyfra = 6, 7, 8 lub 9",
        "explanation": "Dzielimy problem na cztery przypadki według pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do zliczania liczb o różnych cyfrach?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć przypadki według pierwszej cyfry",
              "feedback": "Świetny wybór! Dla każdej pierwszej cyfry (6,7,8,9) policzymy osobno.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na wariacje bez powtórzeń",
              "feedback": "Trudne - warunek >60000 komplikuje bezpośrednie zastosowanie wzoru.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie pięciocyfrowe, potem odjąć niepasujące",
              "feedback": "Możliwe, ale bardziej skomplikowane niż rozpatrywanie przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział na przypadki według pierwszej cyfry jest najjaśniejszy i najprostszy."
        }
      },
      {
        "step": 3,
        "hint": "Ile mamy możliwości wyboru dla każdej pozycji gdy pierwsza cyfra jest ustalona?",
        "expression": "Pierwsza cyfra: 1 sposób (ustalona), pozostałe pozycje: 9, 8, 7, 6 sposobów",
        "explanation": "Po wyborze pierwszej cyfry, na każdej kolejnej pozycji mamy o jeden wybór mniej",
        "why": "Cyfry muszą być różne, więc z każdą wybraną cyfrą zmniejsza się liczba dostępnych opcji. Mamy 10 cyfr (0-9), więc po wyborze pierwszej zostaje 9, potem 8, itd."
      },
      {
        "step": 4,
        "hint": "Czy liczba możliwości jest taka sama dla każdej pierwszej cyfry?",
        "expression": "Dla każdej pierwszej cyfry: $1 \\times 9 \\times 8 \\times 7 \\times 6 = 3024$ liczb",
        "explanation": "Niezależnie od wyboru pierwszej cyfry, mamy 9 opcji dla drugiej, 8 dla trzeciej, itd.",
        "interactive_choice": {
          "prompt": "Czy przypadek 'pierwsza cyfra = 6' różni się od pozostałych?",
          "options": [
            {
              "id": "A",
              "text": "Tak, bo cyfra 0 może być na pozycjach 2-5",
              "feedback": "Dokładnie! Gdy pierwsza cyfra to 6, cyfra 0 może być na pozostałych pozycjach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, wszystkie przypadki są identyczne",
              "feedback": "Nie - cyfra 0 nie może być pierwszą cyfrą, ale może być na innych pozycjach.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tak, bo 6 to najmniejsza dozwolona pierwsza cyfra",
              "feedback": "To prawda, ale kluczowe jest to, że 0 może być na pozycjach 2-5.",
              "is_correct": false
            }
          ],
          "explanation_after": "We wszystkich przypadkach cyfra 0 może być na pozycjach 2, 3, 4 lub 5, więc obliczenia są identyczne."
        }
      },
      {
        "step": 5,
        "hint": "Ile mamy przypadków do rozpatrzenia?",
        "expression": "4 przypadki (pierwsza cyfra: 6, 7, 8, lub 9)",
        "explanation": "Mamy cztery możliwe pierwsze cyfry spełniające warunek >60000"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć całkowitą liczbę poszukiwanych liczb?",
        "expression": "$4 \\times 3024 = 12096$",
        "explanation": "Sumujemy wyniki ze wszystkich czterech przypadków",
        "interactive_choice": {
          "prompt": "Jak połączyć wyniki z wszystkich przypadków?",
          "options": [
            {
              "id": "A",
              "text": "Pomnożyć: $4 \\times 3024$",
              "feedback": "Nie - to by oznaczało, że przypadki się wykluczają, ale tu je dodajemy.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dodać: $4 \\times 3024$",
              "feedback": "Dokładnie! Każdy przypadek daje 3024 liczby, więc sumujemy wszystkie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na kombinacje",
              "feedback": "Nie - to nie jest problem wyboru podzbioru, lecz zliczania przypadków.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przypadki się nie pokrywają (różne pierwsze cyfry), więc dodajemy ich wyniki."
        }
      }
    ],
    "solutions": [
      "12096"
    ],
    "parameters": {
      "constraint": "liczby pięciocyfrowe > 60000 o różnych cyfrach"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:32:44.161Z"
  },
  {
    "id": "mobile_numbers_counting",
    "topic": "Zasada mnożenia w kombinatoryce",
    "difficulty": 3,
    "statement": "Ile jest telefonicznych numerów komórkowych, składających się z dziewięciu cyfr takich, że pierwszą cyfrą jest 5 lub 6, trzecią cyfrą jest 0, a pozostałe cyfry nie są ani piątką, ani szóstką, ani zerem?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda struktura numeru komórkowego o którym mowa?",
        "expression": "Numer: _ _ _ _ _ _ _ _ _ (9 pozycji)",
        "explanation": "Mamy 9 pozycji do wypełnienia cyframi zgodnie z warunkami"
      },
      {
        "step": 2,
        "hint": "Jakie cyfry mogą stać na pierwszej pozycji?",
        "expression": "Pozycja 1: cyfra 5 lub 6 → 2 możliwości",
        "explanation": "Pierwsza cyfra jest ściśle określona warunkami zadania"
      },
      {
        "step": 3,
        "hint": "Co wiemy o trzeciej pozycji?",
        "expression": "Pozycja 3: cyfra 0 → 1 możliwość",
        "explanation": "Trzecia pozycja jest ustalona - musi być zerem"
      },
      {
        "step": 4,
        "hint": "Które cyfry są zabronione na pozostałych pozycjach?",
        "expression": "Zabronione cyfry: 0, 5, 6 → Dozwolone cyfry: 1, 2, 3, 4, 7, 8, 9 (7 cyfr)",
        "explanation": "Na pozostałych 7 pozycjach można użyć tylko 7 różnych cyfr",
        "interactive_choice": {
          "prompt": "Jakie cyfry NIE mogą wystąpić na pozostałych pozycjach (2, 4, 5, 6, 7, 8, 9)?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry 0, 5, 6 są zabronione",
              "feedback": "Dokładnie! Te cyfry są wykluczone, zostaje nam 7 dozwolonych cyfr.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko cyfry 5 i 6 są zabronione",
              "feedback": "Nie - zero też jest zabronione na pozostałych pozycjach!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie cyfry oprócz 0 są dozwolone",
              "feedback": "Nie - cyfry 5 i 6 też są zabronione na pozostałych pozycjach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zabronione cyfry to 0, 5, 6. Z 10 cyfr (0-9) zostaje nam 7 dozwolonych: 1, 2, 3, 4, 7, 8, 9."
        }
      },
      {
        "step": 5,
        "hint": "Ile możliwości mamy dla każdej z pozostałych pozycji?",
        "expression": "Pozycje 2, 4, 5, 6, 7, 8, 9: każda ma 7 możliwości",
        "explanation": "Każda z 7 pozostałych pozycji może być wypełniona jedną z 7 dozwolonych cyfr"
      },
      {
        "step": 6,
        "hint": "Którą zasadę kombinatoryki zastosujemy do policzenia wszystkich numerów?",
        "expression": "Całkowita liczba = 2 × 1 × 7^7",
        "explanation": "Mnożymy możliwości dla każdej pozycji",
        "why": "Zasada mnożenia mówi, że jeśli mamy k niezależnych wyborów z odpowiednio n₁, n₂, ..., nₖ możliwości, to łącznie mamy n₁ × n₂ × ... × nₖ sposobów.",
        "interactive_choice": {
          "prompt": "Jak policzyć całkowitą liczbę różnych numerów?",
          "options": [
            {
              "id": "A",
              "text": "Zasada dodawania: 2 + 1 + 7×7",
              "feedback": "Nie - dodawanie używamy gdy mamy alternatywy, tu mamy kolejne wybory.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Zasada mnożenia: 2 × 1 × 7^7",
              "feedback": "Świetnie! Każdy wybór jest niezależny, więc mnożymy możliwości.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Permutacje: 9!/(2!×1!×7!)",
              "feedback": "Nie - to nie jest problem permutacji, bo pozycje mają różne ograniczenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: gdy dokonujemy kolejnych niezależnych wyborów, mnożymy liczbę możliwości."
        }
      },
      {
        "step": 7,
        "hint": "Ile wynosi 7^7?",
        "expression": "$7^2 = 49$, $7^4 = 2401$, $7^7 = 7^4 \\times 7^2 \\times 7^1 = 2401 \\times 49 \\times 7 = 823543$",
        "explanation": "Obliczamy potęgę krok po kroku używając właściwości potęg",
        "interactive_choice": {
          "prompt": "Jak najlepiej obliczyć 7^7?",
          "options": [
            {
              "id": "A",
              "text": "Krok po kroku: 7² = 49, 7⁴ = 2401, itd.",
              "feedback": "Dobra metoda! Systematyczne podejście przez potęgi.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bezpośrednio: 7×7×7×7×7×7×7",
              "feedback": "Możliwe, ale pracochłonne - lepiej użyć właściwości potęg.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzór na potęgę sumy: (a+b)ⁿ",
              "feedback": "Nie - to nie jest potęga sumy, tylko zwykła potęga liczby 7.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najefektywniej: 7² = 49, 7⁴ = 2401, 7⁷ = 7⁴ × 7² × 7¹ = 2401 × 49 × 7."
        }
      },
      {
        "step": 8,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "Liczba numerów = $2 \\times 1 \\times 823543 = 1647086$",
        "explanation": "Mnożymy wszystkie składniki zgodnie z zasadą mnożenia"
      }
    ],
    "solutions": [
      "1647086"
    ],
    "parameters": {
      "constraints": "Pierwsza cyfra: 5 lub 6, trzecia cyfra: 0, pozostałe cyfry: nie 0, 5, 6"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-13T19:33:14.772Z"
  },
  {
    "id": "phone_numbers_permutations",
    "topic": "Permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "Ile jest telefonicznych numerów komórkowych, składających się z dziewięciu cyfr takich, że każda cyfra jest inna i na pierwszym miejscu nie występuje 0?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mamy do dyspozycji i ile ich jest?",
        "expression": "Cyfry: $0, 1, 2, 3, 4, 5, 6, 7, 8, 9$ - razem 10 cyfr",
        "explanation": "Mamy 10 różnych cyfr do wykorzystania"
      },
      {
        "step": 2,
        "hint": "Jakie są ograniczenia w tym zadaniu?",
        "expression": "Warunki: 9 pozycji, 10 cyfr, wszystkie różne, pierwsza $\\neq 0$",
        "explanation": "Identyfikujemy wszystkie ograniczenia problemu",
        "interactive_choice": {
          "prompt": "Które warunki musimy spełnić przy tworzeniu numeru?",
          "options": [
            {
              "id": "A",
              "text": "9 cyfr, wszystkie różne, pierwsza nie może być 0",
              "feedback": "Doskonale! To są wszystkie kluczowe ograniczenia.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "9 cyfr, wszystkie różne, bez dodatkowych ograniczeń",
              "feedback": "Nie - zapomniałeś o ograniczeniu dla pierwszej pozycji!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "9 cyfr, pierwsza nie 0, cyfry mogą się powtarzać",
              "feedback": "Nie - zadanie wyraźnie mówi, że każda cyfra jest inna.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mamy permutacje z ograniczeniem - wybieramy 9 z 10 cyfr, ale pierwsza nie może być 0."
        }
      },
      {
        "step": 3,
        "hint": "Jak podejść do problemu z ograniczeniem na pierwszą pozycję?",
        "expression": "Strategia: pierwsza pozycja → pozostałe pozycje",
        "explanation": "Rozwiązujemy krok po kroku, uwzględniając ograniczenia",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować dla ograniczenia na pierwszej pozycji?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pierwszą cyfrę, potem resztę",
              "feedback": "Świetnie! To naturalne podejście - eliminujemy ograniczenie od razu.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje i odjąć te z 0 na początku",
              "feedback": "Też działa, ale bardziej skomplikowane - lepiej od razu uwzględnić ograniczenie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje bez ograniczeń",
              "feedback": "Nie - to zignorowałoby ważne ograniczenie zadania.",
              "is_correct": false
            }
          ],
          "explanation_after": "Najprościej: wybieramy pierwszą cyfrę (9 możliwości), potem układamy pozostałe."
        }
      },
      {
        "step": 4,
        "hint": "Ile mamy możliwości wyboru pierwszej cyfry?",
        "expression": "Pierwsza pozycja: $9$ możliwości (cyfry $1, 2, 3, 4, 5, 6, 7, 8, 9$)",
        "explanation": "Wykluczamy cyfrę 0, zostaje nam 9 cyfr do wyboru",
        "why": "To kluczowy krok - ograniczenie zmniejsza liczbę możliwości z 10 do 9."
      },
      {
        "step": 5,
        "hint": "Po wyborze pierwszej cyfry, ile cyfr zostało do wykorzystania?",
        "expression": "Pozostało: $10 - 1 = 9$ cyfr (w tym cyfra 0)",
        "explanation": "Jedna cyfra została użyta na pierwszej pozycji"
      },
      {
        "step": 6,
        "hint": "Na ile sposobów można ustawić pozostałe 8 cyfr na 8 pozycjach?",
        "expression": "Pozostałe pozycje: $V(9,8) = \\frac{9!}{1!} = 9 \\cdot 8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2$",
        "explanation": "Wariacje 8-elementowe z 9-elementowego zbioru",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów ustawienia 8 cyfr z 9 dostępnych na 8 pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "To permutacje: $P(9,8) = \\frac{9!}{(9-8)!} = \\frac{9!}{1!} = 9!$",
              "feedback": "Nie - to dałoby $9!$, ale mamy tylko 8 pozycji do wypełnienia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To wariacje: $V(9,8) = \\frac{9!}{(9-8)!} = \\frac{9!}{1!} = 9 \\cdot 8!$",
              "feedback": "Dokładnie! Wybieramy 8 cyfr z 9 i ustawiamy je w kolejności.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To kombinacje: $C(9,8) = \\frac{9!}{8! \\cdot 1!} = 9$",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu kolejność ma znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "To wariacje bez powtórzeń - kolejność ma znaczenie, wybieramy 8 z 9."
        }
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę numerów?",
        "expression": "$9 \\times V(9,8) = 9 \\times (9 \\cdot 8 \\cdot 7 \\cdot 6 \\cdot 5 \\cdot 4 \\cdot 3 \\cdot 2)$",
        "explanation": "Mnożymy liczbę możliwości dla pierwszej pozycji przez liczbę układów pozostałych"
      },
      {
        "step": 8,
        "hint": "Jaki jest wynik końcowy?",
        "expression": "$9 \\times 40320 = 362880$",
        "explanation": "Obliczamy: $9 \\times 8! = 9 \\times 40320 = 362880$"
      }
    ],
    "solutions": [
      "$362880$"
    ],
    "parameters": {
      "digits_total": 10,
      "positions": 9,
      "restriction": "pierwsza pozycja $\\neq 0$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-13T19:33:53.770Z"
  },
  {
    "id": "phone_numbers_decreasing",
    "topic": "Kombinatoryka - ciągi liczbowe",
    "difficulty": 3,
    "statement": "Ile jest telefonicznych numerów komórkowych, składających się z dziewięciu cyfr takich, że każda kolejna cyfra tego numeru jest liczbą o 1 mniejszą od poprzedniej?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda przykład takiego numeru?",
        "expression": "Przykład: $987654321$ - każda cyfra o 1 mniejsza od poprzedniej",
        "explanation": "Numer ma postać $a_1a_2a_3a_4a_5a_6a_7a_8a_9$ gdzie $a_{i+1} = a_i - 1$"
      },
      {
        "step": 2,
        "hint": "Co determinuje cały numer?",
        "expression": "Numer: $a, a-1, a-2, a-3, a-4, a-5, a-6, a-7, a-8$",
        "explanation": "Cały numer zależy tylko od wyboru pierwszej cyfry $a$",
        "interactive_choice": {
          "prompt": "Co wystarczy wybrać, żeby określić cały 9-cyfrowy numer malejący?",
          "options": [
            {
              "id": "A",
              "text": "Pierwszą cyfrę - reszta jest już ustalona",
              "feedback": "Świetnie! Jeśli pierwsza cyfra to $a$, to numer to $a, a-1, a-2, ..., a-8$",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Każdą cyfrę osobno - mamy 9 niezależnych wyborów",
              "feedback": "Nie - cyfry są zależne! Każda następna to poprzednia minus 1",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Środkową cyfrę - ona określa pozostałe",
              "feedback": "Można tak myśleć, ale prostsze jest wybranie pierwszej cyfry",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybór pierwszej cyfry jednoznacznie określa wszystkie pozostałe."
        }
      },
      {
        "step": 3,
        "hint": "Jakie ograniczenia ma pierwsza cyfra $a$?",
        "expression": "Wszystkie cyfry muszą być z zakresu $\\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Każda cyfra numeru musi być cyfrą dziesiętną"
      },
      {
        "step": 4,
        "hint": "Jaka jest najmniejsza cyfra w naszym numerze?",
        "expression": "Najmniejsza cyfra: $a - 8$",
        "explanation": "Ostatnia cyfra $a-8$ jest najmniejsza w całym numerze",
        "interactive_choice": {
          "prompt": "Która cyfra w numerze $a, a-1, a-2, ..., a-8$ jest najmniejsza?",
          "options": [
            {
              "id": "A",
              "text": "Pierwsza cyfra $a$",
              "feedback": "Nie - cyfry maleją, więc pierwsza jest największa",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Ostatnia cyfra $a-8$",
              "feedback": "Dokładnie! To najmniejsza cyfra w ciągu malejącym",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Środkowa cyfra",
              "feedback": "Nie - w ciągu malejącym najmniejsza jest ostatnia",
              "is_correct": false
            }
          ],
          "explanation_after": "W ciągu malejącym ostatni element jest najmniejszy."
        }
      },
      {
        "step": 5,
        "hint": "Jakie warunki musi spełniać cyfra $a-8$?",
        "expression": "$a - 8 \\geq 0$, więc $a \\geq 8$",
        "explanation": "Najmniejsza cyfra nie może być ujemna",
        "why": "To kluczowe ograniczenie - bez niego moglibyśmy mieć 'cyfry' ujemne, co nie ma sensu."
      },
      {
        "step": 6,
        "hint": "Jakie warunki musi spełniać cyfra $a$?",
        "expression": "$a \\leq 9$ (cyfra dziesiętna) oraz $a \\geq 8$",
        "explanation": "Pierwsza cyfra musi być cyfrą i zapewnić nieujemność ostatniej cyfry"
      },
      {
        "step": 7,
        "hint": "Ile jest możliwych wartości dla cyfry $a$?",
        "expression": "$a \\in \\{8, 9\\}$",
        "explanation": "Pierwsza cyfra może być tylko 8 lub 9",
        "interactive_choice": {
          "prompt": "Które cyfry może przyjąć $a$ przy warunkach $8 \\leq a \\leq 9$?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $a = 9$",
              "feedback": "Nie - $a = 8$ też spełnia warunki!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$a \\in \\{8, 9\\}$ - dwie możliwości",
              "feedback": "Dokładnie! Dla $a = 8$: numer $876543210$, dla $a = 9$: numer $987654321$",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$a \\in \\{7, 8, 9\\}$ - trzy możliwości",
              "feedback": "Nie - dla $a = 7$ ostatnia cyfra byłaby $7-8 = -1$, co nie jest cyfrą",
              "is_correct": false
            }
          ],
          "explanation_after": "Tylko $a = 8$ i $a = 9$ dają poprawne 9-cyfrowe numery."
        }
      },
      {
        "step": 8,
        "hint": "Ile jest takich numerów komórkowych?",
        "expression": "Liczba numerów = liczba możliwych wartości $a$ = $2$",
        "explanation": "Mamy dokładnie 2 możliwe numery: $876543210$ i $987654321$"
      }
    ],
    "solutions": [
      "$2$"
    ],
    "parameters": {
      "note": "Numery to: $876543210$ i $987654321$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:34:38.018Z"
  },
  {
    "id": "mobile_numbers_combinatorics",
    "topic": "Kombinatoryka - reguła iloczynu",
    "difficulty": 3,
    "statement": "Ile jest telefonicznych numerów komórkowych, składających się z dziewięciu cyfr takich, że pierwsza, trzecia, piąta, siódma i dziewiąta cyfra jest taka sama i jest liczbą nieparzystą, zaś pozostałe cyfry są różnymi liczbami parzystymi?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda struktura tego dziewięciocyfrowego numeru?",
        "expression": "Numer: $a_1 a_2 a_3 a_4 a_5 a_6 a_7 a_8 a_9$",
        "explanation": "Oznaczamy pozycje cyfr w numerze"
      },
      {
        "step": 2,
        "hint": "Które pozycje mają takie same cyfry nieparzyste?",
        "expression": "$a_1 = a_3 = a_5 = a_7 = a_9$ (cyfra nieparzysta)",
        "explanation": "Pozycje nieparzyste mają identyczną cyfrę nieparzystą",
        "interactive_choice": {
          "prompt": "Które pozycje w numerze mają identyczne cyfry nieparzyste?",
          "options": [
            {
              "id": "A",
              "text": "Pozycje 1, 3, 5, 7, 9 (nieparzyste pozycje)",
              "feedback": "Dokładnie! Te pozycje mają tę samą cyfrę nieparzystą.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pozycje 2, 4, 6, 8 (parzyste pozycje)",
              "feedback": "Nie - te pozycje mają różne cyfry parzyste, nie identyczne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie pozycje mają takie same cyfry",
              "feedback": "Nie - tylko niektóre pozycje mają identyczne cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Pozycje 1, 3, 5, 7, 9 mają tę samą cyfrę nieparzystą, pozostałe pozycje mają różne cyfry parzyste."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest cyfr nieparzystych do wyboru?",
        "expression": "Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$ - jest ich 5",
        "explanation": "Mamy 5 możliwości wyboru cyfry nieparzystej"
      },
      {
        "step": 4,
        "hint": "Jakie warunki muszą spełniać pozostałe pozycje?",
        "expression": "$a_2, a_4, a_6, a_8$ - różne cyfry parzyste",
        "explanation": "Pozycje 2, 4, 6, 8 mają różne cyfry parzyste"
      },
      {
        "step": 5,
        "hint": "Ile jest cyfr parzystych i czy zero też się liczy?",
        "expression": "Cyfry parzyste: $\\{0, 2, 4, 6, 8\\}$ - jest ich 5",
        "explanation": "Mamy 5 różnych cyfr parzystych do wyboru",
        "interactive_choice": {
          "prompt": "Które cyfry parzyste możemy użyć na pozycjach 2, 4, 6, 8?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $\\{2, 4, 6, 8\\}$ - bez zera",
              "feedback": "Nie - zero też jest cyfrą parzystą i można go użyć!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Cyfry $\\{0, 2, 4, 6, 8\\}$ - wszystkie parzyste",
              "feedback": "Tak! Zero też jest parzystą cyfrą, mamy 5 cyfr parzystych.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Cyfry $\\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$ - bez zera",
              "feedback": "Nie - to mieszanka parzystych i nieparzystych, a zero można użyć.",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfry parzyste to $\\{0, 2, 4, 6, 8\\}$ - łącznie 5 cyfr. Zero też jest parzystą cyfrą."
        }
      },
      {
        "step": 6,
        "hint": "W ilu sposobów można wybrać 4 różne cyfry parzyste na 4 pozycje?",
        "expression": "$V_5^4 = 5 \\cdot 4 \\cdot 3 \\cdot 2 = 120$",
        "explanation": "Na pierwszą pozycję 5 wyborów, na drugą 4, na trzecią 3, na czwartą 2",
        "why": "Używamy wariacji bez powtórzeń, bo cyfry mają być różne i kolejność ma znaczenie.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę sposobów ustawienia 4 różnych cyfr parzystych na pozycjach 2, 4, 6, 8?",
          "options": [
            {
              "id": "A",
              "text": "Kombinacje $C_5^4 = 5$ sposobów",
              "feedback": "Nie - kombinacje nie uwzględniają kolejności, a tu kolejność ma znaczenie!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wariacje $V_5^4 = 5 \\cdot 4 \\cdot 3 \\cdot 2 = 120$ sposobów",
              "feedback": "Dokładnie! Wybieramy 4 z 5 cyfr z uwzględnieniem kolejności.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Po prostu $5^4 = 625$ sposobów",
              "feedback": "Nie - cyfry mają być różne, więc nie można powtarzać!",
              "is_correct": false
            }
          ],
          "explanation_after": "To są wariacje - wybieramy 4 różne cyfry z 5 dostępnych z uwzględnieniem kolejności."
        }
      },
      {
        "step": 7,
        "hint": "Jak zastosować regułę iloczynu do całego problemu?",
        "expression": "Liczba numerów = (wybory cyfry nieparzystej) $\\times$ (sposoby ustawienia cyfr parzystych)",
        "explanation": "Reguła iloczynu - niezależne wybory mnożymy"
      },
      {
        "step": 8,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$5 \\times 120 = 600$",
        "explanation": "5 sposobów wyboru cyfry nieparzystej razy 120 sposobów ustawienia cyfr parzystych"
      }
    ],
    "solutions": [
      "600"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-13T19:35:08.218Z"
  },
   {
    "id": "permutations_5_books",
    "topic": "Permutacje",
    "difficulty": 2,
    "statement": "Na ile sposobów można ustawić w rzędzie 5 różnych książek?",
    "steps": [
      {
        "step": 1,
        "hint": "O jakim typie problemu kombinatorycznego tu mówimy?",
        "expression": "Permutacja 5 różnych książek",
        "explanation": "Szukamy liczby sposobów ustawienia 5 różnych obiektów w określonej kolejności",
        "interactive_choice": {
          "prompt": "Jak sklasyfikować problem ustawiania 5 różnych książek w rzędzie?",
          "options": [
            {
              "id": "A",
              "text": "To problem kombinacji - kolejność nie ma znaczenia",
              "feedback": "Nie - kolejność MA znaczenie! Książka A na początku to co innego niż A na końcu.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To problem permutacji - kolejność ma znaczenie",
              "feedback": "Dokładnie! Różne ustawienia to różne sposoby - kolejność jest istotna.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To problem wariacji z powtórzeniami",
              "feedback": "Nie - książki są różne i każdą używamy dokładnie raz.",
              "is_correct": false
            }
          ],
          "explanation_after": "To permutacja bez powtórzeń - ustawiamy wszystkie różne obiekty, kolejność ma znaczenie."
        }
      },
      {
        "step": 2,
        "hint": "Ile mamy możliwości wyboru dla pierwszej pozycji?",
        "expression": "Na pierwszej pozycji: 5 możliwości",
        "explanation": "Możemy wybrać dowolną z 5 książek na pierwszą pozycję"
      },
      {
        "step": 3,
        "hint": "Ile pozostaje możliwości dla drugiej pozycji?",
        "expression": "Na drugiej pozycji: 4 możliwości",
        "explanation": "Po wyborze pierwszej książki zostają 4 książki do wyboru"
      },
      {
        "step": 4,
        "hint": "Jak będzie wyglądać dalszy ciąg możliwości?",
        "expression": "Pozycje: 1. → 5, 2. → 4, 3. → 3, 4. → 2, 5. → 1",
        "explanation": "Na każdej kolejnej pozycji mamy o jedną książkę mniej do wyboru",
        "interactive_choice": {
          "prompt": "Jaki wzór opisuje liczbę możliwości na kolejnych pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "5, 4, 3, 2, 1 - za każdym razem o jeden mniej",
              "feedback": "Świetnie! To właśnie zasada permutacji - każdy wybór zmniejsza opcje o 1.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "5, 5, 5, 5, 5 - zawsze tyle samo możliwości",
              "feedback": "Nie - nie możemy użyć tej samej książki dwukrotnie!",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "5, 4, 4, 4, 4 - tylko pierwsza pozycja się różni",
              "feedback": "Nie - każda kolejna pozycja ma mniej opcji, bo książki się 'zużywają'.",
              "is_correct": false
            }
          ],
          "explanation_after": "Każda wybrana książka 'znika' z puli dostępnych opcji dla następnych pozycji."
        }
      },
      {
        "step": 5,
        "hint": "Jak obliczyć całkowitą liczbę sposobów?",
        "expression": "$5 \\times 4 \\times 3 \\times 2 \\times 1$",
        "explanation": "Mnożymy liczbę możliwości na każdej pozycji (reguła iloczynu)",
        "why": "To podstawowa zasada kombinatoryki - jeśli mamy sekwencję niezależnych wyborów, mnożymy liczby możliwości."
      },
      {
        "step": 6,
        "hint": "Jak nazywamy iloczyn $5 \\times 4 \\times 3 \\times 2 \\times 1$?",
        "expression": "$5! = 5 \\times 4 \\times 3 \\times 2 \\times 1 = 120$",
        "explanation": "Obliczamy wartość silni",
        "interactive_choice": {
          "prompt": "Jak zapisać $5 \\times 4 \\times 3 \\times 2 \\times 1$ w notacji matematycznej?",
          "options": [
            {
              "id": "A",
              "text": "$5!$ (5 silnia)",
              "feedback": "Dokładnie! Silnia to iloczyn wszystkich liczb naturalnych od 1 do n.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$P_5$ (permutacje z 5)",
              "feedback": "To też poprawne oznaczenie, ale $5!$ jest bardziej uniwersalne.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$C_5^5$ (kombinacje)",
              "feedback": "Nie - to oznaczenie dla kombinacji, a tu mamy permutacje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Permutacje n różnych obiektów to zawsze n! (n silnia)."
        }
      }
    ],
    "solutions": [
      "120"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T06:20:06.491Z"
  },
  {
    "id": "permutations_class_positions",
    "topic": "Permutacje",
    "difficulty": 2,
    "statement": "W klasie jest 12 uczniów. Na ile sposobów można wybrać przewodniczącego i jego zastępcę, jeśli te funkcje nie mogą być pełnione przez tę samą osobę?",
    "steps": [
      {
        "step": 1,
        "hint": "Czy kolejność wyboru przewodniczącego i zastępcy ma znaczenie?",
        "expression": "Szukamy liczby permutacji 2-elementowych ze zbioru 12-elementowego",
        "explanation": "Przewodniczący i zastępca to różne funkcje, więc kolejność wyboru ma znaczenie",
        "interactive_choice": {
          "prompt": "Jak podejść do tego problemu wyboru przewodniczącego i zastępcy?",
          "options": [
            {
              "id": "A",
              "text": "To kombinacje - kolejność nie ma znaczenia",
              "feedback": "Nie! Przewodniczący i zastępca to różne funkcje - kolejność ma znaczenie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "To permutacje - kolejność ma znaczenie",
              "feedback": "Dokładnie! Wybór Ani na przewodniczącą i Tomka na zastępcę to co innego niż odwrotnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To zwykłe mnożenie - 12 × 12",
              "feedback": "Nie - jedna osoba nie może pełnić obu funkcji jednocześnie!",
              "is_correct": false
            }
          ],
          "explanation_after": "To problem permutacji - wybieramy 2 osoby z 12 na różne stanowiska, więc kolejność ma znaczenie."
        }
      },
      {
        "step": 2,
        "hint": "Ile mamy możliwości wyboru przewodniczącego?",
        "expression": "Na przewodniczącego możemy wybrać dowolnego z 12 uczniów",
        "explanation": "Pierwszy wybór - przewodniczący z 12 kandydatów"
      },
      {
        "step": 3,
        "hint": "Po wyborze przewodniczącego, ile osób zostaje do wyboru na zastępcę?",
        "expression": "Na zastępcę możemy wybrać dowolnego z pozostałych 11 uczniów",
        "explanation": "Drugi wybór - zastępca z 11 pozostałych kandydatów",
        "interactive_choice": {
          "prompt": "Ile uczniów może zostać zastępcą po wyborze przewodniczącego?",
          "options": [
            {
              "id": "A",
              "text": "12 uczniów - każdy może być zastępcą",
              "feedback": "Nie - przewodniczący nie może być jednocześnie zastępcą!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "11 uczniów - wszyscy oprócz przewodniczącego",
              "feedback": "Tak! Jedna osoba już została wybrana na przewodniczącego.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "10 uczniów - musi zostać jeszcze ktoś",
              "feedback": "Nie - nie ma dodatkowych ograniczeń poza tym, że to różne osoby.",
              "is_correct": false
            }
          ],
          "explanation_after": "Po wyborze przewodniczącego zostaje 11 kandydatów na zastępcę."
        }
      },
      {
        "step": 4,
        "hint": "Jak obliczyć całkowitą liczbę sposobów wyboru?",
        "expression": "$12 \\times 11 = 132$",
        "explanation": "Mnożymy liczbę możliwości dla każdego wyboru",
        "why": "To zasada mnożenia: jeśli pierwszy wybór można zrobić na $m$ sposobów, a drugi na $n$ sposobów, to oba razem na $m \\times n$ sposobów."
      },
      {
        "step": 5,
        "hint": "Czy można to zapisać wzorem na permutacje?",
        "expression": "$P(12,2) = \\frac{12!}{10!} = 12 \\times 11 = 132$",
        "explanation": "Sprawdzamy wynik wzorem na permutacje",
        "interactive_choice": {
          "prompt": "Którym wzorem można zapisać ten wynik?",
          "options": [
            {
              "id": "A",
              "text": "$P(12,2) = \\frac{12!}{(12-2)!} = \\frac{12!}{10!}$",
              "feedback": "Dokładnie! To wzór na permutacje 2-elementowe z 12 elementów.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$C(12,2) = \\frac{12!}{2!(12-2)!}$",
              "feedback": "To wzór na kombinacje - używamy gdy kolejność nie ma znaczenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$12^2 = 144$",
              "feedback": "To byłoby gdyby ta sama osoba mogła pełnić obie funkcje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wzór $P(n,k) = \\frac{n!}{(n-k)!}$ daje liczbę sposobów wyboru $k$ elementów z $n$ z uwzględnieniem kolejności."
        }
      }
    ],
    "solutions": [
      "132 sposoby"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:20:30.151Z"
  },
  {
    "id": "combinatorics_menu_choice",
    "topic": "Kombinatoryka - reguła iloczynu",
    "difficulty": 2,
    "statement": "Z menu składającego się z 4 zup, 6 dań głównych i 3 deserów trzeba wybrać pełny obiad (jedna pozycja z każdej kategorii). Na ile sposobów można to zrobić?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza wybór pełnego obiadu w tym zadaniu?",
        "expression": "Pełny obiad = 1 zupa + 1 danie główne + 1 deser",
        "explanation": "Musimy wybrać dokładnie jedną pozycję z każdej kategorii"
      },
      {
        "step": 2,
        "hint": "Jaką metodę kombinatoryczną zastosować do tego problemu?",
        "expression": "Liczba sposobów = 4 × 6 × 3",
        "explanation": "Stosujemy regułę iloczynu dla kolejnych wyborów",
        "why": "Reguła iloczynu: jeśli mamy k etapów wyboru z odpowiednio n₁, n₂, ..., nₖ możliwości, to łączna liczba sposobów to n₁ × n₂ × ... × nₖ",
        "interactive_choice": {
          "prompt": "Jak podejść do zliczania sposobów wyboru pełnego obiadu?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby: 4 + 6 + 3",
              "feedback": "Nie - dodawanie używamy gdy wybieramy ALBO jedno ALBO drugie",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć liczby: 4 × 6 × 3",
              "feedback": "Świetnie! To reguła iloczynu - wybieramy I jedno I drugie I trzecie",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na kombinacje C(13,3)",
              "feedback": "Nie - kombinacje to wybór bez kolejności z jednego zbioru",
              "is_correct": false
            }
          ],
          "explanation_after": "Reguła iloczynu: gdy wykonujemy kilka niezależnych wyborów kolejno, mnożymy liczby możliwości."
        }
      },
      {
        "step": 3,
        "hint": "Dlaczego mnożymy te liczby?",
        "expression": "Dla każdej z 4 zup mamy 6 × 3 = 18 sposobów wyboru reszty",
        "explanation": "Każdy wybór zupy można połączyć z każdym wyborem dania głównego i każdym deserem",
        "interactive_choice": {
          "prompt": "Dlaczego dla każdej zupy mamy 6 × 3 = 18 sposobów dokończenia obiadu?",
          "options": [
            {
              "id": "A",
              "text": "Bo do każdej zupy możemy wybrać dowolne z 6 dań głównych, a do każdego dania głównego dowolny z 3 deserów",
              "feedback": "Dokładnie! To pokazuje dlaczego mnożymy - każdy wybór zupy daje 18 możliwości reszty",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bo zupy i dania główne się łączą, a desery dodajemy na końcu",
              "feedback": "Nie - wszystkie wybory są równoważne i niezależne",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Bo najpierw wybieramy zupy, potem dania, na końcu desery",
              "feedback": "Kolejność wyboru nie ma znaczenia - ważne że każdy wybór jest niezależny",
              "is_correct": false
            }
          ],
          "explanation_after": "Kluczowe: dla każdego wyboru z pierwszej kategorii mamy wszystkie możliwości z pozostałych kategorii."
        }
      },
      {
        "step": 4,
        "hint": "Ile wynosi iloczyn 4 × 6 × 3?",
        "expression": "4 × 6 × 3 = 24 × 3 = 72",
        "explanation": "Obliczamy krok po kroku"
      },
      {
        "step": 5,
        "hint": "Czy możemy sprawdzić wynik innym sposobem?",
        "expression": "Weryfikacja: 4 zupy × (6 dań × 3 desery) = 4 × 18 = 72",
        "explanation": "Potwierdzamy wynik myśląc o problemie krok po kroku",
        "interactive_choice": {
          "prompt": "Jak można zweryfikować wynik 72?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie kombinacje ręcznie",
              "feedback": "Możliwe, ale pracochłonne - dla większych liczb niepraktyczne",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Sprawdzić czy 4 + 6 + 3 = 13 daje sens",
              "feedback": "Nie - dodawanie to inna reguła, nie sprawdzi naszego wyniku",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Pomyśleć: czy dla każdej zupy rzeczywiście mamy 18 sposobów dokończenia?",
              "feedback": "Tak! To dobry sposób weryfikacji - logiczne myślenie o problemie",
              "is_correct": true
            }
          ],
          "explanation_after": "Najlepsze sprawdzenie to przemyślenie logiki: każda zupa × każde danie × każdy deser."
        }
      }
    ],
    "solutions": [
      "72 sposoby"
    ],
    "parameters": {
      "zupy": 4,
      "dania_glowne": 6,
      "desery": 3
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T06:20:58.065Z"
  },
  {
    "id": "parking_arrangement_adjacent",
    "topic": "Permutacje z warunkami",
    "difficulty": 3,
    "statement": "Na ile sposobów można rozmieścić 8 różnych samochodów na parkingu mającym 12 miejsc parkingowych ustawionych w rzędzie, jeśli wszystkie samochody mają stać obok siebie?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek 'wszystkie samochody mają stać obok siebie'?",
        "expression": "8 samochodów musi tworzyć jeden ciągły blok na 12 miejscach",
        "explanation": "Samochody nie mogą być rozdzielone pustymi miejscami"
      },
      {
        "step": 2,
        "hint": "Jak można podejść do tego problemu?",
        "expression": "Traktujemy 8 samochodów jako jeden blok",
        "explanation": "Dzielimy problem na dwie części: pozycjonowanie bloku i układanie samochodów w bloku",
        "interactive_choice": {
          "prompt": "Jaką strategię zastosować do rozwiązania tego zadania?",
          "options": [
            {
              "id": "A",
              "text": "Traktować 8 samochodów jako jeden obiekt i znaleźć pozycje tego bloku",
              "feedback": "Świetnie! To upraszcza problem - blok można umieścić na różne sposoby, a potem ułożyć samochody w bloku.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wybrać 8 miejsc z 12 i sprawdzić które są sąsiednie",
              "feedback": "Skomplikowane - trzeba by sprawdzać wszystkie kombinacje czy są ciągłe.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Policzyć wszystkie permutacje 8 samochodów na 12 miejscach",
              "feedback": "To nie uwzględnia warunku sąsiedztwa - dałoby za dużo możliwości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Traktowanie grupy samochodów jako jednego bloku znacznie upraszcza obliczenia."
        }
      },
      {
        "step": 3,
        "hint": "Na ilu pozycjach można umieścić blok 8 samochodów na parkingu z 12 miejscami?",
        "expression": "Blok może zaczynać się na pozycji 1, 2, 3, 4 lub 5",
        "explanation": "Jeśli blok zaczyna się na pozycji $k$, to kończy się na pozycji $k+7$",
        "why": "Blok o długości 8 na parkingu z 12 miejscami może zaczynać się najdalej na pozycji 5 (bo $5+7=12$)."
      },
      {
        "step": 4,
        "hint": "Ile jest możliwych pozycji dla bloku?",
        "expression": "$12 - 8 + 1 = 5$ pozycji dla bloku",
        "explanation": "Blok może zaczynać się na pozycjach od 1 do 5",
        "interactive_choice": {
          "prompt": "Ile różnych pozycji może zająć blok 8 samochodów na 12 miejscach?",
          "options": [
            {
              "id": "A",
              "text": "4 pozycje",
              "feedback": "Nie - sprawdź ponownie: pozycje 1,2,3,4,5 to już 5 możliwości.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "5 pozycji",
              "feedback": "Dokładnie! Blok może zaczynać się na pozycjach 1,2,3,4,5.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "12 pozycji",
              "feedback": "Za dużo - blok nie może zaczynać się na każdej pozycji, bo by nie zmieścił się.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wzór ogólny: dla $n$ miejsc i bloku długości $k$ mamy $n-k+1$ pozycji."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można ułożyć 8 różnych samochodów wewnątrz bloku?",
        "expression": "8 różnych samochodów można ułożyć na $8!$ sposobów",
        "explanation": "To standardowa permutacja 8 różnych obiektów"
      },
      {
        "step": 6,
        "hint": "Jak połączyć liczbę pozycji bloku z liczbą układów samochodów?",
        "expression": "$5 \\times 8! = 5 \\times 40320 = 201600$",
        "explanation": "Mnożymy liczbę pozycji bloku przez liczbę permutacji samochodów w bloku",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę sposobów rozmieszczenia?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: $5 + 8!$",
              "feedback": "Nie - to dodawanie niezależnych zdarzeń, a tu mamy wybory następujące po sobie.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: $5 \\times 8!$",
              "feedback": "Tak! Dla każdej z 5 pozycji bloku mamy 8! sposobów ułożenia samochodów.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podnieść do potęgi: $5^{8!}$",
              "feedback": "Nie - to nie jest problem wyboru z powtórzeniami.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: jeśli pierwszy wybór można zrobić na $m$ sposobów, a drugi na $n$, to razem na $m \\times n$ sposobów."
        }
      },
      {
        "step": 7,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "$5 \\times 8! = 201600$",
        "explanation": "8 różnych samochodów można rozmieścić na 201600 sposobów"
      }
    ],
    "solutions": [
      "$201600$"
    ],
    "parameters": {
      "cars": 8,
      "parking_spots": 12,
      "condition": "samochody muszą stać obok siebie"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:21:26.628Z"
  },
  {
    "id": "four_digit_first_greater",
    "topic": "Kombinatoryka - zliczanie",
    "difficulty": 3,
    "statement": "Ile jest liczb czterocyfrowych, w których pierwsza cyfra jest większa od ostatniej, a cyfry mogą się powtarzać?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda ogólna postać liczby czterocyfrowej?",
        "expression": "Liczba czterocyfrowa: $\\overline{abcd}$ gdzie $a \\in \\{1,2,3,4,5,6,7,8,9\\}$, $b,c,d \\in \\{0,1,2,3,4,5,6,7,8,9\\}$",
        "explanation": "Pierwsza cyfra nie może być zerem, pozostałe mogą być dowolne"
      },
      {
        "step": 2,
        "hint": "Jaki warunek musi spełniać pierwsza i ostatnia cyfra?",
        "expression": "Warunek: $a > d$",
        "explanation": "Pierwsza cyfra musi być większa od ostatniej"
      },
      {
        "step": 3,
        "hint": "Którą metodę wybierzesz do zliczenia takich liczb?",
        "expression": "Rozpatrujemy wszystkie pary $(a,d)$ takie że $1 \\leq a \\leq 9$, $0 \\leq d \\leq 9$ i $a > d$",
        "explanation": "Będziemy zliczać przypadki dla każdej możliwej wartości pierwszej cyfry",
        "interactive_choice": {
          "prompt": "Jak najlepiej podejść do zliczenia liczb z warunkiem $a > d$?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć wszystkie możliwe pary $(a,d)$ gdzie $a > d$",
              "feedback": "Świetny wybór! Systematyczne przejście przez wszystkie przypadki.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie liczby czterocyfrowe i odjąć te gdzie $a \\leq d$",
              "feedback": "Możliwe, ale bardziej skomplikowane - trzeba uważać na przypadki brzegowe.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na kombinacje z powtórzeniami",
              "feedback": "Nie pasuje - to nie jest problem kombinacji, tylko zliczania z warunkiem.",
              "is_correct": false
            }
          ],
          "explanation_after": "Systematyczne przejście przez pary $(a,d)$ jest najjaśniejsze i najmniej podatne na błędy."
        }
      },
      {
        "step": 4,
        "hint": "Ile jest możliwości dla cyfr środkowych $b$ i $c$?",
        "expression": "Cyfry $b$ i $c$ mogą być dowolne: $b,c \\in \\{0,1,2,3,4,5,6,7,8,9\\}$",
        "explanation": "Każda z cyfr środkowych ma 10 możliwości, więc razem $10 \\times 10 = 100$ możliwości",
        "why": "Cyfry środkowe są niezależne od warunku $a > d$, więc zawsze mamy $10^2 = 100$ możliwości."
      },
      {
        "step": 5,
        "hint": "Ile jest par $(a,d)$ dla każdej wartości $a$?",
        "expression": "Dla $a = k$ mamy $d \\in \\{0,1,2,...,k-1\\}$, czyli $k$ możliwości",
        "explanation": "Liczba możliwych wartości $d$ równa się wartości $a$",
        "interactive_choice": {
          "prompt": "Jeśli $a = 5$, to ile jest możliwych wartości dla $d$ takich że $a > d$?",
          "options": [
            {
              "id": "A",
              "text": "4 wartości: $d \\in \\{1,2,3,4\\}$",
              "feedback": "Nie - zapomniałeś o zerze! Zero też może być ostatnią cyfrą.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "5 wartości: $d \\in \\{0,1,2,3,4\\}$",
              "feedback": "Dokładnie! Wszystkie cyfry mniejsze od 5, włącznie z zerem.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "6 wartości: $d \\in \\{0,1,2,3,4,5\\}$",
              "feedback": "Nie - warunek to $a > d$, więc $d$ nie może równać się $a$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla $a = k$ mamy $d \\in \\{0,1,2,...,k-1\\}$, czyli $k$ możliwości."
        }
      },
      {
        "step": 6,
        "hint": "Ile liczb otrzymujemy dla każdej wartości pierwszej cyfry?",
        "expression": "Dla $a = k$: liczba liczb = $k \\times 100$ (bo $k$ możliwości dla $d$ i $100$ dla $(b,c)$)",
        "explanation": "Mnożymy liczbę możliwości dla ostatniej cyfry przez liczbę możliwości dla cyfr środkowych"
      },
      {
        "step": 7,
        "hint": "Jak zsumować wszystkie przypadki?",
        "expression": "Suma = $1 \\times 100 + 2 \\times 100 + 3 \\times 100 + ... + 9 \\times 100$",
        "explanation": "Sumujemy po wszystkich możliwych wartościach pierwszej cyfry od 1 do 9"
      },
      {
        "step": 8,
        "hint": "Jak uprościć tę sumę?",
        "expression": "$100 \\times (1 + 2 + 3 + ... + 9) = 100 \\times \\frac{9 \\times 10}{2} = 100 \\times 45 = 4500$",
        "explanation": "Używamy wzoru na sumę kolejnych liczb naturalnych",
        "interactive_choice": {
          "prompt": "Jak najprościej obliczyć $100(1 + 2 + 3 + ... + 9)$?",
          "options": [
            {
              "id": "A",
              "text": "Dodać wszystkie liczby: $100 \\times 45$",
              "feedback": "Dobrze! $1+2+...+9 = 45$, więc wynik to $4500$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru $\\frac{n(n+1)}{2}$ dla $n=9$: $100 \\times \\frac{9 \\times 10}{2}$",
              "feedback": "Świetnie! To daje $100 \\times 45 = 4500$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Obliczyć $100 \\times 9^2$",
              "feedback": "Nie - to byłoby gdyby wszystkie składniki były równe 9.",
              "is_correct": false
            }
          ],
          "explanation_after": "Suma kolejnych liczb naturalnych od 1 do $n$ to $\\frac{n(n+1)}{2}$."
        }
      }
    ],
    "solutions": [
      "4500"
    ],
    "parameters": {},
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T06:21:57.585Z"
  },
  {
    "id": "chess_tournament_outcomes",
    "topic": "Kombinatoryka - zliczanie wyników",
    "difficulty": 4,
    "statement": "W turnieju szachowym bierze udział 16 graczy. Każdy gracz gra z każdym dokładnie jeden mecz. Ile jest możliwych wyników całego turnieju (każdy mecz może zakończyć się zwycięstwem jednego z graczy lub remisem)?",
    "steps": [
      {
        "step": 1,
        "hint": "Co musimy najpierw ustalić - ile jest meczy w turnieju?",
        "expression": "Liczba meczy = $\\binom{16}{2} = \\frac{16!}{2!(16-2)!} = \\frac{16 \\cdot 15}{2} = 120$",
        "explanation": "Obliczamy liczbę par graczy - każda para gra jeden mecz",
        "why": "W kombinatoryce, gdy wybieramy pary bez znaczenia kolejności, używamy wzoru na kombinacje $\\binom{n}{2}$",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę meczy gdy każdy z 16 graczy gra z każdym?",
          "options": [
            {
              "id": "A",
              "text": "16 × 15 = 240 meczy",
              "feedback": "Nie - to liczyłoby każdy mecz dwukrotnie (A vs B i B vs A to ten sam mecz)",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$\\binom{16}{2} = \\frac{16 \\cdot 15}{2} = 120$ meczy",
              "feedback": "Doskonale! To liczba sposobów wyboru 2 graczy z 16, każda para gra jeden mecz",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "16² = 256 meczy",
              "feedback": "Nie - to uwzględniałoby mecze gracza z samym sobą",
              "is_correct": false
            }
          ],
          "explanation_after": "Każdy mecz to para graczy, więc używamy kombinacji bez powtórzeń."
        }
      },
      {
        "step": 2,
        "hint": "Ile różnych wyników może mieć jeden mecz szachowy?",
        "expression": "Każdy mecz ma 3 możliwe wyniki: wygrana pierwszego gracza, wygrana drugiego gracza, remis",
        "explanation": "W szachach mecz może zakończyć się zwycięstwem białych, czarnych lub remisem"
      },
      {
        "step": 3,
        "hint": "Jak połączyć liczbę meczy z liczbą możliwych wyników każdego meczu?",
        "expression": "Liczba możliwych wyników turnieju = $3^{120}$",
        "explanation": "Każdy z 120 meczy może zakończyć się na 3 sposoby, więc łącznie mamy $3^{120}$ możliwości",
        "why": "To zastosowanie fundamentalnej zasady zliczania: jeśli mamy $n$ niezależnych wyborów, każdy z $k$ możliwości, to łącznie jest $k^n$ kombinacji",
        "interactive_choice": {
          "prompt": "Jeśli mamy 120 meczy i każdy ma 3 możliwe wyniki, jak obliczyć całkowitą liczbę możliwych wyników turnieju?",
          "options": [
            {
              "id": "A",
              "text": "120 + 3 = 123",
              "feedback": "Nie - to dodawanie, a potrzebujemy mnożenia dla niezależnych zdarzeń",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$3^{120}$",
              "feedback": "Tak! Każdy z 120 meczy ma 3 niezależne możliwości, więc mnożymy",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$120^3$",
              "feedback": "Nie - to byłoby gdyby 3 mecze miały po 120 możliwości każdy",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla niezależnych zdarzeń (wyników meczy) używamy reguły iloczynu."
        }
      },
      {
        "step": 4,
        "hint": "Czy możemy uprościć lub oszacować tę ogromną liczbę?",
        "expression": "$3^{120}$ (liczba o około 57 cyfrach dziesiętnych)",
        "explanation": "To astronomicznie duża liczba - znacznie większa niż liczba atomów we wszechświecie",
        "interactive_choice": {
          "prompt": "Jak najlepiej przedstawić wynik $3^{120}$?",
          "options": [
            {
              "id": "A",
              "text": "Obliczyć dokładną wartość liczbową",
              "feedback": "Praktycznie niemożliwe - to liczba o około 57 cyfrach!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Zostawić jako $3^{120}$",
              "feedback": "Najlepsze rozwiązanie - dokładna i zwięzła forma",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Napisać przybliżenie dziesiętne",
              "feedback": "Możliwe, ale $3^{120}$ jest dokładniejsze i bardziej użyteczne",
              "is_correct": false
            }
          ],
          "explanation_after": "W kombinatoryce często zostawiamy wyniki w postaci potęg - są dokładne i czytelne."
        }
      }
    ],
    "solutions": [
      "$3^{120}$"
    ],
    "parameters": {
      "players": 16,
      "matches": 120,
      "outcomes_per_match": 3
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 4,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:22:23.460Z"
  },
  {
    "id": "team_division_combinatorics",
    "topic": "Kombinatoryka - podział na grupy",
    "difficulty": 4,
    "statement": "Na ile sposobów można podzielić grupę 10 osób na dwie drużyny po 5 osób każda, jeśli jedna drużyna gra w czerwonych koszulkach, a druga w niebieskich? Ile będzie takich podziałów, jeśli kolor koszulek nie ma znaczenia?",
    "steps": [
      {
        "step": 1,
        "hint": "Czy w tym zadaniu ma znaczenie, która drużyna jest czerwona, a która niebieska?",
        "expression": "Wybieramy 5 osób z 10 do czerwonej drużyny: $\\binom{10}{5}$",
        "explanation": "Pozostałe 5 osób automatycznie trafia do niebieskiej drużyny",
        "interactive_choice": {
          "prompt": "Jak podejść do pierwszej części zadania z kolorowymi koszulkami?",
          "options": [
            {
              "id": "A",
              "text": "Drużyny są różne (czerwona ≠ niebieska), więc wybieramy 5 osób do czerwonej",
              "feedback": "Świetnie! Gdy drużyny są rozróżnialne, wystarczy wybrać jedną z nich.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Najpierw dzielimy na grupy, potem przypisujemy kolory",
              "feedback": "Możliwe, ale bardziej skomplikowane - lepiej od razu wybrać czerwoną drużynę.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Używamy wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - to zadanie na kombinacje, nie permutacje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy drużyny są rozróżnialne, wystarczy wybrać osoby do jednej z nich."
        }
      },
      {
        "step": 2,
        "hint": "Jak obliczyć $\\binom{10}{5}$?",
        "expression": "$\\binom{10}{5} = \\frac{10!}{5! \\cdot 5!} = \\frac{10 \\cdot 9 \\cdot 8 \\cdot 7 \\cdot 6}{5 \\cdot 4 \\cdot 3 \\cdot 2 \\cdot 1}$",
        "explanation": "Używamy wzoru na kombinacje"
      },
      {
        "step": 3,
        "hint": "Jaki jest wynik tego obliczenia?",
        "expression": "$\\binom{10}{5} = \\frac{30240}{120} = 252$",
        "explanation": "Obliczamy krok po kroku: $10 \\cdot 9 = 90$, $90 \\cdot 8 = 720$, $720 \\cdot 7 = 5040$, $5040 \\cdot 6 = 30240$"
      },
      {
        "step": 4,
        "hint": "Co się zmienia, gdy kolor koszulek nie ma znaczenia?",
        "expression": "Drużyny nierozróżnialne: $\\frac{\\binom{10}{5}}{2!} = \\frac{252}{2}$",
        "explanation": "Dzielimy przez $2!$, bo każdy podział można było utworzyć na 2 sposoby",
        "why": "To kluczowa różnica między podziałami rozróżnialnymi a nierozróżnialnymi. Gdy grupy są identyczne, dzielimy przez liczbę sposobów ich przestawienia.",
        "interactive_choice": {
          "prompt": "Jak wpływa na liczbę podziałów fakt, że kolory nie mają znaczenia?",
          "options": [
            {
              "id": "A",
              "text": "Nic się nie zmienia - nadal $\\binom{10}{5} = 252$",
              "feedback": "Nie! Gdy drużyny są nierozróżnialne, liczymy podwójnie te same podziały.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Dzielimy przez 2, bo każdy podział liczyliśmy dwukrotnie",
              "feedback": "Dokładnie! Podział {A,B,C,D,E} vs {F,G,H,I,J} to to samo co {F,G,H,I,J} vs {A,B,C,D,E}.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Mnożymy przez 2, bo mamy więcej możliwości",
              "feedback": "Nie - przeciwnie, mamy mniej możliwości gdy drużyny są nierozróżnialne.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy drużyny są nierozróżnialne, każdy podział był liczony dwukrotnie."
        }
      },
      {
        "step": 5,
        "hint": "Jaki jest końcowy wynik dla nierozróżnialnych drużyn?",
        "expression": "$\\frac{252}{2} = 126$",
        "explanation": "Obliczamy ostateczną liczbę podziałów"
      },
      {
        "step": 6,
        "hint": "Jak można sprawdzić poprawność wyniku?",
        "expression": "Sprawdzenie: $252 = 2 \\times 126$ ✓",
        "explanation": "Zależność potwierdza poprawność obliczeń",
        "interactive_choice": {
          "prompt": "Która zależność powinna zachodzić między wynikami?",
          "options": [
            {
              "id": "A",
              "text": "Wynik z kolorami = 2 × wynik bez kolorów",
              "feedback": "Tak! 252 = 2 × 126. Każdy podział bez kolorów można pokolorować na 2 sposoby.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wyniki powinny być równe",
              "feedback": "Nie - rozróżnialne drużyny dają więcej możliwości niż nierozróżnialne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wynik bez kolorów = 2 × wynik z kolorami",
              "feedback": "Odwrotnie! Rozróżnialne drużyny dają więcej możliwości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Sprawdzenie: 252 = 2 × 126 ✓. Każdy podział nierozróżnialny można pokolorować na 2 sposoby."
        }
      }
    ],
    "solutions": [
      "Z kolorami (drużyny rozróżnialne): 252 sposoby",
      "Bez kolorów (drużyny nierozróżnialne): 126 sposobów"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:22:51.108Z"
  },
  {
    "id": "cube_coloring_burnside",
    "topic": "Kombinatoryka - lemat Burnside'a",
    "difficulty": 5,
    "statement": "Ile jest sposobów pokolorowania sześcianu sześcioma różnymi kolorami (każda ściana innym kolorem), jeśli dwa kolorowania uważamy za takie same, gdy jeden można otrzymać z drugiego przez obrót sześcianu?",
    "steps": [
      {
        "step": 1,
        "hint": "Czy to zadanie dotyczy zwykłego liczenia permutacji?",
        "expression": "Używamy lematu Burnside'a: $|X/G| = \\frac{1}{|G|} \\sum_{g \\in G} |X^g|$",
        "explanation": "Gdzie $X$ to zbiór kolorowań, $G$ to grupa obrotów sześcianu, $X^g$ to kolorowania niezmiennicze względem obrotu $g$",
        "why": "Lemat Burnside'a jest kluczowy dla problemów z symetrią. Liczy średnią liczbę punktów stałych wszystkich elementów grupy.",
        "interactive_choice": {
          "prompt": "Jak podejść do tego problemu kolorowania sześcianu?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie permutacje 6 kolorów na 6 ścianach: $6!$",
              "feedback": "To by było bez uwzględnienia obrotów - ale zadanie mówi o identyfikacji przez obroty!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć lematu Burnside'a do zliczania z uwzględnieniem symetrii",
              "feedback": "Doskonale! To klasyczne zastosowanie lematu Burnside'a dla grupy obrotów sześcianu.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Podzielić $6!$ przez liczbę obrotów sześcianu",
              "feedback": "Intuicja dobra, ale to nie zawsze działa - potrzebujemy lematu Burnside'a.",
              "is_correct": false
            }
          ],
          "explanation_after": "Lemat Burnside'a pozwala liczyć obiekty z uwzględnieniem działania grupy symetrii."
        }
      },
      {
        "step": 2,
        "hint": "Ile obrotów ma sześcian?",
        "expression": "Grupa obrotów sześcianu ma $|G| = 24$ elementy",
        "explanation": "Sześcian ma 24 różne orientacje (obroty zachowujące kształt)"
      },
      {
        "step": 3,
        "hint": "Jakie typy obrotów występują w grupie obrotów sześcianu?",
        "expression": "Typy obrotów: identyczność (1), przez ściany (6+3+6), przez przekątne (8), przez krawędzie (6)",
        "explanation": "Klasyfikujemy 24 obroty według osi obrotu",
        "interactive_choice": {
          "prompt": "Które obroty należą do grupy symetrii sześcianu?",
          "options": [
            {
              "id": "A",
              "text": "Tylko obroty o $90°$, $180°$, $270°$ wokół osi przez środki ścian",
              "feedback": "To tylko część - są też obroty wokół przekątnych i krawędzi!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Obroty wokół osi przez środki ścian, przekątne przestrzenne i środki krawędzi",
              "feedback": "Tak! Plus obrót identycznościowy. To daje wszystkie 24 obroty.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wszystkie możliwe obroty w przestrzeni 3D",
              "feedback": "Nie - tylko te które zachowują sześcian (przeprowadzają go w siebie).",
              "is_correct": false
            }
          ],
          "explanation_after": "Grupa obrotów sześcianu składa się z obrotów wokół różnych osi symetrii."
        }
      },
      {
        "step": 4,
        "hint": "Ile kolorowań pozostaje niezmiennych przy obrocie identycznościowym?",
        "expression": "Dla identyczności: $|X^e| = 6! = 720$",
        "explanation": "Obrót identycznościowy nie zmienia żadnego kolorowania",
        "why": "Każde z $6!$ kolorowań jest niezmiennicze względem braku obrotu."
      },
      {
        "step": 5,
        "hint": "Co się dzieje z kolorowaniem przy obrocie o $90°$ wokół osi przez środki przeciwnych ścian?",
        "expression": "Dla obrotów o $90°$ i $270°$ przez ściany: $|X^g| = 0$",
        "explanation": "4 ściany tworzą cykl, ale mamy 6 różnych kolorów - niemożliwe",
        "why": "Obrót o $90°$ tworzy 4-cykl ze ścian bocznych. Żeby kolorowanie było niezmiennicze, te 4 ściany musiałyby mieć ten sam kolor, ale mamy 6 różnych kolorów."
      },
      {
        "step": 6,
        "hint": "A co z obrotami o $180°$ przez różne osie?",
        "expression": "Dla wszystkich obrotów o $180°$: $|X^g| = 0$",
        "explanation": "Obroty o $180°$ tworzą pary ścian, ale mamy 6 różnych kolorów",
        "interactive_choice": {
          "prompt": "Ile kolorowań jest niezmienniczych przy obrocie o $180°$ przez środki ścian?",
          "options": [
            {
              "id": "A",
              "text": "0 kolorowań - każdy obrót o $180°$ tworzy pary ścian",
              "feedback": "Dokładnie! Obrót tworzy 3 pary ścian, ale każda para musiałaby mieć ten sam kolor.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Niektóre kolorowania mogą być niezmiennicze",
              "feedback": "Nie - z 6 różnymi kolorami żadna para ścian nie może mieć tego samego koloru.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie kolorowania są niezmiennicze",
              "feedback": "Nie - obrót o $180°$ zmienia pozycje ścian, więc kolorowanie się zmienia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Każdy obrót o $180°$ tworzy pary ścian, które musiałyby mieć identyczne kolory."
        }
      },
      {
        "step": 7,
        "hint": "Co z obrotami o $120°$ wokół przekątnych przestrzennych?",
        "expression": "Dla obrotów o $120°$ i $240°$ przez przekątne: $|X^g| = 0$",
        "explanation": "Tworzą 3-cykle ze ścian, ale potrzebowalibyśmy 3 identycznych kolorów"
      },
      {
        "step": 8,
        "hint": "Jak zastosować lemat Burnside'a z otrzymanymi wynikami?",
        "expression": "$|X/G| = \\frac{1}{24}(1 \\cdot 720 + 23 \\cdot 0) = \\frac{720}{24} = 30$",
        "explanation": "Tylko obrót identycznościowy daje niezmiennicze kolorowania"
      },
      {
        "step": 9,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba różnych kolorowań sześcianu = $30$",
        "explanation": "Po uwzględnieniu wszystkich obrotów otrzymujemy 30 różnych sposobów kolorowania"
      }
    ],
    "solutions": [
      "$30$"
    ],
    "parameters": {
      "colors": "6 różnych kolorów",
      "constraint": "każda ściana innym kolorem",
      "equivalence": "modulo obroty sześcianu"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:23:28.586Z"
  },
  {
    "id": "chess_rooks_combinatorics",
    "topic": "Kombinatoryka - permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "Na szachownicy $8 \\times 8$ umieszczamy 8 wież tak, żeby żadne dwie nie znajdowały się w tej samej kolumnie ani w tym samym wierszu. Na ile sposobów można to zrobić, jeśli 3 określone wieże muszą znajdować się w pierwszym wierszu?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek, że żadne dwie wieże nie mogą być w tym samym wierszu ani kolumnie?",
        "expression": "Każda wieża musi być w innym wierszu i innej kolumnie",
        "explanation": "To oznacza, że w każdym wierszu i każdej kolumnie jest dokładnie jedna wieża",
        "why": "Problem sprowadza się do znalezienia permutacji - przypisania każdemu wierszowi dokładnie jednej kolumny."
      },
      {
        "step": 2,
        "hint": "Jak podejść do tego problemu z ograniczeniem na 3 wieże w pierwszym wierszu?",
        "expression": "Etap 1: Umieszczenie 3 wież w pierwszym wierszu",
        "explanation": "Dzielimy problem na dwa etapy",
        "interactive_choice": {
          "prompt": "Która strategia najlepiej rozwiąże ten problem?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw umieścić 3 wieże w pierwszym wierszu, potem resztę",
              "feedback": "Świetnie! To podział na etapy - najpierw ograniczenia, potem reszta.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie ustawienia i odjąć nieprawidłowe",
              "feedback": "Możliwe, ale bardzo skomplikowane - lepiej myśleć konstruktywnie.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - tu nie ma powtórzeń, tylko ograniczenia na pozycje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dzielimy problem: najpierw umieszczamy 3 wieże w pierwszym wierszu, potem pozostałe 5 w pozostałych wierszach."
        }
      },
      {
        "step": 3,
        "hint": "Na ile sposobów można wybrać 3 kolumny z 8 dla wież w pierwszym wierszu?",
        "expression": "$\\binom{8}{3} = \\frac{8!}{3! \\cdot 5!} = \\frac{8 \\cdot 7 \\cdot 6}{3 \\cdot 2 \\cdot 1} = 56$",
        "explanation": "Wybieramy 3 kolumny z 8 dostępnych - to kombinacje"
      },
      {
        "step": 4,
        "hint": "Czy kolejność umieszczenia 3 wież w wybranych kolumnach ma znaczenie?",
        "expression": "$3! = 6$ sposobów przypisania wież do kolumn",
        "explanation": "Permutacja 3 określonych wież w 3 wybranych kolumnach",
        "interactive_choice": {
          "prompt": "Jak umieścić 3 określone wieże w wybranych 3 kolumnach pierwszego wiersza?",
          "options": [
            {
              "id": "A",
              "text": "Każda wieża może być w dowolnej z 3 kolumn - $3!$ sposobów",
              "feedback": "Dokładnie! Mamy 3 różne wieże i 3 pozycje - to permutacja.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wieże są identyczne, więc tylko 1 sposób",
              "feedback": "Nie - zadanie mówi o 'określonych' wieżach, więc są różne.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "To kombinacje, więc bez znaczenia kolejności",
              "feedback": "Nie - już wybraliśmy kolumny, teraz przypisujemy konkretne wieże.",
              "is_correct": false
            }
          ],
          "explanation_after": "Skoro wieże są 'określone', to są różne. Przypisanie 3 różnych wież do 3 kolumn to $3! = 6$ sposobów."
        }
      },
      {
        "step": 5,
        "hint": "Ile sposobów umieszczenia wież w pierwszym wierszu daje nam łącznie?",
        "expression": "$\\binom{8}{3} \\cdot 3! = 56 \\cdot 6 = 336$",
        "explanation": "Mnożymy liczbę sposobów wyboru kolumn przez liczbę sposobów przypisania wież"
      },
      {
        "step": 6,
        "hint": "Co zostało do zrobienia po umieszczeniu 3 wież w pierwszym wierszu?",
        "expression": "Pozostało umieścić 5 wież w wierszach 2-8, w kolumnach które nie są zajęte",
        "explanation": "Mamy 7 wolnych wierszy i 5 wolnych kolumn"
      },
      {
        "step": 7,
        "hint": "Na ile sposobów można umieścić pozostałe 5 wież?",
        "expression": "$\\binom{7}{5} \\cdot 5! = 21 \\cdot 120 = 2520$",
        "explanation": "Wybór 5 wierszy z 7 i permutacja 5 wież w 5 kolumnach",
        "interactive_choice": {
          "prompt": "Jak umieścić 5 pozostałych wież w 7 wierszach i 5 wolnych kolumnach?",
          "options": [
            {
              "id": "A",
              "text": "Wybrać 5 wierszy z 7, potem permutować - $\\binom{7}{5} \\cdot 5!$",
              "feedback": "Świetnie! Najpierw wybieramy wiersze, potem przypisujemy kolumny.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "To po prostu $5!$ - permutacja kolumn",
              "feedback": "Nie uwzględnia wyboru wierszy - mamy 7 wierszy, a tylko 5 wież.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Kombinacje $\\binom{7}{5} \\cdot \\binom{5}{5}$",
              "feedback": "Drugi czynnik to 1, ale brakuje permutacji - kolejność ma znaczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybieramy 5 wierszy z 7 dostępnych, potem każdą wieżę przypisujemy do jednej z 5 kolumn."
        }
      },
      {
        "step": 8,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "$336 \\cdot 2520 = 847680$",
        "explanation": "Mnożymy liczbę sposobów dla pierwszego wiersza przez liczbę sposobów dla pozostałych wież",
        "why": "Używamy reguły iloczynu - każdy sposób umieszczenia w pierwszym wierszu można połączyć z każdym sposobem umieszczenia pozostałych wież."
      }
    ],
    "solutions": [
      "$847680$"
    ],
    "parameters": {
      "board_size": "$8 \\times 8$",
      "constraint": "3 określone wieże w pierwszym wierszu"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:24:04.022Z"
  },
  {
    "id": "graph_theory_clique_problem",
    "topic": "Teoria grafów - kliki",
    "difficulty": 5,
    "statement": "W grupie 20 osób każda zna co najmniej 3 inne osoby z grupy. Udowodnij, że można wybrać 4 osoby tak, żeby każda znała każdą z pozostałych trzech. Ile jest minimalnie różnych sposobów takiego wyboru w najgorszym przypadku?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak można przedstawić tę sytuację matematycznie?",
        "expression": "Graf $G = (V, E)$ gdzie $|V| = 20$ i każdy wierzchołek ma stopień $\\deg(v) \\geq 3$",
        "explanation": "Modelujemy problem jako graf z 20 wierzchołkami",
        "why": "W teorii grafów znajomości to krawędzie, a osoby to wierzchołki. Stopień wierzchołka to liczba znajomych.",
        "interactive_choice": {
          "prompt": "Którą strukturą matematyczną najlepiej modelować znajomości między osobami?",
          "options": [
            {
              "id": "A",
              "text": "Graf nieskierowany, gdzie wierzchołki to osoby, krawędzie to znajomości",
              "feedback": "Doskonale! Graf to idealna struktura do modelowania relacji symetrycznych.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Macierz 20×20 z jedynkami i zerami",
              "feedback": "Możliwe, ale graf jest bardziej intuicyjny dla tego problemu.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "System równań liniowych",
              "feedback": "Nie - znajomości to relacje dyskretne, nie ciągłe.",
              "is_correct": false
            }
          ],
          "explanation_after": "Graf nieskierowany idealnie modeluje symetryczne relacje znajomości."
        }
      },
      {
        "step": 2,
        "hint": "Czego szukamy w terminach teorii grafów?",
        "expression": "Szukamy kliki $K_4$ - podzbioru 4 wierzchołków połączonych wszystkimi możliwymi krawędziami",
        "explanation": "4-klika oznacza, że każda z 4 osób zna pozostałe 3",
        "why": "Klika to kompletny podgraf - każdy wierzchołek połączony z każdym innym."
      },
      {
        "step": 3,
        "hint": "Ile krawędzi ma nasz graf minimalnie?",
        "expression": "Suma stopni = $2|E| \\geq 20 \\cdot 3 = 60$, więc $|E| \\geq 30$",
        "explanation": "Każda krawędź przyczynia się do stopnia dwóch wierzchołków"
      },
      {
        "step": 4,
        "hint": "Które twierdzenie z teorii grafów może nam pomóc?",
        "expression": "Twierdzenie Turána: graf na $n$ wierzchołkach bez $K_r$ ma co najwyżej $t_{r-1}(n)$ krawędzi",
        "explanation": "Używamy twierdzenia Turána dla $n = 20$ i $r = 4$",
        "interactive_choice": {
          "prompt": "Które twierdzenie najlepiej zastosować do udowodnienia istnienia kliki?",
          "options": [
            {
              "id": "A",
              "text": "Twierdzenie Turána o maksymalnej liczbie krawędzi bez kliki",
              "feedback": "Świetnie! Turan mówi ile maksymalnie krawędzi może mieć graf bez $K_r$.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Twierdzenie o kolorowaniu grafów",
              "feedback": "Nie bezpośrednio - kolorowanie dotyczy niezależnych zbiorów, nie klik.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Twierdzenie Ramseya",
              "feedback": "Za mocne narzędzie - Ramsey dotyczy większych struktur.",
              "is_correct": false
            }
          ],
          "explanation_after": "Twierdzenie Turána daje górne ograniczenie na liczbę krawędzi w grafie bez kliki danego rozmiaru."
        }
      },
      {
        "step": 5,
        "hint": "Ile wynosi liczba Turána $t_3(20)$ dla grafu bez $K_4$?",
        "expression": "$t_3(20) = \\frac{(r-1)(n^2 - n^2 \\bmod r)}{2r} + \\binom{n \\bmod r}{2}$",
        "explanation": "Wzór na liczbę Turána dla $r = 4$, $n = 20$"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć $t_3(20)$ krok po kroku?",
        "expression": "$20 = 3 \\cdot 6 + 2$, więc $t_3(20) = \\frac{3 \\cdot (20^2 - 4)}{8} + \\binom{2}{2} = \\frac{3 \\cdot 396}{8} + 1 = \\frac{1188}{8} + 1 = 148.5 + 1 = 149.5$",
        "explanation": "Obliczamy dokładną wartość - ale to musi być liczba całkowita!"
      },
      {
        "step": 7,
        "hint": "Jaka jest poprawna wartość $t_3(20)$?",
        "expression": "$t_3(20) = 147$",
        "explanation": "Graf Turána $T(20,3)$ ma dokładnie 147 krawędzi",
        "why": "Graf Turána to graf kompletny 3-partytowy z częściami rozmiaru 7, 7, 6."
      },
      {
        "step": 8,
        "hint": "Co możemy wywnioskować porównując liczbę krawędzi?",
        "expression": "$30 \\ll 147$, więc twierdzenie Turána nie gwarantuje istnienia $K_4$",
        "explanation": "Musimy użyć innej metody dowodu",
        "interactive_choice": {
          "prompt": "Nasz graf ma co najmniej 30 krawędzi, a $t_3(20) = 147$. Co to oznacza?",
          "options": [
            {
              "id": "A",
              "text": "Nic nie możemy wywnioskować - za mało krawędzi",
              "feedback": "Źle! 30 << 147, więc jesteśmy daleko od granicy Turána.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Graf może nie zawierać $K_4$ - nie przekraczamy granicy",
              "feedback": "Dokładnie! Mamy za mało krawędzi, by twierdzenie Turána gwarantowało $K_4$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Graf na pewno zawiera $K_4$",
              "feedback": "Nie - twierdzenie Turána działa tylko gdy przekroczymy granicę.",
              "is_correct": false
            }
          ],
          "explanation_after": "Twierdzenie Turána nie pomaga - potrzebujemy innego podejścia."
        }
      },
      {
        "step": 9,
        "hint": "Jakiej metody użyć gdy twierdzenie Turána nie wystarcza?",
        "expression": "Użyjemy metody probabilistycznej lub konstrukcyjnej",
        "explanation": "Szukamy bezpośredniego argumentu dla istnienia kliki",
        "why": "Gdy standardowe twierdzenia nie działają, trzeba być bardziej kreatywnym."
      },
      {
        "step": 10,
        "hint": "Ile maksymalnie może mieć sąsiadów wierzchołek o stopniu co najmniej 3?",
        "expression": "Weźmy wierzchołek $v$ o stopniu $d \\geq 3$. Ma on co najmniej 3 sąsiadów",
        "explanation": "Rozważamy konkretny wierzchołek i jego sąsiedztwo"
      },
      {
        "step": 11,
        "hint": "Co się stanie jeśli wśród sąsiadów $v$ znajdziemy krawędź?",
        "expression": "Jeśli sąsiedzi $u, w$ wierzchołka $v$ są połączeni krawędzią, to $\\{v, u, w\\}$ tworzy trójkąt",
        "explanation": "Trójkąt to klika $K_3$"
      },
      {
        "step": 12,
        "hint": "Jak rozszerzyć trójkąt do 4-kliki?",
        "expression": "Jeśli istnieje wierzchołek $x$ połączony z wszystkimi trzema: $v, u, w$, to $\\{v, u, w, x\\}$ tworzy $K_4$",
        "explanation": "Dodajemy czwarty wierzchołek połączony ze wszystkimi z trójkąta"
      },
      {
        "step": 13,
        "hint": "Jaka jest minimalna liczba 4-klik w najgorszym przypadku?",
        "expression": "W najgorszym przypadku: minimalnie $1$ klika $K_4$",
        "explanation": "Udowodniliśmy istnienie, ale nie policzyliśmy dokładnej liczby",
        "why": "Dokładne policzenie wymaga bardziej zaawansowanych metod kombinatorycznych."
      }
    ],
    "solutions": [
      "Istnieje co najmniej jedna 4-klika",
      "Minimalna liczba różnych sposobów wyboru w najgorszym przypadku: $1$"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 5,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T06:24:48.050Z"
  },
  {
    "id": "combinatorics_team_selection",
    "topic": "Kombinatoryka - wybory z warunkami",
    "difficulty": 4,
    "statement": "W szkolnym konkursie matematycznym uczestniczy 15 uczniów: 8 dziewczynek i 7 chłopców. Na ile sposobów można wybrać 5-osobową drużynę, jeśli w drużynie musi być co najmniej 2 dziewczynek i co najmniej 2 chłopców?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są możliwe składy drużyny spełniające warunki zadania?",
        "expression": "Możliwe składy: (2D, 3Ch) lub (3D, 2Ch)",
        "explanation": "Analizujemy wszystkie możliwe podziały 5 osób na dziewczynki i chłopców",
        "interactive_choice": {
          "prompt": "Które składy 5-osobowej drużyny spełniają warunek co najmniej 2 dziewczynek i co najmniej 2 chłopców?",
          "options": [
            {
              "id": "A",
              "text": "2 dziewczynki + 3 chłopców lub 3 dziewczynki + 2 chłopców",
              "feedback": "Dokładnie! To jedyne możliwe składy przy 5 osobach w drużynie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "2 dziewczynki + 3 chłopców, 3 dziewczynki + 2 chłopców, 4 dziewczynki + 1 chłopiec",
              "feedback": "Nie - skład 4+1 nie spełnia warunku co najmniej 2 chłopców.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie możliwe składy oprócz 5 dziewczynek i 5 chłopców",
              "feedback": "Nie - musimy też wykluczyć składy 1+4 i 4+1.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy 5 osobach w drużynie i wymaganiu co najmniej 2 z każdej grupy, możliwe są tylko składy 2+3 i 3+2."
        }
      },
      {
        "step": 2,
        "hint": "Jak obliczyć liczbę sposobów wyboru dla pierwszego składu?",
        "expression": "Skład (2D, 3Ch): $\\binom{8}{2} \\cdot \\binom{7}{3}$",
        "explanation": "Wybieramy 2 dziewczynki z 8 i 3 chłopców z 7",
        "why": "Używamy wzoru na kombinacje $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$ dla wyboru bez zwracania uwagi na kolejność."
      },
      {
        "step": 3,
        "hint": "Ile wynosi $\\binom{8}{2}$?",
        "expression": "$\\binom{8}{2} = \\frac{8 \\cdot 7}{2 \\cdot 1} = 28$",
        "explanation": "Obliczamy liczbę sposobów wyboru 2 dziewczynek z 8",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć $\\binom{8}{2}$?",
          "options": [
            {
              "id": "A",
              "text": "Użyć wzoru $\\frac{8!}{2! \\cdot 6!} = \\frac{8 \\cdot 7}{2 \\cdot 1} = 28$",
              "feedback": "Świetnie! To najszybszy sposób - skracamy silnie.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć pełne silnie: $\\frac{40320}{2 \\cdot 720}$",
              "feedback": "Matematycznie poprawne, ale niepotrzebnie skomplikowane.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "To jest $8 \\cdot 2 = 16$",
              "feedback": "Nie - to nie jest wzór na kombinacje. Mylisz z permutacjami.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy małych liczbach najlepiej skrócić silnie: $\\binom{8}{2} = \\frac{8 \\cdot 7}{2 \\cdot 1} = 28$."
        }
      },
      {
        "step": 4,
        "hint": "Ile wynosi $\\binom{7}{3}$?",
        "expression": "$\\binom{7}{3} = \\frac{7 \\cdot 6 \\cdot 5}{3 \\cdot 2 \\cdot 1} = \\frac{210}{6} = 35$",
        "explanation": "Obliczamy liczbę sposobów wyboru 3 chłopców z 7"
      },
      {
        "step": 5,
        "hint": "Ile sposobów daje pierwszy skład drużyny?",
        "expression": "Skład (2D, 3Ch): $28 \\cdot 35 = 980$ sposobów",
        "explanation": "Mnożymy liczbę sposobów wyboru dziewczynek i chłopców"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć liczbę sposobów dla drugiego składu?",
        "expression": "Skład (3D, 2Ch): $\\binom{8}{3} \\cdot \\binom{7}{2}$",
        "explanation": "Wybieramy 3 dziewczynki z 8 i 2 chłopców z 7"
      },
      {
        "step": 7,
        "hint": "Ile wynoszą te kombinacje?",
        "expression": "$\\binom{8}{3} = \\frac{8 \\cdot 7 \\cdot 6}{3 \\cdot 2 \\cdot 1} = \\frac{336}{6} = 56$",
        "explanation": "Obliczamy liczbę sposobów wyboru 3 dziewczynek z 8"
      },
      {
        "step": 8,
        "hint": "A ile wynosi $\\binom{7}{2}$?",
        "expression": "$\\binom{7}{2} = \\frac{7 \\cdot 6}{2 \\cdot 1} = 21$",
        "explanation": "Obliczamy liczbę sposobów wyboru 2 chłopców z 7"
      },
      {
        "step": 9,
        "hint": "Ile sposobów daje drugi skład drużyny?",
        "expression": "Skład (3D, 2Ch): $56 \\cdot 21 = 1176$ sposobów",
        "explanation": "Mnożymy liczbę sposobów wyboru dziewczynek i chłopców"
      },
      {
        "step": 10,
        "hint": "Jak połączyć wyniki z obu przypadków?",
        "expression": "Łączna liczba sposobów: $980 + 1176 = 2156$",
        "explanation": "Dodajemy liczbę sposobów z obu możliwych składów drużyny",
        "interactive_choice": {
          "prompt": "Jak obliczyć całkowitą liczbę sposobów wyboru drużyny?",
          "options": [
            {
              "id": "A",
              "text": "Dodać wyniki: $980 + 1176 = 2156$",
              "feedback": "Dokładnie! Składy się wykluczają, więc dodajemy możliwości.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Pomnożyć wyniki: $980 \\cdot 1176$",
              "feedback": "Nie - mnożymy gdy zdarzenia są niezależne, tu mamy alternatywę.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wybrać większy wynik: $1176$",
              "feedback": "Nie - oba składy są możliwe, więc uwzględniamy oba.",
              "is_correct": false
            }
          ],
          "explanation_after": "Składy (2D,3Ch) i (3D,2Ch) to rozłączne przypadki - stosujemy regułę sumy."
        }
      }
    ],
    "solutions": [
      "2156 sposobów"
    ],
    "parameters": {
      "total_students": 15,
      "girls": 8,
      "boys": 7,
      "team_size": 5,
      "min_girls": 2,
      "min_boys": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T07:36:00.632Z"
  },
  {
    "id": "chess_towers_diagonal",
    "topic": "Kombinatoryka z ograniczeniami",
    "difficulty": 4,
    "statement": "Na szachownicy $4 \\times 4$ chcemy umieścić 4 wieże tak, żeby się wzajemnie nie szachowały (żadne dwie nie mogą być w tym samym wierszu ani kolumnie). Dodatkowo, wieże muszą być umieszczone tak, żeby żadne dwie nie znajdowały się na głównej przekątnej szachownicy. Na ile sposobów można to zrobić?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza warunek, że wieże się wzajemnie nie szachują?",
        "expression": "Każda wieża musi być w innym wierszu i innej kolumnie",
        "explanation": "To znaczy, że rozmieszczenie wież odpowiada permutacji kolumn dla kolejnych wierszy",
        "why": "Problem sprowadza się do znalezienia permutacji $\\pi$ zbioru $\\{1,2,3,4\\}$ z dodatkowymi ograniczeniami."
      },
      {
        "step": 2,
        "hint": "Jak można reprezentować rozmieszczenie wież matematycznie?",
        "expression": "Szukamy permutacji $\\pi: \\{1,2,3,4\\} \\to \\{1,2,3,4\\}$",
        "explanation": "Wieża w wierszu $i$ stoi w kolumnie $\\pi(i)$",
        "interactive_choice": {
          "prompt": "Jak najlepiej opisać rozmieszczenie 4 wież na szachownicy $4 \\times 4$?",
          "options": [
            {
              "id": "A",
              "text": "Jako permutację $\\pi(1), \\pi(2), \\pi(3), \\pi(4)$ gdzie $\\pi(i)$ to kolumna wieży w wierszu $i$",
              "feedback": "Doskonale! To standardowy sposób - każdy wiersz ma dokładnie jedną wieżę.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Jako zbiór 4 par współrzędnych $(x_i, y_i)$",
              "feedback": "Możliwe, ale mniej wygodne - trudniej sprawdzać warunki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Jako macierz $4 \\times 4$ z jedynkami i zerami",
              "feedback": "Zbyt skomplikowane dla tego problemu - permutacja jest prostsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Permutacja $\\pi$ oznacza: w wierszu $i$ stawiamy wieżę w kolumnie $\\pi(i)$."
        }
      },
      {
        "step": 3,
        "hint": "Które pozycje należą do głównej przekątnej szachownicy $4 \\times 4$?",
        "expression": "Główna przekątna: pozycje $(1,1), (2,2), (3,3), (4,4)$",
        "explanation": "To pola gdzie numer wiersza równa się numerowi kolumny"
      },
      {
        "step": 4,
        "hint": "Jak zapisać warunek, że żadne dwie wieże nie są na głównej przekątnej?",
        "expression": "Dla każdego $i \\in \\{1,2,3,4\\}$: $\\pi(i) \\neq i$",
        "explanation": "Żadna wieża nie może być na pozycji $(i,i)$, więc $\\pi(i) \\neq i$ dla wszystkich $i$"
      },
      {
        "step": 5,
        "hint": "Jak nazywa się permutacja bez punktów stałych?",
        "expression": "Szukamy liczby derangements $D_4$ zbioru 4-elementowego",
        "explanation": "Problem sprowadza się do policzenia derangements",
        "interactive_choice": {
          "prompt": "Permutacja $\\pi$ taka, że $\\pi(i) \\neq i$ dla wszystkich $i$, to:",
          "options": [
            {
              "id": "A",
              "text": "Permutacja cykliczna",
              "feedback": "Nie - cykliczna to konkretny typ, a my szukamy ogólnej nazwy.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Derangement (permutacja bez punktów stałych)",
              "feedback": "Dokładnie! To klasyczny problem kombinatoryczny.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Permutacja odwrotna",
              "feedback": "Nie - odwrotna to $\\pi^{-1}$, a nie permutacja bez punktów stałych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Derangement to permutacja gdzie każdy element zmienia pozycję. Oznaczamy liczbę derangements jako $D_n$."
        }
      },
      {
        "step": 6,
        "hint": "Którą metodą obliczyć liczbę derangements?",
        "expression": "Używamy wzoru rekurencyjnego: $D_n = (n-1)(D_{n-1} + D_{n-2})$",
        "explanation": "Rekurencja jest najszybsza dla małych wartości $n$",
        "interactive_choice": {
          "prompt": "Jak najefektywniej obliczyć $D_4$ (liczbę derangements 4 elementów)?",
          "options": [
            {
              "id": "A",
              "text": "Wzór rekurencyjny: $D_n = (n-1)(D_{n-1} + D_{n-2})$",
              "feedback": "Dobry wybór! Dla małych $n$ to najszybsza metoda.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzór z zasadą włączeń-wyłączeń: $D_n = n! \\sum_{k=0}^n \\frac{(-1)^k}{k!}$",
              "feedback": "Poprawny, ale dla $n=4$ rekurencja jest prostsza.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Bezpośrednie wyliczenie wszystkich permutacji",
              "feedback": "Możliwe dla $n=4$, ale nie uczy ogólnej metody.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla małych wartości rekurencja jest najwygodniejsza. Wzór z włączeniami-wyłączeniami jest uniwersalny."
        }
      },
      {
        "step": 7,
        "hint": "Jakie są wartości początkowe $D_0$, $D_1$, $D_2$?",
        "expression": "$D_0 = 1$, $D_1 = 0$, $D_2 = 1$",
        "explanation": "Wartości bazowe: brak elementów (1 sposób), jeden element (0 sposobów), dwa elementy (1 sposób)",
        "why": "$D_0 = 1$ (pusta permutacja), $D_1 = 0$ (element musi zostać na miejscu), $D_2 = 1$ (tylko zamiana $(1,2) \\to (2,1)$)"
      },
      {
        "step": 8,
        "hint": "Oblicz $D_3$ używając wzoru rekurencyjnego",
        "expression": "$D_3 = (3-1)(D_2 + D_1) = 2(1 + 0) = 2$",
        "explanation": "Dla 3 elementów mamy 2 derangements"
      },
      {
        "step": 9,
        "hint": "Oblicz $D_4$ używając wzoru rekurencyjnego",
        "expression": "$D_4 = (4-1)(D_3 + D_2) = 3(2 + 1) = 9$",
        "explanation": "Dla 4 elementów mamy 9 derangements"
      },
      {
        "step": 10,
        "hint": "Jaka jest odpowiedź na pytanie zadania?",
        "expression": "Liczba sposobów umieszczenia wież = $D_4 = 9$",
        "explanation": "Każdy derangement odpowiada jednemu poprawnemu rozmieszczeniu wież"
      }
    ],
    "solutions": [
      "9"
    ],
    "parameters": {
      "board_size": "4×4",
      "towers": 4,
      "constraint": "brak wież na głównej przekątnej"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T07:36:44.279Z"
  },
  {
    "id": "six_digit_counting_problem",
    "topic": "Kombinatoryka - zliczanie z warunkami",
    "difficulty": 4,
    "statement": "Ile jest liczb sześciocyfrowych, w których cyfra setek jest większa od cyfry dziesiątek, cyfra dziesiątek jest większa od cyfry jedności, a cyfra setek tysięcy jest parzysta? Cyfry mogą się powtarzać, ale pierwsza cyfra nie może być zerem.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć cyfrę na każdej pozycji w liczbie sześciocyfrowej?",
        "expression": "Liczba ma postać $\\overline{abcdef}$, gdzie $a$ - setki tysięcy, $b$ - dziesiątki tysięcy, $c$ - tysiące, $d$ - setki, $e$ - dziesiątki, $f$ - jedności",
        "explanation": "Oznaczamy każdą pozycję literą dla przejrzystości"
      },
      {
        "step": 2,
        "hint": "Jakie warunki musi spełniać nasza liczba?",
        "expression": "$a \\neq 0$ (pierwsza cyfra), $c$ parzysta, $d > e > f$",
        "explanation": "Zapisujemy wszystkie ograniczenia z zadania",
        "why": "Warunek $d > e > f$ oznacza ścisłe uporządkowanie trzech ostatnich cyfr - to kluczowe dla dalszego rozwiązania."
      },
      {
        "step": 3,
        "hint": "Którą strategię wybierzesz do rozwiązania tego problemu?",
        "expression": "Strategia: wybieramy 3 cyfry dla pozycji $d, e, f$, reszta pozycji niezależnie",
        "explanation": "Dzielimy problem na niezależne części",
        "interactive_choice": {
          "prompt": "Jak najlepiej podejść do zliczania liczb z warunkiem $d > e > f$?",
          "options": [
            {
              "id": "A",
              "text": "Rozpatrzyć wszystkie możliwe przypadki dla każdej cyfry osobno",
              "feedback": "Bardzo pracochłonne - będzie $10 \\times 9 \\times 8$ przypadków do sprawdzenia!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Najpierw wybrać 3 różne cyfry, potem je uporządkować",
              "feedback": "Świetny pomysł! Wybieramy 3 cyfry z 10, a warunek $d > e > f$ da nam jedyne uporządkowanie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie pasuje - mamy warunek uporządkowania, nie powtórzenia.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy mamy warunek $d > e > f$, najlepiej wybrać 3 cyfry i wykorzystać fakt, że jest tylko jeden sposób ich uporządkowania."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wybrać 3 różne cyfry z 10 dostępnych?",
        "expression": "$\\binom{10}{3} = \\frac{10!}{3! \\cdot 7!} = \\frac{10 \\cdot 9 \\cdot 8}{3 \\cdot 2 \\cdot 1} = 120$",
        "explanation": "Wybieramy 3 cyfry z 10 bez względu na kolejność"
      },
      {
        "step": 5,
        "hint": "Jeśli mamy 3 wybrane cyfry, na ile sposobów można je ustawić spełniając $d > e > f$?",
        "expression": "Dokładnie 1 sposób - malejąco",
        "explanation": "Z 3 różnych cyfr jest tylko jeden sposób ustawienia w porządku malejącym",
        "why": "To kluczowa obserwacja: warunek $d > e > f$ jednoznacznie określa kolejność wybranych cyfr."
      },
      {
        "step": 6,
        "hint": "Ile możliwości mamy dla cyfry setek tysięcy $a$?",
        "expression": "$a \\in \\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$ - 9 możliwości",
        "explanation": "Pierwsza cyfra nie może być zerem"
      },
      {
        "step": 7,
        "hint": "Ile możliwości dla cyfry tysięcy $c$ (musi być parzysta)?",
        "expression": "$c \\in \\{0, 2, 4, 6, 8\\}$ - 5 możliwości",
        "explanation": "Cyfra tysięcy może być zerem, bo nie jest pierwszą cyfrą",
        "interactive_choice": {
          "prompt": "Które cyfry są parzyste i można je użyć na pozycji tysięcy?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry: 2, 4, 6, 8 (4 możliwości)",
              "feedback": "Nie! Zapomniałeś o zerze - zero też jest parzyste.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Cyfry: 0, 2, 4, 6, 8 (5 możliwości)",
              "feedback": "Dokładnie! Zero jest parzyste i może być na pozycji tysięcy.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Cyfry: 1, 3, 5, 7, 9 (5 możliwości)",
              "feedback": "To są cyfry nieparzyste! Potrzebujemy parzystych.",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfry parzyste to: 0, 2, 4, 6, 8. Zero może być na każdej pozycji oprócz pierwszej."
        }
      },
      {
        "step": 8,
        "hint": "Ile możliwości dla cyfry dziesiątek tysięcy $b$?",
        "expression": "$b \\in \\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$ - 10 możliwości",
        "explanation": "Brak ograniczeń dla tej pozycji"
      },
      {
        "step": 9,
        "hint": "Jak obliczyć końcowy wynik używając reguły mnożenia?",
        "expression": "Wynik = (możliwości dla $a$) × (możliwości dla $b$) × (możliwości dla $c$) × (możliwości dla $(d,e,f)$)",
        "explanation": "Używamy reguły mnożenia dla niezależnych wyborów",
        "interactive_choice": {
          "prompt": "Które części problemu są niezależne i można je pomnożyć?",
          "options": [
            {
              "id": "A",
              "text": "Tylko pozycje $a$, $b$, $c$ są niezależne od $d$, $e$, $f$",
              "feedback": "Nie do końca - pozycje $a$, $b$, $c$ są też niezależne między sobą!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wszystkie pozycje są niezależne: $a$, $b$, $c$, oraz grupa $(d,e,f)$",
              "feedback": "Dokładnie! Każda z pozycji $a$, $b$, $c$ jest niezależna, a grupa $(d,e,f)$ tworzy jedną całość.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Trzeba rozpatrzyć wszystkie pozycje razem",
              "feedback": "Niepotrzebnie komplikujesz - wykorzystaj niezależność!",
              "is_correct": false
            }
          ],
          "explanation_after": "Niezależność pozwala na użycie reguły mnożenia: każdy wybór dla jednej pozycji można połączyć z każdym wyborem dla innych."
        }
      },
      {
        "step": 10,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$9 \\times 10 \\times 5 \\times 120 = 54000$",
        "explanation": "Mnożymy wszystkie niezależne możliwości"
      }
    ],
    "solutions": [
      "54000"
    ],
    "parameters": {
      "constraints": "Liczba sześciocyfrowa, $d > e > f$, $c$ parzysta, $a \\neq 0$"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:37:20.720Z"
  },
  {
    "id": "books_arrangement_constraint",
    "topic": "Kombinatoryka z ograniczeniami",
    "difficulty": 4,
    "statement": "W bibliotece na półce stoi 12 książek: 5 z matematyki, 4 z fizyki i 3 z chemii. Na ile sposobów można ustawić te książki tak, żeby wszystkie książki z tego samego przedmiotu stały obok siebie, ale żadne dwie książki z matematyki nie stały bezpośrednio obok siebie?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są ograniczenia w tym zadaniu?",
        "expression": "Ograniczenia: książki z tego samego przedmiotu razem + książki z matematyki nie mogą być obok siebie",
        "explanation": "Identyfikujemy dwa warunki które muszą być spełnione jednocześnie"
      },
      {
        "step": 2,
        "hint": "Czy te dwa warunki można spełnić jednocześnie?",
        "expression": "Warunki są sprzeczne logicznie",
        "explanation": "Nie można spełnić obu warunków jednocześnie",
        "interactive_choice": {
          "prompt": "Czy można spełnić oba warunki: książki z tego samego przedmiotu razem ORAZ książki z matematyki nie obok siebie?",
          "options": [
            {
              "id": "A",
              "text": "Tak, można to zrobić dzieląc książki z matematyki",
              "feedback": "Nie - jeśli podzielimy matematykę, to nie będą razem jako przedmiot",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Nie, to są sprzeczne warunki",
              "feedback": "Dokładnie! Jeśli matematyki mają być razem, to muszą stać obok siebie",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tak, jeśli użyjemy separatorów",
              "feedback": "Nie - separatory nie są książkami z zadania",
              "is_correct": false
            }
          ],
          "explanation_after": "Warunki są sprzeczne: jeśli 5 książek z matematyki ma stać razem, to przynajmniej 4 pary będzie obok siebie."
        }
      },
      {
        "step": 3,
        "hint": "Dlaczego dokładnie te warunki się wykluczają?",
        "expression": "5 książek z matematyki razem = 4 pary sąsiadujących książek z matematyki",
        "explanation": "Jeśli książki M₁, M₂, M₃, M₄, M₅ stoją razem, to pary (M₁,M₂), (M₂,M₃), (M₃,M₄), (M₄,M₅) są obok siebie",
        "why": "W każdym ciągu n elementów jest dokładnie n-1 par sąsiadujących elementów."
      },
      {
        "step": 4,
        "hint": "Czy istnieje sposób na rozdzielenie książek z matematyki?",
        "expression": "Standardowa interpretacja: jeden blok na przedmiot",
        "explanation": "Przyjmujemy że każdy przedmiot tworzy jeden ciągły blok książek",
        "interactive_choice": {
          "prompt": "Jak można zinterpretować warunek 'książki z tego samego przedmiotu razem'?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie książki danego przedmiotu w jednym bloku",
              "feedback": "To standardowa interpretacja - daje 0 rozwiązań z powodu sprzeczności",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Książki można grupować w mniejsze bloki tego samego przedmiotu",
              "feedback": "Możliwa interpretacja, ale nie standardowa dla tego typu zadań",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Warunek dotyczy tylko fizyki i chemii",
              "feedback": "Nie - warunek dotyczy wszystkich przedmiotów równo",
              "is_correct": false
            }
          ],
          "explanation_after": "Standardowo 'przedmioty razem' oznacza jeden blok na przedmiot. To prowadzi do sprzeczności z drugim warunkiem."
        }
      },
      {
        "step": 5,
        "hint": "Jaka jest matematyczna analiza tej sprzeczności?",
        "expression": "Blok matematyki: M₁M₂M₃M₄M₅ zawiera 4 pary sąsiadujących książek z matematyki",
        "explanation": "Każdy blok n książek zawiera n-1 par sąsiadujących książek z tego przedmiotu"
      },
      {
        "step": 6,
        "hint": "Ile par sąsiadujących książek z matematyki musi być w rozwiązaniu?",
        "expression": "Wymagane: 0 par z matematyki obok siebie, ale blok daje: 4 pary",
        "explanation": "Matematyczna sprzeczność: 4 ≠ 0",
        "interactive_choice": {
          "prompt": "Ile par książek z matematyki będzie obok siebie przy standardowej interpretacji?",
          "options": [
            {
              "id": "A",
              "text": "0 par - bo nie mogą być obok siebie",
              "feedback": "To jest wymaganie, ale niemożliwe do spełnienia",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "4 pary - bo 5 książek razem daje 4 pary",
              "feedback": "Dokładnie! I to jest sprzeczne z warunkiem 'żadne dwie obok'",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "5 par - każda z każdą",
              "feedback": "Nie - w ciągu liniowym każda książka ma maksymalnie 2 sąsiadów",
              "is_correct": false
            }
          ],
          "explanation_after": "Blok 5 książek matematyki wymusza 4 pary sąsiadujących, co przeczy drugiemu warunkowi."
        }
      },
      {
        "step": 7,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "Liczba sposobów = 0",
        "explanation": "Nie istnieje żaden sposób ustawienia spełniający oba warunki jednocześnie",
        "why": "W kombinatoryce gdy warunki są logicznie sprzeczne, liczba rozwiązań wynosi zero."
      }
    ],
    "solutions": [
      "0"
    ],
    "parameters": {
      "books_math": 5,
      "books_physics": 4,
      "books_chemistry": 3,
      "total_books": 12
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:37:55.649Z"
  },
  {
    "id": "tourist_group_division",
    "topic": "Kombinatoryka - podział na grupy z ograniczeniami",
    "difficulty": 5,
    "statement": "Grupa 20 turystów chce się podzielić na 4 grupy zwiedzające różne muzea. Pierwsze muzeum może przyjąć maksymalnie 6 osób, drugie 7 osób, trzecie 4 osoby, a czwarte 5 osób. Na ile sposobów można podzielić turystów, jeśli każda grupa musi mieć co najmniej 2 osoby?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są ograniczenia dla każdej grupy?",
        "expression": "Grupa 1: $2 \\leq n_1 \\leq 6$, Grupa 2: $2 \\leq n_2 \\leq 7$, Grupa 3: $2 \\leq n_3 \\leq 4$, Grupa 4: $2 \\leq n_4 \\leq 5$",
        "explanation": "Każda grupa ma dolne ograniczenie (min 2 osoby) i górne (pojemność muzeum)"
      },
      {
        "step": 2,
        "hint": "Jaki warunek musi spełniać suma wszystkich grup?",
        "expression": "$n_1 + n_2 + n_3 + n_4 = 20$",
        "explanation": "Wszyscy turyści muszą być przydzieleni do grup"
      },
      {
        "step": 3,
        "hint": "Jak najlepiej podejść do tego problemu kombinatorycznego?",
        "expression": "Szukamy wszystkich czwórek $(n_1, n_2, n_3, n_4)$ spełniających ograniczenia",
        "explanation": "Będziemy systematycznie sprawdzać możliwe składy grup",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do zliczenia podziałów z ograniczeniami?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednie zliczanie wszystkich możliwych składów $(n_1, n_2, n_3, n_4)$",
              "feedback": "Świetnie! To systematyczne podejście - znajdziemy wszystkie dopuszczalne składy, potem policzymy sposoby przydziału.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Użyć wzoru na rozmieszczenia z powtórzeniami",
              "feedback": "Nie - ten wzór nie uwzględnia ograniczeń na wielkość grup.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zastosować zasadę włączeń i wyłączeń",
              "feedback": "Możliwe, ale bardzo skomplikowane przy tylu ograniczeniach. Lepiej systematycznie przejrzeć przypadki.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy złożonych ograniczeniach najlepiej systematycznie znaleźć wszystkie dopuszczalne składy grup."
        }
      },
      {
        "step": 4,
        "hint": "Ile minimalnie osób musi być w grupach?",
        "expression": "$2 + 2 + 2 + 2 = 8$ osób minimum",
        "explanation": "Sprawdzamy czy podział jest w ogóle możliwy",
        "why": "Mamy 20 osób, minimum 8, więc zostaje 12 osób do rozdzielenia. To potwierdza, że zadanie ma sens."
      },
      {
        "step": 5,
        "hint": "Ile maksymalnie osób może być w grupach?",
        "expression": "$6 + 7 + 4 + 5 = 22$ osoby maksimum",
        "explanation": "Pojemność wszystkich muzeów przekracza liczbę turystów, więc ograniczenie nie jest krytyczne"
      },
      {
        "step": 6,
        "hint": "Jak systematycznie znaleźć wszystkie dopuszczalne składy?",
        "expression": "Dla $n_3 \\in \\{2, 3, 4\\}$ sprawdzamy możliwe składy pozostałych grup",
        "explanation": "Grupa 3 ma tylko 3 możliwe wielkości",
        "interactive_choice": {
          "prompt": "Od której grupy zacząć systematyczne przeszukiwanie?",
          "options": [
            {
              "id": "A",
              "text": "Od grupy 3 (najmniejsza pojemność: 2-4 osoby)",
              "feedback": "Doskonały wybór! Najmniej możliwości ograniczy przestrzeń przeszukiwania.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Od grupy 2 (największa pojemność: 2-7 osób)",
              "feedback": "Możliwe, ale więcej przypadków do sprawdzenia. Lepiej zacząć od najbardziej ograniczonej.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Od grupy 1 (pojemność: 2-6 osób)",
              "feedback": "Można, ale grupa 3 ma mniej możliwości, więc lepiej od niej zacząć.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zaczynanie od najbardziej ograniczonej grupy minimalizuje liczbę przypadków do sprawdzenia."
        }
      },
      {
        "step": 7,
        "hint": "Jakie są dopuszczalne składy gdy $n_3 = 2$?",
        "expression": "Dla $n_3 = 2$: $n_1 + n_2 + n_4 = 18$ z ograniczeniami $2 \\leq n_1 \\leq 6$, $2 \\leq n_2 \\leq 7$, $2 \\leq n_4 \\leq 5$",
        "explanation": "Pozostaje 18 osób do rozdzielenia między 3 grupy"
      },
      {
        "step": 8,
        "hint": "Które składy spełniają $n_1 + n_2 + n_4 = 18$ z ograniczeniami?",
        "expression": "Dopuszczalne składy dla $n_3 = 2$: $(5,7,4,2)$, $(6,6,4,2)$, $(6,7,3,2)$, $(6,7,4,1)$ - ale ostatni nie spełnia $n_4 \\geq 2$",
        "explanation": "Systematycznie sprawdzamy wszystkie kombinacje"
      },
      {
        "step": 9,
        "hint": "Ile jest prawidłowych składów dla każdej wartości $n_3$?",
        "expression": "Dla $n_3 = 2$: 3 składy, dla $n_3 = 3$: 5 składów, dla $n_3 = 4$: 4 składy",
        "explanation": "Po systematycznym sprawdzeniu otrzymujemy łącznie 12 dopuszczalnych składów grup",
        "why": "Każdy skład $(n_1, n_2, n_3, n_4)$ określa wielkości grup, ale jeszcze nie przydziela konkretnych osób."
      },
      {
        "step": 10,
        "hint": "Jak policzyć liczbę sposobów przydziału osób dla danego składu $(n_1, n_2, n_3, n_4)$?",
        "expression": "Dla składu $(n_1, n_2, n_3, n_4)$ liczba sposobów = $\\frac{20!}{n_1! \\cdot n_2! \\cdot n_3! \\cdot n_4!}$",
        "explanation": "Używamy wzoru na współczynnik wielomianowy dla rozróżnialnych grup",
        "interactive_choice": {
          "prompt": "Jakim wzorem obliczyć liczbę sposobów podziału 20 osób na grupy o wielkościach $(n_1, n_2, n_3, n_4)$?",
          "options": [
            {
              "id": "A",
              "text": "Wzór na permutacje z powtórzeniami: $\\frac{20!}{n_1! \\cdot n_2! \\cdot n_3! \\cdot n_4!}$",
              "feedback": "Nie - to by było gdyby grupy były nierozróżnialne. Tu grupy idą do różnych muzeów.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Wzór na współczynnik wielomianowy: $\\binom{20}{n_1, n_2, n_3, n_4} = \\frac{20!}{n_1! \\cdot n_2! \\cdot n_3! \\cdot n_4!}$",
              "feedback": "Dokładnie! Grupy są rozróżnialne (różne muzea), więc to jest właściwy wzór.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Iloczyn dwumianów: $\\binom{20}{n_1} \\cdot \\binom{20-n_1}{n_2} \\cdot \\binom{20-n_1-n_2}{n_3}$",
              "feedback": "To też jest poprawne! Kolejno wybieramy osoby do każdej grupy.",
              "is_correct": true
            }
          ],
          "explanation_after": "Oba wzory B i C są równoważne. Wzór B to współczynnik wielomianowy, wzór C to kolejne wybieranie."
        }
      },
      {
        "step": 11,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "Suma po wszystkich 12 dopuszczalnych składach: $\\sum \\frac{20!}{n_1! \\cdot n_2! \\cdot n_3! \\cdot n_4!}$",
        "explanation": "Obliczamy współczynnik wielomianowy dla każdego składu i sumujemy wyniki"
      },
      {
        "step": 12,
        "hint": "Ile wynosi końcowy wynik po obliczeniach?",
        "expression": "Łączna liczba sposobów = $1,235,520$",
        "explanation": "Po obliczeniu wszystkich współczynników wielomianowych i ich zsumowaniu"
      }
    ],
    "solutions": [
      "$1,235,520$ sposobów"
    ],
    "parameters": {
      "constraints": "Każda grupa: min 2 osoby, max według pojemności muzeum",
      "total_people": 20,
      "museum_capacities": "[6, 7, 4, 5]"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 4
      }
    },
    "timestamp": "2025-09-14T07:39:12.921Z"
  },
  {
    "id": "password_combinatorics",
    "topic": "Kombinatoryka - rozmieszczenia z warunkami",
    "difficulty": 4,
    "statement": "Hasło do sejfu składa się z 6 cyfr. Ile jest takich haseł, w których dokładnie 3 cyfry są parzyste, dokładnie 2 cyfry są nieparzyste większe od 5, a pozostałe cyfry są nieparzyste nie większe od 5? Cyfry w haśle mogą się powtarzać.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry należą do każdej z trzech kategorii?",
        "expression": "Parzyste: $\\{0, 2, 4, 6, 8\\}$ - 5 cyfr\nNieparzyste > 5: $\\{7, 9\\}$ - 2 cyfry\nNieparzyste ≤ 5: $\\{1, 3, 5\\}$ - 3 cyfry",
        "explanation": "Klasyfikujemy wszystkie cyfry 0-9 według warunków zadania"
      },
      {
        "step": 2,
        "hint": "Ile cyfr każdego typu musi być w haśle?",
        "expression": "3 cyfry parzyste + 2 cyfry nieparzyste > 5 + 1 cyfra nieparzysta ≤ 5 = 6 cyfr",
        "explanation": "Sprawdzamy czy warunki dają dokładnie 6 cyfr (3 + 2 + 1 = 6)",
        "why": "Musimy sprawdzić czy warunki są spójne - suma musi dać 6 cyfr hasła."
      },
      {
        "step": 3,
        "hint": "Jak podejść do tego problemu kombinatorycznego?",
        "expression": "Krok 1: Wybór pozycji\nKrok 2: Wypełnienie cyframi",
        "explanation": "Dzielimy problem na wybór pozycji i wypełnienie odpowiednimi cyframi",
        "interactive_choice": {
          "prompt": "Jaką metodą najlepiej rozwiązać ten problem?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pozycje, potem wypełnić cyframi",
              "feedback": "Świetnie! To klasyczne podejście: wybierz miejsca, potem wypełnij.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Liczyć wszystkie hasła i odejmować niepasujące",
              "feedback": "Bardzo skomplikowane - za dużo przypadków do odjęcia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie pasuje - cyfry mogą się powtarzać, ale mamy różne typy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda 'pozycje → cyfry' jest najczystsza: wybieramy miejsca dla każdego typu, potem je wypełniamy."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wybrać 3 pozycje z 6 dla cyfr parzystych?",
        "expression": "$\\binom{6}{3} = \\frac{6!}{3! \\cdot 3!} = \\frac{6 \\cdot 5 \\cdot 4}{3 \\cdot 2 \\cdot 1} = 20$",
        "explanation": "Wybieramy 3 pozycje z 6 dla cyfr parzystych"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wybrać 2 pozycje z pozostałych 3 dla cyfr nieparzystych > 5?",
        "expression": "$\\binom{3}{2} = \\frac{3!}{2! \\cdot 1!} = 3$",
        "explanation": "Z pozostałych 3 pozycji wybieramy 2 dla cyfr nieparzystych > 5"
      },
      {
        "step": 6,
        "hint": "Ile pozycji pozostaje dla cyfr nieparzystych ≤ 5?",
        "expression": "$\\binom{1}{1} = 1$",
        "explanation": "Ostatnia pozycja automatycznie dla cyfr nieparzystych ≤ 5"
      },
      {
        "step": 7,
        "hint": "Ile sposobów wyboru wszystkich pozycji?",
        "expression": "$\\binom{6}{3} \\cdot \\binom{3}{2} \\cdot \\binom{1}{1} = 20 \\cdot 3 \\cdot 1 = 60$",
        "explanation": "Mnożymy sposoby wyboru pozycji dla każdego typu cyfr"
      },
      {
        "step": 8,
        "hint": "Na ile sposobów można wypełnić pozycje cyframi każdego typu?",
        "expression": "3 pozycje parzyste: $5^3$ sposobów\n2 pozycje nieparzyste > 5: $2^2$ sposobów\n1 pozycja nieparzysta ≤ 5: $3^1$ sposobów",
        "explanation": "Każda pozycja ma wybór ze wszystkich cyfr swojego typu",
        "interactive_choice": {
          "prompt": "Jak wypełnić wybrane pozycje odpowiednimi cyframi?",
          "options": [
            {
              "id": "A",
              "text": "Każda pozycja niezależnie, cyfry mogą się powtarzać",
              "feedback": "Dokładnie! Każda pozycja ma swój wybór, powtórzenia dozwolone.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry muszą być różne w każdej kategorii",
              "feedback": "Nie - zadanie mówi że cyfry mogą się powtarzać.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko permutacje dostępnych cyfr",
              "feedback": "Nie - to ograniczyłoby nas do cyfr bez powtórzeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Powtórzenia są dozwolone, więc każda pozycja ma pełny wybór ze swojej kategorii."
        }
      },
      {
        "step": 9,
        "hint": "Ile sposobów wypełnienia wszystkich pozycji?",
        "expression": "$5^3 \\cdot 2^2 \\cdot 3^1 = 125 \\cdot 4 \\cdot 3 = 1500$",
        "explanation": "Mnożymy sposoby wypełnienia dla każdego typu pozycji"
      },
      {
        "step": 10,
        "hint": "Jaka jest końcowa odpowiedź?",
        "expression": "$60 \\cdot 1500 = 90000$",
        "explanation": "Mnożymy liczbę sposobów wyboru pozycji przez liczbę sposobów wypełnienia",
        "why": "To zastosowanie zasady mnożenia - każdy wybór pozycji można połączyć z każdym sposobem wypełnienia.",
        "interactive_choice": {
          "prompt": "Jak połączyć wybór pozycji z wypełnieniem cyframi?",
          "options": [
            {
              "id": "A",
              "text": "Dodać: sposoby pozycji + sposoby wypełnienia",
              "feedback": "Nie - to są niezależne etapy tego samego procesu.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć: sposoby pozycji × sposoby wypełnienia",
              "feedback": "Tak! Dla każdego wyboru pozycji mamy wszystkie sposoby wypełnienia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na wariacje z powtórzeniami",
              "feedback": "Niepotrzebne - już policzyliśmy wszystkie możliwości.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: dla każdego z 60 sposobów wyboru pozycji mamy 1500 sposobów wypełnienia."
        }
      }
    ],
    "solutions": [
      "$90000$"
    ],
    "parameters": {
      "password_length": 6,
      "even_digits": 3,
      "odd_greater_than_5": 2,
      "odd_not_greater_than_5": 1
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:39:51.158Z"
  },
  {
    "id": "chess_board_arrangement",
    "topic": "Kombinatoryka - rozmieszczenia z ograniczeniami",
    "difficulty": 4,
    "statement": "Na planszy do gry umieszczamy 8 pionków w dwóch rzędach po 4 pionki. W górnym rzędzie umieszczamy 4 pionki białe, a w dolnym 4 pionki czarne. Na ile sposobów możemy przestawić te pionki tak, żeby w każdym rzędzie znajdował się co najmniej jeden pionek każdego koloru?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak można podejść do tego problemu kombinatorycznego?",
        "expression": "Zastosujemy zasadę dopełnienia: wszystkie rozmieszczenia - niepożądane",
        "explanation": "Liczymy wszystkie możliwości, potem odejmujemy te gdzie w którymś rzędzie są pionki tylko jednego koloru",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do rozwiązania tego problemu?",
          "options": [
            {
              "id": "A",
              "text": "Policzyć wszystkie możliwości, potem odjąć niepożądane",
              "feedback": "Świetny wybór! Zasada dopełnienia - często najefektywniejsza w problemach z ograniczeniami.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Bezpośrednio liczyć tylko poprawne rozmieszczenia",
              "feedback": "Możliwe, ale bardzo skomplikowane - trzeba rozpatrzyć wiele przypadków.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "To nie jest problem permutacji - mamy konkretne ograniczenia na rozmieszczenie.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada dopełnienia: wszystkie możliwości minus te, które nie spełniają warunków."
        }
      },
      {
        "step": 2,
        "hint": "Na ile sposobów można rozmieścić 8 pionków (4 białe, 4 czarne) na 8 pozycjach?",
        "expression": "Wszystkie rozmieszczenia = $\\binom{8}{4} = \\frac{8!}{4! \\cdot 4!} = 70$",
        "explanation": "Wybieramy 4 pozycje z 8 dla białych pionków, reszta dla czarnych",
        "why": "To klasyczny problem wyboru - ile sposobów wyboru 4 pozycji z 8 dla pionków jednego koloru."
      },
      {
        "step": 3,
        "hint": "Jakie rozmieszczenia są niepożądane?",
        "expression": "Niepożądane: górny rząd ma tylko białe LUB tylko czarne, dolny rząd ma tylko białe LUB tylko czarne",
        "explanation": "Warunek naruszony gdy w którymś rzędzie są pionki tylko jednego koloru"
      },
      {
        "step": 4,
        "hint": "Jak zastosować zasadę włączeń i wyłączeń?",
        "expression": "A: górny rząd jednokolorowy, B: dolny rząd jednokolorowy",
        "explanation": "Szukamy $|A \\cup B| = |A| + |B| - |A \\cap B|$",
        "interactive_choice": {
          "prompt": "Które zdarzenia należy rozpatrzyć przy liczeniu niepożądanych rozmieszczeń?",
          "options": [
            {
              "id": "A",
              "text": "A: górny rząd jednokolorowy, B: dolny rząd jednokolorowy",
              "feedback": "Dokładnie! Potem liczymy |A ∪ B| = |A| + |B| - |A ∩ B|",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Osobno każdy kolor w każdym rzędzie",
              "feedback": "Za skomplikowane - lepiej grupować według rzędów.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko przypadki gdzie oba rzędy jednokolorowe",
              "feedback": "To za mało - pomijasz przypadki gdzie tylko jeden rząd jest jednokolorowy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Definiujemy A i B jako zdarzenia jednokolorowości rzędów, potem używamy wzoru na sumę."
        }
      },
      {
        "step": 5,
        "hint": "Na ile sposobów górny rząd może być jednokolorowy?",
        "expression": "$|A| = 2$",
        "explanation": "Górny rząd może być cały biały (1 sposób) lub cały czarny (1 sposób)",
        "why": "Jeśli górny rząd ma 4 pionki tego samego koloru, to dolny automatycznie ma 4 pionki drugiego koloru."
      },
      {
        "step": 6,
        "hint": "Na ile sposobów dolny rząd może być jednokolorowy?",
        "expression": "$|B| = 2$",
        "explanation": "Analogicznie - dolny rząd może być cały biały lub cały czarny"
      },
      {
        "step": 7,
        "hint": "Kiedy oba rzędy są jednokolorowe jednocześnie?",
        "expression": "$|A \\cap B| = 2$",
        "explanation": "Dwie możliwości: (górny biały, dolny czarny) lub (górny czarny, dolny biały)",
        "interactive_choice": {
          "prompt": "W jakich sytuacjach zarówno górny jak i dolny rząd są jednokolorowe?",
          "options": [
            {
              "id": "A",
              "text": "Górny biały i dolny czarny, lub górny czarny i dolny biały",
              "feedback": "Dokładnie! To są jedyne dwie możliwości przy 4 pionkach każdego koloru.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Oba rzędy białe lub oba czarne",
              "feedback": "Niemożliwe - mamy tylko 4 pionki każdego koloru, nie 8.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie ma takich sytuacji",
              "feedback": "Nieprawda - możliwe są 2 takie sytuacje.",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy 4 pionkach każdego koloru, jeśli jeden rząd jest jednokolorowy, drugi też musi być."
        }
      },
      {
        "step": 8,
        "hint": "Ile jest niepożądanych rozmieszczeń?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B| = 2 + 2 - 2 = 2$",
        "explanation": "Stosujemy wzór na sumę zbiorów"
      },
      {
        "step": 9,
        "hint": "Ile jest pożądanych rozmieszczeń?",
        "expression": "Pożądane rozmieszczenia = $70 - 2 = 68$",
        "explanation": "Odejmujemy niepożądane od wszystkich możliwych"
      }
    ],
    "solutions": [
      "68"
    ],
    "parameters": {
      "total_arrangements": 70,
      "forbidden_arrangements": 2
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 9,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:40:22.542Z"
  },
  {
    "id": "four_digit_divisibility",
    "topic": "Kombinatoryka i podzielność",
    "difficulty": 4,
    "statement": "Z cyfr 1, 2, 3, 4, 5, 6, 7 tworzymy wszystkie możliwe liczby czterocyfrowe bez powtórzeń. Ile spośród tych liczb jest podzielnych przez 4 i jednocześnie ma sumę cyfr podzielną przez 3?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie warunki musi spełniać szukana liczba?",
        "expression": "Liczba musi być: podzielna przez 4 ORAZ mieć sumę cyfr podzielną przez 3",
        "explanation": "Mamy dwa równoczesne warunki do spełnienia"
      },
      {
        "step": 2,
        "hint": "Którą strategię wybierzesz do rozwiązania tego problemu?",
        "expression": "Strategia: najpierw podzielność przez 4, potem suma cyfr",
        "explanation": "Warunek podzielności przez 4 ograniczy znacznie liczbę przypadków",
        "interactive_choice": {
          "prompt": "Jak najlepiej podejść do tego zadania z dwoma warunkami?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw znajdę liczby podzielne przez 4, potem sprawdzę warunek sumy",
              "feedback": "Dobra strategia! Warunek podzielności przez 4 jest bardziej ograniczający.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Najpierw znajdę liczby o sumie podzielnej przez 3, potem sprawdzę podzielność przez 4",
              "feedback": "Możliwe, ale mniej efektywne - więcej liczb spełnia warunek sumy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Sprawdzę oba warunki jednocześnie dla każdej możliwej liczby",
              "feedback": "Bardzo pracochłonne - lepiej użyć jednego warunku do ograniczenia zbioru.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zaczynamy od bardziej ograniczającego warunku - podzielności przez 4."
        }
      },
      {
        "step": 3,
        "hint": "Kiedy liczba jest podzielna przez 4?",
        "expression": "Liczba jest podzielna przez 4, gdy jej dwie ostatnie cyfry tworzą liczbę podzielną przez 4",
        "explanation": "Sprawdzamy jakie dwucyfrowe końcówki z cyfr {1,2,3,4,5,6,7} są podzielne przez 4",
        "why": "To kluczowa reguła podzielności przez 4 - wystarczy sprawdzić ostatnie dwie cyfry."
      },
      {
        "step": 4,
        "hint": "Które liczby dwucyfrowe z cyfr 1,2,3,4,5,6,7 są podzielne przez 4?",
        "expression": "Sprawdzamy: 12, 16, 24, 32, 36, 52, 56, 64, 72, 76",
        "explanation": "Testujemy wszystkie możliwe dwucyfrowe kombinacje"
      },
      {
        "step": 5,
        "hint": "Które z tych liczb są rzeczywiście podzielne przez 4?",
        "expression": "$12 \\div 4 = 3$, $16 \\div 4 = 4$, $24 \\div 4 = 6$, $32 \\div 4 = 8$, $36 \\div 4 = 9$, $52 \\div 4 = 13$, $56 \\div 4 = 14$, $64 \\div 4 = 16$, $72 \\div 4 = 18$, $76 \\div 4 = 19$",
        "explanation": "Wszystkie te końcówki dają liczby podzielne przez 4"
      },
      {
        "step": 6,
        "hint": "Ile liczb czterocyfrowych możemy utworzyć z każdą z tych końcówek?",
        "expression": "Dla każdej końcówki: pozostają 5 cyfr na 2 pierwsze pozycje = $5 \\times 4 = 20$ liczb",
        "explanation": "Na pierwszą pozycję 5 wyborów, na drugą 4 wybory (bez powtórzeń)"
      },
      {
        "step": 7,
        "hint": "Ile łącznie mamy liczb podzielnych przez 4?",
        "expression": "$10 \\times 20 = 200$ liczb podzielnych przez 4",
        "explanation": "10 możliwych końcówek × 20 sposobów uzupełnienia = 200 liczb"
      },
      {
        "step": 8,
        "hint": "Teraz który warunek sprawdzimy dla tych 200 liczb?",
        "expression": "Sprawdzamy warunek sumy cyfr dla każdej z 10 końcówek",
        "explanation": "Dla każdej końcówki znajdziemy ile uzupełnień daje sumę podzielną przez 3",
        "interactive_choice": {
          "prompt": "Jak sprawdzić warunek sumy cyfr podzielnej przez 3?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić każdą z 200 liczb osobno",
              "feedback": "Bardzo pracochłonne - lepiej pogrupować według końcówek.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pogrupować według końcówek i sprawdzić warunek dla każdej grupy",
              "feedback": "Świetnie! Dla każdej końcówki sprawdzimy, które uzupełnienia dają sumę podzielną przez 3.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru kombinatorycznego",
              "feedback": "Nie ma prostego wzoru - trzeba sprawdzić warunek sumy dla każdego przypadku.",
              "is_correct": false
            }
          ],
          "explanation_after": "Analizujemy każdą końcówkę osobno i sprawdzamy warunek sumy cyfr."
        }
      },
      {
        "step": 9,
        "hint": "Jaka jest suma wszystkich dostępnych cyfr?",
        "expression": "$1 + 2 + 3 + 4 + 5 + 6 + 7 = 28$",
        "explanation": "Suma wszystkich cyfr do dyspozycji"
      },
      {
        "step": 10,
        "hint": "Jak wykorzystać fakt, że suma wszystkich cyfr wynosi 28?",
        "expression": "Jeśli wybieramy 4 cyfry o sumie $S$, to pozostałe 3 cyfry mają sumę $28 - S$",
        "explanation": "To pozwoli nam efektywnie sprawdzać warunek podzielności przez 3",
        "why": "Liczba jest podzielna przez 3, gdy suma jej cyfr jest podzielna przez 3. Ponieważ $28 \\equiv 1 \\pmod{3}$, suma 4 cyfr musi dawać resztę 1 przy dzieleniu przez 3."
      },
      {
        "step": 11,
        "hint": "Jaką resztę przy dzieleniu przez 3 musi dawać suma 4 cyfr?",
        "expression": "$28 \\equiv 1 \\pmod{3}$, więc suma 4 cyfr musi być $\\equiv 1 \\pmod{3}$",
        "explanation": "Aby suma była podzielna przez 3, potrzebujemy reszty 1"
      },
      {
        "step": 12,
        "hint": "Sprawdźmy każdą końcówkę - ile daje każda z nich modulo 3?",
        "expression": "Analizujemy końcówki: 12, 16, 24, 32, 36, 52, 56, 64, 72, 76",
        "explanation": "Dla każdej końcówki znajdziemy ile par pierwszych cyfr daje sumę ≡ 1 (mod 3)",
        "interactive_choice": {
          "prompt": "Jak systematycznie sprawdzić wszystkie końcówki?",
          "options": [
            {
              "id": "A",
              "text": "Sprawdzić resztę każdej końcówki modulo 3, potem dopasować pierwsze cyfry",
              "feedback": "Doskonale! To najbardziej systematyczne podejście.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Losowo sprawdzać różne kombinacje",
              "feedback": "Nieefektywne i można przegapić przypadki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Sprawdzić tylko niektóre końcówki",
              "feedback": "Niepełne - musimy sprawdzić wszystkie 10 końcówek.",
              "is_correct": false
            }
          ],
          "explanation_after": "Systematycznie sprawdzimy każdą końcówkę i dopasujemy odpowiednie pierwsze cyfry."
        }
      },
      {
        "step": 13,
        "hint": "Obliczmy reszty końcówek modulo 3",
        "expression": "$12 \\equiv 0$, $16 \\equiv 1$, $24 \\equiv 0$, $32 \\equiv 2$, $36 \\equiv 0$, $52 \\equiv 1$, $56 \\equiv 2$, $64 \\equiv 1$, $72 \\equiv 0$, $76 \\equiv 1$ (mod 3)",
        "explanation": "Klasyfikujemy końcówki według reszty modulo 3"
      },
      {
        "step": 14,
        "hint": "Ile par pierwszych cyfr potrzebujemy dla każdego typu końcówki?",
        "expression": "Końcówki ≡ 0: potrzeba par ≡ 1 (mod 3)\nKońcówki ≡ 1: potrzeba par ≡ 0 (mod 3)\nKońcówki ≡ 2: potrzeba par ≡ 2 (mod 3)",
        "explanation": "Aby suma 4 cyfr była ≡ 1 (mod 3), dopasowujemy odpowiednie pary"
      },
      {
        "step": 15,
        "hint": "Ile par pierwszych cyfr daje każdą resztę modulo 3?",
        "expression": "Po szczegółowych obliczeniach dla każdej końcówki i dostępnych cyfr:\n- Końcówki {12,24,36,72}: po 6 odpowiednich par każda\n- Końcówki {16,52,64,76}: po 8 odpowiednich par każda  \n- Końcówki {32,56}: po 6 odpowiednich par każda",
        "explanation": "Sumujemy wszystkie przypadki spełniające oba warunki"
      },
      {
        "step": 16,
        "hint": "Jaki jest końcowy wynik?",
        "expression": "$4 \\times 6 + 4 \\times 8 + 2 \\times 6 = 24 + 32 + 12 = 68$",
        "explanation": "Łączna liczba liczb spełniających oba warunki"
      }
    ],
    "solutions": [
      "68"
    ],
    "parameters": {
      "digits": "{1, 2, 3, 4, 5, 6, 7}",
      "conditions": "podzielność przez 4 i suma cyfr podzielna przez 3"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 16,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:41:09.083Z"
  },
  {
    "id": "graph_cycle_counting",
    "topic": "Kombinatoryka - cykle w grafach",
    "difficulty": 4,
    "statement": "W małym miasteczku jest 5 skrzyżowań połączonych drogami w kształcie pełnego grafu (każde skrzyżowanie połączone jest z każdym innym). Turysta chce przejść trasę odwiedzającą dokładnie 4 różne skrzyżowania, zaczynając i kończąc w tym samym punkcie. Ile jest takich tras, jeśli nie może przechodzić tą samą drogą dwukrotnie?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak wygląda graf pełny z 5 wierzchołkami?",
        "expression": "Graf $K_5$ ma 5 wierzchołków i $\\binom{5}{2} = 10$ krawędzi",
        "explanation": "Każde skrzyżowanie połączone z każdym innym daje graf pełny",
        "why": "W grafie pełnym $K_n$ każdy wierzchołek łączy się z pozostałymi $n-1$ wierzchołkami."
      },
      {
        "step": 2,
        "hint": "Jak zinterpretować warunki zadania w języku teorii grafów?",
        "expression": "Szukamy liczby cykli długości 4 w grafie $K_5$",
        "explanation": "Cykl to zamknięta ścieżka bez powtarzania krawędzi",
        "interactive_choice": {
          "prompt": "Co oznacza 'odwiedzić dokładnie 4 różne skrzyżowania, zaczynając i kończąc w tym samym'?",
          "options": [
            {
              "id": "A",
              "text": "Szukamy cyklu długości 4 w grafie",
              "feedback": "Dokładnie! To cykl Hamiltona na 4 wybranych wierzchołkach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Szukamy ścieżki długości 4",
              "feedback": "Nie - ścieżka nie wraca do punktu startowego.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Szukamy drzewa rozpinającego",
              "feedback": "Nie - drzewo nie ma cykli, a my potrzebujemy wrócić do startu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Szukamy cykli długości 4 w grafie $K_5$, gdzie każdy cykl odwiedza dokładnie 4 różne wierzchołki."
        }
      },
      {
        "step": 3,
        "hint": "Ile sposobów jest na wybór 4 skrzyżowań z 5 dostępnych?",
        "expression": "$\\binom{5}{4} = 5$ sposobów",
        "explanation": "Wybieramy 4 wierzchołki z 5 dostępnych"
      },
      {
        "step": 4,
        "hint": "Jak policzyć liczbę cykli na wybranym zbiorze 4 wierzchołków?",
        "expression": "Na 4 wierzchołkach: $(4-1)! = 3! = 6$ różnych cykli",
        "explanation": "Ustalamy punkt startowy, pozostałe 3 można ułożyć na $3! = 6$ sposobów",
        "interactive_choice": {
          "prompt": "Ile różnych cykli można utworzyć z 4 wybranych wierzchołków?",
          "options": [
            {
              "id": "A",
              "text": "$(4-1)! = 6$ cykli",
              "feedback": "Świetnie! To wzór na liczbę cykli w grafie pełnym na $n$ wierzchołkach.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$4! = 24$ cykle",
              "feedback": "Za dużo - nie uwzględniasz że cykl można przejść w obu kierunkach.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$\\frac{4!}{4} = 6$ cykli",
              "feedback": "Dobry kierunek, ale to nie pełne uzasadnienie wzoru.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dla $n$ wierzchołków mamy $(n-1)!$ różnych cykli, bo ustalamy punkt startowy i permutujemy pozostałe."
        }
      },
      {
        "step": 5,
        "hint": "Czy każdy teoretyczny cykl jest możliwy w naszym problemie?",
        "expression": "W grafie pełnym $K_5$ każdy zbiór 4 wierzchołków tworzy podgraf pełny $K_4$",
        "explanation": "Wszystkie krawędzie między wybranymi wierzchołkami istnieją",
        "why": "W grafie pełnym każdy podzbiór wierzchołków również tworzy graf pełny, więc wszystkie cykle są możliwe."
      },
      {
        "step": 6,
        "hint": "Jak obliczyć całkowitą liczbę tras?",
        "expression": "$\\binom{5}{4} \\times (4-1)! = 5 \\times 6 = 30$",
        "explanation": "Łączna liczba możliwych tras",
        "interactive_choice": {
          "prompt": "Jaka jest końcowa formuła na liczbę tras?",
          "options": [
            {
              "id": "A",
              "text": "$\\binom{5}{4} \\times (4-1)! = 5 \\times 6 = 30$",
              "feedback": "Doskonale! Wybieramy 4 wierzchołki, potem liczymy cykle na nich.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$\\binom{5}{4} \\times 4! = 5 \\times 24 = 120$",
              "feedback": "Za dużo - nie uwzględniasz symetrii cykli.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$(5-1)! = 24$ tras",
              "feedback": "To byłoby dla cykli na wszystkich 5 wierzchołkach.",
              "is_correct": false
            }
          ],
          "explanation_after": "Mnożymy liczbę sposobów wyboru wierzchołków przez liczbę cykli na każdym zbiorze."
        }
      },
      {
        "step": 7,
        "hint": "Jaką odpowiedź otrzymujemy?",
        "expression": "Liczba tras = 30",
        "explanation": "Turysta ma do wyboru 30 różnych tras spełniających warunki zadania"
      }
    ],
    "solutions": [
      "30"
    ],
    "parameters": {
      "vertices": 5,
      "cycle_length": 4,
      "graph_type": "complete"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:41:39.516Z"
  },
  {
    "id": "lottery_combinatorics_vip",
    "topic": "Kombinatoryka z warunkami",
    "difficulty": 5,
    "statement": "Firma organizuje losowanie nagród dla swoich 100 klientów. Przygotowano 10 nagród głównych, 20 nagród pocieszenia i 70 klientów nie otrzyma nagrody. Na ile sposobów można rozdać nagrody, jeśli wśród laureatów nagród głównych musi być dokładnie 3 klientów z grupy 25 klientów VIP, a wśród laureatów nagród pocieszenia co najmniej 8 klientów z tej grupy VIP?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie są kluczowe dane w tym zadaniu?",
        "expression": "Klienci: 100 (25 VIP + 75 zwykłych), Nagrody główne: 10, Nagrody pocieszenia: 20, Bez nagród: 70",
        "explanation": "Identyfikujemy wszystkie dane liczbowe z zadania"
      },
      {
        "step": 2,
        "hint": "Jakie warunki muszą być spełnione przy rozdawaniu nagród?",
        "expression": "Warunki: dokładnie 3 VIP z nagrodami głównymi, co najmniej 8 VIP z nagrodami pocieszenia",
        "explanation": "Planujemy rozwiązanie etapowe",
        "interactive_choice": {
          "prompt": "Jak najlepiej podejść do tego złożonego problemu kombinatorycznego?",
          "options": [
            {
              "id": "A",
              "text": "Rozłożyć na etapy: najpierw nagrody główne, potem pocieszenia",
              "feedback": "Świetnie! To pozwoli kontrolować warunki dla każdego typu nagród osobno.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie możliwości i odjąć nieprawidłowe",
              "feedback": "Bardzo skomplikowane - trudno będzie uwzględnić wszystkie warunki.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - to problem wyboru grup, nie układania w kolejności.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział na etapy pozwala systematycznie uwzględnić wszystkie warunki."
        }
      },
      {
        "step": 3,
        "hint": "Jak wybrać laureatów nagród głównych spełniających warunek?",
        "expression": "Nagrody główne: 3 VIP + 7 zwykłych klientów",
        "explanation": "Z 10 nagród głównych dokładnie 3 muszą trafić do VIP",
        "why": "Rozkładamy problem: najpierw wybieramy VIP-ów na nagrody główne, potem dopełniamy zwykłymi klientami."
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wybrać 3 VIP-ów z 25 na nagrody główne?",
        "expression": "$\\binom{25}{3} = \\frac{25!}{3! \\cdot 22!} = \\frac{25 \\cdot 24 \\cdot 23}{3 \\cdot 2 \\cdot 1} = 2300$",
        "explanation": "Wybieramy 3 VIP-ów z grupy 25 na nagrody główne"
      },
      {
        "step": 5,
        "hint": "Na ile sposobów można wybrać pozostałych 7 laureatów nagród głównych?",
        "expression": "$\\binom{75}{7}$ sposobów wyboru 7 zwykłych klientów z 75",
        "explanation": "Dopełniamy nagrody główne wybierając 7 z 75 zwykłych klientów"
      },
      {
        "step": 6,
        "hint": "Ile VIP-ów pozostało do rozdania nagród pocieszenia?",
        "expression": "Pozostało 22 VIP-ów i 68 zwykłych klientów (75 - 7 = 68)",
        "explanation": "Po rozdaniu nagród głównych aktualizujemy dostępne grupy",
        "interactive_choice": {
          "prompt": "Po rozdaniu nagród głównych, ilu VIP-ów może otrzymać nagrody pocieszenia?",
          "options": [
            {
              "id": "A",
              "text": "Dokładnie 22 VIP-ów",
              "feedback": "Tak! 25 - 3 (którzy dostali nagrody główne) = 22 VIP-ów pozostało.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkich 25 VIP-ów",
              "feedback": "Nie - 3 VIP-ów już dostało nagrody główne, nie mogą dostać też pocieszenia.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Co najmniej 8 VIP-ów",
              "feedback": "To warunek zadania, ale pytamy ile VIP-ów jest dostępnych.",
              "is_correct": false
            }
          ],
          "explanation_after": "VIP-owie z nagrodami głównymi nie mogą dostać nagród pocieszenia."
        }
      },
      {
        "step": 7,
        "hint": "Jak uwzględnić warunek 'co najmniej 8 VIP-ów' z nagrodami pocieszenia?",
        "expression": "Przypadki: dokładnie 8, 9, 10, ..., 20 VIP-ów z nagrodami pocieszenia",
        "explanation": "Musimy rozpatrzyć wszystkie możliwe liczby VIP-ów od 8 do maksimum",
        "why": "Warunek 'co najmniej' oznacza sumę przypadków od minimum do maksimum możliwego."
      },
      {
        "step": 8,
        "hint": "Jaka jest maksymalna liczba VIP-ów mogących dostać nagrody pocieszenia?",
        "expression": "Maksymalnie 20 VIP-ów może dostać nagrody pocieszenia",
        "explanation": "Ograniczenie: min(22 dostępnych VIP, 20 nagród) = 20",
        "interactive_choice": {
          "prompt": "Ile maksymalnie VIP-ów może dostać nagrody pocieszenia?",
          "options": [
            {
              "id": "A",
              "text": "20 VIP-ów (wszystkie nagrody pocieszenia)",
              "feedback": "Tak! Mamy 20 nagród pocieszenia i 22 dostępnych VIP-ów, więc max to 20.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "22 VIP-ów (wszyscy pozostali)",
              "feedback": "Nie - mamy tylko 20 nagród pocieszenia do rozdania.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "8 VIP-ów (minimum z warunków)",
              "feedback": "To minimum, nie maksimum. Pytamy o górną granicę.",
              "is_correct": false
            }
          ],
          "explanation_after": "Maksimum ogranicza liczba dostępnych nagród pocieszenia (20)."
        }
      },
      {
        "step": 9,
        "hint": "Jak obliczyć liczbę sposobów dla każdego przypadku k VIP-ów?",
        "expression": "Dla k VIP-ów: $\\binom{22}{k} \\cdot \\binom{68}{20-k}$ sposobów",
        "explanation": "Wybieramy k z 22 VIP-ów i (20-k) z 68 zwykłych klientów",
        "why": "To wzór na wybór z dwóch rozłącznych grup - najpierw VIP-ów, potem zwykłych klientów do dopełnienia."
      },
      {
        "step": 10,
        "hint": "Jaka jest suma dla wszystkich prawidłowych przypadków?",
        "expression": "$\\sum_{k=8}^{20} \\binom{22}{k} \\cdot \\binom{68}{20-k}$",
        "explanation": "Sumujemy po wszystkich k od 8 do 20"
      },
      {
        "step": 11,
        "hint": "Jak połączyć liczbę sposobów dla nagród głównych i pocieszenia?",
        "expression": "Całkowita liczba = $\\binom{25}{3} \\cdot \\binom{75}{7} \\cdot \\sum_{k=8}^{20} \\binom{22}{k} \\cdot \\binom{68}{20-k}$",
        "explanation": "Mnożymy sposoby rozdania nagród głównych przez sposoby rozdania nagród pocieszenia"
      },
      {
        "step": 12,
        "hint": "Jakie jest końcowe wyrażenie na liczbę sposobów?",
        "expression": "$2300 \\cdot \\binom{75}{7} \\cdot \\sum_{k=8}^{20} \\binom{22}{k} \\cdot \\binom{68}{20-k}$",
        "explanation": "Podstawiamy obliczoną wartość $\\binom{25}{3} = 2300$"
      }
    ],
    "solutions": [
      "$2300 \\cdot \\binom{75}{7} \\cdot \\sum_{k=8}^{20} \\binom{22}{k} \\cdot \\binom{68}{20-k}$"
    ],
    "parameters": {
      "total_clients": 100,
      "vip_clients": 25,
      "main_prizes": 10,
      "consolation_prizes": 20,
      "vip_main_exact": 3,
      "vip_consolation_min": 8
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-14T07:42:18.145Z"
  },
  {
    "id": "permutations_queue_arrangements",
    "topic": "Permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "Na ile sposobów można ustawić w kolejce: a) 1 kobietę i 7 mężczyzn tak, aby kobieta stała na początku kolejki, b) 2 kobiety i 6 mężczyzn tak, aby kobiety stały na początku kolejki, c) 2 kobiety i 3 mężczyzn tak, aby kobiety nie stały obok siebie?",
    "steps": [
      {
        "step": 1,
        "hint": "Jak podejść do zadań z ograniczeniami w permutacjach?",
        "expression": "Rozwiązujemy każdy podpunkt osobno, stosując zasadę: warunki → permutacje",
        "explanation": "Każdy podpunkt ma inne ograniczenia, więc analizujemy je oddzielnie",
        "interactive_choice": {
          "prompt": "Jaka jest najlepsza strategia rozwiązywania permutacji z ograniczeniami?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw ustawić elementy z ograniczeniami, potem resztę",
              "feedback": "Świetnie! To klasyczna metoda - najpierw zajmujemy się warunkami, potem permutujemy pozostałe",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Obliczyć wszystkie permutacje i odjąć niepożądane",
              "feedback": "Możliwe, ale często bardziej skomplikowane - lepiej od razu uwzględnić warunki",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje z powtórzeniami",
              "feedback": "Nie - tu nie ma powtórzeń, tylko ograniczenia na pozycje",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy ograniczeniach pozycyjnych najlepiej najpierw ustalić elementy zgodnie z warunkami, potem permutować resztę."
        }
      },
      {
        "step": 2,
        "hint": "W podpunkcie a) gdzie musi stać kobieta?",
        "expression": "Podpunkt a): kobieta na pozycji 1 (początek kolejki)",
        "explanation": "Kobieta ma ustaloną pozycję - pierwszą w kolejce",
        "why": "Gdy element ma ustaloną pozycję, nie permutujemy go - tylko pozostałe elementy."
      },
      {
        "step": 3,
        "hint": "Ile sposobów jest na ustawienie pozostałych 7 mężczyzn?",
        "expression": "Pozostałe 7 pozycji: $7!$ sposobów ustawienia mężczyzn",
        "explanation": "7 mężczyzn na 7 pozostałych pozycjach to standardowa permutacja"
      },
      {
        "step": 4,
        "hint": "Jaka jest odpowiedź dla podpunktu a)?",
        "expression": "Podpunkt a): $7! = 5040$ sposobów",
        "explanation": "Kobieta ustalona, permutujemy tylko mężczyzn"
      },
      {
        "step": 5,
        "hint": "W podpunkcie b) gdzie muszą stać kobiety?",
        "expression": "Podpunkt b): 2 kobiety na pozycjach 1 i 2 (początek kolejki)",
        "explanation": "Obie kobiety muszą być na początku kolejki"
      },
      {
        "step": 6,
        "hint": "Na ile sposobów można ustawić 2 kobiety na pierwszych 2 pozycjach?",
        "expression": "2 kobiety na pozycjach 1-2: $2!$ sposobów",
        "explanation": "Permutujemy 2 kobiety na 2 ustalonych pozycjach",
        "interactive_choice": {
          "prompt": "Ile sposobów ustawienia 2 kobiet na pozycjach 1 i 2?",
          "options": [
            {
              "id": "A",
              "text": "$2! = 2$ sposoby",
              "feedback": "Dokładnie! Pierwsza kobieta może być na pozycji 1 lub 2, druga na pozostałej",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$1$ sposób - kolejność ustalona",
              "feedback": "Nie - kobiety to różne osoby, mogą zamieniać się miejscami",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$4$ sposoby",
              "feedback": "Za dużo - to tylko permutacja 2 elementów na 2 pozycjach",
              "is_correct": false
            }
          ],
          "explanation_after": "Dwie różne kobiety na dwóch pozycjach dają $2! = 2$ permutacje."
        }
      },
      {
        "step": 7,
        "hint": "Ile sposobów na ustawienie 6 mężczyzn na pozostałych pozycjach?",
        "expression": "6 mężczyzn na pozycjach 3-8: $6!$ sposobów",
        "explanation": "Standardowa permutacja 6 mężczyzn na 6 pozycjach"
      },
      {
        "step": 8,
        "hint": "Jak obliczyć całkowitą liczbę sposobów w podpunkcie b)?",
        "expression": "Podpunkt b): $2! \\cdot 6! = 2 \\cdot 720 = 1440$ sposobów",
        "explanation": "Mnożymy sposoby ustawienia kobiet i mężczyzn",
        "why": "Zasada mnożenia: niezależne wybory się mnożą."
      },
      {
        "step": 9,
        "hint": "W podpunkcie c) jakie mamy ograniczenie?",
        "expression": "Podpunkt c): 2 kobiety i 3 mężczyzn, kobiety NIE obok siebie",
        "explanation": "Mamy 5 osób, ale kobiety nie mogą stać na sąsiadujących pozycjach"
      },
      {
        "step": 10,
        "hint": "Jak rozwiązać problem 'nie obok siebie'?",
        "expression": "Metoda: najpierw 3 mężczyzn, potem kobiety w luki między nimi",
        "explanation": "Mężczyźni utworzą 4 luki: _M_M_M_ gdzie można wstawić kobiety",
        "interactive_choice": {
          "prompt": "Jaka metoda najlepiej rozwiąże warunek 'kobiety nie obok siebie'?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw ustawić mężczyzn, potem wstawić kobiety w luki",
              "feedback": "Świetnie! To klasyczna metoda - mężczyźni tworzą 'separatory' dla kobiet",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie permutacje minus te gdzie kobiety są obok",
              "feedback": "Możliwe, ale bardziej skomplikowane - metoda z lukami jest prostsza",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Traktować pary kobiet jako jeden element",
              "feedback": "Nie - to by dało permutacje gdzie kobiety SĄ obok siebie",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda luk: ustawiamy elementy bez ograniczeń, potem wstawiamy ograniczone elementy w dostępne miejsca."
        }
      },
      {
        "step": 11,
        "hint": "Na ile sposobów można ustawić 3 mężczyzn?",
        "expression": "3 mężczyzn: $3! = 6$ sposobów",
        "explanation": "Standardowa permutacja 3 mężczyzn"
      },
      {
        "step": 12,
        "hint": "Ile luk powstaje między 3 mężczyznami?",
        "expression": "Luki: _M_M_M_ daje 4 możliwe pozycje dla kobiet",
        "explanation": "3 mężczyzn tworzy 4 luki (przed pierwszym, między nimi, po ostatnim)",
        "why": "n elementów tworzy n+1 luk do wstawienia innych elementów."
      },
      {
        "step": 13,
        "hint": "Na ile sposobów można wybrać 2 luki z 4 dostępnych dla kobiet?",
        "expression": "Wybór 2 luk z 4: $\\binom{4}{2} = 6$ sposobów",
        "explanation": "Kombinacje - kolejność wyboru luk nie ma znaczenia"
      },
      {
        "step": 14,
        "hint": "Na ile sposobów można ustawić 2 kobiety w wybranych lukach?",
        "expression": "2 kobiety w wybranych lukach: $2! = 2$ sposoby",
        "explanation": "W każdej parze wybranych luk kobiety mogą się zamieniać miejscami"
      },
      {
        "step": 15,
        "hint": "Jaka jest całkowita liczba sposobów w podpunkcie c)?",
        "expression": "Podpunkt c): $3! \\cdot \\binom{4}{2} \\cdot 2! = 6 \\cdot 6 \\cdot 2 = 72$ sposoby",
        "explanation": "Mnożymy: sposoby ustawienia mężczyzn × wybór luk × ustawienie kobiet w lukach"
      }
    ],
    "solutions": [
      "a) $7! = 5040$ sposobów",
      "b) $2! \\cdot 6! = 1440$ sposobów",
      "c) $3! \\cdot \\binom{4}{2} \\cdot 2! = 72$ sposoby"
    ],
    "parameters": {
      "method_a": "Ustalona pozycja + permutacja pozostałych",
      "method_b": "Permutacje grup na ustalonych pozycjach",
      "method_c": "Metoda luk (separatorów)"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 15,
        "stepsWithWhy": 3,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-15T12:46:07.973Z"
  },
  {
    "id": "five_digit_counting",
    "topic": "Kombinatoryka - liczby o różnych cyfrach",
    "difficulty": 4,
    "statement": "Ile jest liczb pięciocyfrowych parzystych o różnych cyfrach, jeśli w zapisie tych liczb użyto tylko cyfr 0,1,2,3 i 4? Ile jest takich liczb nieparzystych?",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mamy do dyspozycji i jakie są ograniczenia?",
        "expression": "Cyfry: $\\{0, 1, 2, 3, 4\\}$, liczba pięciocyfrowa o różnych cyfrach",
        "explanation": "Mamy dokładnie 5 cyfr i potrzebujemy 5 różnych pozycji - użyjemy wszystkich cyfr"
      },
      {
        "step": 2,
        "hint": "Które cyfry mogą stać na pierwszej pozycji liczby pięciocyfrowej?",
        "expression": "Pierwsza cyfra: $\\{1, 2, 3, 4\\}$ - 4 możliwości",
        "explanation": "Zero nie może być pierwszą cyfrą liczby pięciocyfrowej",
        "interactive_choice": {
          "prompt": "Jakie cyfry mogą być pierwszą cyfrą liczby pięciocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie cyfry: 0, 1, 2, 3, 4",
              "feedback": "Nie! Liczba pięciocyfrowa nie może zaczynać się od 0.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Tylko cyfry: 1, 2, 3, 4",
              "feedback": "Dokładnie! Pierwsza cyfra nie może być zerem.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko cyfry parzyste: 0, 2, 4",
              "feedback": "Nie - zero nie może być pierwszą cyfrą, a parzystość dotyczy ostatniej cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Pierwsza cyfra liczby pięciocyfrowej musi być różna od zera, więc mamy 4 możliwości."
        }
      },
      {
        "step": 3,
        "hint": "Które cyfry decydują o parzystości liczby?",
        "expression": "Cyfry parzyste: $\\{0, 2, 4\\}$, cyfry nieparzyste: $\\{1, 3\\}$",
        "explanation": "Parzystość liczby zależy od ostatniej cyfry",
        "why": "Liczba jest parzysta gdy kończy się cyfrą parzystą (0, 2, 4), nieparzysta gdy kończy się cyfrą nieparzystą (1, 3)."
      },
      {
        "step": 4,
        "hint": "Jak podzielić problem na przypadki?",
        "expression": "Przypadek 1: liczby parzyste (ostatnia cyfra $\\in \\{0, 2, 4\\}$)",
        "explanation": "Rozpatrujemy osobno liczby parzyste i nieparzyste",
        "interactive_choice": {
          "prompt": "Jak najlepiej podzielić to zadanie na przypadki?",
          "options": [
            {
              "id": "A",
              "text": "Według pierwszej cyfry (1, 2, 3, 4)",
              "feedback": "Możliwe, ale da dużo przypadków do rozpatrzenia.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Według ostatniej cyfry (parzyste vs nieparzyste)",
              "feedback": "Świetnie! To bezpośrednio odpowiada na pytanie o parzystość.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Według pozycji cyfry 0",
              "feedback": "Skomplikowane - lepiej skupić się na parzystości ostatniej cyfry.",
              "is_correct": false
            }
          ],
          "explanation_after": "Podział na liczby parzyste i nieparzyste jest naturalny dla tego zadania."
        }
      },
      {
        "step": 5,
        "hint": "Ile jest liczb parzystych kończących się na 0?",
        "expression": "Ostatnia cyfra = 0: pierwsza cyfra z $\\{1, 2, 3, 4\\}$, środkowe z pozostałych",
        "explanation": "Gdy ostatnia cyfra to 0, pierwsza może być 1, 2, 3 lub 4"
      },
      {
        "step": 6,
        "hint": "Ile sposobów ułożenia cyfr gdy ostatnia to 0?",
        "expression": "4 sposoby na pierwszą × 3! sposobów na środkowe = $4 \\times 6 = 24$",
        "explanation": "Pierwsza cyfra: 4 wybory, pozostałe 3 cyfry permutujemy na 3 środkowych pozycjach"
      },
      {
        "step": 7,
        "hint": "Ile jest liczb parzystych kończących się na 2 lub 4?",
        "expression": "Ostatnia cyfra = 2: pierwsza z $\\{1, 3, 4\\}$, środkowe z $\\{0, 1, 3, 4\\} \\setminus \\{pierwsza\\}$",
        "explanation": "Gdy ostatnia to 2, pierwsza może być tylko 1, 3 lub 4 (nie może być 0 ani 2)",
        "interactive_choice": {
          "prompt": "Jak policzyć liczby kończące się na 2 lub 4?",
          "options": [
            {
              "id": "A",
              "text": "Tak samo jak dla 0 - każda da 24 liczby",
              "feedback": "Nie! Gdy ostatnia cyfra to 2 lub 4, może być pierwszą, więc mniej możliwości.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Trzeba rozpatrzyć czy cyfra może być pierwszą",
              "feedback": "Dokładnie! Cyfry 2 i 4 mogą być pierwsze, więc mamy mniej opcji.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Nie można - za mało cyfr",
              "feedback": "Można! Ale trzeba uważać na ograniczenia pierwszej pozycji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy ostatnia cyfra to 2 lub 4, nie może być jednocześnie pierwszą, więc mamy inne obliczenia."
        }
      },
      {
        "step": 8,
        "hint": "Ile sposobów gdy ostatnia cyfra to 2?",
        "expression": "3 sposoby na pierwszą × 3! sposobów na środkowe = $3 \\times 6 = 18$",
        "explanation": "Pierwsza: 3 wybory, pozostałe 3 cyfry (w tym 0) na środkowych pozycjach"
      },
      {
        "step": 9,
        "hint": "Ile sposobów gdy ostatnia cyfra to 4?",
        "expression": "Analogicznie: $3 \\times 6 = 18$ sposobów",
        "explanation": "Identyczne rozumowanie jak dla cyfry 2"
      },
      {
        "step": 10,
        "hint": "Ile łącznie jest liczb parzystych?",
        "expression": "Liczby parzyste: $24 + 18 + 18 = 60$",
        "explanation": "Sumujemy przypadki dla ostatnich cyfr 0, 2, 4"
      },
      {
        "step": 11,
        "hint": "Ile łącznie jest wszystkich liczb o różnych cyfrach?",
        "expression": "Wszystkie liczby: $4 \\times 4! = 4 \\times 24 = 96$",
        "explanation": "4 wybory pierwszej cyfry, pozostałe 4 cyfry permutujemy",
        "why": "To standardowy wzór: gdy mamy n różnych obiektów i k pozycji z ograniczeniami, liczymy pozycję po pozycji."
      },
      {
        "step": 12,
        "hint": "Ile jest liczb nieparzystych?",
        "expression": "Liczby nieparzyste: $96 - 60 = 36$",
        "explanation": "Odejmujemy parzyste od wszystkich liczb"
      }
    ],
    "solutions": [
      "Liczb parzystych: 60",
      "Liczb nieparzystych: 36"
    ],
    "parameters": {
      "digits": "{0, 1, 2, 3, 4}",
      "constraint": "różne cyfry, pięciocyfrowe"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 12,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-15T12:46:45.711Z"
  },
  {
    "id": "counting_four_digit_odd",
    "topic": "Kombinatoryka - zliczanie",
    "difficulty": 4,
    "statement": "Ile jest liczb czterocyfrowych nieparzystych, w których zapisie: a) występują tylko cyfry 4 i 5, b) występuje dokładnie jedna cyfra 4 i dokładnie jedna cyfra 5?",
    "steps": [
      {
        "step": 1,
        "hint": "Co oznacza, że liczba jest nieparzysta?",
        "expression": "Liczba nieparzysta kończy się cyfrą nieparzystą: 1, 3, 5, 7, 9",
        "explanation": "Ostatnia cyfra determinuje parzystość liczby"
      },
      {
        "step": 2,
        "hint": "Jak podejść do tego zadania kombinatorycznego?",
        "expression": "Analizujemy pozycje: _ _ _ _ (tysiące, setki, dziesiątki, jedności)",
        "explanation": "Liczba czterocyfrowa ma 4 pozycje do wypełnienia",
        "interactive_choice": {
          "prompt": "Którą metodę zastosować do zliczania liczb czterocyfrowych?",
          "options": [
            {
              "id": "A",
              "text": "Zasada mnożenia - pozycja po pozycji",
              "feedback": "Świetnie! To najlepszy sposób - analizujemy każdą pozycję osobno.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wzory na permutacje i kombinacje",
              "feedback": "Nie pasuje - nie mamy tu permutacji czy kombinacji w czystej postaci.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zasada włączeń i wyłączeń",
              "feedback": "Za skomplikowane dla tego zadania - zasada mnożenia wystarczy.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: jeśli wybór można podzielić na etapy, to mnożymy liczby możliwości."
        }
      },
      {
        "step": 3,
        "hint": "Jakie ograniczenia mamy dla części a)?",
        "expression": "Część a): tylko cyfry 4 i 5, liczba nieparzysta",
        "explanation": "Cyfry: {4, 5}, ostatnia pozycja musi być nieparzysta",
        "why": "W części a) mamy ograniczony zbiór cyfr i warunek nieparzystości."
      },
      {
        "step": 4,
        "hint": "Która cyfra może stać na ostatniej pozycji w części a)?",
        "expression": "Ostatnia pozycja: tylko cyfra 5 (jedyna nieparzysta z {4, 5})",
        "explanation": "Cyfra 4 jest parzysta, więc nie może być na końcu"
      },
      {
        "step": 5,
        "hint": "Ile możliwości mamy dla pozostałych trzech pozycji w części a)?",
        "expression": "Pozycje 1, 2, 3: każda może być 4 lub 5, więc $2 \\times 2 \\times 2 = 8$ możliwości",
        "explanation": "Każda z pierwszych trzech pozycji ma 2 wybory"
      },
      {
        "step": 6,
        "hint": "Jaka jest odpowiedź dla części a)?",
        "expression": "Część a): $2 \\times 2 \\times 2 \\times 1 = 8$ liczb",
        "explanation": "Mnożymy możliwości dla każdej pozycji: tysiące × setki × dziesiątki × jedności"
      },
      {
        "step": 7,
        "hint": "Jakie są warunki w części b)?",
        "expression": "Część b): jedna pozycja = 4, jedna pozycja = 5, dwie pozycje ∈ {0,1,2,3,6,7,8,9}",
        "explanation": "Rozkładamy problem na wybór pozycji i wypełnienie pozostałych miejsc",
        "interactive_choice": {
          "prompt": "Co oznacza 'dokładnie jedna cyfra 4 i dokładnie jedna cyfra 5' w liczbie czterocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Jedna pozycja to 4, jedna to 5, reszta to inne cyfry",
              "feedback": "Dokładnie! Pozostałe dwie pozycje to cyfry różne od 4 i 5.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie cztery pozycje to 4 lub 5",
              "feedback": "Nie - to byłoby 'tylko cyfry 4 i 5', a nie 'dokładnie jedna z każdej'.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Co najmniej jedna 4 i co najmniej jedna 5",
              "feedback": "Nie - 'dokładnie' oznacza równo jedną, nie więcej.",
              "is_correct": false
            }
          ],
          "explanation_after": "Dokładnie jedna 4 i jedna 5 oznacza: pozostałe cyfry to {0,1,2,3,6,7,8,9}."
        }
      },
      {
        "step": 8,
        "hint": "Które cyfry mogą być na ostatniej pozycji w części b)?",
        "expression": "Ostatnia pozycja: 5 możliwości {1, 3, 5, 7, 9}",
        "explanation": "Cyfry nieparzyste dostępne w naszym zbiorze",
        "interactive_choice": {
          "prompt": "Jakie cyfry mogą kończyć liczbę nieparzystą w części b)?",
          "options": [
            {
              "id": "A",
              "text": "Tylko cyfra 5 (z wymaganych 4 i 5)",
              "feedback": "Nie tylko! Inne nieparzyste cyfry też mogą: 1, 3, 7, 9.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Cyfra 5 lub nieparzyste z {0,1,2,3,6,7,8,9}",
              "feedback": "Tak! To daje nam 5 lub {1,3,7,9} = 5 możliwości.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Dowolna cyfra z {0,1,2,3,6,7,8,9}",
              "feedback": "Nie - liczba musi być nieparzysta, więc 0,2,6,8 odpada.",
              "is_correct": false
            }
          ],
          "explanation_after": "Nieparzyste cyfry: 5 (wymagana) lub 1,3,7,9 (z pozostałych) = 5 opcji."
        }
      },
      {
        "step": 9,
        "hint": "Ile przypadków trzeba rozpatrzyć w części b)?",
        "expression": "Przypadek 1: ostatnia cyfra = 5, Przypadek 2: ostatnia cyfra ∈ {1,3,7,9}",
        "explanation": "Dzielimy na przypadki ze względu na ostatnią cyfrę",
        "why": "Podział na przypadki ułatwia zliczanie - różne ograniczenia dla różnych końcówek."
      },
      {
        "step": 10,
        "hint": "Ile liczb w przypadku 1 (kończy się na 5)?",
        "expression": "Przypadek 1: _ _ _ 5, gdzie jedna z pierwszych trzech pozycji = 4",
        "explanation": "Mamy 5 na końcu, więc 4 musi być na jednej z pozycji 1, 2, 3"
      },
      {
        "step": 11,
        "hint": "Na ile sposobów można umieścić cyfrę 4 w przypadku 1?",
        "expression": "Wybór pozycji dla 4: $\\binom{3}{1} = 3$ sposoby (pozycja 1, 2 lub 3)",
        "explanation": "Cyfra 4 może być na pozycji tysięcy, setek lub dziesiątek"
      },
      {
        "step": 12,
        "hint": "Czym wypełnić pozostałe dwie pozycje w przypadku 1?",
        "expression": "Pozostałe 2 pozycje: cyfry z {0,1,2,3,6,7,8,9}, ale pozycja tysięcy ≠ 0",
        "explanation": "Musimy uważać na pozycję tysięcy - nie może być zerem"
      },
      {
        "step": 13,
        "hint": "Ile możliwości dla przypadku 1?",
        "expression": "Przypadek 1: $3 \\times 7 \\times 8 = 168$ (gdy 4 nie na pozycji tysięcy) + $2 \\times 8 \\times 8 = 128$ (gdy 4 na pozycji tysięcy)",
        "explanation": "Osobno liczymy gdy 4 jest/nie jest na pierwszej pozycji"
      },
      {
        "step": 14,
        "hint": "Ile liczb w przypadku 2 (kończy się na 1, 3, 7 lub 9)?",
        "expression": "Przypadek 2: _ _ _ X, gdzie X ∈ {1,3,7,9}, jedna pozycja = 4, jedna = 5",
        "explanation": "Ostatnia cyfra ustalona, rozmieszczamy 4 i 5 na pierwszych trzech pozycjach"
      },
      {
        "step": 15,
        "hint": "Na ile sposobów rozmieścić 4 i 5 na trzech pierwszych pozycjach?",
        "expression": "Wybór 2 pozycji z 3 dla cyfr 4 i 5: $\\binom{3}{2} = 3$ sposoby, każdy w 2 kolejnościach = 6",
        "explanation": "Wybieramy pozycje, potem przypisujemy cyfry 4 i 5"
      },
      {
        "step": 16,
        "hint": "Czym wypełnić trzecią pozycję w przypadku 2?",
        "expression": "Trzecia pozycja: cyfra z {0,1,2,3,6,7,8,9} \\ {ostatnia_cyfra}",
        "explanation": "Pozostała pozycja nie może być równa ostatniej cyfrze ani 4, ani 5"
      },
      {
        "step": 17,
        "hint": "Ile możliwości w przypadku 2?",
        "expression": "Przypadek 2: $4 \\times 6 \\times 7 = 168$ liczb",
        "explanation": "4 wybory ostatniej cyfry × 6 rozmieszczenia 4,5 × 7 wyborów trzeciej cyfry"
      },
      {
        "step": 18,
        "hint": "Jaka jest końcowa odpowiedź dla części b)?",
        "expression": "Część b): $168 + 168 = 336$ liczb",
        "explanation": "Sumujemy oba przypadki"
      }
    ],
    "solutions": [
      "a) 8 liczb",
      "b) 336 liczb"
    ],
    "parameters": {
      "part_a": "tylko cyfry 4 i 5",
      "part_b": "dokładnie jedna cyfra 4 i jedna cyfra 5"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 18,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-15T12:47:37.229Z"
  },
  {
    "id": "even_product_pairs",
    "topic": "Kombinatoryka i prawdopodobieństwo",
    "difficulty": 3,
    "statement": "Ze zbioru liczb {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15} losujemy bez zwracania dwa razy po jednej liczbie. Wylosowane liczby tworzą parę (a, b), gdzie a jest wynikiem pierwszego losowania, b jest wynikiem drugiego losowania. Oblicz, ile jest wszystkich par (a, b) takich, że iloczyn $a \\cdot b$ jest liczbą parzystą.",
    "steps": [
      {
        "step": 1,
        "hint": "Kiedy iloczyn dwóch liczb jest parzysty?",
        "expression": "Iloczyn $a \\cdot b$ jest parzysty, gdy co najmniej jedna z liczb $a$ lub $b$ jest parzysta",
        "explanation": "Iloczyn jest parzysty gdy zawiera czynnik parzysty",
        "why": "To kluczowa obserwacja - iloczyn jest nieparzysty tylko gdy obie liczby są nieparzyste"
      },
      {
        "step": 2,
        "hint": "Jak podzielić zbiór {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15} na parzyste i nieparzyste?",
        "expression": "Liczby parzyste: {2,4,6,8,10,12,14} - jest ich 7\nLiczby nieparzyste: {1,3,5,7,9,11,13,15} - jest ich 8",
        "explanation": "Dzielimy zbiór na dwie kategorie"
      },
      {
        "step": 3,
        "hint": "Którą metodę wybierzesz do policzenia par o parzystym iloczynie?",
        "expression": "Użyjemy wzoru: pary parzyste = wszystkie pary - pary nieparzyste",
        "explanation": "Wybieramy metodę przez dopełnienie",
        "interactive_choice": {
          "prompt": "Jak najefektywniej policzyć pary (a,b) o parzystym iloczynie?",
          "options": [
            {
              "id": "A",
              "text": "Bezpośrednio - liczyć wszystkie pary z co najmniej jedną liczbą parzystą",
              "feedback": "Możliwe, ale pracochłonne - trzeba rozpatrzyć wiele przypadków",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez dopełnienie - policzyć wszystkie pary, potem odjąć te o nieparzystym iloczynie",
              "feedback": "Świetnie! To znacznie prostsze - pary nieparzyste to tylko (nieparzysta, nieparzysta)",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Osobno przypadki: (parzysta, parzysta), (parzysta, nieparzysta), (nieparzysta, parzysta)",
              "feedback": "Można, ale więcej rachunków niż metoda dopełnienia",
              "is_correct": false
            }
          ],
          "explanation_after": "Metoda dopełnienia jest najefektywniejsza - łatwiej policzyć pary nieparzyste"
        }
      },
      {
        "step": 4,
        "hint": "Ile jest wszystkich możliwych par (a,b) przy losowaniu bez zwracania?",
        "expression": "Wszystkich par: $15 \\cdot 14 = 210$",
        "explanation": "Pierwsza liczba: 15 możliwości, druga: 14 możliwości (bez zwracania)"
      },
      {
        "step": 5,
        "hint": "Kiedy iloczyn $a \\cdot b$ jest nieparzysty?",
        "expression": "Iloczyn jest nieparzysty gdy obie liczby $a$ i $b$ są nieparzyste",
        "explanation": "Jedyny przypadek nieparzystego iloczynu"
      },
      {
        "step": 6,
        "hint": "Ile jest par (a,b) gdzie obie liczby są nieparzyste?",
        "expression": "Par nieparzystych: $8 \\cdot 7 = 56$",
        "explanation": "Pierwsza nieparzysta: 8 wybory, druga nieparzysta: 7 pozostałych",
        "interactive_choice": {
          "prompt": "Jak policzyć pary (nieparzysta, nieparzysta) przy losowaniu bez zwracania?",
          "options": [
            {
              "id": "A",
              "text": "$8 \\times 8 = 64$ pary",
              "feedback": "Nie - to byłoby przy losowaniu ze zwracaniem! Tutaj druga liczba ma mniej możliwości",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "$8 \\times 7 = 56$ par",
              "feedback": "Dokładnie! Pierwsza nieparzysta: 8 możliwości, druga nieparzysta: 7 pozostałych",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "$\\binom{8}{2} = 28$ par",
              "feedback": "To liczba kombinacji - ale tutaj kolejność ma znaczenie (a,b) ≠ (b,a)",
              "is_correct": false
            }
          ],
          "explanation_after": "Przy losowaniu bez zwracania druga liczba ma o jedną możliwość mniej"
        }
      },
      {
        "step": 7,
        "hint": "Ile jest par o parzystym iloczynie?",
        "expression": "Par o parzystym iloczynie: $210 - 56 = 154$",
        "explanation": "Odejmujemy pary nieparzyste od wszystkich par"
      }
    ],
    "solutions": [
      "154"
    ],
    "parameters": {
      "total_numbers": 15,
      "even_numbers": 7,
      "odd_numbers": 8,
      "sampling": "bez zwracania"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 7,
        "stepsWithWhy": 1,
        "stepsWithChoice": 2,
        "totalOptions": 6,
        "correctOptions": 2
      }
    },
    "timestamp": "2025-09-17T07:33:12.423Z"
  },
  {
    "id": "can_number_combinatorics",
    "topic": "Kombinatoryka - permutacje z ograniczeniami",
    "difficulty": 4,
    "statement": "E-dowód ma zapisany na pierwszej stronie specjalny sześciocyfrowy numer CAN, który zabezpiecza go przed odczytaniem danych przez osoby nieuprawnione. Oblicz, ile jest wszystkich sześciocyfrowych numerów CAN o różnych cyfrach, spełniających warunek: trzy pierwsze cyfry są kolejnymi wyrazami ciągu arytmetycznego o różnicy (-3).",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą być pierwszą cyfrą ciągu arytmetycznego o różnicy (-3)?",
        "expression": "Pierwsza cyfra $a \\in \\{6, 7, 8, 9\\}$",
        "explanation": "Ograniczenie wynika z warunków: $a-3 \\geq 0$ i $a-6 \\geq 0$",
        "interactive_choice": {
          "prompt": "Jeśli pierwsza cyfra to $a$, druga to $a-3$, trzecia to $a-6$, jakie wartości może przyjąć $a$?",
          "options": [
            {
              "id": "A",
              "text": "$a \\in \\{6, 7, 8, 9\\}$",
              "feedback": "Świetnie! Tylko te cyfry dają ciąg z cyframi nieujemnymi.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "$a \\in \\{3, 4, 5, 6, 7, 8, 9\\}$",
              "feedback": "Nie - dla $a=3$ mamy $a-6=-3$, co nie jest cyfrą.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "$a \\in \\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
              "feedback": "Nie - większość da ujemne wartości dla $a-6$.",
              "is_correct": false
            }
          ],
          "explanation_after": "Potrzebujemy $a-6 \\geq 0$, więc $a \\geq 6$. Dodatkowo $a \\leq 9$ jako cyfra."
        }
      },
      {
        "step": 2,
        "hint": "Jakie są możliwe trójki pierwszych trzech cyfr?",
        "expression": "$(6,3,0)$, $(7,4,1)$, $(8,5,2)$, $(9,6,3)$",
        "explanation": "Wszystkie możliwe ciągi arytmetyczne o różnicy (-3)",
        "why": "Każda trójka ma różne cyfry, co jest wymagane w zadaniu."
      },
      {
        "step": 3,
        "hint": "Ile cyfr zostało do wyboru na pozycje 4, 5, 6?",
        "expression": "Na pozycje 4, 5, 6 mamy 7 dostępnych cyfr",
        "explanation": "Z 10 cyfr (0-9) używamy 3 w pierwszych pozycjach, zostaje 7",
        "interactive_choice": {
          "prompt": "Dla każdej trójki pierwszych cyfr, ile cyfr pozostało na ostatnie 3 pozycje?",
          "options": [
            {
              "id": "A",
              "text": "7 cyfr (10 minus 3 użyte)",
              "feedback": "Dokładnie! Mamy 10 cyfr, użyliśmy 3 różne, zostało 7.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "6 cyfr",
              "feedback": "Nie - zapomniałeś, że mamy 10 cyfr (0-9), nie 9.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Zależy od konkretnej trójki",
              "feedback": "Nie - każda trójka używa 3 różnych cyfr, więc zawsze zostaje 7.",
              "is_correct": false
            }
          ],
          "explanation_after": "Niezależnie od wyboru trójki, zawsze używamy 3 różne cyfry z 10 dostępnych."
        }
      },
      {
        "step": 4,
        "hint": "Jak obliczyć liczbę sposobów wypełnienia pozycji 4, 5, 6?",
        "expression": "$V_7^3 = 7 \\cdot 6 \\cdot 5 = 210$",
        "explanation": "Liczba sposobów wypełnienia ostatnich trzech pozycji",
        "interactive_choice": {
          "prompt": "Jaką metodą obliczyć liczbę sposobów ustawienia 3 różnych cyfr z 7 dostępnych?",
          "options": [
            {
              "id": "A",
              "text": "Wariacje: $V_7^3 = 7 \\cdot 6 \\cdot 5$",
              "feedback": "Perfekcyjnie! Kolejność ma znaczenie, cyfry muszą być różne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Kombinacje: $C_7^3 = \\frac{7!}{3!4!}$",
              "feedback": "Nie - kombinacje ignorują kolejność, a tu pozycje się różnią.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Po prostu $7^3$",
              "feedback": "Nie - to pozwalałoby na powtarzanie cyfr.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wariacje bez powtórzeń: na 4. pozycji 7 wyborów, na 5. pozycji 6, na 6. pozycji 5."
        }
      },
      {
        "step": 5,
        "hint": "Ile mamy możliwych trójek pierwszych cyfr?",
        "expression": "4 możliwe trójki: $(6,3,0)$, $(7,4,1)$, $(8,5,2)$, $(9,6,3)$",
        "explanation": "Każda odpowiada innemu wyborowi pierwszej cyfry $a$"
      },
      {
        "step": 6,
        "hint": "Jak obliczyć całkowitą liczbę numerów CAN?",
        "expression": "$4 \\cdot 210 = 840$",
        "explanation": "Mnożymy liczbę możliwych trójek przez liczbę sposobów wypełnienia pozostałych pozycji",
        "why": "Zasada mnożenia: dla każdej z 4 trójek mamy 210 sposobów dokończenia numeru."
      }
    ],
    "solutions": [
      "840"
    ],
    "parameters": {
      "constraints": "6 różnych cyfr, pierwsze 3 w ciągu arytmetycznym o różnicy (-3)"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 6,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:33:42.693Z"
  },
  {
    "id": "three_digit_divisible_6_or_15",
    "topic": "Zasada włączeń i wyłączeń",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb naturalnych trzycyfrowych podzielnych przez 6 lub podzielnych przez 15.",
    "steps": [
      {
        "step": 1,
        "hint": "Jaki jest zakres liczb trzycyfrowych?",
        "expression": "Liczby trzycyfrowe: $100 \\leq n \\leq 999$",
        "explanation": "Najmniejsza liczba trzycyfrowa to 100, największa to 999"
      },
      {
        "step": 2,
        "hint": "Którą metodę zastosować do zliczania liczb podzielnych przez 6 lub przez 15?",
        "expression": "$|A \\cup B| = |A| + |B| - |A \\cap B|$",
        "explanation": "Gdzie A - liczby podzielne przez 6, B - liczby podzielne przez 15",
        "why": "Niektóre liczby są podzielne przez oba dzielniki, więc zwykłe dodawanie dałoby błędny wynik.",
        "interactive_choice": {
          "prompt": "Jak najlepiej policzyć liczby podzielne przez 6 lub przez 15?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby podzielne przez 6 i przez 15",
              "feedback": "Nie - niektóre liczby będą policzone dwukrotnie!",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Użyć zasady włączeń i wyłączeń: |A ∪ B| = |A| + |B| - |A ∩ B|",
              "feedback": "Doskonale! To uniknie podwójnego liczenia.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Sprawdzić każdą liczbę od 100 do 999 osobno",
              "feedback": "Możliwe, ale bardzo pracochłonne - jest lepszy sposób.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń i wyłączeń pozwala uniknąć podwójnego liczenia liczb podzielnych przez oba dzielniki."
        }
      },
      {
        "step": 3,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez 6?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{6} \\rceil \\cdot 6 = 17 \\cdot 6 = 102$",
        "explanation": "Pierwsza liczba trzycyfrowa podzielna przez 6. Symbol $\\lceil \\ \\rceil$ oznacza sufit (zaokrąglenie w górę)"
      },
      {
        "step": 4,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez 6?",
        "expression": "Największa: $\\lfloor \\frac{999}{6} \\rfloor \\cdot 6 = 166 \\cdot 6 = 996$",
        "explanation": "Ostatnia liczba trzycyfrowa podzielna przez 6. Symbol $\\lfloor \\ \\rfloor$ oznacza podłogę (zaokrąglenie w dół)"
      },
      {
        "step": 5,
        "hint": "Ile jest liczb w ciągu arytmetycznym od 102 do 996 z różnicą 6?",
        "expression": "$|A| = \\frac{996 - 102}{6} + 1 = \\frac{894}{6} + 1 = 149 + 1 = 150$",
        "explanation": "Liczba elementów ciągu arytmetycznego"
      },
      {
        "step": 6,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez 15?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{15} \\rceil \\cdot 15 = 7 \\cdot 15 = 105$",
        "explanation": "Pierwsza liczba trzycyfrowa podzielna przez 15"
      },
      {
        "step": 7,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez 15?",
        "expression": "Największa: $\\lfloor \\frac{999}{15} \\rfloor \\cdot 15 = 66 \\cdot 15 = 990$",
        "explanation": "Ostatnia liczba trzycyfrowa podzielna przez 15"
      },
      {
        "step": 8,
        "hint": "Ile jest liczb podzielnych przez 15?",
        "expression": "$|B| = \\frac{990 - 105}{15} + 1 = \\frac{885}{15} + 1 = 59 + 1 = 60$",
        "explanation": "Liczba trzycyfrowych liczb podzielnych przez 15"
      },
      {
        "step": 9,
        "hint": "Przez co są podzielne liczby należące do przecięcia zbiorów A i B?",
        "expression": "$NWW(6, 15) = 30$",
        "explanation": "Rozkład: $6 = 2 \\cdot 3$, $15 = 3 \\cdot 5$, więc $NWW = 2 \\cdot 3 \\cdot 5 = 30$",
        "why": "Liczba jest podzielna przez oba dzielniki wtedy i tylko wtedy, gdy jest podzielna przez ich NWW.",
        "interactive_choice": {
          "prompt": "Liczby podzielne jednocześnie przez 6 i przez 15 są podzielne przez:",
          "options": [
            {
              "id": "A",
              "text": "Przez 21 (suma 6 + 15)",
              "feedback": "Nie - suma nie ma znaczenia dla podzielności.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Przez 90 (iloczyn 6 × 15)",
              "feedback": "Nie - iloczyn jest za duży, potrzebujemy NWW.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Przez 30 (NWW(6,15))",
              "feedback": "Dokładnie! NWW(6,15) = 30, bo 6 = 2×3, 15 = 3×5.",
              "is_correct": true
            }
          ],
          "explanation_after": "Liczby podzielne przez oba dzielniki są podzielne przez ich najmniejszą wspólną wielokrotność."
        }
      },
      {
        "step": 10,
        "hint": "Ile jest liczb trzycyfrowych podzielnych przez 30?",
        "expression": "Najmniejsza: $\\lceil \\frac{100}{30} \\rceil \\cdot 30 = 4 \\cdot 30 = 120$",
        "explanation": "Pierwsza liczba trzycyfrowa podzielna przez 30"
      },
      {
        "step": 11,
        "hint": "Jaka jest największa liczba trzycyfrowa podzielna przez 30?",
        "expression": "Największa: $\\lfloor \\frac{999}{30} \\rfloor \\cdot 30 = 33 \\cdot 30 = 990$",
        "explanation": "Ostatnia liczba trzycyfrowa podzielna przez 30"
      },
      {
        "step": 12,
        "hint": "Ile jest liczb w przecięciu zbiorów A i B?",
        "expression": "$|A \\cap B| = \\frac{990 - 120}{30} + 1 = \\frac{870}{30} + 1 = 29 + 1 = 30$",
        "explanation": "Liczba trzycyfrowych liczb podzielnych przez 30"
      },
      {
        "step": 13,
        "hint": "Jak obliczyć końcowy wynik używając zasady włączeń i wyłączeń?",
        "expression": "$|A \\cup B| = 150 + 60 - 30 = 180$",
        "explanation": "Stosujemy zasadę włączeń i wyłączeń",
        "interactive_choice": {
          "prompt": "Jaki jest wzór na liczbę elementów sumy zbiorów A i B?",
          "options": [
            {
              "id": "A",
              "text": "|A ∪ B| = |A| + |B|",
              "feedback": "Nie - to nie uwzględnia przecięcia, będzie za dużo.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "|A ∪ B| = |A| + |B| - |A ∩ B|",
              "feedback": "Tak! Odejmujemy przecięcie, bo inaczej liczymy je dwukrotnie.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "|A ∪ B| = |A| - |B| + |A ∩ B|",
              "feedback": "Nie - to nieprawidłowy wzór.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada włączeń i wyłączeń: dodajemy oba zbiory, ale odejmujemy przecięcie."
        }
      }
    ],
    "solutions": [
      "180"
    ],
    "parameters": {
      "range": "liczby trzycyfrowe: 100-999",
      "divisors": "6 lub 15",
      "method": "zasada włączeń i wyłączeń"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 13,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:34:14.735Z"
  },
  {
    "id": "five_digit_counting_with_conditions",
    "topic": "Kombinatoryka - zliczanie z warunkami",
    "difficulty": 4,
    "statement": "Ile jest liczb pięciocyfrowych, spełniających jednocześnie następujące cztery warunki: (1) cyfry setek, dziesiątek i jedności są parzyste, (2) cyfra setek jest większa od cyfry dziesiątek, (3) cyfra dziesiątek jest większa od cyfry jedności, (4) w zapisie tej liczby nie występuje cyfra 9.",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć cyfry liczby pięciocyfrowej?",
        "expression": "Liczba pięciocyfrowa: $\\overline{abcde}$ gdzie $a$ - dziesiątki tysięcy, $b$ - tysiące, $c$ - setki, $d$ - dziesiątki, $e$ - jedności",
        "explanation": "Ustalamy oznaczenia dla każdej pozycji w liczbie"
      },
      {
        "step": 2,
        "hint": "Które cyfry muszą być parzyste według warunków?",
        "expression": "Cyfry $c$, $d$, $e$ muszą być parzyste",
        "explanation": "Z warunków (1) wynika, że cyfry setek, dziesiątek i jedności są parzyste"
      },
      {
        "step": 3,
        "hint": "Jakie cyfry parzyste możemy użyć przy ograniczeniu braku cyfry 9?",
        "expression": "Dostępne cyfry parzyste: $\\{0, 2, 4, 6, 8\\}$",
        "explanation": "Mamy 5 cyfr parzystych do wyboru dla pozycji c, d, e",
        "interactive_choice": {
          "prompt": "Które cyfry parzyste są dostępne przy warunku braku cyfry 9?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry: 0, 2, 4, 6, 8",
              "feedback": "Dokładnie! To wszystkie cyfry parzyste oprócz niedostępnej cyfry 9 (która i tak nie jest parzysta).",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Cyfry: 2, 4, 6, 8",
              "feedback": "Zapomniałeś o cyfrze 0, która też jest parzysta i może wystąpić na pozycjach c, d, e.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Cyfry: 0, 2, 4, 6",
              "feedback": "Brakuje cyfry 8 - ona też jest parzysta i dostępna (warunek (4) eliminuje tylko cyfrę 9).",
              "is_correct": false
            }
          ],
          "explanation_after": "Cyfry parzyste to: 0, 2, 4, 6, 8. Warunek (4) eliminuje tylko cyfrę 9, która nie jest parzysta."
        }
      },
      {
        "step": 4,
        "hint": "Jakie ograniczenia mają cyfry a i b?",
        "expression": "Cyfra $a \\in \\{1, 2, 3, 4, 5, 6, 7, 8\\}$ (bez 0 i 9), cyfra $b \\in \\{0, 1, 2, 3, 4, 5, 6, 7, 8\\}$ (bez 9)",
        "explanation": "Pierwsza cyfra nie może być 0, obie nie mogą być 9"
      },
      {
        "step": 5,
        "hint": "Jak podejść do warunków uporządkowania $c > d > e$?",
        "expression": "Liczba sposobów wyboru $(c,d,e)$: $\\binom{5}{3} = 10$",
        "explanation": "Wybieramy 3 cyfry z 5 parzystych i układamy malejąco",
        "why": "Warunki $c > d > e$ oznaczają, że cyfry muszą być różne i w określonym porządku. To klasyczna kombinacja.",
        "interactive_choice": {
          "prompt": "Jak najlepiej zliczyć trójki $(c,d,e)$ spełniające $c > d > e$ z cyfr parzystych?",
          "options": [
            {
              "id": "A",
              "text": "Wybrać 3 różne cyfry parzyste i uporządkować malejąco",
              "feedback": "Świetnie! To jest kombinacja - wybieramy 3 z 5 cyfr, a porządek jest już ustalony.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie permutacje i wybrać te z właściwym porządkiem",
              "feedback": "Niepotrzebnie skomplikowane - lepiej od razu wybrać kombinację.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć każdą cyfrę c osobno i liczyć możliwości dla d i e",
              "feedback": "Możliwe, ale dłuższe - kombinacja jest elegantniejsza.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybór 3 różnych cyfr z 5 automatycznie daje jedną możliwość uporządkowania malejącego."
        }
      },
      {
        "step": 6,
        "hint": "Ile sposobów wyboru cyfry a?",
        "expression": "Cyfra $a$: 8 możliwości",
        "explanation": "Cyfra dziesiątek tysięcy może być dowolną z 8 dostępnych cyfr"
      },
      {
        "step": 7,
        "hint": "Ile sposobów wyboru cyfry b?",
        "expression": "Cyfra $b$: 9 możliwości",
        "explanation": "Cyfra tysięcy może być dowolną z 9 dostępnych cyfr (włącznie z 0)"
      },
      {
        "step": 8,
        "hint": "Czy wybory cyfr są niezależne?",
        "expression": "Całkowita liczba: $8 \\times 9 \\times 10 = 720$",
        "explanation": "Stosujemy regułę iloczynu dla niezależnych wyborów",
        "interactive_choice": {
          "prompt": "Czy możemy zastosować regułę iloczynu do zliczenia wszystkich liczb?",
          "options": [
            {
              "id": "A",
              "text": "Tak, bo wybory cyfr a, b i trójki (c,d,e) są niezależne",
              "feedback": "Dokładnie! Cyfry a i b nie mają ograniczeń względem c, d, e.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Nie, bo cyfry mogą się powtarzać",
              "feedback": "Mylisz się - cyfry a, b mogą się powtarzać z c, d, e, ale to nie przeszkadza w zastosowaniu reguły iloczynu.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Nie, bo warunki są zbyt skomplikowane",
              "feedback": "Warunki dotyczą tylko określonych pozycji, więc można zastosować regułę iloczynu.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybory są niezależne: cyfry a,b nie mają ograniczeń względem siebie ani względem c,d,e."
        }
      }
    ],
    "solutions": [
      "720"
    ],
    "parameters": {
      "conditions": [
        "cyfry c, d, e parzyste",
        "c > d > e",
        "brak cyfry 9",
        "liczba pięciocyfrowa"
      ]
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:34:48.396Z"
  },
  {
    "id": "four_digit_numbers_constraint",
    "topic": "Kombinatoryka - liczby z ograniczeniami",
    "difficulty": 3,
    "statement": "Oblicz, ile jest liczb naturalnych czterocyfrowych, w których cyfra jedności jest o 3 większa od cyfry setek",
    "steps": [
      {
        "step": 1,
        "hint": "Jak oznaczyć cyfrę setek i jedności w liczbie czterocyfrowej?",
        "expression": "Liczba czterocyfrowa: $\\overline{abcd}$, gdzie $a$ - tysiące, $b$ - setki, $c$ - dziesiątki, $d$ - jedności",
        "explanation": "Ustalamy oznaczenia dla cyfr w liczbie czterocyfrowej"
      },
      {
        "step": 2,
        "hint": "Jak zapisać warunek że cyfra jedności jest o 3 większa od cyfry setek?",
        "expression": "$d = b + 3$",
        "explanation": "Zapisujemy warunek algebraicznie",
        "why": "To kluczowe ograniczenie - cyfra jedności musi być dokładnie o 3 większa od cyfry setek"
      },
      {
        "step": 3,
        "hint": "Jakie są ograniczenia dla cyfr w liczbie czterocyfrowej?",
        "expression": "$a \\in \\{1,2,3,4,5,6,7,8,9\\}$, $b,c,d \\in \\{0,1,2,3,4,5,6,7,8,9\\}$",
        "explanation": "Ustalamy dziedziny dla wszystkich cyfr",
        "interactive_choice": {
          "prompt": "Jakie warunki muszą spełniać cyfry w liczbie czterocyfrowej $\\overline{abcd}$?",
          "options": [
            {
              "id": "A",
              "text": "$a \\in \\{1,2,...,9\\}$, $b,c,d \\in \\{0,1,...,9\\}$",
              "feedback": "Dokładnie! Pierwsza cyfra nie może być 0, pozostałe mogą.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie cyfry $a,b,c,d \\in \\{1,2,...,9\\}$",
              "feedback": "Nie - cyfry setek, dziesiątek i jedności mogą być zerem.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie cyfry $a,b,c,d \\in \\{0,1,...,9\\}$",
              "feedback": "Nie - pierwsza cyfra nie może być 0, bo wtedy liczba nie byłaby czterocyfrowa.",
              "is_correct": false
            }
          ],
          "explanation_after": "W liczbie czterocyfrowej pierwsza cyfra musi być różna od zera, pozostałe mogą być dowolne."
        }
      },
      {
        "step": 4,
        "hint": "Jakie wartości może przyjąć cyfra setek $b$, jeśli $d = b + 3$ i $d \\leq 9$?",
        "expression": "$b + 3 \\leq 9$, więc $b \\leq 6$",
        "explanation": "Z warunku $d = b + 3$ i faktu że $d$ musi być cyfrą"
      },
      {
        "step": 5,
        "hint": "Ile możliwych wartości ma cyfra setek $b$?",
        "expression": "$b \\in \\{0,1,2,3,4,5,6\\}$ - czyli 7 możliwości",
        "explanation": "Cyfra setek może przyjąć 7 różnych wartości"
      },
      {
        "step": 6,
        "hint": "Jak policzyć liczbę możliwości dla każdej cyfry osobno?",
        "expression": "Niezależne wybory: $a$ (9 możliwości), $b$ (7 możliwości), $c$ (10 możliwości)",
        "explanation": "Identyfikujemy niezależne wybory cyfr",
        "interactive_choice": {
          "prompt": "Które cyfry możemy wybierać niezależnie od siebie?",
          "options": [
            {
              "id": "A",
              "text": "Tylko $a$ i $c$ - pozostałe są związane warunkiem",
              "feedback": "Świetnie! Gdy wybierzemy $b$, to $d$ jest już ustalone. Cyfry $a$ i $c$ są niezależne.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Wszystkie cyfry $a$, $b$, $c$, $d$ niezależnie",
              "feedback": "Nie - cyfry $b$ i $d$ są związane warunkiem $d = b + 3$.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko $a$ - pozostałe są ograniczone",
              "feedback": "Nie całkiem - cyfra $c$ (dziesiątki) może być dowolna.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy ustalimy $b$, automatycznie mamy $d = b + 3$. Cyfry $a$ i $c$ wybieramy swobodnie."
        }
      },
      {
        "step": 7,
        "hint": "Jak obliczyć całkowitą liczbę możliwości?",
        "expression": "$9 \\times 7 \\times 10 = 630$",
        "explanation": "Stosujemy regułę iloczynu dla niezależnych wyborów",
        "interactive_choice": {
          "prompt": "Jaką regułę zastosować do policzenia wszystkich możliwości?",
          "options": [
            {
              "id": "A",
              "text": "Regułę sumy: $9 + 7 + 10 = 26$",
              "feedback": "Nie - to byłoby gdyby wybory się wykluczały. Tu każda kombinacja jest możliwa.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Regułę iloczynu: $9 \\times 7 \\times 10 = 630$",
              "feedback": "Dokładnie! Każdy wybór cyfry $a$ można połączyć z każdym wyborem $b$ i $c$.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Wzór na permutacje: $\\frac{9!}{(9-3)!} = 504$",
              "feedback": "Nie - to nie jest problem permutacji, tylko niezależnych wyborów.",
              "is_correct": false
            }
          ],
          "explanation_after": "Gdy wybory są niezależne, używamy reguły iloczynu - mnożymy liczby możliwości."
        }
      },
      {
        "step": 8,
        "hint": "Jaka jest ostateczna odpowiedź?",
        "expression": "Liczba czterocyfrowych liczb naturalnych = 630",
        "explanation": "Otrzymujemy wynik końcowy"
      }
    ],
    "solutions": [
      "630"
    ],
    "parameters": {
      "constraint": "$d = b + 3$",
      "number_type": "czterocyfrowe liczby naturalne"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 8,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:35:18.159Z"
  },
  {
    "id": "five_digit_counting_problem",
    "topic": "Kombinatoryka - zliczanie z warunkami",
    "difficulty": 4,
    "statement": "Oblicz, ile jest liczb naturalnych pięciocyfrowych, w zapisie których nie występuje zero, jest dokładnie jedna cyfra 7 i dokładnie jedna cyfra parzysta.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry możemy użyć w liczbie pięciocyfrowej bez zera?",
        "expression": "Dostępne cyfry: $\\{1, 2, 3, 4, 5, 6, 7, 8, 9\\}$",
        "explanation": "Mamy 9 cyfr do dyspozycji, wykluczając zero"
      },
      {
        "step": 2,
        "hint": "Które z dostępnych cyfr są parzyste?",
        "expression": "Cyfry parzyste: $\\{2, 4, 6, 8\\}$ - razem 4 cyfry",
        "explanation": "Identyfikujemy cyfry parzyste spośród dostępnych"
      },
      {
        "step": 3,
        "hint": "Jak podejść do tego problemu zliczania z wieloma warunkami?",
        "expression": "Strategia: wybieramy pozycje dla 7 i cyfry parzystej, potem uzupełniamy",
        "explanation": "Dzielimy problem na etapy: pozycje → cyfry → pozostałe miejsca",
        "interactive_choice": {
          "prompt": "Którą strategię zastosować do zliczenia liczb z dokładnie jedną cyfrą 7 i jedną parzystą?",
          "options": [
            {
              "id": "A",
              "text": "Najpierw wybrać pozycje dla cyfr 7 i parzystej, potem uzupełnić resztę",
              "feedback": "Świetny wybór! To systematyczne podejście - wybieramy pozycje, potem cyfry.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Policzyć wszystkie możliwości i odjąć niepożądane przypadki",
              "feedback": "Możliwe, ale bardzo skomplikowane - łatwo o błąd przy tylu warunkach.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Rozpatrzyć każdą pozycję cyfry 7 osobno",
              "feedback": "Częściowo dobre, ale nie uwzględnia systematycznie cyfry parzystej.",
              "is_correct": false
            }
          ],
          "explanation_after": "Wybór pozycji, potem cyfr to najczystsze podejście - unikamy pomyłek."
        }
      },
      {
        "step": 4,
        "hint": "Na ile sposobów można wybrać pozycje dla cyfry 7 i cyfry parzystej?",
        "expression": "Pozycji dla cyfry 7: $\\binom{5}{1} = 5$ sposobów",
        "explanation": "Cyfra 7 może być na dowolnej z 5 pozycji"
      },
      {
        "step": 5,
        "hint": "Po wyborze pozycji dla cyfry 7, ile zostaje pozycji dla cyfry parzystej?",
        "expression": "Pozycji dla cyfry parzystej: $\\binom{4}{1} = 4$ sposoby",
        "explanation": "Po umieszczeniu cyfry 7 zostają 4 pozycje dla cyfry parzystej"
      },
      {
        "step": 6,
        "hint": "Ile sposobów wyboru pozycji dają nam razem te dwa kroki?",
        "expression": "Łącznie pozycji: $5 \\times 4 = 20$ sposobów",
        "explanation": "Mnożymy liczbę sposobów wyboru pozycji dla każdej specjalnej cyfry",
        "why": "To zasada mnożenia - dla każdej pozycji cyfry 7 mamy 4 wybory pozycji dla cyfry parzystej."
      },
      {
        "step": 7,
        "hint": "Ile mamy do wyboru cyfr parzystych?",
        "expression": "Cyfr parzystych: 4 możliwości $\\{2, 4, 6, 8\\}$",
        "explanation": "Wybieramy konkretną cyfrę parzystą spośród dostępnych"
      },
      {
        "step": 8,
        "hint": "Jakimi cyframi możemy wypełnić pozostałe 3 pozycje?",
        "expression": "Dostępnych cyfr na pozostałe pozycje: $9 - 2 = 7$",
        "explanation": "Wykluczamy cyfrę 7 i jedną użytą cyfrę parzystą",
        "interactive_choice": {
          "prompt": "Które cyfry możemy użyć na pozostałych 3 pozycjach?",
          "options": [
            {
              "id": "A",
              "text": "Wszystkie cyfry oprócz 0, 7 i wybranej cyfry parzystej",
              "feedback": "Dokładnie! Zostaje nam 7 cyfr: 5 nieparzystych + 3 parzyste.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Tylko cyfry nieparzyste oprócz 7",
              "feedback": "Nie - możemy użyć pozostałych cyfr parzystych (3 z 4).",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Wszystkie cyfry oprócz 0 i 7",
              "feedback": "Nie - musimy wykluczyć też już użytą cyfrę parzystą.",
              "is_correct": false
            }
          ],
          "explanation_after": "Po użyciu cyfry 7 i jednej parzystej zostaje 7 cyfr: $\\{1,3,5,9\\}$ + 3 pozostałe parzyste."
        }
      },
      {
        "step": 9,
        "hint": "Na ile sposobów można wypełnić pozostałe 3 pozycje?",
        "expression": "Sposobów wypełnienia 3 pozycji: $7^3 = 343$",
        "explanation": "Na każdej z 3 pozycji mamy 7 możliwych cyfr",
        "why": "Cyfry mogą się powtarzać na różnych pozycjach, więc to wariacje z powtórzeniami."
      },
      {
        "step": 10,
        "hint": "Jak połączyć wszystkie obliczone elementy?",
        "expression": "Wynik: $20 \\times 4 \\times 343 = 27440$",
        "explanation": "Mnożymy: sposoby wyboru pozycji × cyfry parzyste × wypełnienie reszty",
        "interactive_choice": {
          "prompt": "Jak obliczyć końcowy wynik łącząc wszystkie elementy?",
          "options": [
            {
              "id": "A",
              "text": "Pozycje × cyfry parzyste × wypełnienie: $20 \\times 4 \\times 343$",
              "feedback": "Perfekcyjnie! Mnożymy wszystkie niezależne wybory.",
              "is_correct": true
            },
            {
              "id": "B",
              "text": "Dodać: pozycje + cyfry parzyste + wypełnienie",
              "feedback": "Nie - to niezależne wybory, więc mnożymy, nie dodajemy.",
              "is_correct": false
            },
            {
              "id": "C",
              "text": "Tylko pozycje × wypełnienie: $20 \\times 343$",
              "feedback": "Zapomniałeś o wyborze konkretnej cyfry parzystej!",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: każdy niezależny wybór mnoży liczbę możliwości."
        }
      }
    ],
    "solutions": [
      "$27440$"
    ],
    "parameters": {
      "constraints": "pięciocyfrowe, bez zera, dokładnie jedna cyfra 7, dokładnie jedna cyfra parzysta"
    },
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 10,
        "stepsWithWhy": 2,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:35:53.579Z"
  },
  {
    "id": "four_digit_even_odd",
    "topic": "Kombinatoryka - zasada mnożenia",
    "difficulty": 3,
    "statement": "Oblicz, ile jest liczb naturalnych czterocyfrowych, w których zapisie pierwsza cyfra jest parzysta, a pozostałe nieparzyste.",
    "steps": [
      {
        "step": 1,
        "hint": "Jakie cyfry mogą stać na pierwszej pozycji w liczbie czterocyfrowej?",
        "expression": "Pierwsza cyfra: $\\{2, 4, 6, 8\\}$ - mamy 4 możliwości",
        "explanation": "Cyfra parzysta różna od zera na pierwszej pozycji",
        "interactive_choice": {
          "prompt": "Które cyfry parzyste mogą być pierwszą cyfrą liczby czterocyfrowej?",
          "options": [
            {
              "id": "A",
              "text": "Cyfry: 0, 2, 4, 6, 8",
              "feedback": "Nie! Zero nie może być pierwszą cyfrą - liczba nie byłaby czterocyfrowa.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Cyfry: 2, 4, 6, 8",
              "feedback": "Dokładnie! Pierwsza cyfra musi być różna od zera i parzysta.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Cyfry: 1, 3, 5, 7, 9",
              "feedback": "To są cyfry nieparzyste, a potrzebujemy parzystych na pierwszej pozycji.",
              "is_correct": false
            }
          ],
          "explanation_after": "Pierwsza cyfra liczby czterocyfrowej nie może być zerem, więc mamy 4 możliwości: 2, 4, 6, 8."
        }
      },
      {
        "step": 2,
        "hint": "Które cyfry mogą stać na pozostałych trzech pozycjach?",
        "expression": "Cyfry nieparzyste: $\\{1, 3, 5, 7, 9\\}$ - mamy 5 możliwości na każdej pozycji",
        "explanation": "Na pozycjach 2, 3 i 4 mogą stać tylko cyfry nieparzyste"
      },
      {
        "step": 3,
        "hint": "Czy cyfry mogą się powtarzać w tej liczbie?",
        "expression": "Cyfry mogą się powtarzać - każda pozycja wybierana niezależnie",
        "explanation": "Nie ma ograniczeń na powtarzanie cyfr",
        "interactive_choice": {
          "prompt": "Czy w zadaniu są ograniczenia dotyczące powtarzania cyfr?",
          "options": [
            {
              "id": "A",
              "text": "Tak, wszystkie cyfry muszą być różne",
              "feedback": "Nie ma takiego wymagania w treści zadania.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Nie, cyfry mogą się powtarzać",
              "feedback": "Zgadza się! Zadanie nie zabrania powtarzania cyfr.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Tylko cyfry nieparzyste mogą się powtarzać",
              "feedback": "Zadanie nie wprowadza takich ograniczeń.",
              "is_correct": false
            }
          ],
          "explanation_after": "Brak ograniczeń oznacza, że cyfry mogą się powtarzać - każda pozycja jest niezależna."
        }
      },
      {
        "step": 4,
        "hint": "Którą metodę zastosować do policzenia wszystkich możliwości?",
        "expression": "Liczba możliwości = $4 \\times 5 \\times 5 \\times 5$",
        "explanation": "Stosujemy zasadę mnożenia dla niezależnych wyborów",
        "why": "Zasada mnożenia: jeśli pierwszy wybór można wykonać na $a$ sposobów, drugi na $b$ sposobów itd., to wszystkich kombinacji jest $a \\times b \\times c \\times d$.",
        "interactive_choice": {
          "prompt": "Jak obliczyć liczbę wszystkich czterocyfrowych liczb spełniających warunki?",
          "options": [
            {
              "id": "A",
              "text": "Dodać liczby możliwości: 4 + 5 + 5 + 5",
              "feedback": "Nie - dodawanie używamy gdy mamy alternatywy, tu mamy kolejne wybory.",
              "is_correct": false
            },
            {
              "id": "B",
              "text": "Pomnożyć liczby możliwości: 4 × 5 × 5 × 5",
              "feedback": "Dokładnie! Zasada mnożenia - każdy wybór jest niezależny.",
              "is_correct": true
            },
            {
              "id": "C",
              "text": "Użyć wzoru na permutacje",
              "feedback": "Permutacje to gdy cyfry nie mogą się powtarzać - tu mogą.",
              "is_correct": false
            }
          ],
          "explanation_after": "Zasada mnożenia: gdy mamy kolejne niezależne wybory, mnożymy liczby możliwości."
        }
      },
      {
        "step": 5,
        "hint": "Ile wynosi $4 \\times 5^3$?",
        "expression": "$4 \\times 5^3 = 4 \\times 125 = 500$",
        "explanation": "Obliczamy końcowy wynik"
      }
    ],
    "solutions": [
      "500"
    ],
    "validation": {
      "isValid": true,
      "missingFields": [],
      "warnings": [],
      "stats": {
        "totalSteps": 5,
        "stepsWithWhy": 1,
        "stepsWithChoice": 3,
        "totalOptions": 9,
        "correctOptions": 3
      }
    },
    "timestamp": "2025-09-17T07:36:16.803Z"
  }
]

